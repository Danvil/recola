{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"en",
				"entities"
			],
			[
				"lin",
				"line_strips"
			],
			[
				"Co",
				"ColorRgba8"
			],
			[
				"orth",
				"ortho_normal_basis_z"
			],
			[
				"slee",
				"sleep_duration"
			],
			[
				"Tr",
				"TransformUniformGroup"
			],
			[
				"Moc",
				"MoccaRunner"
			],
			[
				"sim",
				"sim_worker_handle"
			],
			[
				"Buff",
				"BufferCommand"
			],
			[
				"Gpu",
				"GpuBufferMoccal"
			],
			[
				"W",
				"WgpuRes"
			],
			[
				"Uns",
				"UnsafeAnyCell"
			],
			[
				"run",
				"run_thread"
			],
			[
				"Bu",
				"BufferCommand"
			],
			[
				"M",
				"MoccaRunner"
			],
			[
				"Sim",
				"SimulationWorker"
			],
			[
				"even",
				"event_loop"
			],
			[
				"Win",
				"WindowStore"
			],
			[
				"Buf",
				"BufferId"
			],
			[
				"it",
				"items"
			],
			[
				"Buffer",
				"BufferCommandQueueItem"
			],
			[
				"win",
				"win_id"
			],
			[
				"ren",
				"renderer_rpass"
			],
			[
				"buf",
				"buf_id"
			],
			[
				"SIn",
				"SingletonMut"
			],
			[
				"tran",
				"transform_buf"
			],
			[
				"cam",
				"camera_buf"
			],
			[
				"TR",
				"TransformBufferGpu"
			],
			[
				"qu",
				"queue_render_items"
			],
			[
				"vbu",
				"vbuf_entity"
			],
			[
				"C",
				"CandyExampleCubeMocca"
			],
			[
				"m",
				"mocca_runner"
			],
			[
				"Run",
				"RuntimeApp"
			],
			[
				"eve",
				"event_loop"
			],
			[
				"BloodVess",
				"BloodVesselPrefab"
			],
			[
				"Bl",
				"BloodConfig"
			],
			[
				"Heart",
				"HeartRateBpm"
			],
			[
				"Hear",
				"HeartRateBpm"
			],
			[
				"H",
				"HeartPumpVolume"
			],
			[
				"lun",
				"lung_1"
			],
			[
				"ene",
				"entity_named"
			],
			[
				"En",
				"EntityView"
			],
			[
				"blu",
				"blue_in"
			],
			[
				"rou",
				"red_out"
			],
			[
				"hear",
				"heart_chamber_fn"
			],
			[
				"defau",
				"default_chunk"
			],
			[
				"ho",
				"hemoglobin_saturation"
			],
			[
				"hom",
				"hemoglobin_concentration"
			],
			[
				"Blo",
				"BloodChunk"
			],
			[
				"He",
				"HeartRate"
			],
			[
				"Hea",
				"HeartState"
			],
			[
				"vol",
				"volume"
			],
			[
				"Bloo",
				"BloodChunk"
			],
			[
				"wa",
				"wall_thickness"
			],
			[
				"pre",
				"pressure"
			],
			[
				"nom",
				"nominal_volume"
			],
			[
				"BloodVe",
				"BloodVesselStats"
			],
			[
				"le",
				"length"
			],
			[
				"no",
				"nominal_count"
			],
			[
				"part",
				"part_vessel"
			],
			[
				"in",
				"inflow_alloc"
			],
			[
				"war",
				"warmup_request"
			],
			[
				"sum",
				"sum_debt"
			],
			[
				"with",
				"with_round_op_threshold"
			],
			[
				"ass",
				"assert_eq\tassert_eq!(…, …)"
			],
			[
				"c",
				"capacity"
			],
			[
				"d",
				"demand"
			],
			[
				"Fai",
				"FairAlloc"
			],
			[
				"Fa",
				"FairAlloc"
			],
			[
				"trans",
				"transfer_count"
			],
			[
				"Vess",
				"VesselToHeart"
			],
			[
				"Lung",
				"LungOxygenAbsorption"
			],
			[
				"Mod",
				"ModifierKind"
			],
			[
				"Modif",
				"ModifierBase"
			],
			[
				"Ori",
				"OrganEfficiencyMod"
			],
			[
				"Cu",
				"CurrentBloodOxygen"
			],
			[
				"ciri",
				"critical_blood_oxygen_organ_eff_range"
			],
			[
				"res",
				"rescale_01"
			],
			[
				"De",
				"DecimalRange"
			],
			[
				"Dec",
				"Decimal"
			],
			[
				"Bre",
				"BreathingSettings"
			],
			[
				"Cur",
				"CurrentBloodOxygen"
			],
			[
				"s",
				"system"
			],
			[
				"Mo",
				"Modifier"
			],
			[
				"sec",
				"sec_sub"
			],
			[
				"S",
				"SECONDARY_TO_PRIMARY_SATIATION_CONVERSION_RATE"
			],
			[
				"primsub",
				"prim_sub_actual"
			],
			[
				"pr",
				"primary"
			],
			[
				"prim",
				"prim_sub_max"
			],
			[
				"inv",
				"inventory_item_command"
			],
			[
				"In",
				"InventoryItemCommands"
			],
			[
				"Vie",
				"ViewKind"
			],
			[
				"sele",
				"selection"
			],
			[
				"se",
				"selection_index"
			],
			[
				"sor",
				"sorting_criteria_cycle"
			],
			[
				"Inve",
				"InventorySortingCriteria"
			],
			[
				"Dire",
				"Direction1"
			],
			[
				"ta",
				"table_state"
			],
			[
				"Inv",
				"InventoryView"
			],
			[
				"sort",
				"sort_by"
			],
			[
				"play",
				"player_entity"
			],
			[
				"tabl",
				"table_state"
			],
			[
				"set_",
				"set_second"
			],
			[
				"pl",
				"player_inventory"
			],
			[
				"oxy",
				"oxygen_absorption_mod"
			],
			[
				"po",
				"pollution_absorption"
			],
			[
				"jac",
				"jack_inv"
			],
			[
				"Consu",
				"ConsumeOp"
			],
			[
				"Cont",
				"ContainedBy"
			],
			[
				"Con",
				"ContainedBy"
			],
			[
				"main",
				"main_impl"
			],
			[
				"Wor",
				"WorldApi"
			],
			[
				"spin",
				"spin_threshold"
			],
			[
				"sl",
				"sleep_time"
			],
			[
				"ste",
				"steam_client"
			],
			[
				"thr",
				"throttle"
			],
			[
				"co",
				"connection_time"
			],
			[
				"steam",
				"steam_id"
			],
			[
				"stea",
				"steam_server"
			],
			[
				"Gam",
				"GameServerMessage"
			],
			[
				"Auth",
				"AuthConnectionStatus"
			],
			[
				"thre",
				"thread_1"
			],
			[
				"re",
				"requests"
			],
			[
				"Log",
				"LoginServerConfig"
			],
			[
				"Conn",
				"ConnectionStatus"
			],
			[
				"conn",
				"connections"
			],
			[
				"Cli",
				"ClientRequest"
			],
			[
				"hand",
				"handle_request"
			]
		]
	},
	"buffers":
	[
		{
			"file": "/I/Ikabur/candy/crates/candy/src/renderer/bind_group.rs",
			"settings":
			{
				"buffer_size": 3428,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
			]
		},
		{
			"file": "/I/Ikabur/atom/crates/excess/src/world.rs",
			"settings":
			{
				"buffer_size": 7322,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					29,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACTIAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6Ontib3Jyb3c6OkNvdywgY29sbGVjdGlvbnM6Okhhc2hTZXR9OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgJnNlbGYuYnJpZGdlLmZhYnJpYygpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGZhYnJpY19tdXQoJm11dCBzZWxmKSAtPiAmbXV0IEIgewogICAgICAgICZtdXQgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX3JlZigpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b25fbXV0PEM6IFNpbmdsZXRvbk1hcmtlcj4oJm11dCBzZWxmKSAtPiBPcHRpb248Jm11dCBDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX211dCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbjxDOiBTaW5nbGV0b25NYXJrZXI+KCZzZWxmKSAtPiAmQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uKCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+ICZtdXQgQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uX211dCgpCiAgICAgICAgICAgIC5va19vcl9lbHNlKHx8IGZvcm1hdCEoInNpbmdsZXRvbiAne30nIG11c3QgZXhpc3QiLCBzdGQ6OmFueTo6dHlwZV9uYW1lOjo8Qz4oKSkpCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggZ2l2ZW4gY29tcG9uZW50cwogICAgcHViIGZuIHNwYXduPEE6IEVudGl0eVNldENvbXBvbmVudHNUdXBsZTxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHkoKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICBwdWIoY3JhdGUpIGZuIHNwYXduX3dpdGhfaWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgaWQ6IEVudGl0eSwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHlfd2l0aF9pZChpZCk7CiAgICAgICAgYXJnLmVudGl0eV9zZXRfY29tcG9uZW50c190dXBsZV9hcHBseSgmbXV0IG91dCk7CiAgICAgICAgb3V0CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fbmFtZWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PiwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd24oYXJnKTsKICAgICAgICBvdXQuc2V0X25hbWUobmFtZSk7CiAgICAgICAgb3V0CiAgICB9CgogICAgLy8vIENyZWF0ZXMgYSBuZXcgZW1wdHkgZW50aXR5CiAgICBwdWIgZm4gc3Bhd25fZW1wdHkoJm11dCBzZWxmKSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IGlubmVyID0gc2VsZi5icmlkZ2UuaW1wbF9zcGF3bl9uZXcoKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmltcGxfc3Bhd25fd2l0aF9pZChpZCk7CiAgICAgICAgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfQogICAgfQoKICAgICNbY2ZnKGZlYXR1cmUgPSAiZXh0X2VudGl0eV9uYW1lcyIpXQogICAgcHViIGZuIHNwYXduX2VtcHR5X25hbWVkKCZtdXQgc2VsZiwgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PikgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhbiBlbnRpdHkgZnJvbSB0aGUgd29ybGQKICAgIHB1YiBmbiBkZXNwYXduKCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIHsKICAgICAgICBpZiBsZXQgU29tZShsb2MpID0gc2VsZi5icmlkZ2UuaW1wbF9sb2NhdGVfZW50aXR5KGVudGl0eSkgewogICAgICAgICAgICBzZWxmLmJyaWRnZS5pbXBsX2Rlc3Bhd24obG9jKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIENsb25lcyBhbiBlbnRpdHkgYW5kIGFsbCBpdCdzIGNvbXBvbmVudHMuCiAgICBwdWIgZm4gY2xvbmVfZW50aXR5KCZtdXQgc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmNsb25lX2VudGl0eV9hdXgoZWlkLCBFbnRpdHlDbG9uZUZsYWdzOjpub25fcmVjdXJzaXZlX2lnbm9yZV9ub25fY2xvbmUoKSkKICAgICAgICAgICAgLy8gU0FGRVRZOiBub24tcmVjdXJzaXZlLCBpZ25vcmUtbm9uLWNsb25lIG5ldmVyIGZhaWxzCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eV9hdXgoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIGVpZDogRW50aXR5LAogICAgICAgIGZsYWdzOiBFbnRpdHlDbG9uZUZsYWdzLAogICAgKSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBsZXQgZWlkID0gc2VsZi5icmlkZ2UuZW50aXR5X2Nsb25lKGVpZCwgZmxhZ3MpPzsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZWlkKQogICAgfQoKICAgIC8vLyBDaGVja3MgaWYgYW4gZW50aXR5IHdpdGggdGhpcyBJRCBleGlzdHMKICAgIHB1YiBmbiBleGlzdHMoJnNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBib29sIHsKICAgICAgICBzZWxmLmJyaWRnZS5lbnRpdHlfdHJ5X2dldChlbnRpdHkpLmlzX3NvbWUoKQogICAgfQoKICAgIC8vIC8vLyBTaW1pbGFyIHRvIGBnZXRgIGJ1dCByZXR1cm5zIE5vbmUgaWYgdGhlIGVudGl0eSBkb2VzIG5vdCBleGlzdAogICAgLy8gLy8gVE9ETyByZW5hbWUgdG8gZ2V0X2VudGl0eV9tdXQKICAgIC8vIHB1YiBmbiB0cnlfZ2V0KCZzZWxmLCBlaWQ6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eU11dDxCPj4gewogICAgLy8gICAgIHNlbGYuYnJpZGdlLmVudGl0eV90cnlfZ2V0KGVpZCkubWFwKHxpbm5lcnwgRW50aXR5TXV0IHsKICAgIC8vICAgICAgICAgY2VsbDogVW5zYWZlRW50aXR5Q2VsbCBzZWxmLmludG8oKSwKICAgIC8vICAgICAgICAgaW5uZXIsCiAgICAvLyAgICAgfSkKICAgIC8vIH0KCiAgICAvLyAvLy8gR2V0IG11dGFibGUgYWNjZXNzIHRvIGFuIGVudGl0eQogICAgLy8gLy8gVE9ETyByZW5hbWUgdG8gZW50aXR5X211dCwgcmV0dXJuIHR5cGUgRW50aXR5V29ybGRNdXQKICAgIC8vIHB1YiBmbiBnZXQoJnNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlNdXQ8Qj4gewogICAgLy8gICAgIHNlbGYudHJ5X2dldChlaWQpLmV4cGVjdCgiZW50aXR5IG11c3QgZXhpc3QiKQogICAgLy8gfQoKICAgIC8vIC8vIFRPRE8gRGVjaWRlIG9uIEFQSSB0byBnZXQgYW4gRW50aXR5IGZyb20gaXQncyBJRAogICAgLy8gLy8gICBnZXQgLyB0cnlfZ2V0CiAgICAvLyAvLyAgIGdldF9lbnRpdHkgLyB0cnlfZ2V0X2VudGl0eQogICAgLy8gLy8gICBlbnRpdHlfZnJvbV9pZCAvIHRyeV9lbnRpdHlfZnJvbV9pZCg/KQogICAgLy8gLy8gICBlbnRpdHkgLyBmaW5kX2VudGl0eSg/KQogICAgLy8gcHViIGZuIGVudGl0eV9mcm9tX2lkKCZzZWxmLCBlaWQ6IEVudGl0eSkgLT4gRW50aXR5TXV0PEI+IHsKICAgIC8vICAgICBzZWxmLmdldChlaWQpCiAgICAvLyB9CgogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eV90cnlfZ2V0KGVudGl0eSkKICAgICAgICAgICAgLm1hcCh8aW5uZXJ8IHVuc2FmZSB7IEVudGl0eVdvcmxkTXV0OjpuZXcoc2VsZiwgaW5uZXIpIH0pCiAgICB9CgogICAgLy8gcHViKGNyYXRlKSB1bnNhZmUgZm4gdW5zYWZlX2VudGl0eV9jZWxsKAogICAgLy8gICAgICZzZWxmLAogICAgLy8gICAgIGVudGl0eTogRW50aXR5LAogICAgLy8gKSAtPiBPcHRpb248VW5zYWZlRW50aXR5Q2VsbDwnXywgQj4+IHsKICAgIC8vICAgICBzZWxmLmJyaWRnZQogICAgLy8gICAgICAgICAuZW50aXR5X3RyeV9nZXQoZW50aXR5KQogICAgLy8gICAgICAgICAubWFwKHxjYWNoZXwgVW5zYWZlRW50aXR5Q2VsbDo6ZnJvbV9jYWNoZShzZWxmLmludG8oKSwgY2FjaGUpKQogICAgLy8gfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KfQoAAAAAAAAAAJMgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					30,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACTIAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6Ontib3Jyb3c6OkNvdywgY29sbGVjdGlvbnM6Okhhc2hTZXR9OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgJnNlbGYuYnJpZGdlLmZhYnJpYygpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGZhYnJpY19tdXQoJm11dCBzZWxmKSAtPiAmbXV0IEIgewogICAgICAgICZtdXQgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX3JlZigpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b25fbXV0PEM6IFNpbmdsZXRvbk1hcmtlcj4oJm11dCBzZWxmKSAtPiBPcHRpb248Jm11dCBDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX211dCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbjxDOiBTaW5nbGV0b25NYXJrZXI+KCZzZWxmKSAtPiAmQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uKCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+ICZtdXQgQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uX211dCgpCiAgICAgICAgICAgIC5va19vcl9lbHNlKHx8IGZvcm1hdCEoInNpbmdsZXRvbiAne30nIG11c3QgZXhpc3QiLCBzdGQ6OmFueTo6dHlwZV9uYW1lOjo8Qz4oKSkpCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggZ2l2ZW4gY29tcG9uZW50cwogICAgcHViIGZuIHNwYXduPEE6IEVudGl0eVNldENvbXBvbmVudHNUdXBsZTxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHkoKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICBwdWIoY3JhdGUpIGZuIHNwYXduX3dpdGhfaWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgaWQ6IEVudGl0eSwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHlfd2l0aF9pZChpZCk7CiAgICAgICAgYXJnLmVudGl0eV9zZXRfY29tcG9uZW50c190dXBsZV9hcHBseSgmbXV0IG91dCk7CiAgICAgICAgb3V0CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fbmFtZWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PiwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd24oYXJnKTsKICAgICAgICBvdXQuc2V0X25hbWUobmFtZSk7CiAgICAgICAgb3V0CiAgICB9CgogICAgLy8vIENyZWF0ZXMgYSBuZXcgZW1wdHkgZW50aXR5CiAgICBwdWIgZm4gc3Bhd25fZW1wdHkoJm11dCBzZWxmKSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IGlubmVyID0gc2VsZi5icmlkZ2UuaW1wbF9zcGF3bl9uZXcoKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmltcGxfc3Bhd25fd2l0aF9pZChpZCk7CiAgICAgICAgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfQogICAgfQoKICAgICNbY2ZnKGZlYXR1cmUgPSAiZXh0X2VudGl0eV9uYW1lcyIpXQogICAgcHViIGZuIHNwYXduX2VtcHR5X25hbWVkKCZtdXQgc2VsZiwgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PikgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhbiBlbnRpdHkgZnJvbSB0aGUgd29ybGQKICAgIHB1YiBmbiBkZXNwYXduKCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIHsKICAgICAgICBpZiBsZXQgU29tZShsb2MpID0gc2VsZi5icmlkZ2UuaW1wbF9sb2NhdGVfZW50aXR5KGVudGl0eSkgewogICAgICAgICAgICBzZWxmLmJyaWRnZS5pbXBsX2Rlc3Bhd24obG9jKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIENsb25lcyBhbiBlbnRpdHkgYW5kIGFsbCBpdCdzIGNvbXBvbmVudHMuCiAgICBwdWIgZm4gY2xvbmVfZW50aXR5KCZtdXQgc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmNsb25lX2VudGl0eV9hdXgoZWlkLCBFbnRpdHlDbG9uZUZsYWdzOjpub25fcmVjdXJzaXZlX2lnbm9yZV9ub25fY2xvbmUoKSkKICAgICAgICAgICAgLy8gU0FGRVRZOiBub24tcmVjdXJzaXZlLCBpZ25vcmUtbm9uLWNsb25lIG5ldmVyIGZhaWxzCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eV9hdXgoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIGVpZDogRW50aXR5LAogICAgICAgIGZsYWdzOiBFbnRpdHlDbG9uZUZsYWdzLAogICAgKSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBsZXQgZWlkID0gc2VsZi5icmlkZ2UuZW50aXR5X2Nsb25lKGVpZCwgZmxhZ3MpPzsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZWlkKQogICAgfQoKICAgIC8vLyBDaGVja3MgaWYgYW4gZW50aXR5IHdpdGggdGhpcyBJRCBleGlzdHMKICAgIHB1YiBmbiBleGlzdHMoJnNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBib29sIHsKICAgICAgICBzZWxmLmJyaWRnZS5lbnRpdHlfdHJ5X2dldChlbnRpdHkpLmlzX3NvbWUoKQogICAgfQoKICAgIC8vIC8vLyBTaW1pbGFyIHRvIGBnZXRgIGJ1dCByZXR1cm5zIE5vbmUgaWYgdGhlIGVudGl0eSBkb2VzIG5vdCBleGlzdAogICAgLy8gLy8gVE9ETyByZW5hbWUgdG8gZ2V0X2VudGl0eV9tdXQKICAgIC8vIHB1YiBmbiB0cnlfZ2V0KCZzZWxmLCBlaWQ6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eU11dDxCPj4gewogICAgLy8gICAgIHNlbGYuYnJpZGdlLmVudGl0eV90cnlfZ2V0KGVpZCkubWFwKHxpbm5lcnwgRW50aXR5TXV0IHsKICAgIC8vICAgICAgICAgY2VsbDogVW5zYWZlRW50aXR5Q2VsbCBzZWxmLmludG8oKSwKICAgIC8vICAgICAgICAgaW5uZXIsCiAgICAvLyAgICAgfSkKICAgIC8vIH0KCiAgICAvLyAvLy8gR2V0IG11dGFibGUgYWNjZXNzIHRvIGFuIGVudGl0eQogICAgLy8gLy8gVE9ETyByZW5hbWUgdG8gZW50aXR5X211dCwgcmV0dXJuIHR5cGUgRW50aXR5V29ybGRNdXQKICAgIC8vIHB1YiBmbiBnZXQoJnNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlNdXQ8Qj4gewogICAgLy8gICAgIHNlbGYudHJ5X2dldChlaWQpLmV4cGVjdCgiZW50aXR5IG11c3QgZXhpc3QiKQogICAgLy8gfQoKICAgIC8vIC8vIFRPRE8gRGVjaWRlIG9uIEFQSSB0byBnZXQgYW4gRW50aXR5IGZyb20gaXQncyBJRAogICAgLy8gLy8gICBnZXQgLyB0cnlfZ2V0CiAgICAvLyAvLyAgIGdldF9lbnRpdHkgLyB0cnlfZ2V0X2VudGl0eQogICAgLy8gLy8gICBlbnRpdHlfZnJvbV9pZCAvIHRyeV9lbnRpdHlfZnJvbV9pZCg/KQogICAgLy8gLy8gICBlbnRpdHkgLyBmaW5kX2VudGl0eSg/KQogICAgLy8gcHViIGZuIGVudGl0eV9mcm9tX2lkKCZzZWxmLCBlaWQ6IEVudGl0eSkgLT4gRW50aXR5TXV0PEI+IHsKICAgIC8vICAgICBzZWxmLmdldChlaWQpCiAgICAvLyB9CgogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eV90cnlfZ2V0KGVudGl0eSkKICAgICAgICAgICAgLm1hcCh8aW5uZXJ8IHVuc2FmZSB7IEVudGl0eVdvcmxkTXV0OjpuZXcoc2VsZiwgaW5uZXIpIH0pCiAgICB9CgogICAgLy8gcHViKGNyYXRlKSB1bnNhZmUgZm4gdW5zYWZlX2VudGl0eV9jZWxsKAogICAgLy8gICAgICZzZWxmLAogICAgLy8gICAgIGVudGl0eTogRW50aXR5LAogICAgLy8gKSAtPiBPcHRpb248VW5zYWZlRW50aXR5Q2VsbDwnXywgQj4+IHsKICAgIC8vICAgICBzZWxmLmJyaWRnZQogICAgLy8gICAgICAgICAuZW50aXR5X3RyeV9nZXQoZW50aXR5KQogICAgLy8gICAgICAgICAubWFwKHxjYWNoZXwgVW5zYWZlRW50aXR5Q2VsbDo6ZnJvbV9jYWNoZShzZWxmLmludG8oKSwgY2FjaGUpKQogICAgLy8gfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KfQoAAAAAAAAAAI0gAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACNIAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6Ontib3Jyb3c6OkNvdywgY29sbGVjdGlvbnM6Okhhc2hTZXR9OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX3JlZigpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b25fbXV0PEM6IFNpbmdsZXRvbk1hcmtlcj4oJm11dCBzZWxmKSAtPiBPcHRpb248Jm11dCBDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX211dCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbjxDOiBTaW5nbGV0b25NYXJrZXI+KCZzZWxmKSAtPiAmQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uKCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+ICZtdXQgQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uX211dCgpCiAgICAgICAgICAgIC5va19vcl9lbHNlKHx8IGZvcm1hdCEoInNpbmdsZXRvbiAne30nIG11c3QgZXhpc3QiLCBzdGQ6OmFueTo6dHlwZV9uYW1lOjo8Qz4oKSkpCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggZ2l2ZW4gY29tcG9uZW50cwogICAgcHViIGZuIHNwYXduPEE6IEVudGl0eVNldENvbXBvbmVudHNUdXBsZTxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHkoKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICBwdWIoY3JhdGUpIGZuIHNwYXduX3dpdGhfaWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgaWQ6IEVudGl0eSwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHlfd2l0aF9pZChpZCk7CiAgICAgICAgYXJnLmVudGl0eV9zZXRfY29tcG9uZW50c190dXBsZV9hcHBseSgmbXV0IG91dCk7CiAgICAgICAgb3V0CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fbmFtZWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PiwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd24oYXJnKTsKICAgICAgICBvdXQuc2V0X25hbWUobmFtZSk7CiAgICAgICAgb3V0CiAgICB9CgogICAgLy8vIENyZWF0ZXMgYSBuZXcgZW1wdHkgZW50aXR5CiAgICBwdWIgZm4gc3Bhd25fZW1wdHkoJm11dCBzZWxmKSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IGlubmVyID0gc2VsZi5icmlkZ2UuaW1wbF9zcGF3bl9uZXcoKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmltcGxfc3Bhd25fd2l0aF9pZChpZCk7CiAgICAgICAgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfQogICAgfQoKICAgICNbY2ZnKGZlYXR1cmUgPSAiZXh0X2VudGl0eV9uYW1lcyIpXQogICAgcHViIGZuIHNwYXduX2VtcHR5X25hbWVkKCZtdXQgc2VsZiwgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PikgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhbiBlbnRpdHkgZnJvbSB0aGUgd29ybGQKICAgIHB1YiBmbiBkZXNwYXduKCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIHsKICAgICAgICBpZiBsZXQgU29tZShsb2MpID0gc2VsZi5icmlkZ2UuaW1wbF9sb2NhdGVfZW50aXR5KGVudGl0eSkgewogICAgICAgICAgICBzZWxmLmJyaWRnZS5pbXBsX2Rlc3Bhd24obG9jKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIENsb25lcyBhbiBlbnRpdHkgYW5kIGFsbCBpdCdzIGNvbXBvbmVudHMuCiAgICBwdWIgZm4gY2xvbmVfZW50aXR5KCZtdXQgc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmNsb25lX2VudGl0eV9hdXgoZWlkLCBFbnRpdHlDbG9uZUZsYWdzOjpub25fcmVjdXJzaXZlX2lnbm9yZV9ub25fY2xvbmUoKSkKICAgICAgICAgICAgLy8gU0FGRVRZOiBub24tcmVjdXJzaXZlLCBpZ25vcmUtbm9uLWNsb25lIG5ldmVyIGZhaWxzCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eV9hdXgoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIGVpZDogRW50aXR5LAogICAgICAgIGZsYWdzOiBFbnRpdHlDbG9uZUZsYWdzLAogICAgKSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBsZXQgZWlkID0gc2VsZi5icmlkZ2UuZW50aXR5X2Nsb25lKGVpZCwgZmxhZ3MpPzsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZWlkKQogICAgfQoKICAgIC8vLyBDaGVja3MgaWYgYW4gZW50aXR5IHdpdGggdGhpcyBJRCBleGlzdHMKICAgIHB1YiBmbiBleGlzdHMoJnNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBib29sIHsKICAgICAgICBzZWxmLmJyaWRnZS5lbnRpdHlfdHJ5X2dldChlbnRpdHkpLmlzX3NvbWUoKQogICAgfQoKICAgIC8vIC8vLyBTaW1pbGFyIHRvIGBnZXRgIGJ1dCByZXR1cm5zIE5vbmUgaWYgdGhlIGVudGl0eSBkb2VzIG5vdCBleGlzdAogICAgLy8gLy8gVE9ETyByZW5hbWUgdG8gZ2V0X2VudGl0eV9tdXQKICAgIC8vIHB1YiBmbiB0cnlfZ2V0KCZzZWxmLCBlaWQ6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eU11dDxCPj4gewogICAgLy8gICAgIHNlbGYuYnJpZGdlLmVudGl0eV90cnlfZ2V0KGVpZCkubWFwKHxpbm5lcnwgRW50aXR5TXV0IHsKICAgIC8vICAgICAgICAgY2VsbDogVW5zYWZlRW50aXR5Q2VsbCBzZWxmLmludG8oKSwKICAgIC8vICAgICAgICAgaW5uZXIsCiAgICAvLyAgICAgfSkKICAgIC8vIH0KCiAgICAvLyAvLy8gR2V0IG11dGFibGUgYWNjZXNzIHRvIGFuIGVudGl0eQogICAgLy8gLy8gVE9ETyByZW5hbWUgdG8gZW50aXR5X211dCwgcmV0dXJuIHR5cGUgRW50aXR5V29ybGRNdXQKICAgIC8vIHB1YiBmbiBnZXQoJnNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlNdXQ8Qj4gewogICAgLy8gICAgIHNlbGYudHJ5X2dldChlaWQpLmV4cGVjdCgiZW50aXR5IG11c3QgZXhpc3QiKQogICAgLy8gfQoKICAgIC8vIC8vIFRPRE8gRGVjaWRlIG9uIEFQSSB0byBnZXQgYW4gRW50aXR5IGZyb20gaXQncyBJRAogICAgLy8gLy8gICBnZXQgLyB0cnlfZ2V0CiAgICAvLyAvLyAgIGdldF9lbnRpdHkgLyB0cnlfZ2V0X2VudGl0eQogICAgLy8gLy8gICBlbnRpdHlfZnJvbV9pZCAvIHRyeV9lbnRpdHlfZnJvbV9pZCg/KQogICAgLy8gLy8gICBlbnRpdHkgLyBmaW5kX2VudGl0eSg/KQogICAgLy8gcHViIGZuIGVudGl0eV9mcm9tX2lkKCZzZWxmLCBlaWQ6IEVudGl0eSkgLT4gRW50aXR5TXV0PEI+IHsKICAgIC8vICAgICBzZWxmLmdldChlaWQpCiAgICAvLyB9CgogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eV90cnlfZ2V0KGVudGl0eSkKICAgICAgICAgICAgLm1hcCh8aW5uZXJ8IHVuc2FmZSB7IEVudGl0eVdvcmxkTXV0OjpuZXcoc2VsZiwgaW5uZXIpIH0pCiAgICB9CgogICAgLy8gcHViKGNyYXRlKSB1bnNhZmUgZm4gdW5zYWZlX2VudGl0eV9jZWxsKAogICAgLy8gICAgICZzZWxmLAogICAgLy8gICAgIGVudGl0eTogRW50aXR5LAogICAgLy8gKSAtPiBPcHRpb248VW5zYWZlRW50aXR5Q2VsbDwnXywgQj4+IHsKICAgIC8vICAgICBzZWxmLmJyaWRnZQogICAgLy8gICAgICAgICAuZW50aXR5X3RyeV9nZXQoZW50aXR5KQogICAgLy8gICAgICAgICAubWFwKHxjYWNoZXwgVW5zYWZlRW50aXR5Q2VsbDo6ZnJvbV9jYWNoZShzZWxmLmludG8oKSwgY2FjaGUpKQogICAgLy8gfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KfQoAAAAAAAAAAIkgAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					32,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACJIAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6Ontib3Jyb3c6OkNvdywgY29sbGVjdGlvbnM6Okhhc2hTZXR9OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX3JlZigpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b25fbXV0PEM6IFNpbmdsZXRvbk1hcmtlcj4oJm11dCBzZWxmKSAtPiBPcHRpb248Jm11dCBDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX211dCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbjxDOiBTaW5nbGV0b25NYXJrZXI+KCZzZWxmKSAtPiAmQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uKCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+ICZtdXQgQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uX211dCgpCiAgICAgICAgICAgIC5va19vcl9lbHNlKHx8IGZvcm1hdCEoInNpbmdsZXRvbiAne30nIG11c3QgZXhpc3QiLCBzdGQ6OmFueTo6dHlwZV9uYW1lOjo8Qz4oKSkpCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggZ2l2ZW4gY29tcG9uZW50cwogICAgcHViIGZuIHNwYXduPEE6IEVudGl0eVNldENvbXBvbmVudHNUdXBsZTxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHkoKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICBwdWIoY3JhdGUpIGZuIHNwYXduX3dpdGhfaWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgaWQ6IEVudGl0eSwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHlfd2l0aF9pZChpZCk7CiAgICAgICAgYXJnLmVudGl0eV9zZXRfY29tcG9uZW50c190dXBsZV9hcHBseSgmbXV0IG91dCk7CiAgICAgICAgb3V0CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fbmFtZWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PiwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd24oYXJnKTsKICAgICAgICBvdXQuc2V0X25hbWUobmFtZSk7CiAgICAgICAgb3V0CiAgICB9CgogICAgLy8vIENyZWF0ZXMgYSBuZXcgZW1wdHkgZW50aXR5CiAgICBwdWIgZm4gc3Bhd25fZW1wdHkoJm11dCBzZWxmKSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IGlubmVyID0gc2VsZi5icmlkZ2UuaW1wbF9zcGF3bl9uZXcoKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmltcGxfc3Bhd25fd2l0aF9pZChpZCk7CiAgICAgICAgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfQogICAgfQoKICAgICNbY2ZnKGZlYXR1cmUgPSAiZXh0X2VudGl0eV9uYW1lcyIpXQogICAgcHViIGZuIHNwYXduX2VtcHR5X25hbWVkKCZtdXQgc2VsZiwgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PikgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhbiBlbnRpdHkgZnJvbSB0aGUgd29ybGQKICAgIHB1YiBmbiBkZXNwYXduKCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIHsKICAgICAgICBpZiBsZXQgU29tZShsb2MpID0gc2VsZi5icmlkZ2UuaW1wbF9sb2NhdGVfZW50aXR5KGVudGl0eSkgewogICAgICAgICAgICBzZWxmLmJyaWRnZS5pbXBsX2Rlc3Bhd24obG9jKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIENsb25lcyBhbiBlbnRpdHkgYW5kIGFsbCBpdCdzIGNvbXBvbmVudHMuCiAgICBwdWIgZm4gY2xvbmVfZW50aXR5KCZtdXQgc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmNsb25lX2VudGl0eV9hdXgoZWlkLCBFbnRpdHlDbG9uZUZsYWdzOjpub25fcmVjdXJzaXZlX2lnbm9yZV9ub25fY2xvbmUoKSkKICAgICAgICAgICAgLy8gU0FGRVRZOiBub24tcmVjdXJzaXZlLCBpZ25vcmUtbm9uLWNsb25lIG5ldmVyIGZhaWxzCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eV9hdXgoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIGVpZDogRW50aXR5LAogICAgICAgIGZsYWdzOiBFbnRpdHlDbG9uZUZsYWdzLAogICAgKSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBsZXQgZWlkID0gc2VsZi5icmlkZ2UuZW50aXR5X2Nsb25lKGVpZCwgZmxhZ3MpPzsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZWlkKQogICAgfQoKICAgIC8vLyBDaGVja3MgaWYgYW4gZW50aXR5IHdpdGggdGhpcyBJRCBleGlzdHMKICAgIHB1YiBmbiBleGlzdHMoJnNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBib29sIHsKICAgICAgICBzZWxmLmJyaWRnZS5lbnRpdHlfZ2V0KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8gLy8vIFNpbWlsYXIgdG8gYGdldGAgYnV0IHJldHVybnMgTm9uZSBpZiB0aGUgZW50aXR5IGRvZXMgbm90IGV4aXN0CiAgICAvLyAvLyBUT0RPIHJlbmFtZSB0byBnZXRfZW50aXR5X211dAogICAgLy8gcHViIGZuIHRyeV9nZXQoJnNlbGYsIGVpZDogRW50aXR5KSAtPiBPcHRpb248RW50aXR5TXV0PEI+PiB7CiAgICAvLyAgICAgc2VsZi5icmlkZ2UuZW50aXR5X3RyeV9nZXQoZWlkKS5tYXAofGlubmVyfCBFbnRpdHlNdXQgewogICAgLy8gICAgICAgICBjZWxsOiBVbnNhZmVFbnRpdHlDZWxsIHNlbGYuaW50bygpLAogICAgLy8gICAgICAgICBpbm5lciwKICAgIC8vICAgICB9KQogICAgLy8gfQoKICAgIC8vIC8vLyBHZXQgbXV0YWJsZSBhY2Nlc3MgdG8gYW4gZW50aXR5CiAgICAvLyAvLyBUT0RPIHJlbmFtZSB0byBlbnRpdHlfbXV0LCByZXR1cm4gdHlwZSBFbnRpdHlXb3JsZE11dAogICAgLy8gcHViIGZuIGdldCgmc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eU11dDxCPiB7CiAgICAvLyAgICAgc2VsZi50cnlfZ2V0KGVpZCkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICAvLyB9CgogICAgLy8gLy8gVE9ETyBEZWNpZGUgb24gQVBJIHRvIGdldCBhbiBFbnRpdHkgZnJvbSBpdCdzIElECiAgICAvLyAvLyAgIGdldCAvIHRyeV9nZXQKICAgIC8vIC8vICAgZ2V0X2VudGl0eSAvIHRyeV9nZXRfZW50aXR5CiAgICAvLyAvLyAgIGVudGl0eV9mcm9tX2lkIC8gdHJ5X2VudGl0eV9mcm9tX2lkKD8pCiAgICAvLyAvLyAgIGVudGl0eSAvIGZpbmRfZW50aXR5KD8pCiAgICAvLyBwdWIgZm4gZW50aXR5X2Zyb21faWQoJnNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlNdXQ8Qj4gewogICAgLy8gICAgIHNlbGYuZ2V0KGVpZCkKICAgIC8vIH0KCiAgICBwdWIgZm4gZW50aXR5KCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZW50aXR5KS5leHBlY3QoImVudGl0eSBtdXN0IGV4aXN0IikKICAgIH0KCiAgICBwdWIgZm4gZ2V0X2VudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBzZWxmLmJyaWRnZQogICAgICAgICAgICAuZW50aXR5X3RyeV9nZXQoZW50aXR5KQogICAgICAgICAgICAubWFwKHxpbm5lcnwgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfSkKICAgIH0KCiAgICAvLyBwdWIoY3JhdGUpIHVuc2FmZSBmbiB1bnNhZmVfZW50aXR5X2NlbGwoCiAgICAvLyAgICAgJnNlbGYsCiAgICAvLyAgICAgZW50aXR5OiBFbnRpdHksCiAgICAvLyApIC0+IE9wdGlvbjxVbnNhZmVFbnRpdHlDZWxsPCdfLCBCPj4gewogICAgLy8gICAgIHNlbGYuYnJpZGdlCiAgICAvLyAgICAgICAgIC5lbnRpdHlfdHJ5X2dldChlbnRpdHkpCiAgICAvLyAgICAgICAgIC5tYXAofGNhY2hlfCBVbnNhZmVFbnRpdHlDZWxsOjpmcm9tX2NhY2hlKHNlbGYuaW50bygpLCBjYWNoZSkpCiAgICAvLyB9CgogICAgcHViIGZuIHF1ZXJ5PEZldGNoOiBRdWVyeUZldGNoPigmbXV0IHNlbGYpIC0+IFF1ZXJ5PEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpLmJ1aWxkKCkKICAgIH0KCiAgICBwdWIgZm4gcXVlcnlfZmlsdGVyZWQ8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnk8QiwgRmV0Y2gsIEZpbHRlcj4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpLmJ1aWxkKCkKICAgIH0KCiAgICBwdWIgZm4gcXVlcnlfYnVpbGRlcjxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeUJ1aWxkZXI8QiwgRmV0Y2gsICgpPiB7CiAgICAgICAgc2VsZi5xdWVyeV9maWx0ZXJlZF9idWlsZGVyKCkKICAgIH0KCiAgICBwdWIgZm4gcXVlcnlfZmlsdGVyZWRfYnVpbGRlcjxGZXRjaDogUXVlcnlGZXRjaCwgRmlsdGVyOiBRdWVyeUZpbHRlcj4oCiAgICAgICAgJm11dCBzZWxmLAogICAgKSAtPiBRdWVyeUJ1aWxkZXI8QiwgRmV0Y2gsIEZpbHRlcj4gewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgUXVlcnlCdWlsZGVyOjpuZXcoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgLy8vIFJ1bnMgYSBzeXN0ZW0KICAgIHB1YiBmbiBydW48TSwgUywgT3V0cHV0PigmbXV0IHNlbGYsIHN5czogUykgLT4gT3V0cHV0CiAgICB3aGVyZQogICAgICAgIFM6IEludG9TeXN0ZW08QiwgTT4sCiAgICAgICAgPFMgYXMgSW50b1N5c3RlbTxCLCBNPj46OlN5c3RlbTogU3lzdGVtPEIsIElucHV0ID0gKCksIE91dHB1dCA9IE91dHB1dD4sCiAgICB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBzeXMuaW50b19zeXN0ZW0oKQogICAgICAgICAgICAucnVuKCgpLCBzZWxmLmludG8oKSkKICAgICAgICAgICAgLmV4cGVjdCgic3lzdGVtIGZhaWxlZCIpCiAgICB9CgogICAgLy8vIFJ1bnMgYSBzeXN0ZW0gd2hpY2ggdGFrZXMgYW4gaW5wdXQKICAgIHB1YiBmbiBydW5fd2l0aF9pbnB1dDwndywgTSwgUywgSW5wdXQsIE91dHB1dD4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgICAgIGlucHV0OiBJbnB1dDo6SW5uZXI8J18+LAogICAgICAgIHN5czogUywKICAgICkgLT4gT3V0cHV0CiAgICB3aGVyZQogICAgICAgIFM6IEludG9TeXN0ZW08QiwgTT4sCiAgICAgICAgSW5wdXQ6IFN5c3RlbUlucHV0LAogICAgICAgIGZvcjwnYT4gPFMgYXMgSW50b1N5c3RlbTxCLCBNPj46OlN5c3RlbTogU3lzdGVtPEIsIElucHV0ID0gSW5wdXQsIE91dHB1dCA9IE91dHB1dD4sCiAgICB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBzeXMuaW50b19zeXN0ZW0oKQogICAgICAgICAgICAucnVuKGlucHV0LCBzZWxmLmludG8oKSkKICAgICAgICAgICAgLmV4cGVjdCgic3lzdGVtIGZhaWxlZCIpCiAgICB9CgogICAgcHViIGZuIHJldHJlaXZlPCd3LCBBOiBNdWx0aVF1ZXJ5QXJnPEI+PigKICAgICAgICAmJ3cgbXV0IHNlbGYsCiAgICApIC0+IFJlc3VsdDxBOjpPdXQ8J3c+LCBNdWx0aVF1ZXJ5QXJnRXJyb3I+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIEE6Om11bHRpX3F1ZXJ5X2FyZ19hcHBseShzZWxmLmludG8oKSkKICAgIH0KCiAgICBwdWIgZm4gcmVsYXRpb248J3csIFI6IFJlbGF0aW9uTWFya2VyPigmJ3cgc2VsZikgLT4gUmVsYXRpb248J3csIEIsIFI+IHsKICAgICAgICBSZWxhdGlvbjo6bmV3KHNlbGYuaW50bygpKQogICAgfQp9CgAAAAAAAAAAbSAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					33,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABtIAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6OmJvcnJvdzo6Q293OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX3JlZigpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b25fbXV0PEM6IFNpbmdsZXRvbk1hcmtlcj4oJm11dCBzZWxmKSAtPiBPcHRpb248Jm11dCBDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX211dCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbjxDOiBTaW5nbGV0b25NYXJrZXI+KCZzZWxmKSAtPiAmQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uKCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+ICZtdXQgQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uX211dCgpCiAgICAgICAgICAgIC5va19vcl9lbHNlKHx8IGZvcm1hdCEoInNpbmdsZXRvbiAne30nIG11c3QgZXhpc3QiLCBzdGQ6OmFueTo6dHlwZV9uYW1lOjo8Qz4oKSkpCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggZ2l2ZW4gY29tcG9uZW50cwogICAgcHViIGZuIHNwYXduPEE6IEVudGl0eVNldENvbXBvbmVudHNUdXBsZTxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHkoKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICBwdWIoY3JhdGUpIGZuIHNwYXduX3dpdGhfaWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgaWQ6IEVudGl0eSwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHlfd2l0aF9pZChpZCk7CiAgICAgICAgYXJnLmVudGl0eV9zZXRfY29tcG9uZW50c190dXBsZV9hcHBseSgmbXV0IG91dCk7CiAgICAgICAgb3V0CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fbmFtZWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PiwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd24oYXJnKTsKICAgICAgICBvdXQuc2V0X25hbWUobmFtZSk7CiAgICAgICAgb3V0CiAgICB9CgogICAgLy8vIENyZWF0ZXMgYSBuZXcgZW1wdHkgZW50aXR5CiAgICBwdWIgZm4gc3Bhd25fZW1wdHkoJm11dCBzZWxmKSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IGlubmVyID0gc2VsZi5icmlkZ2UuaW1wbF9zcGF3bl9uZXcoKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmltcGxfc3Bhd25fd2l0aF9pZChpZCk7CiAgICAgICAgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfQogICAgfQoKICAgICNbY2ZnKGZlYXR1cmUgPSAiZXh0X2VudGl0eV9uYW1lcyIpXQogICAgcHViIGZuIHNwYXduX2VtcHR5X25hbWVkKCZtdXQgc2VsZiwgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PikgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhbiBlbnRpdHkgZnJvbSB0aGUgd29ybGQKICAgIHB1YiBmbiBkZXNwYXduKCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIHsKICAgICAgICBpZiBsZXQgU29tZShsb2MpID0gc2VsZi5icmlkZ2UuaW1wbF9sb2NhdGVfZW50aXR5KGVudGl0eSkgewogICAgICAgICAgICBzZWxmLmJyaWRnZS5pbXBsX2Rlc3Bhd24obG9jKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIENsb25lcyBhbiBlbnRpdHkgYW5kIGFsbCBpdCdzIGNvbXBvbmVudHMuCiAgICBwdWIgZm4gY2xvbmVfZW50aXR5KCZtdXQgc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmNsb25lX2VudGl0eV9hdXgoZWlkLCBFbnRpdHlDbG9uZUZsYWdzOjpub25fcmVjdXJzaXZlX2lnbm9yZV9ub25fY2xvbmUoKSkKICAgICAgICAgICAgLy8gU0FGRVRZOiBub24tcmVjdXJzaXZlLCBpZ25vcmUtbm9uLWNsb25lIG5ldmVyIGZhaWxzCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eV9hdXgoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIGVpZDogRW50aXR5LAogICAgICAgIGZsYWdzOiBFbnRpdHlDbG9uZUZsYWdzLAogICAgKSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBsZXQgZWlkID0gc2VsZi5icmlkZ2UuZW50aXR5X2Nsb25lKGVpZCwgZmxhZ3MpPzsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZWlkKQogICAgfQoKICAgIC8vLyBDaGVja3MgaWYgYW4gZW50aXR5IHdpdGggdGhpcyBJRCBleGlzdHMKICAgIHB1YiBmbiBleGlzdHMoJnNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBib29sIHsKICAgICAgICBzZWxmLmJyaWRnZS5lbnRpdHlfZ2V0KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8gLy8vIFNpbWlsYXIgdG8gYGdldGAgYnV0IHJldHVybnMgTm9uZSBpZiB0aGUgZW50aXR5IGRvZXMgbm90IGV4aXN0CiAgICAvLyAvLyBUT0RPIHJlbmFtZSB0byBnZXRfZW50aXR5X211dAogICAgLy8gcHViIGZuIHRyeV9nZXQoJnNlbGYsIGVpZDogRW50aXR5KSAtPiBPcHRpb248RW50aXR5TXV0PEI+PiB7CiAgICAvLyAgICAgc2VsZi5icmlkZ2UuZW50aXR5X3RyeV9nZXQoZWlkKS5tYXAofGlubmVyfCBFbnRpdHlNdXQgewogICAgLy8gICAgICAgICBjZWxsOiBVbnNhZmVFbnRpdHlDZWxsIHNlbGYuaW50bygpLAogICAgLy8gICAgICAgICBpbm5lciwKICAgIC8vICAgICB9KQogICAgLy8gfQoKICAgIC8vIC8vLyBHZXQgbXV0YWJsZSBhY2Nlc3MgdG8gYW4gZW50aXR5CiAgICAvLyAvLyBUT0RPIHJlbmFtZSB0byBlbnRpdHlfbXV0LCByZXR1cm4gdHlwZSBFbnRpdHlXb3JsZE11dAogICAgLy8gcHViIGZuIGdldCgmc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eU11dDxCPiB7CiAgICAvLyAgICAgc2VsZi50cnlfZ2V0KGVpZCkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICAvLyB9CgogICAgLy8gLy8gVE9ETyBEZWNpZGUgb24gQVBJIHRvIGdldCBhbiBFbnRpdHkgZnJvbSBpdCdzIElECiAgICAvLyAvLyAgIGdldCAvIHRyeV9nZXQKICAgIC8vIC8vICAgZ2V0X2VudGl0eSAvIHRyeV9nZXRfZW50aXR5CiAgICAvLyAvLyAgIGVudGl0eV9mcm9tX2lkIC8gdHJ5X2VudGl0eV9mcm9tX2lkKD8pCiAgICAvLyAvLyAgIGVudGl0eSAvIGZpbmRfZW50aXR5KD8pCiAgICAvLyBwdWIgZm4gZW50aXR5X2Zyb21faWQoJnNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlNdXQ8Qj4gewogICAgLy8gICAgIHNlbGYuZ2V0KGVpZCkKICAgIC8vIH0KCiAgICBwdWIgZm4gZW50aXR5KCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZW50aXR5KS5leHBlY3QoImVudGl0eSBtdXN0IGV4aXN0IikKICAgIH0KCiAgICBwdWIgZm4gZ2V0X2VudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBzZWxmLmJyaWRnZQogICAgICAgICAgICAuZW50aXR5X2dldChlbnRpdHkpCiAgICAgICAgICAgIC5tYXAofGlubmVyfCB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9KQogICAgfQoKICAgIC8vIHB1YihjcmF0ZSkgdW5zYWZlIGZuIHVuc2FmZV9lbnRpdHlfY2VsbCgKICAgIC8vICAgICAmc2VsZiwKICAgIC8vICAgICBlbnRpdHk6IEVudGl0eSwKICAgIC8vICkgLT4gT3B0aW9uPFVuc2FmZUVudGl0eUNlbGw8J18sIEI+PiB7CiAgICAvLyAgICAgc2VsZi5icmlkZ2UKICAgIC8vICAgICAgICAgLmVudGl0eV90cnlfZ2V0KGVudGl0eSkKICAgIC8vICAgICAgICAgLm1hcCh8Y2FjaGV8IFVuc2FmZUVudGl0eUNlbGw6OmZyb21fY2FjaGUoc2VsZi5pbnRvKCksIGNhY2hlKSkKICAgIC8vIH0KCiAgICBwdWIgZm4gcXVlcnk8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnk8QiwgRmV0Y2gsICgpPiB7CiAgICAgICAgc2VsZi5xdWVyeV9maWx0ZXJlZF9idWlsZGVyKCkuYnVpbGQoKQogICAgfQoKICAgIHB1YiBmbiBxdWVyeV9maWx0ZXJlZDxGZXRjaDogUXVlcnlGZXRjaCwgRmlsdGVyOiBRdWVyeUZpbHRlcj4oCiAgICAgICAgJm11dCBzZWxmLAogICAgKSAtPiBRdWVyeTxCLCBGZXRjaCwgRmlsdGVyPiB7CiAgICAgICAgc2VsZi5xdWVyeV9maWx0ZXJlZF9idWlsZGVyKCkuYnVpbGQoKQogICAgfQoKICAgIHB1YiBmbiBxdWVyeV9idWlsZGVyPEZldGNoOiBRdWVyeUZldGNoPigmbXV0IHNlbGYpIC0+IFF1ZXJ5QnVpbGRlcjxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKQogICAgfQoKICAgIHB1YiBmbiBxdWVyeV9maWx0ZXJlZF9idWlsZGVyPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5QnVpbGRlcjxCLCBGZXRjaCwgRmlsdGVyPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBRdWVyeUJ1aWxkZXI6Om5ldyhzZWxmLmludG8oKSkKICAgIH0KCiAgICAvLy8gUnVucyBhIHN5c3RlbQogICAgcHViIGZuIHJ1bjxNLCBTLCBPdXRwdXQ+KCZtdXQgc2VsZiwgc3lzOiBTKSAtPiBPdXRwdXQKICAgIHdoZXJlCiAgICAgICAgUzogSW50b1N5c3RlbTxCLCBNPiwKICAgICAgICA8UyBhcyBJbnRvU3lzdGVtPEIsIE0+Pjo6U3lzdGVtOiBTeXN0ZW08QiwgSW5wdXQgPSAoKSwgT3V0cHV0ID0gT3V0cHV0PiwKICAgIHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIHN5cy5pbnRvX3N5c3RlbSgpCiAgICAgICAgICAgIC5ydW4oKCksIHNlbGYuaW50bygpKQogICAgICAgICAgICAuZXhwZWN0KCJzeXN0ZW0gZmFpbGVkIikKICAgIH0KCiAgICAvLy8gUnVucyBhIHN5c3RlbSB3aGljaCB0YWtlcyBhbiBpbnB1dAogICAgcHViIGZuIHJ1bl93aXRoX2lucHV0PCd3LCBNLCBTLCBJbnB1dCwgT3V0cHV0PigKICAgICAgICAmJ3cgbXV0IHNlbGYsCiAgICAgICAgaW5wdXQ6IElucHV0OjpJbm5lcjwnXz4sCiAgICAgICAgc3lzOiBTLAogICAgKSAtPiBPdXRwdXQKICAgIHdoZXJlCiAgICAgICAgUzogSW50b1N5c3RlbTxCLCBNPiwKICAgICAgICBJbnB1dDogU3lzdGVtSW5wdXQsCiAgICAgICAgZm9yPCdhPiA8UyBhcyBJbnRvU3lzdGVtPEIsIE0+Pjo6U3lzdGVtOiBTeXN0ZW08QiwgSW5wdXQgPSBJbnB1dCwgT3V0cHV0ID0gT3V0cHV0PiwKICAgIHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIHN5cy5pbnRvX3N5c3RlbSgpCiAgICAgICAgICAgIC5ydW4oaW5wdXQsIHNlbGYuaW50bygpKQogICAgICAgICAgICAuZXhwZWN0KCJzeXN0ZW0gZmFpbGVkIikKICAgIH0KCiAgICBwdWIgZm4gcmV0cmVpdmU8J3csIEE6IE11bHRpUXVlcnlBcmc8Qj4+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICkgLT4gUmVzdWx0PEE6Ok91dDwndz4sIE11bHRpUXVlcnlBcmdFcnJvcj4gewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgQTo6bXVsdGlfcXVlcnlfYXJnX2FwcGx5KHNlbGYuaW50bygpKQogICAgfQoKICAgIHB1YiBmbiByZWxhdGlvbjwndywgUjogUmVsYXRpb25NYXJrZXI+KCYndyBzZWxmKSAtPiBSZWxhdGlvbjwndywgQiwgUj4gewogICAgICAgIFJlbGF0aW9uOjpuZXcoc2VsZi5pbnRvKCkpCiAgICB9Cn0KAAAAAAAAAAAMHQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					34,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAMHQAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6OmJvcnJvdzo6Q293OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX3JlZigpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b25fbXV0PEM6IFNpbmdsZXRvbk1hcmtlcj4oJm11dCBzZWxmKSAtPiBPcHRpb248Jm11dCBDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX211dCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbjxDOiBTaW5nbGV0b25NYXJrZXI+KCZzZWxmKSAtPiAmQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uKCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+ICZtdXQgQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uX211dCgpCiAgICAgICAgICAgIC5va19vcl9lbHNlKHx8IGZvcm1hdCEoInNpbmdsZXRvbiAne30nIG11c3QgZXhpc3QiLCBzdGQ6OmFueTo6dHlwZV9uYW1lOjo8Qz4oKSkpCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggZ2l2ZW4gY29tcG9uZW50cwogICAgcHViIGZuIHNwYXduPEE6IEVudGl0eVNldENvbXBvbmVudHNUdXBsZTxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHkoKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICBwdWIoY3JhdGUpIGZuIHNwYXduX3dpdGhfaWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgaWQ6IEVudGl0eSwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHlfd2l0aF9pZChpZCk7CiAgICAgICAgYXJnLmVudGl0eV9zZXRfY29tcG9uZW50c190dXBsZV9hcHBseSgmbXV0IG91dCk7CiAgICAgICAgb3V0CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fbmFtZWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PiwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd24oYXJnKTsKICAgICAgICBvdXQuc2V0X25hbWUobmFtZSk7CiAgICAgICAgb3V0CiAgICB9CgogICAgLy8vIENyZWF0ZXMgYSBuZXcgZW1wdHkgZW50aXR5CiAgICBwdWIgZm4gc3Bhd25fZW1wdHkoJm11dCBzZWxmKSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IGlubmVyID0gc2VsZi5icmlkZ2UuaW1wbF9zcGF3bl9uZXcoKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmltcGxfc3Bhd25fd2l0aF9pZChpZCk7CiAgICAgICAgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfQogICAgfQoKICAgICNbY2ZnKGZlYXR1cmUgPSAiZXh0X2VudGl0eV9uYW1lcyIpXQogICAgcHViIGZuIHNwYXduX2VtcHR5X25hbWVkKCZtdXQgc2VsZiwgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PikgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhbiBlbnRpdHkgZnJvbSB0aGUgd29ybGQKICAgIHB1YiBmbiBkZXNwYXduKCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIHsKICAgICAgICBpZiBsZXQgU29tZShsb2MpID0gc2VsZi5icmlkZ2UuaW1wbF9sb2NhdGVfZW50aXR5KGVudGl0eSkgewogICAgICAgICAgICBzZWxmLmJyaWRnZS5pbXBsX2Rlc3Bhd24obG9jKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIENsb25lcyBhbiBlbnRpdHkgYW5kIGFsbCBpdCdzIGNvbXBvbmVudHMuCiAgICBwdWIgZm4gY2xvbmVfZW50aXR5KCZtdXQgc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmNsb25lX2VudGl0eV9hdXgoZWlkLCBFbnRpdHlDbG9uZUZsYWdzOjpub25fcmVjdXJzaXZlX2lnbm9yZV9ub25fY2xvbmUoKSkKICAgICAgICAgICAgLy8gU0FGRVRZOiBub24tcmVjdXJzaXZlLCBpZ25vcmUtbm9uLWNsb25lIG5ldmVyIGZhaWxzCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eV9hdXgoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIGVpZDogRW50aXR5LAogICAgICAgIGZsYWdzOiBFbnRpdHlDbG9uZUZsYWdzLAogICAgKSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBsZXQgZWlkID0gc2VsZi5icmlkZ2UuZW50aXR5X2Nsb25lKGVpZCwgZmxhZ3MpPzsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZWlkKQogICAgfQoKICAgIC8vLyBDaGVja3MgaWYgYW4gZW50aXR5IHdpdGggdGhpcyBJRCBleGlzdHMKICAgIHB1YiBmbiBleGlzdHMoJnNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBib29sIHsKICAgICAgICBzZWxmLmJyaWRnZS5lbnRpdHlfZ2V0KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8gLy8gVE9ETyBEZWNpZGUgb24gQVBJIHRvIGdldCBhbiBFbnRpdHkgZnJvbSBpdCdzIElECiAgICAvLyAvLyAgIGdldCAvIHRyeV9nZXQKICAgIC8vIC8vICAgZ2V0X2VudGl0eSAvIHRyeV9nZXRfZW50aXR5CiAgICAvLyAvLyAgIGVudGl0eV9mcm9tX2lkIC8gdHJ5X2VudGl0eV9mcm9tX2lkKD8pCiAgICAvLyAvLyAgIGVudGl0eSAvIGZpbmRfZW50aXR5KD8pCiAgICAvLyBwdWIgZm4gZW50aXR5X2Zyb21faWQoJnNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlNdXQ8Qj4gewogICAgLy8gICAgIHNlbGYuZ2V0KGVpZCkKICAgIC8vIH0KCiAgICBwdWIgZm4gZW50aXR5KCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZW50aXR5KS5leHBlY3QoImVudGl0eSBtdXN0IGV4aXN0IikKICAgIH0KCiAgICBwdWIgZm4gZ2V0X2VudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBzZWxmLmJyaWRnZQogICAgICAgICAgICAuZW50aXR5X2dldChlbnRpdHkpCiAgICAgICAgICAgIC5tYXAofGlubmVyfCB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9KQogICAgfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KfQoAAAAAAAAAAAgcAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPC/"
				],
				[
					37,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAIHAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6OmJvcnJvdzo6Q293OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX3JlZigpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b25fbXV0PEM6IFNpbmdsZXRvbk1hcmtlcj4oJm11dCBzZWxmKSAtPiBPcHRpb248Jm11dCBDPiB7CiAgICAgICAgc2VsZi5icmlkZ2UuaW1wbF9nZXRfc2luZ2xldG9uX211dCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbjxDOiBTaW5nbGV0b25NYXJrZXI+KCZzZWxmKSAtPiAmQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uKCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgcHViIGZuIHNpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+ICZtdXQgQyB7CiAgICAgICAgc2VsZi5nZXRfc2luZ2xldG9uX211dCgpCiAgICAgICAgICAgIC5va19vcl9lbHNlKHx8IGZvcm1hdCEoInNpbmdsZXRvbiAne30nIG11c3QgZXhpc3QiLCBzdGQ6OmFueTo6dHlwZV9uYW1lOjo8Qz4oKSkpCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggZ2l2ZW4gY29tcG9uZW50cwogICAgcHViIGZuIHNwYXduPEE6IEVudGl0eVNldENvbXBvbmVudHNUdXBsZTxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHkoKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICBwdWIoY3JhdGUpIGZuIHNwYXduX3dpdGhfaWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgaWQ6IEVudGl0eSwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd25fZW1wdHlfd2l0aF9pZChpZCk7CiAgICAgICAgYXJnLmVudGl0eV9zZXRfY29tcG9uZW50c190dXBsZV9hcHBseSgmbXV0IG91dCk7CiAgICAgICAgb3V0CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fbmFtZWQ8QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PiwKICAgICAgICBhcmc6IEEsCiAgICApIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgbXV0IG91dCA9IHNlbGYuc3Bhd24oYXJnKTsKICAgICAgICBvdXQuc2V0X25hbWUobmFtZSk7CiAgICAgICAgb3V0CiAgICB9CgogICAgLy8vIENyZWF0ZXMgYSBuZXcgZW1wdHkgZW50aXR5CiAgICBwdWIgZm4gc3Bhd25fZW1wdHkoJm11dCBzZWxmKSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IGlubmVyID0gc2VsZi5icmlkZ2UuaW1wbF9zcGF3bl9uZXcoKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmltcGxfc3Bhd25fd2l0aF9pZChpZCk7CiAgICAgICAgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfQogICAgfQoKICAgICNbY2ZnKGZlYXR1cmUgPSAiZXh0X2VudGl0eV9uYW1lcyIpXQogICAgcHViIGZuIHNwYXduX2VtcHR5X25hbWVkKCZtdXQgc2VsZiwgbmFtZTogaW1wbCBJbnRvPENvdzwnc3RhdGljLCBzdHI+PikgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhbiBlbnRpdHkgZnJvbSB0aGUgd29ybGQKICAgIHB1YiBmbiBkZXNwYXduKCZtdXQgc2VsZiwgZW50aXR5OiBFbnRpdHkpIHsKICAgICAgICBpZiBsZXQgU29tZShsb2MpID0gc2VsZi5icmlkZ2UuaW1wbF9sb2NhdGVfZW50aXR5KGVudGl0eSkgewogICAgICAgICAgICBzZWxmLmJyaWRnZS5pbXBsX2Rlc3Bhd24obG9jKTsKICAgICAgICB9CiAgICB9CgogICAgLy8vIENsb25lcyBhbiBlbnRpdHkgYW5kIGFsbCBpdCdzIGNvbXBvbmVudHMuCiAgICBwdWIgZm4gY2xvbmVfZW50aXR5KCZtdXQgc2VsZiwgZWlkOiBFbnRpdHkpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBzZWxmLmNsb25lX2VudGl0eV9hdXgoZWlkLCBFbnRpdHlDbG9uZUZsYWdzOjpub25fcmVjdXJzaXZlX2lnbm9yZV9ub25fY2xvbmUoKSkKICAgICAgICAgICAgLy8gU0FGRVRZOiBub24tcmVjdXJzaXZlLCBpZ25vcmUtbm9uLWNsb25lIG5ldmVyIGZhaWxzCiAgICAgICAgICAgIC51bndyYXAoKQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eV9hdXgoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIGVpZDogRW50aXR5LAogICAgICAgIGZsYWdzOiBFbnRpdHlDbG9uZUZsYWdzLAogICAgKSAtPiBPcHRpb248RW50aXR5V29ybGRNdXQ8Qj4+IHsKICAgICAgICBsZXQgZWlkID0gc2VsZi5icmlkZ2UuZW50aXR5X2Nsb25lKGVpZCwgZmxhZ3MpPzsKICAgICAgICBzZWxmLmdldF9lbnRpdHkoZWlkKQogICAgfQoKICAgIC8vLyBDaGVja3MgaWYgYW4gZW50aXR5IHdpdGggdGhpcyBJRCBleGlzdHMKICAgIHB1YiBmbiBleGlzdHMoJnNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBib29sIHsKICAgICAgICBzZWxmLmJyaWRnZS5lbnRpdHlfZ2V0KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbW92ZQogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbmFtZSB0byBgZW50aXR5YAogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eV9nZXQoZW50aXR5KQogICAgICAgICAgICAubWFwKHxpbm5lcnwgdW5zYWZlIHsgRW50aXR5V29ybGRNdXQ6Om5ldyhzZWxmLCBpbm5lcikgfSkKICAgIH0KCiAgICBwdWIgZm4gcXVlcnk8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnk8QiwgRmV0Y2gsICgpPiB7CiAgICAgICAgc2VsZi5xdWVyeV9maWx0ZXJlZF9idWlsZGVyKCkuYnVpbGQoKQogICAgfQoKICAgIHB1YiBmbiBxdWVyeV9maWx0ZXJlZDxGZXRjaDogUXVlcnlGZXRjaCwgRmlsdGVyOiBRdWVyeUZpbHRlcj4oCiAgICAgICAgJm11dCBzZWxmLAogICAgKSAtPiBRdWVyeTxCLCBGZXRjaCwgRmlsdGVyPiB7CiAgICAgICAgc2VsZi5xdWVyeV9maWx0ZXJlZF9idWlsZGVyKCkuYnVpbGQoKQogICAgfQoKICAgIHB1YiBmbiBxdWVyeV9idWlsZGVyPEZldGNoOiBRdWVyeUZldGNoPigmbXV0IHNlbGYpIC0+IFF1ZXJ5QnVpbGRlcjxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKQogICAgfQoKICAgIHB1YiBmbiBxdWVyeV9maWx0ZXJlZF9idWlsZGVyPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5QnVpbGRlcjxCLCBGZXRjaCwgRmlsdGVyPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBRdWVyeUJ1aWxkZXI6Om5ldyhzZWxmLmludG8oKSkKICAgIH0KCiAgICAvLy8gUnVucyBhIHN5c3RlbQogICAgcHViIGZuIHJ1bjxNLCBTLCBPdXRwdXQ+KCZtdXQgc2VsZiwgc3lzOiBTKSAtPiBPdXRwdXQKICAgIHdoZXJlCiAgICAgICAgUzogSW50b1N5c3RlbTxCLCBNPiwKICAgICAgICA8UyBhcyBJbnRvU3lzdGVtPEIsIE0+Pjo6U3lzdGVtOiBTeXN0ZW08QiwgSW5wdXQgPSAoKSwgT3V0cHV0ID0gT3V0cHV0PiwKICAgIHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIHN5cy5pbnRvX3N5c3RlbSgpCiAgICAgICAgICAgIC5ydW4oKCksIHNlbGYuaW50bygpKQogICAgICAgICAgICAuZXhwZWN0KCJzeXN0ZW0gZmFpbGVkIikKICAgIH0KCiAgICAvLy8gUnVucyBhIHN5c3RlbSB3aGljaCB0YWtlcyBhbiBpbnB1dAogICAgcHViIGZuIHJ1bl93aXRoX2lucHV0PCd3LCBNLCBTLCBJbnB1dCwgT3V0cHV0PigKICAgICAgICAmJ3cgbXV0IHNlbGYsCiAgICAgICAgaW5wdXQ6IElucHV0OjpJbm5lcjwnXz4sCiAgICAgICAgc3lzOiBTLAogICAgKSAtPiBPdXRwdXQKICAgIHdoZXJlCiAgICAgICAgUzogSW50b1N5c3RlbTxCLCBNPiwKICAgICAgICBJbnB1dDogU3lzdGVtSW5wdXQsCiAgICAgICAgZm9yPCdhPiA8UyBhcyBJbnRvU3lzdGVtPEIsIE0+Pjo6U3lzdGVtOiBTeXN0ZW08QiwgSW5wdXQgPSBJbnB1dCwgT3V0cHV0ID0gT3V0cHV0PiwKICAgIHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIHN5cy5pbnRvX3N5c3RlbSgpCiAgICAgICAgICAgIC5ydW4oaW5wdXQsIHNlbGYuaW50bygpKQogICAgICAgICAgICAuZXhwZWN0KCJzeXN0ZW0gZmFpbGVkIikKICAgIH0KCiAgICBwdWIgZm4gcmV0cmVpdmU8J3csIEE6IE11bHRpUXVlcnlBcmc8Qj4+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICkgLT4gUmVzdWx0PEE6Ok91dDwndz4sIE11bHRpUXVlcnlBcmdFcnJvcj4gewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgQTo6bXVsdGlfcXVlcnlfYXJnX2FwcGx5KHNlbGYuaW50bygpKQogICAgfQoKICAgIHB1YiBmbiByZWxhdGlvbjwndywgUjogUmVsYXRpb25NYXJrZXI+KCYndyBzZWxmKSAtPiBSZWxhdGlvbjwndywgQiwgUj4gewogICAgICAgIFJlbGF0aW9uOjpuZXcoc2VsZi5pbnRvKCkpCiAgICB9Cn0KAAAAAAAAAADgGwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnRUAAAAAAACdFQAAAAAAAAAAAAAAAPC/"
				],
				[
					38,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADgGwAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6OmJvcnJvdzo6Q293OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uKCkKICAgIH0KCiAgICBwdWIgZm4gZ2V0X3NpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjwmbXV0IEM+IHsKICAgICAgICBzZWxmLmJyaWRnZS5zaW5nbGV0b25fbXV0KCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uPEM6IFNpbmdsZXRvbk1hcmtlcj4oJnNlbGYpIC0+ICZDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b24oKQogICAgICAgICAgICAub2tfb3JfZWxzZSh8fCBmb3JtYXQhKCJzaW5nbGV0b24gJ3t9JyBtdXN0IGV4aXN0Iiwgc3RkOjphbnk6OnR5cGVfbmFtZTo6PEM+KCkpKQogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uX211dDxDOiBTaW5nbGV0b25NYXJrZXI+KCZtdXQgc2VsZikgLT4gJm11dCBDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b25fbXV0KCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgLy8vIFNwYXducyBhIG5ldyBlbnRpdHkgd2l0aCBnaXZlbiBjb21wb25lbnRzCiAgICBwdWIgZm4gc3Bhd248QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigmbXV0IHNlbGYsIGFyZzogQSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIGFyZy5lbnRpdHlfc2V0X2NvbXBvbmVudHNfdHVwbGVfYXBwbHkoJm11dCBvdXQpOwogICAgICAgIG91dAogICAgfQoKICAgIHB1YihjcmF0ZSkgZm4gc3Bhd25fd2l0aF9pZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBpZDogRW50aXR5LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICAjW2NmZyhmZWF0dXJlID0gImV4dF9lbnRpdHlfbmFtZXMiKV0KICAgIHB1YiBmbiBzcGF3bl9uYW1lZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bihhcmcpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gQ3JlYXRlcyBhIG5ldyBlbXB0eSBlbnRpdHkKICAgIHB1YiBmbiBzcGF3bl9lbXB0eSgmbXV0IHNlbGYpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgaW5uZXIgPSBzZWxmLmJyaWRnZS5lbnRpdHlfc3Bhd24oKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmVudGl0eV9zcGF3bl93aXRoX2lkKGlkKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fZW1wdHlfbmFtZWQoJm11dCBzZWxmLCBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IG11dCBvdXQgPSBzZWxmLnNwYXduX2VtcHR5KCk7CiAgICAgICAgb3V0LnNldF9uYW1lKG5hbWUpOwogICAgICAgIG91dAogICAgfQoKICAgIC8vLyBSZW1vdmVzIGFuIGVudGl0eSBmcm9tIHRoZSB3b3JsZAogICAgcHViIGZuIGRlc3Bhd24oJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgewogICAgICAgIGlmIGxldCBTb21lKGxvYykgPSBzZWxmLmJyaWRnZS5lbnRpdHkoZW50aXR5KSB7CiAgICAgICAgICAgIHNlbGYuYnJpZGdlLmVudGl0eV9kZXNwYXduKGxvYyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eSgmbXV0IHNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5jbG9uZV9lbnRpdHlfYXV4KGVpZCwgRW50aXR5Q2xvbmVGbGFnczo6bm9uX3JlY3Vyc2l2ZV9pZ25vcmVfbm9uX2Nsb25lKCkpCiAgICAgICAgICAgIC8vIFNBRkVUWTogbm9uLXJlY3Vyc2l2ZSwgaWdub3JlLW5vbi1jbG9uZSBuZXZlciBmYWlscwogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICAvLy8gQ2xvbmVzIGFuIGVudGl0eSBhbmQgYWxsIGl0J3MgY29tcG9uZW50cy4KICAgIHB1YiBmbiBjbG9uZV9lbnRpdHlfYXV4KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBlaWQ6IEVudGl0eSwKICAgICAgICBmbGFnczogRW50aXR5Q2xvbmVGbGFncywKICAgICkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgbGV0IGVpZCA9IHNlbGYuYnJpZGdlLmVudGl0eV9jbG9uZShlaWQsIGZsYWdzKT87CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVpZCkKICAgIH0KCiAgICAvLy8gQ2hlY2tzIGlmIGFuIGVudGl0eSB3aXRoIHRoaXMgSUQgZXhpc3RzCiAgICBwdWIgZm4gZXhpc3RzKCZzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gYm9vbCB7CiAgICAgICAgc2VsZi5icmlkZ2UuZW50aXR5KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbW92ZQogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbmFtZSB0byBgZW50aXR5YAogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eShlbnRpdHkpCiAgICAgICAgICAgIC5tYXAofGlubmVyfCB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9KQogICAgfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KfQoAAAAAAAAAABAcAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnRUAAAAAAACdFQAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAQHAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6OmJvcnJvdzo6Q293OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uKCkKICAgIH0KCiAgICBwdWIgZm4gZ2V0X3NpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjwmbXV0IEM+IHsKICAgICAgICBzZWxmLmJyaWRnZS5zaW5nbGV0b25fbXV0KCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uPEM6IFNpbmdsZXRvbk1hcmtlcj4oJnNlbGYpIC0+ICZDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b24oKQogICAgICAgICAgICAub2tfb3JfZWxzZSh8fCBmb3JtYXQhKCJzaW5nbGV0b24gJ3t9JyBtdXN0IGV4aXN0Iiwgc3RkOjphbnk6OnR5cGVfbmFtZTo6PEM+KCkpKQogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uX211dDxDOiBTaW5nbGV0b25NYXJrZXI+KCZtdXQgc2VsZikgLT4gJm11dCBDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b25fbXV0KCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgLy8vIFNwYXducyBhIG5ldyBlbnRpdHkgd2l0aCBnaXZlbiBjb21wb25lbnRzCiAgICBwdWIgZm4gc3Bhd248QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigmbXV0IHNlbGYsIGFyZzogQSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIGFyZy5lbnRpdHlfc2V0X2NvbXBvbmVudHNfdHVwbGVfYXBwbHkoJm11dCBvdXQpOwogICAgICAgIG91dAogICAgfQoKICAgIHB1YihjcmF0ZSkgZm4gc3Bhd25fd2l0aF9pZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBpZDogRW50aXR5LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICAjW2NmZyhmZWF0dXJlID0gImV4dF9lbnRpdHlfbmFtZXMiKV0KICAgIHB1YiBmbiBzcGF3bl9uYW1lZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bihhcmcpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gQ3JlYXRlcyBhIG5ldyBlbXB0eSBlbnRpdHkKICAgIHB1YiBmbiBzcGF3bl9lbXB0eSgmbXV0IHNlbGYpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgaW5uZXIgPSBzZWxmLmJyaWRnZS5lbnRpdHlfc3Bhd24oKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmVudGl0eV9zcGF3bl93aXRoX2lkKGlkKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fZW1wdHlfbmFtZWQoJm11dCBzZWxmLCBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IG11dCBvdXQgPSBzZWxmLnNwYXduX2VtcHR5KCk7CiAgICAgICAgb3V0LnNldF9uYW1lKG5hbWUpOwogICAgICAgIG91dAogICAgfQoKICAgIC8vLyBSZW1vdmVzIGFuIGVudGl0eSBmcm9tIHRoZSB3b3JsZAogICAgcHViIGZuIGRlc3Bhd24oJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgewogICAgICAgIGlmIGxldCBTb21lKGxvYykgPSBzZWxmLmJyaWRnZS5lbnRpdHkoZW50aXR5KSB7CiAgICAgICAgICAgIHNlbGYuYnJpZGdlLmVudGl0eV9kZXNwYXduKGxvYyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eSgmbXV0IHNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5jbG9uZV9lbnRpdHlfYXV4KGVpZCwgRW50aXR5Q2xvbmVGbGFnczo6bm9uX3JlY3Vyc2l2ZV9pZ25vcmVfbm9uX2Nsb25lKCkpCiAgICAgICAgICAgIC8vIFNBRkVUWTogbm9uLXJlY3Vyc2l2ZSwgaWdub3JlLW5vbi1jbG9uZSBuZXZlciBmYWlscwogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICAvLy8gQ2xvbmVzIGFuIGVudGl0eSBhbmQgYWxsIGl0J3MgY29tcG9uZW50cy4KICAgIHB1YiBmbiBjbG9uZV9lbnRpdHlfYXV4KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBlaWQ6IEVudGl0eSwKICAgICAgICBmbGFnczogRW50aXR5Q2xvbmVGbGFncywKICAgICkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgbGV0IGRzdCA9IHNlbGYuc3Bhd25fZW1wdHkoKS5pZCgpOwogICAgICAgIGxldCBlaWQgPSBzZWxmLmJyaWRnZS5lbnRpdHlfY2xvbmUoZWlkLCBkc3QsIGZsYWdzKT87CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVpZCkKICAgIH0KCiAgICAvLy8gQ2hlY2tzIGlmIGFuIGVudGl0eSB3aXRoIHRoaXMgSUQgZXhpc3RzCiAgICBwdWIgZm4gZXhpc3RzKCZzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gYm9vbCB7CiAgICAgICAgc2VsZi5icmlkZ2UuZW50aXR5KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbW92ZQogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbmFtZSB0byBgZW50aXR5YAogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eShlbnRpdHkpCiAgICAgICAgICAgIC5tYXAofGlubmVyfCB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9KQogICAgfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KfQoAAAAAAAAAABAcAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnRUAAAAAAACdFQAAAAAAAAAAAAAAAPC/"
				],
				[
					40,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAQHAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6OmJvcnJvdzo6Q293OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uKCkKICAgIH0KCiAgICBwdWIgZm4gZ2V0X3NpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjwmbXV0IEM+IHsKICAgICAgICBzZWxmLmJyaWRnZS5zaW5nbGV0b25fbXV0KCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uPEM6IFNpbmdsZXRvbk1hcmtlcj4oJnNlbGYpIC0+ICZDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b24oKQogICAgICAgICAgICAub2tfb3JfZWxzZSh8fCBmb3JtYXQhKCJzaW5nbGV0b24gJ3t9JyBtdXN0IGV4aXN0Iiwgc3RkOjphbnk6OnR5cGVfbmFtZTo6PEM+KCkpKQogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uX211dDxDOiBTaW5nbGV0b25NYXJrZXI+KCZtdXQgc2VsZikgLT4gJm11dCBDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b25fbXV0KCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgLy8vIFNwYXducyBhIG5ldyBlbnRpdHkgd2l0aCBnaXZlbiBjb21wb25lbnRzCiAgICBwdWIgZm4gc3Bhd248QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigmbXV0IHNlbGYsIGFyZzogQSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIGFyZy5lbnRpdHlfc2V0X2NvbXBvbmVudHNfdHVwbGVfYXBwbHkoJm11dCBvdXQpOwogICAgICAgIG91dAogICAgfQoKICAgIHB1YihjcmF0ZSkgZm4gc3Bhd25fd2l0aF9pZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBpZDogRW50aXR5LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICAjW2NmZyhmZWF0dXJlID0gImV4dF9lbnRpdHlfbmFtZXMiKV0KICAgIHB1YiBmbiBzcGF3bl9uYW1lZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bihhcmcpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gQ3JlYXRlcyBhIG5ldyBlbXB0eSBlbnRpdHkKICAgIHB1YiBmbiBzcGF3bl9lbXB0eSgmbXV0IHNlbGYpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgaW5uZXIgPSBzZWxmLmJyaWRnZS5lbnRpdHlfc3Bhd24oKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmVudGl0eV9zcGF3bl93aXRoX2lkKGlkKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fZW1wdHlfbmFtZWQoJm11dCBzZWxmLCBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IG11dCBvdXQgPSBzZWxmLnNwYXduX2VtcHR5KCk7CiAgICAgICAgb3V0LnNldF9uYW1lKG5hbWUpOwogICAgICAgIG91dAogICAgfQoKICAgIC8vLyBSZW1vdmVzIGFuIGVudGl0eSBmcm9tIHRoZSB3b3JsZAogICAgcHViIGZuIGRlc3Bhd24oJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgewogICAgICAgIGlmIGxldCBTb21lKGxvYykgPSBzZWxmLmJyaWRnZS5lbnRpdHkoZW50aXR5KSB7CiAgICAgICAgICAgIHNlbGYuYnJpZGdlLmVudGl0eV9kZXNwYXduKGxvYyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eSgmbXV0IHNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5jbG9uZV9lbnRpdHlfYXV4KGVpZCwgRW50aXR5Q2xvbmVGbGFnczo6bm9uX3JlY3Vyc2l2ZV9pZ25vcmVfbm9uX2Nsb25lKCkpCiAgICAgICAgICAgIC8vIFNBRkVUWTogbm9uLXJlY3Vyc2l2ZSwgaWdub3JlLW5vbi1jbG9uZSBuZXZlciBmYWlscwogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICAvLy8gQ2xvbmVzIGFuIGVudGl0eSBhbmQgYWxsIGl0J3MgY29tcG9uZW50cy4KICAgIHB1YiBmbiBjbG9uZV9lbnRpdHlfYXV4KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBlaWQ6IEVudGl0eSwKICAgICAgICBmbGFnczogRW50aXR5Q2xvbmVGbGFncywKICAgICkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgbGV0IGRzdCA9IHNlbGYuc3Bhd25fZW1wdHkoKS5pZCgpOwogICAgICAgIGxldCBlaWQgPSBzZWxmLmJyaWRnZS5lbnRpdHlfY2xvbmUoZWlkLCBkc3QsIGZsYWdzKT87CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVpZCkKICAgIH0KCiAgICAvLy8gQ2hlY2tzIGlmIGFuIGVudGl0eSB3aXRoIHRoaXMgSUQgZXhpc3RzCiAgICBwdWIgZm4gZXhpc3RzKCZzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gYm9vbCB7CiAgICAgICAgc2VsZi5icmlkZ2UuZW50aXR5KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbW92ZQogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbmFtZSB0byBgZW50aXR5YAogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eShlbnRpdHkpCiAgICAgICAgICAgIC5tYXAofGlubmVyfCB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9KQogICAgfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KfQoAAAAAAAAAAHAcAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnRUAAAAAAACdFQAAAAAAAAAAAAAAAPC/"
				],
				[
					41,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABwHAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6OmJvcnJvdzo6Q293OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uKCkKICAgIH0KCiAgICBwdWIgZm4gZ2V0X3NpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjwmbXV0IEM+IHsKICAgICAgICBzZWxmLmJyaWRnZS5zaW5nbGV0b25fbXV0KCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uPEM6IFNpbmdsZXRvbk1hcmtlcj4oJnNlbGYpIC0+ICZDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b24oKQogICAgICAgICAgICAub2tfb3JfZWxzZSh8fCBmb3JtYXQhKCJzaW5nbGV0b24gJ3t9JyBtdXN0IGV4aXN0Iiwgc3RkOjphbnk6OnR5cGVfbmFtZTo6PEM+KCkpKQogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uX211dDxDOiBTaW5nbGV0b25NYXJrZXI+KCZtdXQgc2VsZikgLT4gJm11dCBDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b25fbXV0KCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgLy8vIFNwYXducyBhIG5ldyBlbnRpdHkgd2l0aCBnaXZlbiBjb21wb25lbnRzCiAgICBwdWIgZm4gc3Bhd248QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigmbXV0IHNlbGYsIGFyZzogQSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIGFyZy5lbnRpdHlfc2V0X2NvbXBvbmVudHNfdHVwbGVfYXBwbHkoJm11dCBvdXQpOwogICAgICAgIG91dAogICAgfQoKICAgIHB1YihjcmF0ZSkgZm4gc3Bhd25fd2l0aF9pZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBpZDogRW50aXR5LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICAjW2NmZyhmZWF0dXJlID0gImV4dF9lbnRpdHlfbmFtZXMiKV0KICAgIHB1YiBmbiBzcGF3bl9uYW1lZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bihhcmcpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gQ3JlYXRlcyBhIG5ldyBlbXB0eSBlbnRpdHkKICAgIHB1YiBmbiBzcGF3bl9lbXB0eSgmbXV0IHNlbGYpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgaW5uZXIgPSBzZWxmLmJyaWRnZS5lbnRpdHlfc3Bhd24oKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmVudGl0eV9zcGF3bl93aXRoX2lkKGlkKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fZW1wdHlfbmFtZWQoJm11dCBzZWxmLCBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IG11dCBvdXQgPSBzZWxmLnNwYXduX2VtcHR5KCk7CiAgICAgICAgb3V0LnNldF9uYW1lKG5hbWUpOwogICAgICAgIG91dAogICAgfQoKICAgIC8vLyBSZW1vdmVzIGFuIGVudGl0eSBmcm9tIHRoZSB3b3JsZAogICAgcHViIGZuIGRlc3Bhd24oJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgewogICAgICAgIGlmIGxldCBTb21lKGxvYykgPSBzZWxmLmJyaWRnZS5lbnRpdHkoZW50aXR5KSB7CiAgICAgICAgICAgIHNlbGYuYnJpZGdlLmVudGl0eV9kZXNwYXduKGxvYyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eSgmbXV0IHNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5jbG9uZV9lbnRpdHlfYXV4KGVpZCwgRW50aXR5Q2xvbmVGbGFnczo6bm9uX3JlY3Vyc2l2ZV9pZ25vcmVfbm9uX2Nsb25lKCkpCiAgICAgICAgICAgIC8vIFNBRkVUWTogbm9uLXJlY3Vyc2l2ZSwgaWdub3JlLW5vbi1jbG9uZSBuZXZlciBmYWlscwogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICAvLy8gQ2xvbmVzIGFuIGVudGl0eSBhbmQgYWxsIGl0J3MgY29tcG9uZW50cy4KICAgIHB1YiBmbiBjbG9uZV9lbnRpdHlfYXV4KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBlaWQ6IEVudGl0eSwKICAgICAgICBmbGFnczogRW50aXR5Q2xvbmVGbGFncywKICAgICkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgbGV0IGRzdCA9IHNlbGYuc3Bhd25fZW1wdHkoKS5pZCgpOwogICAgICAgIGxldCBlaWQgPSBzZWxmLmJyaWRnZS5lbnRpdHlfY2xvbmUoZWlkLCBkc3QsIGZsYWdzKT87CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVpZCkKICAgIH0KCiAgICAvLy8gQ2hlY2tzIGlmIGFuIGVudGl0eSB3aXRoIHRoaXMgSUQgZXhpc3RzCiAgICBwdWIgZm4gZXhpc3RzKCZzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gYm9vbCB7CiAgICAgICAgc2VsZi5icmlkZ2UuZW50aXR5KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbW92ZQogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbmFtZSB0byBgZW50aXR5YAogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eShlbnRpdHkpCiAgICAgICAgICAgIC5tYXAofGlubmVyfCB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9KQogICAgfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KCiAgICBwdWIgZm4gdG9fY2Fzaygmc2VsZikgLT4gIFJlc3VsdDxDYXNrLCBDYXNrQnVpbGRlckVycm9yPiB7CiAgICAgICAgc2VsZi5mYWJyaWMoKS50b19jYXNrKCkKfQoAAAAAAAAAAHUcAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnRUAAAAAAACdFQAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB1HAAAdXNlIGNyYXRlOjp7CiAgICBFbnRpdHksIEVudGl0eUNsb25lRmxhZ3MsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgRW50aXR5V29ybGRNdXQsIEludG9TeXN0ZW0sIE11bHRpUXVlcnlBcmcsCiAgICBNdWx0aVF1ZXJ5QXJnRXJyb3IsIFF1ZXJ5LCBRdWVyeUJ1aWxkZXIsIFF1ZXJ5RmV0Y2gsIFF1ZXJ5RmlsdGVyLCBSZWxhdGlvbiwgUmVsYXRpb25NYXJrZXIsCiAgICBTaW5nbGV0b25NYXJrZXIsIFN0YXRpY1NpemVkU2VuZFN5bmNJZCwgU3lzdGVtSW5wdXQsCiAgICBkZXRhaWw6OntGYWJyaWMsIFVuc2FmZVdvcmxkQ2VsbCwgV29ybGRGYWJyaWNCcmlkZ2V9LAogICAgdHJhaXRzOjpTeXN0ZW0sCn07CnVzZSBzdGQ6OmJvcnJvdzo6Q293OwoKcHViIHN0cnVjdCBXb3JsZDxCPiB7CiAgICBpZDogV29ybGRJZCwKICAgIHB1YihjcmF0ZSkgYnJpZGdlOiBXb3JsZEZhYnJpY0JyaWRnZTxCPiwKfQoKLy8gVE9ETwojW2Rlcml2ZShDb3B5LCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgRGVmYXVsdCldCnB1YiBzdHJ1Y3QgV29ybGRJZDsKCmltcGw8Qj4gV29ybGQ8Qj4gewogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX3NoYXJlZCgmc2VsZikgLT4gVW5zYWZlV29ybGRDZWxsPCdfLCBCPiB7CiAgICAgICAgVW5zYWZlV29ybGRDZWxsOjpuZXdfc2hhcmVkKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIoY3JhdGUpIGZuIGFzX3Vuc2FmZV93b3JsZF9jZWxsX211dGFibGUoJm11dCBzZWxmKSAtPiBVbnNhZmVXb3JsZENlbGw8J18sIEI+IHsKICAgICAgICBVbnNhZmVXb3JsZENlbGw6Om5ld19tdXRhYmxlKHNlbGYpCiAgICB9CgogICAgI1tpbmxpbmVdCiAgICBwdWIgZm4gaWQoJnNlbGYpIC0+IFdvcmxkSWQgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljKCZzZWxmKSAtPiAmQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljKCkKICAgIH0KCiAgICAjW2lubGluZV0KICAgIHB1YihjcmF0ZSkgZm4gZmFicmljX211dCgmbXV0IHNlbGYpIC0+ICZtdXQgQiB7CiAgICAgICAgc2VsZi5icmlkZ2UuZmFicmljX211dCgpCiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBEZWZhdWx0IGZvciBXb3JsZDxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGlkOiBXb3JsZElkLAogICAgICAgICAgICBicmlkZ2U6IFdvcmxkRmFicmljQnJpZGdlOjpuZXcoKSwKICAgICAgICB9CiAgICB9Cn0KCmltcGw8QjogRmFicmljPiBXb3JsZDxCPiB7CiAgICBwdWIgZm4gbmV3KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZjo6ZGVmYXVsdCgpCiAgICB9CgogICAgcHViIGZuIHJlZ2lzdGVyX2NvbXBvbmVudDxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIHNlbGYuYnJpZGdlLnJlZ2lzdGVyX2NvbXBvbmVudDo6PEM+KCk7CiAgICB9CgogICAgcHViIGZuIHNldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYsIHZhbHVlOiBDKSAtPiBPcHRpb248Qz4gewogICAgICAgIHNlbGYuYnJpZGdlLnNpbmdsZXRvbl9zZXQodmFsdWUpCiAgICB9CgogICAgcHViIGZuIHJlbW92ZV9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjxDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uX3JlbW92ZSgpCiAgICB9CgogICAgcHViIGZuIGdldF9zaW5nbGV0b248QzogU2luZ2xldG9uTWFya2VyPigmc2VsZikgLT4gT3B0aW9uPCZDPiB7CiAgICAgICAgc2VsZi5icmlkZ2Uuc2luZ2xldG9uKCkKICAgIH0KCiAgICBwdWIgZm4gZ2V0X3NpbmdsZXRvbl9tdXQ8QzogU2luZ2xldG9uTWFya2VyPigmbXV0IHNlbGYpIC0+IE9wdGlvbjwmbXV0IEM+IHsKICAgICAgICBzZWxmLmJyaWRnZS5zaW5nbGV0b25fbXV0KCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uPEM6IFNpbmdsZXRvbk1hcmtlcj4oJnNlbGYpIC0+ICZDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b24oKQogICAgICAgICAgICAub2tfb3JfZWxzZSh8fCBmb3JtYXQhKCJzaW5nbGV0b24gJ3t9JyBtdXN0IGV4aXN0Iiwgc3RkOjphbnk6OnR5cGVfbmFtZTo6PEM+KCkpKQogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICBwdWIgZm4gc2luZ2xldG9uX211dDxDOiBTaW5nbGV0b25NYXJrZXI+KCZtdXQgc2VsZikgLT4gJm11dCBDIHsKICAgICAgICBzZWxmLmdldF9zaW5nbGV0b25fbXV0KCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZm9ybWF0ISgic2luZ2xldG9uICd7fScgbXVzdCBleGlzdCIsIHN0ZDo6YW55Ojp0eXBlX25hbWU6OjxDPigpKSkKICAgICAgICAgICAgLnVud3JhcCgpCiAgICB9CgogICAgLy8vIFNwYXducyBhIG5ldyBlbnRpdHkgd2l0aCBnaXZlbiBjb21wb25lbnRzCiAgICBwdWIgZm4gc3Bhd248QTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+PigmbXV0IHNlbGYsIGFyZzogQSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eSgpOwogICAgICAgIGFyZy5lbnRpdHlfc2V0X2NvbXBvbmVudHNfdHVwbGVfYXBwbHkoJm11dCBvdXQpOwogICAgICAgIG91dAogICAgfQoKICAgIHB1YihjcmF0ZSkgZm4gc3Bhd25fd2l0aF9pZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBpZDogRW50aXR5LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICBhcmcuZW50aXR5X3NldF9jb21wb25lbnRzX3R1cGxlX2FwcGx5KCZtdXQgb3V0KTsKICAgICAgICBvdXQKICAgIH0KCiAgICAjW2NmZyhmZWF0dXJlID0gImV4dF9lbnRpdHlfbmFtZXMiKV0KICAgIHB1YiBmbiBzcGF3bl9uYW1lZDxBOiBFbnRpdHlTZXRDb21wb25lbnRzVHVwbGU8Qj4+KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+LAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBtdXQgb3V0ID0gc2VsZi5zcGF3bihhcmcpOwogICAgICAgIG91dC5zZXRfbmFtZShuYW1lKTsKICAgICAgICBvdXQKICAgIH0KCiAgICAvLy8gQ3JlYXRlcyBhIG5ldyBlbXB0eSBlbnRpdHkKICAgIHB1YiBmbiBzcGF3bl9lbXB0eSgmbXV0IHNlbGYpIC0+IEVudGl0eVdvcmxkTXV0PEI+IHsKICAgICAgICBsZXQgaW5uZXIgPSBzZWxmLmJyaWRnZS5lbnRpdHlfc3Bhd24oKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBzcGF3bl9lbXB0eV93aXRoX2lkKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgLT4gRW50aXR5V29ybGRNdXQ8Qj4gewogICAgICAgIGxldCBpbm5lciA9IHNlbGYuYnJpZGdlLmVudGl0eV9zcGF3bl93aXRoX2lkKGlkKTsKICAgICAgICB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9CiAgICB9CgogICAgI1tjZmcoZmVhdHVyZSA9ICJleHRfZW50aXR5X25hbWVzIildCiAgICBwdWIgZm4gc3Bhd25fZW1wdHlfbmFtZWQoJm11dCBzZWxmLCBuYW1lOiBpbXBsIEludG88Q293PCdzdGF0aWMsIHN0cj4+KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgbGV0IG11dCBvdXQgPSBzZWxmLnNwYXduX2VtcHR5KCk7CiAgICAgICAgb3V0LnNldF9uYW1lKG5hbWUpOwogICAgICAgIG91dAogICAgfQoKICAgIC8vLyBSZW1vdmVzIGFuIGVudGl0eSBmcm9tIHRoZSB3b3JsZAogICAgcHViIGZuIGRlc3Bhd24oJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgewogICAgICAgIGlmIGxldCBTb21lKGxvYykgPSBzZWxmLmJyaWRnZS5lbnRpdHkoZW50aXR5KSB7CiAgICAgICAgICAgIHNlbGYuYnJpZGdlLmVudGl0eV9kZXNwYXduKGxvYyk7CiAgICAgICAgfQogICAgfQoKICAgIC8vLyBDbG9uZXMgYW4gZW50aXR5IGFuZCBhbGwgaXQncyBjb21wb25lbnRzLgogICAgcHViIGZuIGNsb25lX2VudGl0eSgmbXV0IHNlbGYsIGVpZDogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5jbG9uZV9lbnRpdHlfYXV4KGVpZCwgRW50aXR5Q2xvbmVGbGFnczo6bm9uX3JlY3Vyc2l2ZV9pZ25vcmVfbm9uX2Nsb25lKCkpCiAgICAgICAgICAgIC8vIFNBRkVUWTogbm9uLXJlY3Vyc2l2ZSwgaWdub3JlLW5vbi1jbG9uZSBuZXZlciBmYWlscwogICAgICAgICAgICAudW53cmFwKCkKICAgIH0KCiAgICAvLy8gQ2xvbmVzIGFuIGVudGl0eSBhbmQgYWxsIGl0J3MgY29tcG9uZW50cy4KICAgIHB1YiBmbiBjbG9uZV9lbnRpdHlfYXV4KAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBlaWQ6IEVudGl0eSwKICAgICAgICBmbGFnczogRW50aXR5Q2xvbmVGbGFncywKICAgICkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgbGV0IGRzdCA9IHNlbGYuc3Bhd25fZW1wdHkoKS5pZCgpOwogICAgICAgIGxldCBlaWQgPSBzZWxmLmJyaWRnZS5lbnRpdHlfY2xvbmUoZWlkLCBkc3QsIGZsYWdzKT87CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVpZCkKICAgIH0KCiAgICAvLy8gQ2hlY2tzIGlmIGFuIGVudGl0eSB3aXRoIHRoaXMgSUQgZXhpc3RzCiAgICBwdWIgZm4gZXhpc3RzKCZzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gYm9vbCB7CiAgICAgICAgc2VsZi5icmlkZ2UuZW50aXR5KGVudGl0eSkuaXNfc29tZSgpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbW92ZQogICAgcHViIGZuIGVudGl0eSgmbXV0IHNlbGYsIGVudGl0eTogRW50aXR5KSAtPiBFbnRpdHlXb3JsZE11dDxCPiB7CiAgICAgICAgc2VsZi5nZXRfZW50aXR5KGVudGl0eSkuZXhwZWN0KCJlbnRpdHkgbXVzdCBleGlzdCIpCiAgICB9CgogICAgLy8vIEZJWE1FIHJlbmFtZSB0byBgZW50aXR5YAogICAgcHViIGZuIGdldF9lbnRpdHkoJm11dCBzZWxmLCBlbnRpdHk6IEVudGl0eSkgLT4gT3B0aW9uPEVudGl0eVdvcmxkTXV0PEI+PiB7CiAgICAgICAgc2VsZi5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eShlbnRpdHkpCiAgICAgICAgICAgIC5tYXAofGlubmVyfCB1bnNhZmUgeyBFbnRpdHlXb3JsZE11dDo6bmV3KHNlbGYsIGlubmVyKSB9KQogICAgfQoKICAgIHB1YiBmbiBxdWVyeTxGZXRjaDogUXVlcnlGZXRjaD4oJm11dCBzZWxmKSAtPiBRdWVyeTxCLCBGZXRjaCwgKCk+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkPEZldGNoOiBRdWVyeUZldGNoLCBGaWx0ZXI6IFF1ZXJ5RmlsdGVyPigKICAgICAgICAmbXV0IHNlbGYsCiAgICApIC0+IFF1ZXJ5PEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICBzZWxmLnF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXIoKS5idWlsZCgpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2g+KCZtdXQgc2VsZikgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCAoKT4gewogICAgICAgIHNlbGYucXVlcnlfZmlsdGVyZWRfYnVpbGRlcigpCiAgICB9CgogICAgcHViIGZuIHF1ZXJ5X2ZpbHRlcmVkX2J1aWxkZXI8RmV0Y2g6IFF1ZXJ5RmV0Y2gsIEZpbHRlcjogUXVlcnlGaWx0ZXI+KAogICAgICAgICZtdXQgc2VsZiwKICAgICkgLT4gUXVlcnlCdWlsZGVyPEIsIEZldGNoLCBGaWx0ZXI+IHsKICAgICAgICAvLyBGSVhNRSBjaGVjayB0aGF0IGl0ZW1zIGRvIG5vdCBoYXZlIG92ZXJsYXBwaW5nIG93bmVyc2hpcAogICAgICAgIFF1ZXJ5QnVpbGRlcjo6bmV3KHNlbGYuaW50bygpKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtCiAgICBwdWIgZm4gcnVuPE0sIFMsIE91dHB1dD4oJm11dCBzZWxmLCBzeXM6IFMpIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9ICgpLCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bigoKSwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIC8vLyBSdW5zIGEgc3lzdGVtIHdoaWNoIHRha2VzIGFuIGlucHV0CiAgICBwdWIgZm4gcnVuX3dpdGhfaW5wdXQ8J3csIE0sIFMsIElucHV0LCBPdXRwdXQ+KAogICAgICAgICYndyBtdXQgc2VsZiwKICAgICAgICBpbnB1dDogSW5wdXQ6OklubmVyPCdfPiwKICAgICAgICBzeXM6IFMsCiAgICApIC0+IE91dHB1dAogICAgd2hlcmUKICAgICAgICBTOiBJbnRvU3lzdGVtPEIsIE0+LAogICAgICAgIElucHV0OiBTeXN0ZW1JbnB1dCwKICAgICAgICBmb3I8J2E+IDxTIGFzIEludG9TeXN0ZW08QiwgTT4+OjpTeXN0ZW06IFN5c3RlbTxCLCBJbnB1dCA9IElucHV0LCBPdXRwdXQgPSBPdXRwdXQ+LAogICAgewogICAgICAgIC8vIEZJWE1FIGNoZWNrIHRoYXQgaXRlbXMgZG8gbm90IGhhdmUgb3ZlcmxhcHBpbmcgb3duZXJzaGlwCiAgICAgICAgc3lzLmludG9fc3lzdGVtKCkKICAgICAgICAgICAgLnJ1bihpbnB1dCwgc2VsZi5pbnRvKCkpCiAgICAgICAgICAgIC5leHBlY3QoInN5c3RlbSBmYWlsZWQiKQogICAgfQoKICAgIHB1YiBmbiByZXRyZWl2ZTwndywgQTogTXVsdGlRdWVyeUFyZzxCPj4oCiAgICAgICAgJid3IG11dCBzZWxmLAogICAgKSAtPiBSZXN1bHQ8QTo6T3V0PCd3PiwgTXVsdGlRdWVyeUFyZ0Vycm9yPiB7CiAgICAgICAgLy8gRklYTUUgY2hlY2sgdGhhdCBpdGVtcyBkbyBub3QgaGF2ZSBvdmVybGFwcGluZyBvd25lcnNoaXAKICAgICAgICBBOjptdWx0aV9xdWVyeV9hcmdfYXBwbHkoc2VsZi5pbnRvKCkpCiAgICB9CgogICAgcHViIGZuIHJlbGF0aW9uPCd3LCBSOiBSZWxhdGlvbk1hcmtlcj4oJid3IHNlbGYpIC0+IFJlbGF0aW9uPCd3LCBCLCBSPiB7CiAgICAgICAgUmVsYXRpb246Om5ldyhzZWxmLmludG8oKSkKICAgIH0KCiAgICBwdWIgZm4gdG9fY2Fzaygmc2VsZikgLT4gUmVzdWx0PENhc2ssIENhc2tCdWlsZGVyRXJyb3I+IHsKICAgICAgICBzZWxmLmZhYnJpYygpLnRvX2Nhc2soKQogICAgfQp9CgAAAAAAAAAAmhwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAnRUAAAAAAACdFQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "/I/Ikabur/atom/crates/excess/src/commands.rs",
			"settings":
			{
				"buffer_size": 8803,
				"line_ending": "Windows"
			},
			"undo_stack":
			[
				[
					7,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB7HgAALy8gQ29weXJpZ2h0IDIwMjQgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6ewogICAgZGV0YWlsOjp7RmFicmljLCBVbnNhZmVXb3JsZENlbGx9LAogICAgRW50aXR5LCBFbnRpdHlTZXRBcmcsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgU2luZ2xldG9uTWFya2VyLCBTdGF0aWNTaXplZFNlbmRTeW5jSWQsIFdvcmxkLAp9Owp1c2UgZXhjZXNzX21hY3Jvczo6YWxsX3R1cGxlczsKCi8vLyBEZWZlcnJlZCBjb21tYW5kcyB0byBleGVjdXRlIG9uIGEgd29ybGQgYXQgdGhlIGVuZCBvZiBhIHN5c3RlbQovLy8KLy8vIENvbW1hbmRzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHdvcmsgd2hpbGUgb3RoZXIgcXVlcmllcyBoYXZlIHJlYWQgb3Igd3JpdGUgYWNjZXNzIHRvIHBhcnRzIG9mCi8vLyB0aGUgd29ybGQuIENvbW1hbmRzIGNhbiB0aGVuIGJlIGFwcGxpZWQgYWZ0ZXJ3YXJkcyB3aXRoIHVuaXF1ZSBhY2Nlc3MgdG8gdGhlIHdvcmxkLgovLy8KLy8vICMgRXhhbXBsZQovLy8gYGBgCi8vLyBzdHJ1Y3QgRm9vIHt9OwovLy8gZm4gZXhhbXBsZShtdXQgY29tbWFuZHM6IGF0b206OkNvbW1hbmRzKSB7Ci8vLyAgICAgbGV0IGVpZCA9IGNvbW1hbmRzLnNwYXduKChGb28ge30sIDNfaTMyKSkuaWQoKTsKLy8vICAgICAvLyB1c2UgZWlkLCBidXQgY29tcG9uZW50cyBhcmUgbm90IHlldCBhZGRlZAovLy8gfQovLy8gYGBgCnB1YiBzdHJ1Y3QgQ29tbWFuZHM8J2YsICdxLCBCPiB7CiAgICB3b3JsZF9pZF9nZW46IFVuc2FmZVdvcmxkQ2VsbDwnZiwgQj4sCiAgICBxdWV1ZTogJidxIG11dCBDb21tYW5kUXVldWU8Qj4sCn0KCmltcGw8J2YsICdxLCBCOiBGYWJyaWM+IENvbW1hbmRzPCdmLCAncSwgQj4gewogICAgcHViKGNyYXRlKSBmbiBuZXcoCiAgICAgICAgd29ybGRfaWRfZ2VuOiBVbnNhZmVXb3JsZENlbGw8J2YsIEI+LAogICAgICAgIHF1ZXVlOiAmJ3EgbXV0IENvbW1hbmRRdWV1ZTxCPiwKICAgICkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIHdvcmxkX2lkX2dlbiwKICAgICAgICAgICAgcXVldWUsCiAgICAgICAgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNwYXduX2VtcHR5PCdjPigmJ2MgbXV0IHNlbGYpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICAvLyBTQUZFVFk6IEl0IGlzIGFsd2F5cyBzYWZlIHRvIGlzc3VlIGEgbmV3IGVudGl0eSBJRAogICAgICAgIGxldCBpZCA9IHVuc2FmZSB7IHNlbGYud29ybGRfaWRfZ2VuLmdldF9tdXQoKSB9LmltcGxfaXNzdWVfZW50aXR5KCk7CgogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggY29tcG9uZW50cyBhZnRlciB0aGUgc3lzdGVtIGhhcyBjb25jbHVkZWQKICAgIHB1YiBmbiBzcGF3bjwnYywgQTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+ICsgJ3N0YXRpYyArIFNlbmQgKyBTeW5jPigKICAgICAgICAmJ2MgbXV0IHNlbGYsCiAgICAgICAgYXJnOiBBLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgLy8gU0FGRVRZOiBJdCBpcyBhbHdheXMgc2FmZSB0byBpc3N1ZSBhIG5ldyBlbnRpdHkgSUQKICAgICAgICBsZXQgaWQgPSB1bnNhZmUgeyBzZWxmLndvcmxkX2lkX2dlbi5nZXRfbXV0KCkgfS5pbXBsX2lzc3VlX2VudGl0eSgpOwoKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQuc3Bhd25fd2l0aF9pZChpZCwgYXJnKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBEZXNwYXducyBhbiBlbnRpdHkgYWZ0ZXIgdGhlIHN5c3RlbSBoYXMgY29uY2x1ZGVkCiAgICBwdWIgZm4gZGVzcGF3bigmbXV0IHNlbGYsIGlkOiBFbnRpdHkpIHsKICAgICAgICBzZWxmLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKGlkKSk7CiAgICB9CgogICAgLy8vIEdldHMgYWNjZXNzIHRvIG9wZXJhdGlvbnMgcmVsYXRlZCB0byBlbnRpdGllcwogICAgcHViIGZuIGVudGl0eTwnYz4oJidjIG11dCBzZWxmLCBpZDogRW50aXR5KSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTZXRzIGEgc2luZ2xldG9uIGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNldF9zaW5nbGV0b248J2MsIFM6IFNpbmdsZXRvbk1hcmtlcj4oJidjIG11dCBzZWxmLCB2YWx1ZTogUykgewogICAgICAgIHNlbGYucXVldWUKICAgICAgICAgICAgLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHdvcmxkLnNldF9zaW5nbGV0b24odmFsdWUpKTsKICAgIH0KCiAgICBwdWIgZm4gcmVtb3ZlX3NpbmdsZXRvbjwnYywgUzogU2luZ2xldG9uTWFya2VyPigmJ2MgbXV0IHNlbGYpIHsKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQucmVtb3ZlX3NpbmdsZXRvbjo6PFM+KCk7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8vLyBBbiBvcGVyYXRpb24gd2hpY2ggY2FuIGJlIGFkZGVkIHRvIGEgY29tbWFuZCBxdWV1ZQpwdWIgdHJhaXQgQ29tbWFuZDxCPjogU2VuZCArICdzdGF0aWMgewogICAgZm4gYXBwbHkoc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPFQ6IFNlbmQgKyAnc3RhdGljLCBCPiBDb21tYW5kPEI+IGZvciBUCndoZXJlCiAgICBUOiBGbk9uY2UoJm11dCBXb3JsZDxCPiksCnsKICAgIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgKHNlbGYpKHdvcmxkKQogICAgfQp9CgovLy8gSGVscGVyIHRyYWl0IGZvciBgQm94PGR5biBDb21tYW5kPmAgdG8gY2FsbCBjb25zdW1pbmcgYGFwcGx5YAp0cmFpdCBEeW5Db21tYW5kPEI+IHsKICAgIGZuIGFwcGx5KCZtdXQgc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPEM6IENvbW1hbmQ8Qj4sIEI+IER5bkNvbW1hbmQ8Qj4gZm9yIE9wdGlvbjxDPiB7CiAgICBmbiBhcHBseSgmbXV0IHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgc2VsZi50YWtlKCkudW53cmFwKCkuYXBwbHkod29ybGQpOwogICAgfQp9CgovLy8gQSBxdWV1ZSBvZiBjb21tYW5kcwpwdWIgc3RydWN0IENvbW1hbmRRdWV1ZTxCPiB7CiAgICBjb21tYW5kczogVmVjPEJveDxkeW4gRHluQ29tbWFuZDxCPj4+LAp9CgppbXBsPEI+IERlZmF1bHQgZm9yIENvbW1hbmRRdWV1ZTxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGNvbW1hbmRzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KfQoKaW1wbDxCPiBDb21tYW5kUXVldWU8Qj4gewogICAgLy8vIEFkZHMgYSBuZXcgY29tbWFuZCB0byB0aGUgZW5kIG9mIHRoZSBxdWV1ZQogICAgcHViIGZuIHB1c2g8QzogQ29tbWFuZDxCPj4oJm11dCBzZWxmLCBjb21tYW5kOiBDKSB7CiAgICAgICAgc2VsZi5jb21tYW5kcy5wdXNoKEJveDo6bmV3KFNvbWUoY29tbWFuZCkpKTsKICAgIH0KCiAgICAvLy8gQXBwbGllcyBhbGwgcXVldWVkIGNvbW1hbmRzIHRvIHRoZSB3b3JsZCBhbmQgY2xlYXJzIHRoZSBxdWV1ZQogICAgcHViIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgZm9yIG11dCBjb21tYW5kIGluIHNlbGYuY29tbWFuZHMuaW50b19pdGVyKCkgewogICAgICAgICAgICBjb21tYW5kLmFwcGx5KHdvcmxkKTsKICAgICAgICB9CiAgICB9Cn0KCi8vLyBDb21tYW5kcyBmb3IgZW50aXRpZXMKcHViIHN0cnVjdCBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICBjb21tYW5kczogJidjIG11dCBDb21tYW5kczwnZiwgJ3EsIEI+LAogICAgaWQ6IEVudGl0eSwKfQoKaW1wbDwnZiwgJ3EsICdjLCBCOiBGYWJyaWM+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgIC8vLyBHZXRzIHRoZSBJRCBvZiBhbiBlbnRpdHkKICAgIHB1YiBmbiBpZCgmc2VsZikgLT4gRW50aXR5IHsKICAgICAgICBzZWxmLmlkCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gYW5kX3NldDxBOiBFbnRpdHlTZXRBcmc8Qj4+KG11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gTWF5YmUgYWRkcyBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBhbmRfc2V0X3NvbWU8QTogRW50aXR5U2V0QXJnPEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICBtYXliZV9hcmc6IE9wdGlvbjxBPiwKICAgICkgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIGlmIGxldCBTb21lKGFyZykgPSBtYXliZV9hcmcgewogICAgICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIH0KICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gc2V0PEE6IEVudGl0eVNldEFyZzxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCBtYXRjaCB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICBOb25lID0+IHsKICAgICAgICAgICAgICAgICAgICBlcHJpbnRsbiEoImNvdWxkIG5vdCBzZXQgZW50aXR5OiB7aWQ6P30iLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKG11dCBlbnRpdHkpID0+IGFyZy5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSksCiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vLyBBZGRzIG11bHRpcGxlIGNvbXBvbmVudHMgdG8gYW4gZW50aXR5IGF0IG9uY2UuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQKICAgIC8vLyBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9zZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICB2YWx1ZXM6IENDLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgc2VsZi5zZXRfbWFueSh2YWx1ZXMpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gQWRkcyBtdWx0aXBsZSBjb21wb25lbnRzIHRvIGFuIGVudGl0eSBhdCBvbmNlLiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kCiAgICAvLy8gb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBzZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigmbXV0IHNlbGYsIHZhbHVlczogQ0MpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB2YWx1ZXMuYXBwbHkoaWQsIHdvcmxkKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9yZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPihtdXQgc2VsZikgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIHNlbGYucmVtb3ZlOjo8Qz4oKTsKICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIFJlbW92ZXMgYSBjb21wb25lbnQgZnJvbSBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiByZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPigmbXV0IHNlbGYpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaCgKICAgICAgICAgICAgbW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IG1hdGNoIHdvcmxkLmltcGxfbG9jYXRlX2VudGl0eShpZCkgewogICAgICAgICAgICAgICAgTm9uZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3QgcmVtb3ZlIGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKGVudGl0eSkgPT4gd29ybGQuaW1wbF9yZW1vdmVfY29tcG9uZW50KGVudGl0eSwgQzo6aWQoKSksCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIH0KCiAgICAvLy8gRGVzcGF3bnMgdGhlIGVudGl0eQogICAgcHViIGZuIGRlc3Bhd24oc2VsZikgewogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKHNlbGYuaWQpKTsKICAgIH0KfQoKcHViIHRyYWl0IEVudGl0eUNvbW1hbmRzU2V0TWFueTxCPiB7CiAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPik7Cn0KCm1hY3JvX3J1bGVzISB0YWJsZV9yb3cgewogICAgKCQoJGE6IGlkZW50KSwqKSA9PiB7CiAgICAgICAgI1thbGxvdyhub25fc25ha2VfY2FzZSldCiAgICAgICAgaW1wbDxCOiBGYWJyaWMsICQoJGE6IEVudGl0eVNldEFyZzxCPiksKj4gRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+IGZvciAoJCgkYSwpKikgewogICAgICAgICAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPikgewogICAgICAgICAgICAgICAgaWYgbGV0IFNvbWUobXV0IGVudGl0eSkgPSB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0ICgkKCRhLCkqKSA9IHNlbGY7CiAgICAgICAgICAgICAgICAgICAgJCgkYS5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSk7KSoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3Qgc2V0IGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Owp9CgphbGxfdHVwbGVzISh0YWJsZV9yb3csIDEsIDE2LCBBKTsKAAAAAAAAAACfHgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOgQAAAAAAAA6BAAAAAAAAAAAAAAAAPC/"
				],
				[
					8,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACfHgAALy8gQ29weXJpZ2h0IDIwMjQgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6ewogICAgRW50aXR5LCBFbnRpdHlTZXRBcmcsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgU2luZ2xldG9uTWFya2VyLCBTdGF0aWNTaXplZFNlbmRTeW5jSWQsIFdvcmxkLAogICAgZGV0YWlsOjp7RmFicmljLCBVbnNhZmVXb3JsZENlbGx9LAp9Owp1c2UgZXhjZXNzX21hY3Jvczo6YWxsX3R1cGxlczsKCi8vLyBEZWZlcnJlZCBjb21tYW5kcyB0byBleGVjdXRlIG9uIGEgd29ybGQgYXQgdGhlIGVuZCBvZiBhIHN5c3RlbQovLy8KLy8vIENvbW1hbmRzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHdvcmsgd2hpbGUgb3RoZXIgcXVlcmllcyBoYXZlIHJlYWQgb3Igd3JpdGUgYWNjZXNzIHRvIHBhcnRzIG9mCi8vLyB0aGUgd29ybGQuIENvbW1hbmRzIGNhbiB0aGVuIGJlIGFwcGxpZWQgYWZ0ZXJ3YXJkcyB3aXRoIHVuaXF1ZSBhY2Nlc3MgdG8gdGhlIHdvcmxkLgovLy8KLy8vICMgRXhhbXBsZQovLy8gYGBgCi8vLyBzdHJ1Y3QgRm9vIHt9OwovLy8gZm4gZXhhbXBsZShtdXQgY29tbWFuZHM6IGF0b206OkNvbW1hbmRzKSB7Ci8vLyAgICAgbGV0IGVpZCA9IGNvbW1hbmRzLnNwYXduKChGb28ge30sIDNfaTMyKSkuaWQoKTsKLy8vICAgICAvLyB1c2UgZWlkLCBidXQgY29tcG9uZW50cyBhcmUgbm90IHlldCBhZGRlZAovLy8gfQovLy8gYGBgCnB1YiBzdHJ1Y3QgQ29tbWFuZHM8J2YsICdxLCBCPiB7CiAgICB3b3JsZF9pZF9nZW46IFVuc2FmZVdvcmxkQ2VsbDwnZiwgQj4sCiAgICBxdWV1ZTogJidxIG11dCBDb21tYW5kUXVldWU8Qj4sCn0KCmltcGw8J2YsICdxLCBCOiBGYWJyaWM+IENvbW1hbmRzPCdmLCAncSwgQj4gewogICAgcHViKGNyYXRlKSBmbiBuZXcoCiAgICAgICAgd29ybGRfaWRfZ2VuOiBVbnNhZmVXb3JsZENlbGw8J2YsIEI+LAogICAgICAgIHF1ZXVlOiAmJ3EgbXV0IENvbW1hbmRRdWV1ZTxCPiwKICAgICkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIHdvcmxkX2lkX2dlbiwKICAgICAgICAgICAgcXVldWUsCiAgICAgICAgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNwYXduX2VtcHR5PCdjPigmJ2MgbXV0IHNlbGYpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICAvLyBTQUZFVFk6IEl0IGlzIGFsd2F5cyBzYWZlIHRvIGlzc3VlIGEgbmV3IGVudGl0eSBJRAogICAgICAgIGxldCBpZCA9IHVuc2FmZSB7IHNlbGYud29ybGRfaWRfZ2VuLmdldF9tdXQoKSB9LmltcGxfaXNzdWVfZW50aXR5KCk7CgogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggY29tcG9uZW50cyBhZnRlciB0aGUgc3lzdGVtIGhhcyBjb25jbHVkZWQKICAgIHB1YiBmbiBzcGF3bjwnYywgQTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+ICsgJ3N0YXRpYyArIFNlbmQgKyBTeW5jPigKICAgICAgICAmJ2MgbXV0IHNlbGYsCiAgICAgICAgYXJnOiBBLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgLy8gU0FGRVRZOiBJdCBpcyBhbHdheXMgc2FmZSB0byBpc3N1ZSBhIG5ldyBlbnRpdHkgSUQKICAgICAgICBsZXQgaWQgPSB1bnNhZmUgeyBzZWxmLndvcmxkX2lkX2dlbi5nZXRfbXV0KCkgfS5pbXBsX2lzc3VlX2VudGl0eSgpOwoKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQuc3Bhd25fd2l0aF9pZChpZCwgYXJnKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBEZXNwYXducyBhbiBlbnRpdHkgYWZ0ZXIgdGhlIHN5c3RlbSBoYXMgY29uY2x1ZGVkCiAgICBwdWIgZm4gZGVzcGF3bigmbXV0IHNlbGYsIGlkOiBFbnRpdHkpIHsKICAgICAgICBzZWxmLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKGlkKSk7CiAgICB9CgogICAgLy8vIEdldHMgYWNjZXNzIHRvIG9wZXJhdGlvbnMgcmVsYXRlZCB0byBlbnRpdGllcwogICAgcHViIGZuIGVudGl0eTwnYz4oJidjIG11dCBzZWxmLCBpZDogRW50aXR5KSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTZXRzIGEgc2luZ2xldG9uIGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNldF9zaW5nbGV0b248J2MsIFM6IFNpbmdsZXRvbk1hcmtlcj4oJidjIG11dCBzZWxmLCB2YWx1ZTogUykgewogICAgICAgIHNlbGYucXVldWUKICAgICAgICAgICAgLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHdvcmxkLnNldF9zaW5nbGV0b24odmFsdWUpKTsKICAgIH0KCiAgICBwdWIgZm4gcmVtb3ZlX3NpbmdsZXRvbjwnYywgUzogU2luZ2xldG9uTWFya2VyPigmJ2MgbXV0IHNlbGYpIHsKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQucmVtb3ZlX3NpbmdsZXRvbjo6PFM+KCk7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8vLyBBbiBvcGVyYXRpb24gd2hpY2ggY2FuIGJlIGFkZGVkIHRvIGEgY29tbWFuZCBxdWV1ZQpwdWIgdHJhaXQgQ29tbWFuZDxCPjogU2VuZCArICdzdGF0aWMgewogICAgZm4gYXBwbHkoc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPFQ6IFNlbmQgKyAnc3RhdGljLCBCPiBDb21tYW5kPEI+IGZvciBUCndoZXJlCiAgICBUOiBGbk9uY2UoJm11dCBXb3JsZDxCPiksCnsKICAgIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgKHNlbGYpKHdvcmxkKQogICAgfQp9CgovLy8gSGVscGVyIHRyYWl0IGZvciBgQm94PGR5biBDb21tYW5kPmAgdG8gY2FsbCBjb25zdW1pbmcgYGFwcGx5YAp0cmFpdCBEeW5Db21tYW5kPEI+IHsKICAgIGZuIGFwcGx5KCZtdXQgc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPEM6IENvbW1hbmQ8Qj4sIEI+IER5bkNvbW1hbmQ8Qj4gZm9yIE9wdGlvbjxDPiB7CiAgICBmbiBhcHBseSgmbXV0IHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgc2VsZi50YWtlKCkudW53cmFwKCkuYXBwbHkod29ybGQpOwogICAgfQp9CgovLy8gQSBxdWV1ZSBvZiBjb21tYW5kcwpwdWIgc3RydWN0IENvbW1hbmRRdWV1ZTxCPiB7CiAgICBjb21tYW5kczogVmVjPEJveDxkeW4gRHluQ29tbWFuZDxCPj4+LAp9CgppbXBsPEI+IERlZmF1bHQgZm9yIENvbW1hbmRRdWV1ZTxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGNvbW1hbmRzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KfQoKaW1wbDxCPiBDb21tYW5kUXVldWU8Qj4gewogICAgLy8vIEFkZHMgYSBuZXcgY29tbWFuZCB0byB0aGUgZW5kIG9mIHRoZSBxdWV1ZQogICAgcHViIGZuIHB1c2g8QzogQ29tbWFuZDxCPj4oJm11dCBzZWxmLCBjb21tYW5kOiBDKSB7CiAgICAgICAgc2VsZi5jb21tYW5kcy5wdXNoKEJveDo6bmV3KFNvbWUoY29tbWFuZCkpKTsKICAgIH0KCiAgICAvLy8gQXBwbGllcyBhbGwgcXVldWVkIGNvbW1hbmRzIHRvIHRoZSB3b3JsZCBhbmQgY2xlYXJzIHRoZSBxdWV1ZQogICAgcHViIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgZm9yIG11dCBjb21tYW5kIGluIHNlbGYuY29tbWFuZHMuaW50b19pdGVyKCkgewogICAgICAgICAgICBjb21tYW5kLmFwcGx5KHdvcmxkKTsKICAgICAgICB9CiAgICB9Cn0KCi8vLyBDb21tYW5kcyBmb3IgZW50aXRpZXMKcHViIHN0cnVjdCBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICBjb21tYW5kczogJidjIG11dCBDb21tYW5kczwnZiwgJ3EsIEI+LAogICAgaWQ6IEVudGl0eSwKfQoKaW1wbDwnZiwgJ3EsICdjLCBCOiBGYWJyaWM+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgIC8vLyBHZXRzIHRoZSBJRCBvZiBhbiBlbnRpdHkKICAgIHB1YiBmbiBpZCgmc2VsZikgLT4gRW50aXR5IHsKICAgICAgICBzZWxmLmlkCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gYW5kX3NldDxBOiBFbnRpdHlTZXRBcmc8Qj4+KG11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gTWF5YmUgYWRkcyBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBhbmRfc2V0X3NvbWU8QTogRW50aXR5U2V0QXJnPEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICBtYXliZV9hcmc6IE9wdGlvbjxBPiwKICAgICkgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIGlmIGxldCBTb21lKGFyZykgPSBtYXliZV9hcmcgewogICAgICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIH0KICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gc2V0PEE6IEVudGl0eVNldEFyZzxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCBtYXRjaCB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICBOb25lID0+IHsKICAgICAgICAgICAgICAgICAgICBlcHJpbnRsbiEoImNvdWxkIG5vdCBzZXQgZW50aXR5OiB7aWQ6P30iLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKG11dCBlbnRpdHkpID0+IGFyZy5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSksCiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vLyBBZGRzIG11bHRpcGxlIGNvbXBvbmVudHMgdG8gYW4gZW50aXR5IGF0IG9uY2UuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQKICAgIC8vLyBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9zZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICB2YWx1ZXM6IENDLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgc2VsZi5zZXRfbWFueSh2YWx1ZXMpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gQWRkcyBtdWx0aXBsZSBjb21wb25lbnRzIHRvIGFuIGVudGl0eSBhdCBvbmNlLiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kCiAgICAvLy8gb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBzZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigmbXV0IHNlbGYsIHZhbHVlczogQ0MpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB2YWx1ZXMuYXBwbHkoaWQsIHdvcmxkKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9yZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPihtdXQgc2VsZikgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIHNlbGYucmVtb3ZlOjo8Qz4oKTsKICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIFJlbW92ZXMgYSBjb21wb25lbnQgZnJvbSBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiByZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPigmbXV0IHNlbGYpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaCgKICAgICAgICAgICAgbW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IG1hdGNoIHdvcmxkLmltcGxfbG9jYXRlX2VudGl0eShpZCkgewogICAgICAgICAgICAgICAgTm9uZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3QgcmVtb3ZlIGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKGVudGl0eSkgPT4gewogICAgICAgICAgICAgICAgICAgIHdvcmxkLmltcGxfcmVtb3ZlX2NvbXBvbmVudDo6PEM+KGVudGl0eSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIH0KCiAgICAvLy8gRGVzcGF3bnMgdGhlIGVudGl0eQogICAgcHViIGZuIGRlc3Bhd24oc2VsZikgewogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKHNlbGYuaWQpKTsKICAgIH0KfQoKcHViIHRyYWl0IEVudGl0eUNvbW1hbmRzU2V0TWFueTxCPiB7CiAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPik7Cn0KCm1hY3JvX3J1bGVzISB0YWJsZV9yb3cgewogICAgKCQoJGE6IGlkZW50KSwqKSA9PiB7CiAgICAgICAgI1thbGxvdyhub25fc25ha2VfY2FzZSldCiAgICAgICAgaW1wbDxCOiBGYWJyaWMsICQoJGE6IEVudGl0eVNldEFyZzxCPiksKj4gRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+IGZvciAoJCgkYSwpKikgewogICAgICAgICAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPikgewogICAgICAgICAgICAgICAgaWYgbGV0IFNvbWUobXV0IGVudGl0eSkgPSB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0ICgkKCRhLCkqKSA9IHNlbGY7CiAgICAgICAgICAgICAgICAgICAgJCgkYS5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSk7KSoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3Qgc2V0IGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Owp9CgphbGxfdHVwbGVzISh0YWJsZV9yb3csIDEsIDE2LCBBKTsKAAAAAAAAAACrHgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOgQAAAAAAAA6BAAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACrHgAALy8gQ29weXJpZ2h0IDIwMjQgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6ewogICAgRW50aXR5LCBFbnRpdHlTZXRBcmcsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgU2luZ2xldG9uTWFya2VyLCBTdGF0aWNTaXplZFNlbmRTeW5jSWQsIFdvcmxkLAogICAgZGV0YWlsOjp7RmFicmljLCBVbnNhZmVXb3JsZENlbGx9LAp9Owp1c2UgZXhjZXNzX21hY3Jvczo6YWxsX3R1cGxlczsKCi8vLyBEZWZlcnJlZCBjb21tYW5kcyB0byBleGVjdXRlIG9uIGEgd29ybGQgYXQgdGhlIGVuZCBvZiBhIHN5c3RlbQovLy8KLy8vIENvbW1hbmRzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHdvcmsgd2hpbGUgb3RoZXIgcXVlcmllcyBoYXZlIHJlYWQgb3Igd3JpdGUgYWNjZXNzIHRvIHBhcnRzIG9mCi8vLyB0aGUgd29ybGQuIENvbW1hbmRzIGNhbiB0aGVuIGJlIGFwcGxpZWQgYWZ0ZXJ3YXJkcyB3aXRoIHVuaXF1ZSBhY2Nlc3MgdG8gdGhlIHdvcmxkLgovLy8KLy8vICMgRXhhbXBsZQovLy8gYGBgCi8vLyBzdHJ1Y3QgRm9vIHt9OwovLy8gZm4gZXhhbXBsZShtdXQgY29tbWFuZHM6IGF0b206OkNvbW1hbmRzKSB7Ci8vLyAgICAgbGV0IGVpZCA9IGNvbW1hbmRzLnNwYXduKChGb28ge30sIDNfaTMyKSkuaWQoKTsKLy8vICAgICAvLyB1c2UgZWlkLCBidXQgY29tcG9uZW50cyBhcmUgbm90IHlldCBhZGRlZAovLy8gfQovLy8gYGBgCnB1YiBzdHJ1Y3QgQ29tbWFuZHM8J2YsICdxLCBCPiB7CiAgICB3b3JsZF9pZF9nZW46IFVuc2FmZVdvcmxkQ2VsbDwnZiwgQj4sCiAgICBxdWV1ZTogJidxIG11dCBDb21tYW5kUXVldWU8Qj4sCn0KCmltcGw8J2YsICdxLCBCOiBGYWJyaWM+IENvbW1hbmRzPCdmLCAncSwgQj4gewogICAgcHViKGNyYXRlKSBmbiBuZXcoCiAgICAgICAgd29ybGRfaWRfZ2VuOiBVbnNhZmVXb3JsZENlbGw8J2YsIEI+LAogICAgICAgIHF1ZXVlOiAmJ3EgbXV0IENvbW1hbmRRdWV1ZTxCPiwKICAgICkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIHdvcmxkX2lkX2dlbiwKICAgICAgICAgICAgcXVldWUsCiAgICAgICAgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNwYXduX2VtcHR5PCdjPigmJ2MgbXV0IHNlbGYpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICAvLyBTQUZFVFk6IEl0IGlzIGFsd2F5cyBzYWZlIHRvIGlzc3VlIGEgbmV3IGVudGl0eSBJRAogICAgICAgIGxldCBpZCA9IHVuc2FmZSB7IHNlbGYud29ybGRfaWRfZ2VuLmdldF9tdXQoKSB9LmltcGxfaXNzdWVfZW50aXR5KCk7CgogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggY29tcG9uZW50cyBhZnRlciB0aGUgc3lzdGVtIGhhcyBjb25jbHVkZWQKICAgIHB1YiBmbiBzcGF3bjwnYywgQTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+ICsgJ3N0YXRpYyArIFNlbmQgKyBTeW5jPigKICAgICAgICAmJ2MgbXV0IHNlbGYsCiAgICAgICAgYXJnOiBBLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgLy8gU0FGRVRZOiBJdCBpcyBhbHdheXMgc2FmZSB0byBpc3N1ZSBhIG5ldyBlbnRpdHkgSUQKICAgICAgICBsZXQgaWQgPSB1bnNhZmUgeyBzZWxmLndvcmxkX2lkX2dlbi5nZXRfbXV0KCkgfS5pbXBsX2lzc3VlX2VudGl0eSgpOwoKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQuc3Bhd25fd2l0aF9pZChpZCwgYXJnKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBEZXNwYXducyBhbiBlbnRpdHkgYWZ0ZXIgdGhlIHN5c3RlbSBoYXMgY29uY2x1ZGVkCiAgICBwdWIgZm4gZGVzcGF3bigmbXV0IHNlbGYsIGlkOiBFbnRpdHkpIHsKICAgICAgICBzZWxmLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKGlkKSk7CiAgICB9CgogICAgLy8vIEdldHMgYWNjZXNzIHRvIG9wZXJhdGlvbnMgcmVsYXRlZCB0byBlbnRpdGllcwogICAgcHViIGZuIGVudGl0eTwnYz4oJidjIG11dCBzZWxmLCBpZDogRW50aXR5KSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTZXRzIGEgc2luZ2xldG9uIGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNldF9zaW5nbGV0b248J2MsIFM6IFNpbmdsZXRvbk1hcmtlcj4oJidjIG11dCBzZWxmLCB2YWx1ZTogUykgewogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zZXRfc2luZ2xldG9uKHZhbHVlKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBwdWIgZm4gcmVtb3ZlX3NpbmdsZXRvbjwnYywgUzogU2luZ2xldG9uTWFya2VyPigmJ2MgbXV0IHNlbGYpIHsKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQucmVtb3ZlX3NpbmdsZXRvbjo6PFM+KCk7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8vLyBBbiBvcGVyYXRpb24gd2hpY2ggY2FuIGJlIGFkZGVkIHRvIGEgY29tbWFuZCBxdWV1ZQpwdWIgdHJhaXQgQ29tbWFuZDxCPjogU2VuZCArICdzdGF0aWMgewogICAgZm4gYXBwbHkoc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPFQ6IFNlbmQgKyAnc3RhdGljLCBCPiBDb21tYW5kPEI+IGZvciBUCndoZXJlCiAgICBUOiBGbk9uY2UoJm11dCBXb3JsZDxCPiksCnsKICAgIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgKHNlbGYpKHdvcmxkKQogICAgfQp9CgovLy8gSGVscGVyIHRyYWl0IGZvciBgQm94PGR5biBDb21tYW5kPmAgdG8gY2FsbCBjb25zdW1pbmcgYGFwcGx5YAp0cmFpdCBEeW5Db21tYW5kPEI+IHsKICAgIGZuIGFwcGx5KCZtdXQgc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPEM6IENvbW1hbmQ8Qj4sIEI+IER5bkNvbW1hbmQ8Qj4gZm9yIE9wdGlvbjxDPiB7CiAgICBmbiBhcHBseSgmbXV0IHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgc2VsZi50YWtlKCkudW53cmFwKCkuYXBwbHkod29ybGQpOwogICAgfQp9CgovLy8gQSBxdWV1ZSBvZiBjb21tYW5kcwpwdWIgc3RydWN0IENvbW1hbmRRdWV1ZTxCPiB7CiAgICBjb21tYW5kczogVmVjPEJveDxkeW4gRHluQ29tbWFuZDxCPj4+LAp9CgppbXBsPEI+IERlZmF1bHQgZm9yIENvbW1hbmRRdWV1ZTxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGNvbW1hbmRzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KfQoKaW1wbDxCPiBDb21tYW5kUXVldWU8Qj4gewogICAgLy8vIEFkZHMgYSBuZXcgY29tbWFuZCB0byB0aGUgZW5kIG9mIHRoZSBxdWV1ZQogICAgcHViIGZuIHB1c2g8QzogQ29tbWFuZDxCPj4oJm11dCBzZWxmLCBjb21tYW5kOiBDKSB7CiAgICAgICAgc2VsZi5jb21tYW5kcy5wdXNoKEJveDo6bmV3KFNvbWUoY29tbWFuZCkpKTsKICAgIH0KCiAgICAvLy8gQXBwbGllcyBhbGwgcXVldWVkIGNvbW1hbmRzIHRvIHRoZSB3b3JsZCBhbmQgY2xlYXJzIHRoZSBxdWV1ZQogICAgcHViIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgZm9yIG11dCBjb21tYW5kIGluIHNlbGYuY29tbWFuZHMuaW50b19pdGVyKCkgewogICAgICAgICAgICBjb21tYW5kLmFwcGx5KHdvcmxkKTsKICAgICAgICB9CiAgICB9Cn0KCi8vLyBDb21tYW5kcyBmb3IgZW50aXRpZXMKcHViIHN0cnVjdCBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICBjb21tYW5kczogJidjIG11dCBDb21tYW5kczwnZiwgJ3EsIEI+LAogICAgaWQ6IEVudGl0eSwKfQoKaW1wbDwnZiwgJ3EsICdjLCBCOiBGYWJyaWM+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgIC8vLyBHZXRzIHRoZSBJRCBvZiBhbiBlbnRpdHkKICAgIHB1YiBmbiBpZCgmc2VsZikgLT4gRW50aXR5IHsKICAgICAgICBzZWxmLmlkCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gYW5kX3NldDxBOiBFbnRpdHlTZXRBcmc8Qj4+KG11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gTWF5YmUgYWRkcyBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBhbmRfc2V0X3NvbWU8QTogRW50aXR5U2V0QXJnPEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICBtYXliZV9hcmc6IE9wdGlvbjxBPiwKICAgICkgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIGlmIGxldCBTb21lKGFyZykgPSBtYXliZV9hcmcgewogICAgICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIH0KICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gc2V0PEE6IEVudGl0eVNldEFyZzxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCBtYXRjaCB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICBOb25lID0+IHsKICAgICAgICAgICAgICAgICAgICBlcHJpbnRsbiEoImNvdWxkIG5vdCBzZXQgZW50aXR5OiB7aWQ6P30iLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKG11dCBlbnRpdHkpID0+IGFyZy5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSksCiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vLyBBZGRzIG11bHRpcGxlIGNvbXBvbmVudHMgdG8gYW4gZW50aXR5IGF0IG9uY2UuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQKICAgIC8vLyBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9zZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICB2YWx1ZXM6IENDLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgc2VsZi5zZXRfbWFueSh2YWx1ZXMpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gQWRkcyBtdWx0aXBsZSBjb21wb25lbnRzIHRvIGFuIGVudGl0eSBhdCBvbmNlLiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kCiAgICAvLy8gb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBzZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigmbXV0IHNlbGYsIHZhbHVlczogQ0MpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB2YWx1ZXMuYXBwbHkoaWQsIHdvcmxkKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9yZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPihtdXQgc2VsZikgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIHNlbGYucmVtb3ZlOjo8Qz4oKTsKICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIFJlbW92ZXMgYSBjb21wb25lbnQgZnJvbSBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiByZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPigmbXV0IHNlbGYpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaCgKICAgICAgICAgICAgbW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IG1hdGNoIHdvcmxkLmltcGxfbG9jYXRlX2VudGl0eShpZCkgewogICAgICAgICAgICAgICAgTm9uZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3QgcmVtb3ZlIGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKGVudGl0eSkgPT4gewogICAgICAgICAgICAgICAgICAgIHdvcmxkLmltcGxfcmVtb3ZlX2NvbXBvbmVudDo6PEM+KGVudGl0eSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIH0KCiAgICAvLy8gRGVzcGF3bnMgdGhlIGVudGl0eQogICAgcHViIGZuIGRlc3Bhd24oc2VsZikgewogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKHNlbGYuaWQpKTsKICAgIH0KfQoKcHViIHRyYWl0IEVudGl0eUNvbW1hbmRzU2V0TWFueTxCPiB7CiAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPik7Cn0KCm1hY3JvX3J1bGVzISB0YWJsZV9yb3cgewogICAgKCQoJGE6IGlkZW50KSwqKSA9PiB7CiAgICAgICAgI1thbGxvdyhub25fc25ha2VfY2FzZSldCiAgICAgICAgaW1wbDxCOiBGYWJyaWMsICQoJGE6IEVudGl0eVNldEFyZzxCPiksKj4gRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+IGZvciAoJCgkYSwpKikgewogICAgICAgICAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPikgewogICAgICAgICAgICAgICAgaWYgbGV0IFNvbWUobXV0IGVudGl0eSkgPSB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0ICgkKCRhLCkqKSA9IHNlbGY7CiAgICAgICAgICAgICAgICAgICAgJCgkYS5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSk7KSoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3Qgc2V0IGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Owp9CgphbGxfdHVwbGVzISh0YWJsZV9yb3csIDEsIDE2LCBBKTsKAAAAAAAAAADtHgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOgQAAAAAAAA6BAAAAAAAAAAAAAAAAPC/"
				],
				[
					10,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADtHgAALy8gQ29weXJpZ2h0IDIwMjQgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6ewogICAgRW50aXR5LCBFbnRpdHlTZXRBcmcsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgU2luZ2xldG9uTWFya2VyLCBTdGF0aWNTaXplZFNlbmRTeW5jSWQsIFdvcmxkLAogICAgZGV0YWlsOjp7RmFicmljLCBVbnNhZmVXb3JsZENlbGx9LAp9Owp1c2UgZXhjZXNzX21hY3Jvczo6YWxsX3R1cGxlczsKCi8vLyBEZWZlcnJlZCBjb21tYW5kcyB0byBleGVjdXRlIG9uIGEgd29ybGQgYXQgdGhlIGVuZCBvZiBhIHN5c3RlbQovLy8KLy8vIENvbW1hbmRzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHdvcmsgd2hpbGUgb3RoZXIgcXVlcmllcyBoYXZlIHJlYWQgb3Igd3JpdGUgYWNjZXNzIHRvIHBhcnRzIG9mCi8vLyB0aGUgd29ybGQuIENvbW1hbmRzIGNhbiB0aGVuIGJlIGFwcGxpZWQgYWZ0ZXJ3YXJkcyB3aXRoIHVuaXF1ZSBhY2Nlc3MgdG8gdGhlIHdvcmxkLgovLy8KLy8vICMgRXhhbXBsZQovLy8gYGBgCi8vLyBzdHJ1Y3QgRm9vIHt9OwovLy8gZm4gZXhhbXBsZShtdXQgY29tbWFuZHM6IGF0b206OkNvbW1hbmRzKSB7Ci8vLyAgICAgbGV0IGVpZCA9IGNvbW1hbmRzLnNwYXduKChGb28ge30sIDNfaTMyKSkuaWQoKTsKLy8vICAgICAvLyB1c2UgZWlkLCBidXQgY29tcG9uZW50cyBhcmUgbm90IHlldCBhZGRlZAovLy8gfQovLy8gYGBgCnB1YiBzdHJ1Y3QgQ29tbWFuZHM8J2YsICdxLCBCPiB7CiAgICB3b3JsZF9pZF9nZW46IFVuc2FmZVdvcmxkQ2VsbDwnZiwgQj4sCiAgICBxdWV1ZTogJidxIG11dCBDb21tYW5kUXVldWU8Qj4sCn0KCmltcGw8J2YsICdxLCBCOiBGYWJyaWM+IENvbW1hbmRzPCdmLCAncSwgQj4gewogICAgcHViKGNyYXRlKSBmbiBuZXcoCiAgICAgICAgd29ybGRfaWRfZ2VuOiBVbnNhZmVXb3JsZENlbGw8J2YsIEI+LAogICAgICAgIHF1ZXVlOiAmJ3EgbXV0IENvbW1hbmRRdWV1ZTxCPiwKICAgICkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIHdvcmxkX2lkX2dlbiwKICAgICAgICAgICAgcXVldWUsCiAgICAgICAgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNwYXduX2VtcHR5PCdjPigmJ2MgbXV0IHNlbGYpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICAvLyBTQUZFVFk6IEl0IGlzIGFsd2F5cyBzYWZlIHRvIGlzc3VlIGEgbmV3IGVudGl0eSBJRAogICAgICAgIGxldCBpZCA9IHVuc2FmZSB7IHNlbGYud29ybGRfaWRfZ2VuLmdldF9tdXQoKSB9CiAgICAgICAgICAgIC5icmlkZ2UKICAgICAgICAgICAgLmltcGxfaXNzdWVfZW50aXR5KCk7CgogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggY29tcG9uZW50cyBhZnRlciB0aGUgc3lzdGVtIGhhcyBjb25jbHVkZWQKICAgIHB1YiBmbiBzcGF3bjwnYywgQTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+ICsgJ3N0YXRpYyArIFNlbmQgKyBTeW5jPigKICAgICAgICAmJ2MgbXV0IHNlbGYsCiAgICAgICAgYXJnOiBBLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgLy8gU0FGRVRZOiBJdCBpcyBhbHdheXMgc2FmZSB0byBpc3N1ZSBhIG5ldyBlbnRpdHkgSUQKICAgICAgICBsZXQgaWQgPSB1bnNhZmUgeyBzZWxmLndvcmxkX2lkX2dlbi5nZXRfbXV0KCkgfQogICAgICAgICAgICAuYnJpZGdlCiAgICAgICAgICAgIC5pbXBsX2lzc3VlX2VudGl0eSgpOwoKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQuc3Bhd25fd2l0aF9pZChpZCwgYXJnKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBEZXNwYXducyBhbiBlbnRpdHkgYWZ0ZXIgdGhlIHN5c3RlbSBoYXMgY29uY2x1ZGVkCiAgICBwdWIgZm4gZGVzcGF3bigmbXV0IHNlbGYsIGlkOiBFbnRpdHkpIHsKICAgICAgICBzZWxmLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKGlkKSk7CiAgICB9CgogICAgLy8vIEdldHMgYWNjZXNzIHRvIG9wZXJhdGlvbnMgcmVsYXRlZCB0byBlbnRpdGllcwogICAgcHViIGZuIGVudGl0eTwnYz4oJidjIG11dCBzZWxmLCBpZDogRW50aXR5KSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTZXRzIGEgc2luZ2xldG9uIGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNldF9zaW5nbGV0b248J2MsIFM6IFNpbmdsZXRvbk1hcmtlcj4oJidjIG11dCBzZWxmLCB2YWx1ZTogUykgewogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zZXRfc2luZ2xldG9uKHZhbHVlKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBwdWIgZm4gcmVtb3ZlX3NpbmdsZXRvbjwnYywgUzogU2luZ2xldG9uTWFya2VyPigmJ2MgbXV0IHNlbGYpIHsKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQucmVtb3ZlX3NpbmdsZXRvbjo6PFM+KCk7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8vLyBBbiBvcGVyYXRpb24gd2hpY2ggY2FuIGJlIGFkZGVkIHRvIGEgY29tbWFuZCBxdWV1ZQpwdWIgdHJhaXQgQ29tbWFuZDxCPjogU2VuZCArICdzdGF0aWMgewogICAgZm4gYXBwbHkoc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPFQ6IFNlbmQgKyAnc3RhdGljLCBCPiBDb21tYW5kPEI+IGZvciBUCndoZXJlCiAgICBUOiBGbk9uY2UoJm11dCBXb3JsZDxCPiksCnsKICAgIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgKHNlbGYpKHdvcmxkKQogICAgfQp9CgovLy8gSGVscGVyIHRyYWl0IGZvciBgQm94PGR5biBDb21tYW5kPmAgdG8gY2FsbCBjb25zdW1pbmcgYGFwcGx5YAp0cmFpdCBEeW5Db21tYW5kPEI+IHsKICAgIGZuIGFwcGx5KCZtdXQgc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPEM6IENvbW1hbmQ8Qj4sIEI+IER5bkNvbW1hbmQ8Qj4gZm9yIE9wdGlvbjxDPiB7CiAgICBmbiBhcHBseSgmbXV0IHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgc2VsZi50YWtlKCkudW53cmFwKCkuYXBwbHkod29ybGQpOwogICAgfQp9CgovLy8gQSBxdWV1ZSBvZiBjb21tYW5kcwpwdWIgc3RydWN0IENvbW1hbmRRdWV1ZTxCPiB7CiAgICBjb21tYW5kczogVmVjPEJveDxkeW4gRHluQ29tbWFuZDxCPj4+LAp9CgppbXBsPEI+IERlZmF1bHQgZm9yIENvbW1hbmRRdWV1ZTxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGNvbW1hbmRzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KfQoKaW1wbDxCPiBDb21tYW5kUXVldWU8Qj4gewogICAgLy8vIEFkZHMgYSBuZXcgY29tbWFuZCB0byB0aGUgZW5kIG9mIHRoZSBxdWV1ZQogICAgcHViIGZuIHB1c2g8QzogQ29tbWFuZDxCPj4oJm11dCBzZWxmLCBjb21tYW5kOiBDKSB7CiAgICAgICAgc2VsZi5jb21tYW5kcy5wdXNoKEJveDo6bmV3KFNvbWUoY29tbWFuZCkpKTsKICAgIH0KCiAgICAvLy8gQXBwbGllcyBhbGwgcXVldWVkIGNvbW1hbmRzIHRvIHRoZSB3b3JsZCBhbmQgY2xlYXJzIHRoZSBxdWV1ZQogICAgcHViIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgZm9yIG11dCBjb21tYW5kIGluIHNlbGYuY29tbWFuZHMuaW50b19pdGVyKCkgewogICAgICAgICAgICBjb21tYW5kLmFwcGx5KHdvcmxkKTsKICAgICAgICB9CiAgICB9Cn0KCi8vLyBDb21tYW5kcyBmb3IgZW50aXRpZXMKcHViIHN0cnVjdCBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICBjb21tYW5kczogJidjIG11dCBDb21tYW5kczwnZiwgJ3EsIEI+LAogICAgaWQ6IEVudGl0eSwKfQoKaW1wbDwnZiwgJ3EsICdjLCBCOiBGYWJyaWM+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgIC8vLyBHZXRzIHRoZSBJRCBvZiBhbiBlbnRpdHkKICAgIHB1YiBmbiBpZCgmc2VsZikgLT4gRW50aXR5IHsKICAgICAgICBzZWxmLmlkCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gYW5kX3NldDxBOiBFbnRpdHlTZXRBcmc8Qj4+KG11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gTWF5YmUgYWRkcyBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBhbmRfc2V0X3NvbWU8QTogRW50aXR5U2V0QXJnPEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICBtYXliZV9hcmc6IE9wdGlvbjxBPiwKICAgICkgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIGlmIGxldCBTb21lKGFyZykgPSBtYXliZV9hcmcgewogICAgICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIH0KICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gc2V0PEE6IEVudGl0eVNldEFyZzxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCBtYXRjaCB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICBOb25lID0+IHsKICAgICAgICAgICAgICAgICAgICBlcHJpbnRsbiEoImNvdWxkIG5vdCBzZXQgZW50aXR5OiB7aWQ6P30iLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKG11dCBlbnRpdHkpID0+IGFyZy5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSksCiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vLyBBZGRzIG11bHRpcGxlIGNvbXBvbmVudHMgdG8gYW4gZW50aXR5IGF0IG9uY2UuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQKICAgIC8vLyBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9zZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICB2YWx1ZXM6IENDLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgc2VsZi5zZXRfbWFueSh2YWx1ZXMpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gQWRkcyBtdWx0aXBsZSBjb21wb25lbnRzIHRvIGFuIGVudGl0eSBhdCBvbmNlLiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kCiAgICAvLy8gb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBzZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigmbXV0IHNlbGYsIHZhbHVlczogQ0MpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB2YWx1ZXMuYXBwbHkoaWQsIHdvcmxkKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9yZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPihtdXQgc2VsZikgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIHNlbGYucmVtb3ZlOjo8Qz4oKTsKICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIFJlbW92ZXMgYSBjb21wb25lbnQgZnJvbSBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiByZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPigmbXV0IHNlbGYpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaCgKICAgICAgICAgICAgbW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IG1hdGNoIHdvcmxkLmltcGxfbG9jYXRlX2VudGl0eShpZCkgewogICAgICAgICAgICAgICAgTm9uZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3QgcmVtb3ZlIGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKGVudGl0eSkgPT4gewogICAgICAgICAgICAgICAgICAgIHdvcmxkLmltcGxfcmVtb3ZlX2NvbXBvbmVudDo6PEM+KGVudGl0eSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIH0KCiAgICAvLy8gRGVzcGF3bnMgdGhlIGVudGl0eQogICAgcHViIGZuIGRlc3Bhd24oc2VsZikgewogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKHNlbGYuaWQpKTsKICAgIH0KfQoKcHViIHRyYWl0IEVudGl0eUNvbW1hbmRzU2V0TWFueTxCPiB7CiAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPik7Cn0KCm1hY3JvX3J1bGVzISB0YWJsZV9yb3cgewogICAgKCQoJGE6IGlkZW50KSwqKSA9PiB7CiAgICAgICAgI1thbGxvdyhub25fc25ha2VfY2FzZSldCiAgICAgICAgaW1wbDxCOiBGYWJyaWMsICQoJGE6IEVudGl0eVNldEFyZzxCPiksKj4gRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+IGZvciAoJCgkYSwpKikgewogICAgICAgICAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPikgewogICAgICAgICAgICAgICAgaWYgbGV0IFNvbWUobXV0IGVudGl0eSkgPSB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0ICgkKCRhLCkqKSA9IHNlbGY7CiAgICAgICAgICAgICAgICAgICAgJCgkYS5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSk7KSoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3Qgc2V0IGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Owp9CgphbGxfdHVwbGVzISh0YWJsZV9yb3csIDEsIDE2LCBBKTsKAAAAAAAAAAD0HgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOgQAAAAAAAA6BAAAAAAAAAAAAAAAAPC/"
				],
				[
					11,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD0HgAALy8gQ29weXJpZ2h0IDIwMjQgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6ewogICAgRW50aXR5LCBFbnRpdHlTZXRBcmcsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgU2luZ2xldG9uTWFya2VyLCBTdGF0aWNTaXplZFNlbmRTeW5jSWQsIFdvcmxkLAogICAgZGV0YWlsOjp7RmFicmljLCBVbnNhZmVXb3JsZENlbGx9LAp9Owp1c2UgZXhjZXNzX21hY3Jvczo6YWxsX3R1cGxlczsKCi8vLyBEZWZlcnJlZCBjb21tYW5kcyB0byBleGVjdXRlIG9uIGEgd29ybGQgYXQgdGhlIGVuZCBvZiBhIHN5c3RlbQovLy8KLy8vIENvbW1hbmRzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHdvcmsgd2hpbGUgb3RoZXIgcXVlcmllcyBoYXZlIHJlYWQgb3Igd3JpdGUgYWNjZXNzIHRvIHBhcnRzIG9mCi8vLyB0aGUgd29ybGQuIENvbW1hbmRzIGNhbiB0aGVuIGJlIGFwcGxpZWQgYWZ0ZXJ3YXJkcyB3aXRoIHVuaXF1ZSBhY2Nlc3MgdG8gdGhlIHdvcmxkLgovLy8KLy8vICMgRXhhbXBsZQovLy8gYGBgCi8vLyBzdHJ1Y3QgRm9vIHt9OwovLy8gZm4gZXhhbXBsZShtdXQgY29tbWFuZHM6IGF0b206OkNvbW1hbmRzKSB7Ci8vLyAgICAgbGV0IGVpZCA9IGNvbW1hbmRzLnNwYXduKChGb28ge30sIDNfaTMyKSkuaWQoKTsKLy8vICAgICAvLyB1c2UgZWlkLCBidXQgY29tcG9uZW50cyBhcmUgbm90IHlldCBhZGRlZAovLy8gfQovLy8gYGBgCnB1YiBzdHJ1Y3QgQ29tbWFuZHM8J2YsICdxLCBCPiB7CiAgICB3b3JsZF9pZF9nZW46IFVuc2FmZVdvcmxkQ2VsbDwnZiwgQj4sCiAgICBxdWV1ZTogJidxIG11dCBDb21tYW5kUXVldWU8Qj4sCn0KCmltcGw8J2YsICdxLCBCOiBGYWJyaWM+IENvbW1hbmRzPCdmLCAncSwgQj4gewogICAgcHViKGNyYXRlKSBmbiBuZXcoCiAgICAgICAgd29ybGRfaWRfZ2VuOiBVbnNhZmVXb3JsZENlbGw8J2YsIEI+LAogICAgICAgIHF1ZXVlOiAmJ3EgbXV0IENvbW1hbmRRdWV1ZTxCPiwKICAgICkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIHdvcmxkX2lkX2dlbiwKICAgICAgICAgICAgcXVldWUsCiAgICAgICAgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNwYXduX2VtcHR5PCdjPigmJ2MgbXV0IHNlbGYpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICAvLyBTQUZFVFk6IEl0IGlzIGFsd2F5cyBzYWZlIHRvIGlzc3VlIGEgbmV3IGVudGl0eSBJRAogICAgICAgIGxldCBpZCA9IHVuc2FmZSB7IHNlbGYud29ybGRfaWRfZ2VuLmdldF9tdXQoKSB9CiAgICAgICAgICAgIC5icmlkZ2UKICAgICAgICAgICAgLmltcGxfaXNzdWVfZW50aXR5KCk7CgogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggY29tcG9uZW50cyBhZnRlciB0aGUgc3lzdGVtIGhhcyBjb25jbHVkZWQKICAgIHB1YiBmbiBzcGF3bjwnYywgQTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+ICsgJ3N0YXRpYyArIFNlbmQgKyBTeW5jPigKICAgICAgICAmJ2MgbXV0IHNlbGYsCiAgICAgICAgYXJnOiBBLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgLy8gU0FGRVRZOiBJdCBpcyBhbHdheXMgc2FmZSB0byBpc3N1ZSBhIG5ldyBlbnRpdHkgSUQKICAgICAgICBsZXQgaWQgPSB1bnNhZmUgeyBzZWxmLndvcmxkX2lkX2dlbi5nZXRfbXV0KCkgfQogICAgICAgICAgICAuYnJpZGdlCiAgICAgICAgICAgIC5pbXBsX2lzc3VlX2VudGl0eSgpOwoKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQuc3Bhd25fd2l0aF9pZChpZCwgYXJnKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBEZXNwYXducyBhbiBlbnRpdHkgYWZ0ZXIgdGhlIHN5c3RlbSBoYXMgY29uY2x1ZGVkCiAgICBwdWIgZm4gZGVzcGF3bigmbXV0IHNlbGYsIGlkOiBFbnRpdHkpIHsKICAgICAgICBzZWxmLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKGlkKSk7CiAgICB9CgogICAgLy8vIEdldHMgYWNjZXNzIHRvIG9wZXJhdGlvbnMgcmVsYXRlZCB0byBlbnRpdGllcwogICAgcHViIGZuIGVudGl0eTwnYz4oJidjIG11dCBzZWxmLCBpZDogRW50aXR5KSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTZXRzIGEgc2luZ2xldG9uIGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNldF9zaW5nbGV0b248J2MsIFM6IFNpbmdsZXRvbk1hcmtlcj4oJidjIG11dCBzZWxmLCB2YWx1ZTogUykgewogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zZXRfc2luZ2xldG9uKHZhbHVlKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBwdWIgZm4gcmVtb3ZlX3NpbmdsZXRvbjwnYywgUzogU2luZ2xldG9uTWFya2VyPigmJ2MgbXV0IHNlbGYpIHsKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQucmVtb3ZlX3NpbmdsZXRvbjo6PFM+KCk7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8vLyBBbiBvcGVyYXRpb24gd2hpY2ggY2FuIGJlIGFkZGVkIHRvIGEgY29tbWFuZCBxdWV1ZQpwdWIgdHJhaXQgQ29tbWFuZDxCPjogU2VuZCArICdzdGF0aWMgewogICAgZm4gYXBwbHkoc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPFQ6IFNlbmQgKyAnc3RhdGljLCBCPiBDb21tYW5kPEI+IGZvciBUCndoZXJlCiAgICBUOiBGbk9uY2UoJm11dCBXb3JsZDxCPiksCnsKICAgIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgKHNlbGYpKHdvcmxkKQogICAgfQp9CgovLy8gSGVscGVyIHRyYWl0IGZvciBgQm94PGR5biBDb21tYW5kPmAgdG8gY2FsbCBjb25zdW1pbmcgYGFwcGx5YAp0cmFpdCBEeW5Db21tYW5kPEI+IHsKICAgIGZuIGFwcGx5KCZtdXQgc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPEM6IENvbW1hbmQ8Qj4sIEI+IER5bkNvbW1hbmQ8Qj4gZm9yIE9wdGlvbjxDPiB7CiAgICBmbiBhcHBseSgmbXV0IHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgc2VsZi50YWtlKCkudW53cmFwKCkuYXBwbHkod29ybGQpOwogICAgfQp9CgovLy8gQSBxdWV1ZSBvZiBjb21tYW5kcwpwdWIgc3RydWN0IENvbW1hbmRRdWV1ZTxCPiB7CiAgICBjb21tYW5kczogVmVjPEJveDxkeW4gRHluQ29tbWFuZDxCPj4+LAp9CgppbXBsPEI+IERlZmF1bHQgZm9yIENvbW1hbmRRdWV1ZTxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGNvbW1hbmRzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KfQoKaW1wbDxCPiBDb21tYW5kUXVldWU8Qj4gewogICAgLy8vIEFkZHMgYSBuZXcgY29tbWFuZCB0byB0aGUgZW5kIG9mIHRoZSBxdWV1ZQogICAgcHViIGZuIHB1c2g8QzogQ29tbWFuZDxCPj4oJm11dCBzZWxmLCBjb21tYW5kOiBDKSB7CiAgICAgICAgc2VsZi5jb21tYW5kcy5wdXNoKEJveDo6bmV3KFNvbWUoY29tbWFuZCkpKTsKICAgIH0KCiAgICAvLy8gQXBwbGllcyBhbGwgcXVldWVkIGNvbW1hbmRzIHRvIHRoZSB3b3JsZCBhbmQgY2xlYXJzIHRoZSBxdWV1ZQogICAgcHViIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgZm9yIG11dCBjb21tYW5kIGluIHNlbGYuY29tbWFuZHMuaW50b19pdGVyKCkgewogICAgICAgICAgICBjb21tYW5kLmFwcGx5KHdvcmxkKTsKICAgICAgICB9CiAgICB9Cn0KCi8vLyBDb21tYW5kcyBmb3IgZW50aXRpZXMKcHViIHN0cnVjdCBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICBjb21tYW5kczogJidjIG11dCBDb21tYW5kczwnZiwgJ3EsIEI+LAogICAgaWQ6IEVudGl0eSwKfQoKaW1wbDwnZiwgJ3EsICdjLCBCOiBGYWJyaWM+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgIC8vLyBHZXRzIHRoZSBJRCBvZiBhbiBlbnRpdHkKICAgIHB1YiBmbiBpZCgmc2VsZikgLT4gRW50aXR5IHsKICAgICAgICBzZWxmLmlkCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gYW5kX3NldDxBOiBFbnRpdHlTZXRBcmc8Qj4+KG11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gTWF5YmUgYWRkcyBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBhbmRfc2V0X3NvbWU8QTogRW50aXR5U2V0QXJnPEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICBtYXliZV9hcmc6IE9wdGlvbjxBPiwKICAgICkgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIGlmIGxldCBTb21lKGFyZykgPSBtYXliZV9hcmcgewogICAgICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIH0KICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gc2V0PEE6IEVudGl0eVNldEFyZzxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCBtYXRjaCB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICBOb25lID0+IHsKICAgICAgICAgICAgICAgICAgICBlcHJpbnRsbiEoImNvdWxkIG5vdCBzZXQgZW50aXR5OiB7aWQ6P30iLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKG11dCBlbnRpdHkpID0+IGFyZy5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSksCiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vLyBBZGRzIG11bHRpcGxlIGNvbXBvbmVudHMgdG8gYW4gZW50aXR5IGF0IG9uY2UuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQKICAgIC8vLyBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9zZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICB2YWx1ZXM6IENDLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgc2VsZi5zZXRfbWFueSh2YWx1ZXMpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gQWRkcyBtdWx0aXBsZSBjb21wb25lbnRzIHRvIGFuIGVudGl0eSBhdCBvbmNlLiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kCiAgICAvLy8gb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBzZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigmbXV0IHNlbGYsIHZhbHVlczogQ0MpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB2YWx1ZXMuYXBwbHkoaWQsIHdvcmxkKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9yZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPihtdXQgc2VsZikgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIHNlbGYucmVtb3ZlOjo8Qz4oKTsKICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIFJlbW92ZXMgYSBjb21wb25lbnQgZnJvbSBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiByZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPigmbXV0IHNlbGYpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaCgKICAgICAgICAgICAgbW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IG1hdGNoIHdvcmxkLmJyaWRnZS5pbXBsX2xvY2F0ZV9lbnRpdHkoaWQpIHsKICAgICAgICAgICAgICAgIE5vbmUgPT4gewogICAgICAgICAgICAgICAgICAgIGVwcmludGxuISgiY291bGQgbm90IHJlbW92ZSBlbnRpdHkgY29tcG9uZW50OiB7aWQ6P30gaXMgbm90IGEgdmFsaWQgZW50aXR5IElEIiwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgU29tZShlbnRpdHkpID0+IHsKICAgICAgICAgICAgICAgICAgICB3b3JsZC5pbXBsX3JlbW92ZV9jb21wb25lbnQ6OjxDPihlbnRpdHkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICk7CiAgICB9CgogICAgLy8vIERlc3Bhd25zIHRoZSBlbnRpdHkKICAgIHB1YiBmbiBkZXNwYXduKHNlbGYpIHsKICAgICAgICBzZWxmLmNvbW1hbmRzCiAgICAgICAgICAgIC5xdWV1ZQogICAgICAgICAgICAucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgd29ybGQuZGVzcGF3bihzZWxmLmlkKSk7CiAgICB9Cn0KCnB1YiB0cmFpdCBFbnRpdHlDb21tYW5kc1NldE1hbnk8Qj4gewogICAgZm4gYXBwbHkoc2VsZiwgaWQ6IEVudGl0eSwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgptYWNyb19ydWxlcyEgdGFibGVfcm93IHsKICAgICgkKCRhOiBpZGVudCksKikgPT4gewogICAgICAgICNbYWxsb3cobm9uX3NuYWtlX2Nhc2UpXQogICAgICAgIGltcGw8QjogRmFicmljLCAkKCRhOiBFbnRpdHlTZXRBcmc8Qj4pLCo+IEVudGl0eUNvbW1hbmRzU2V0TWFueTxCPiBmb3IgKCQoJGEsKSopIHsKICAgICAgICAgICAgZm4gYXBwbHkoc2VsZiwgaWQ6IEVudGl0eSwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pIHsKICAgICAgICAgICAgICAgIGlmIGxldCBTb21lKG11dCBlbnRpdHkpID0gd29ybGQuZ2V0X2VudGl0eShpZCkgewogICAgICAgICAgICAgICAgICAgIGxldCAoJCgkYSwpKikgPSBzZWxmOwogICAgICAgICAgICAgICAgICAgICQoJGEuZW50aXR5X3NldF9hcmdfYXBwbHkoJm11dCBlbnRpdHkpOykqCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGVwcmludGxuISgiY291bGQgbm90IHNldCBlbnRpdHkgY29tcG9uZW50OiB7aWQ6P30gaXMgbm90IGEgdmFsaWQgZW50aXR5IElEIiwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfTsKfQoKYWxsX3R1cGxlcyEodGFibGVfcm93LCAxLCAxNiwgQSk7CgAAAAAAAAAA+x4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOgQAAAAAAAA6BAAAAAAAAAAAAAAAAPC/"
				],
				[
					12,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD7HgAALy8gQ29weXJpZ2h0IDIwMjQgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6ewogICAgRW50aXR5LCBFbnRpdHlTZXRBcmcsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgU2luZ2xldG9uTWFya2VyLCBTdGF0aWNTaXplZFNlbmRTeW5jSWQsIFdvcmxkLAogICAgZGV0YWlsOjp7RmFicmljLCBVbnNhZmVXb3JsZENlbGx9LAp9Owp1c2UgZXhjZXNzX21hY3Jvczo6YWxsX3R1cGxlczsKCi8vLyBEZWZlcnJlZCBjb21tYW5kcyB0byBleGVjdXRlIG9uIGEgd29ybGQgYXQgdGhlIGVuZCBvZiBhIHN5c3RlbQovLy8KLy8vIENvbW1hbmRzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHdvcmsgd2hpbGUgb3RoZXIgcXVlcmllcyBoYXZlIHJlYWQgb3Igd3JpdGUgYWNjZXNzIHRvIHBhcnRzIG9mCi8vLyB0aGUgd29ybGQuIENvbW1hbmRzIGNhbiB0aGVuIGJlIGFwcGxpZWQgYWZ0ZXJ3YXJkcyB3aXRoIHVuaXF1ZSBhY2Nlc3MgdG8gdGhlIHdvcmxkLgovLy8KLy8vICMgRXhhbXBsZQovLy8gYGBgCi8vLyBzdHJ1Y3QgRm9vIHt9OwovLy8gZm4gZXhhbXBsZShtdXQgY29tbWFuZHM6IGF0b206OkNvbW1hbmRzKSB7Ci8vLyAgICAgbGV0IGVpZCA9IGNvbW1hbmRzLnNwYXduKChGb28ge30sIDNfaTMyKSkuaWQoKTsKLy8vICAgICAvLyB1c2UgZWlkLCBidXQgY29tcG9uZW50cyBhcmUgbm90IHlldCBhZGRlZAovLy8gfQovLy8gYGBgCnB1YiBzdHJ1Y3QgQ29tbWFuZHM8J2YsICdxLCBCPiB7CiAgICB3b3JsZF9pZF9nZW46IFVuc2FmZVdvcmxkQ2VsbDwnZiwgQj4sCiAgICBxdWV1ZTogJidxIG11dCBDb21tYW5kUXVldWU8Qj4sCn0KCmltcGw8J2YsICdxLCBCOiBGYWJyaWM+IENvbW1hbmRzPCdmLCAncSwgQj4gewogICAgcHViKGNyYXRlKSBmbiBuZXcoCiAgICAgICAgd29ybGRfaWRfZ2VuOiBVbnNhZmVXb3JsZENlbGw8J2YsIEI+LAogICAgICAgIHF1ZXVlOiAmJ3EgbXV0IENvbW1hbmRRdWV1ZTxCPiwKICAgICkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIHdvcmxkX2lkX2dlbiwKICAgICAgICAgICAgcXVldWUsCiAgICAgICAgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNwYXduX2VtcHR5PCdjPigmJ2MgbXV0IHNlbGYpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICAvLyBTQUZFVFk6IEl0IGlzIGFsd2F5cyBzYWZlIHRvIGlzc3VlIGEgbmV3IGVudGl0eSBJRAogICAgICAgIGxldCBpZCA9IHVuc2FmZSB7IHNlbGYud29ybGRfaWRfZ2VuLmdldF9tdXQoKSB9CiAgICAgICAgICAgIC5icmlkZ2UKICAgICAgICAgICAgLmltcGxfaXNzdWVfZW50aXR5KCk7CgogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zcGF3bl9lbXB0eV93aXRoX2lkKGlkKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IHdpdGggY29tcG9uZW50cyBhZnRlciB0aGUgc3lzdGVtIGhhcyBjb25jbHVkZWQKICAgIHB1YiBmbiBzcGF3bjwnYywgQTogRW50aXR5U2V0Q29tcG9uZW50c1R1cGxlPEI+ICsgJ3N0YXRpYyArIFNlbmQgKyBTeW5jPigKICAgICAgICAmJ2MgbXV0IHNlbGYsCiAgICAgICAgYXJnOiBBLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgLy8gU0FGRVRZOiBJdCBpcyBhbHdheXMgc2FmZSB0byBpc3N1ZSBhIG5ldyBlbnRpdHkgSUQKICAgICAgICBsZXQgaWQgPSB1bnNhZmUgeyBzZWxmLndvcmxkX2lkX2dlbi5nZXRfbXV0KCkgfQogICAgICAgICAgICAuYnJpZGdlCiAgICAgICAgICAgIC5pbXBsX2lzc3VlX2VudGl0eSgpOwoKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQuc3Bhd25fd2l0aF9pZChpZCwgYXJnKTsKICAgICAgICB9KTsKCiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBEZXNwYXducyBhbiBlbnRpdHkgYWZ0ZXIgdGhlIHN5c3RlbSBoYXMgY29uY2x1ZGVkCiAgICBwdWIgZm4gZGVzcGF3bigmbXV0IHNlbGYsIGlkOiBFbnRpdHkpIHsKICAgICAgICBzZWxmLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKGlkKSk7CiAgICB9CgogICAgLy8vIEdldHMgYWNjZXNzIHRvIG9wZXJhdGlvbnMgcmVsYXRlZCB0byBlbnRpdGllcwogICAgcHViIGZuIGVudGl0eTwnYz4oJidjIG11dCBzZWxmLCBpZDogRW50aXR5KSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgRW50aXR5Q29tbWFuZHMgeyBjb21tYW5kczogc2VsZiwgaWQgfQogICAgfQoKICAgIC8vLyBTZXRzIGEgc2luZ2xldG9uIGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNldF9zaW5nbGV0b248J2MsIFM6IFNpbmdsZXRvbk1hcmtlcj4oJidjIG11dCBzZWxmLCB2YWx1ZTogUykgewogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zZXRfc2luZ2xldG9uKHZhbHVlKTsKICAgICAgICB9KTsKICAgIH0KCiAgICBwdWIgZm4gcmVtb3ZlX3NpbmdsZXRvbjwnYywgUzogU2luZ2xldG9uTWFya2VyPigmJ2MgbXV0IHNlbGYpIHsKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQucmVtb3ZlX3NpbmdsZXRvbjo6PFM+KCk7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8vLyBBbiBvcGVyYXRpb24gd2hpY2ggY2FuIGJlIGFkZGVkIHRvIGEgY29tbWFuZCBxdWV1ZQpwdWIgdHJhaXQgQ29tbWFuZDxCPjogU2VuZCArICdzdGF0aWMgewogICAgZm4gYXBwbHkoc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPFQ6IFNlbmQgKyAnc3RhdGljLCBCPiBDb21tYW5kPEI+IGZvciBUCndoZXJlCiAgICBUOiBGbk9uY2UoJm11dCBXb3JsZDxCPiksCnsKICAgIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgKHNlbGYpKHdvcmxkKQogICAgfQp9CgovLy8gSGVscGVyIHRyYWl0IGZvciBgQm94PGR5biBDb21tYW5kPmAgdG8gY2FsbCBjb25zdW1pbmcgYGFwcGx5YAp0cmFpdCBEeW5Db21tYW5kPEI+IHsKICAgIGZuIGFwcGx5KCZtdXQgc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pOwp9CgppbXBsPEM6IENvbW1hbmQ8Qj4sIEI+IER5bkNvbW1hbmQ8Qj4gZm9yIE9wdGlvbjxDPiB7CiAgICBmbiBhcHBseSgmbXV0IHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgc2VsZi50YWtlKCkudW53cmFwKCkuYXBwbHkod29ybGQpOwogICAgfQp9CgovLy8gQSBxdWV1ZSBvZiBjb21tYW5kcwpwdWIgc3RydWN0IENvbW1hbmRRdWV1ZTxCPiB7CiAgICBjb21tYW5kczogVmVjPEJveDxkeW4gRHluQ29tbWFuZDxCPj4+LAp9CgppbXBsPEI+IERlZmF1bHQgZm9yIENvbW1hbmRRdWV1ZTxCPiB7CiAgICBmbiBkZWZhdWx0KCkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIGNvbW1hbmRzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KfQoKaW1wbDxCPiBDb21tYW5kUXVldWU8Qj4gewogICAgLy8vIEFkZHMgYSBuZXcgY29tbWFuZCB0byB0aGUgZW5kIG9mIHRoZSBxdWV1ZQogICAgcHViIGZuIHB1c2g8QzogQ29tbWFuZDxCPj4oJm11dCBzZWxmLCBjb21tYW5kOiBDKSB7CiAgICAgICAgc2VsZi5jb21tYW5kcy5wdXNoKEJveDo6bmV3KFNvbWUoY29tbWFuZCkpKTsKICAgIH0KCiAgICAvLy8gQXBwbGllcyBhbGwgcXVldWVkIGNvbW1hbmRzIHRvIHRoZSB3b3JsZCBhbmQgY2xlYXJzIHRoZSBxdWV1ZQogICAgcHViIGZuIGFwcGx5KHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgZm9yIG11dCBjb21tYW5kIGluIHNlbGYuY29tbWFuZHMuaW50b19pdGVyKCkgewogICAgICAgICAgICBjb21tYW5kLmFwcGx5KHdvcmxkKTsKICAgICAgICB9CiAgICB9Cn0KCi8vLyBDb21tYW5kcyBmb3IgZW50aXRpZXMKcHViIHN0cnVjdCBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICBjb21tYW5kczogJidjIG11dCBDb21tYW5kczwnZiwgJ3EsIEI+LAogICAgaWQ6IEVudGl0eSwKfQoKaW1wbDwnZiwgJ3EsICdjLCBCOiBGYWJyaWM+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgIC8vLyBHZXRzIHRoZSBJRCBvZiBhbiBlbnRpdHkKICAgIHB1YiBmbiBpZCgmc2VsZikgLT4gRW50aXR5IHsKICAgICAgICBzZWxmLmlkCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gYW5kX3NldDxBOiBFbnRpdHlTZXRBcmc8Qj4+KG11dCBzZWxmLCBhcmc6IEEpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gTWF5YmUgYWRkcyBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBhbmRfc2V0X3NvbWU8QTogRW50aXR5U2V0QXJnPEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICBtYXliZV9hcmc6IE9wdGlvbjxBPiwKICAgICkgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIGlmIGxldCBTb21lKGFyZykgPSBtYXliZV9hcmcgewogICAgICAgICAgICBzZWxmLnNldChhcmcpOwogICAgICAgIH0KICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIEFkZHMgYSBjb21wb25lbnQgdG8gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gc2V0PEE6IEVudGl0eVNldEFyZzxCPj4oJm11dCBzZWxmLCBhcmc6IEEpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCBtYXRjaCB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICBOb25lID0+IHsKICAgICAgICAgICAgICAgICAgICBlcHJpbnRsbiEoImNvdWxkIG5vdCBzZXQgZW50aXR5OiB7aWQ6P30iLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKG11dCBlbnRpdHkpID0+IGFyZy5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSksCiAgICAgICAgICAgIH0pOwogICAgfQoKICAgIC8vLyBBZGRzIG11bHRpcGxlIGNvbXBvbmVudHMgdG8gYW4gZW50aXR5IGF0IG9uY2UuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQKICAgIC8vLyBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9zZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigKICAgICAgICBtdXQgc2VsZiwKICAgICAgICB2YWx1ZXM6IENDLAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgc2VsZi5zZXRfbWFueSh2YWx1ZXMpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gQWRkcyBtdWx0aXBsZSBjb21wb25lbnRzIHRvIGFuIGVudGl0eSBhdCBvbmNlLiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kCiAgICAvLy8gb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBzZXRfbWFueTxDQzogJ3N0YXRpYyArIFNlbmQgKyBTeW5jICsgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+PigmbXV0IHNlbGYsIHZhbHVlczogQ0MpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB2YWx1ZXMuYXBwbHkoaWQsIHdvcmxkKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9yZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPihtdXQgc2VsZikgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIHNlbGYucmVtb3ZlOjo8Qz4oKTsKICAgICAgICBzZWxmCiAgICB9CgogICAgLy8vIFJlbW92ZXMgYSBjb21wb25lbnQgZnJvbSBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiByZW1vdmU8QzogU3RhdGljU2l6ZWRTZW5kU3luY0lkPigmbXV0IHNlbGYpIHsKICAgICAgICBsZXQgaWQgPSBzZWxmLmlkOwogICAgICAgIHNlbGYuY29tbWFuZHMucXVldWUucHVzaCgKICAgICAgICAgICAgbW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IG1hdGNoIHdvcmxkLmJyaWRnZS5pbXBsX2xvY2F0ZV9lbnRpdHkoaWQpIHsKICAgICAgICAgICAgICAgIE5vbmUgPT4gewogICAgICAgICAgICAgICAgICAgIGVwcmludGxuISgiY291bGQgbm90IHJlbW92ZSBlbnRpdHkgY29tcG9uZW50OiB7aWQ6P30gaXMgbm90IGEgdmFsaWQgZW50aXR5IElEIiwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgU29tZShlbnRpdHkpID0+IHsKICAgICAgICAgICAgICAgICAgICB3b3JsZC5icmlkZ2UuaW1wbF9yZW1vdmVfY29tcG9uZW50Ojo8Qz4oZW50aXR5KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICApOwogICAgfQoKICAgIC8vLyBEZXNwYXducyB0aGUgZW50aXR5CiAgICBwdWIgZm4gZGVzcGF3bihzZWxmKSB7CiAgICAgICAgc2VsZi5jb21tYW5kcwogICAgICAgICAgICAucXVldWUKICAgICAgICAgICAgLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHdvcmxkLmRlc3Bhd24oc2VsZi5pZCkpOwogICAgfQp9CgpwdWIgdHJhaXQgRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+IHsKICAgIGZuIGFwcGx5KHNlbGYsIGlkOiBFbnRpdHksIHdvcmxkOiAmbXV0IFdvcmxkPEI+KTsKfQoKbWFjcm9fcnVsZXMhIHRhYmxlX3JvdyB7CiAgICAoJCgkYTogaWRlbnQpLCopID0+IHsKICAgICAgICAjW2FsbG93KG5vbl9zbmFrZV9jYXNlKV0KICAgICAgICBpbXBsPEI6IEZhYnJpYywgJCgkYTogRW50aXR5U2V0QXJnPEI+KSwqPiBFbnRpdHlDb21tYW5kc1NldE1hbnk8Qj4gZm9yICgkKCRhLCkqKSB7CiAgICAgICAgICAgIGZuIGFwcGx5KHNlbGYsIGlkOiBFbnRpdHksIHdvcmxkOiAmbXV0IFdvcmxkPEI+KSB7CiAgICAgICAgICAgICAgICBpZiBsZXQgU29tZShtdXQgZW50aXR5KSA9IHdvcmxkLmdldF9lbnRpdHkoaWQpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgKCQoJGEsKSopID0gc2VsZjsKICAgICAgICAgICAgICAgICAgICAkKCRhLmVudGl0eV9zZXRfYXJnX2FwcGx5KCZtdXQgZW50aXR5KTspKgogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBlcHJpbnRsbiEoImNvdWxkIG5vdCBzZXQgZW50aXR5IGNvbXBvbmVudDoge2lkOj99IGlzIG5vdCBhIHZhbGlkIGVudGl0eSBJRCIsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH07Cn0KCmFsbF90dXBsZXMhKHRhYmxlX3JvdywgMSwgMTYsIEEpOwoAAAAAAAAAAO0eAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAOgQAAAAAAAA6BAAAAAAAAAAAAAAAAPC/"
				],
				[
					15,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADtHgAALy8gQ29weXJpZ2h0IDIwMjQgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6ewogICAgRW50aXR5LCBFbnRpdHlTZXRBcmcsIEVudGl0eVNldENvbXBvbmVudHNUdXBsZSwgU2luZ2xldG9uTWFya2VyLCBTdGF0aWNTaXplZFNlbmRTeW5jSWQsIFdvcmxkLAogICAgZGV0YWlsOjp7RmFicmljLCBVbnNhZmVXb3JsZENlbGx9LAp9Owp1c2UgZXhjZXNzX21hY3Jvczo6YWxsX3R1cGxlczsKCi8vLyBEZWZlcnJlZCBjb21tYW5kcyB0byBleGVjdXRlIG9uIGEgd29ybGQgYXQgdGhlIGVuZCBvZiBhIHN5c3RlbQovLy8KLy8vIENvbW1hbmRzIGNhbiBiZSB1c2VkIHRvIHF1ZXVlIHdvcmsgd2hpbGUgb3RoZXIgcXVlcmllcyBoYXZlIHJlYWQgb3Igd3JpdGUgYWNjZXNzIHRvIHBhcnRzIG9mCi8vLyB0aGUgd29ybGQuIENvbW1hbmRzIGNhbiB0aGVuIGJlIGFwcGxpZWQgYWZ0ZXJ3YXJkcyB3aXRoIHVuaXF1ZSBhY2Nlc3MgdG8gdGhlIHdvcmxkLgovLy8KLy8vICMgRXhhbXBsZQovLy8gYGBgCi8vLyBzdHJ1Y3QgRm9vIHt9OwovLy8gZm4gZXhhbXBsZShtdXQgY29tbWFuZHM6IGF0b206OkNvbW1hbmRzKSB7Ci8vLyAgICAgbGV0IGVpZCA9IGNvbW1hbmRzLnNwYXduKChGb28ge30sIDNfaTMyKSkuaWQoKTsKLy8vICAgICAvLyB1c2UgZWlkLCBidXQgY29tcG9uZW50cyBhcmUgbm90IHlldCBhZGRlZAovLy8gfQovLy8gYGBgCnB1YiBzdHJ1Y3QgQ29tbWFuZHM8J2YsICdxLCBCPiB7CiAgICB3b3JsZF9pZF9nZW46IFVuc2FmZVdvcmxkQ2VsbDwnZiwgQj4sCiAgICBxdWV1ZTogJidxIG11dCBDb21tYW5kUXVldWU8Qj4sCn0KCmltcGw8J2YsICdxLCBCOiBGYWJyaWM+IENvbW1hbmRzPCdmLCAncSwgQj4gewogICAgcHViKGNyYXRlKSBmbiBuZXcoCiAgICAgICAgd29ybGRfaWRfZ2VuOiBVbnNhZmVXb3JsZENlbGw8J2YsIEI+LAogICAgICAgIHF1ZXVlOiAmJ3EgbXV0IENvbW1hbmRRdWV1ZTxCPiwKICAgICkgLT4gU2VsZiB7CiAgICAgICAgU2VsZiB7CiAgICAgICAgICAgIHdvcmxkX2lkX2dlbiwKICAgICAgICAgICAgcXVldWUsCiAgICAgICAgfQogICAgfQoKICAgIC8vLyBTcGF3bnMgYSBuZXcgZW50aXR5IGFmdGVyIHRoZSBzeXN0ZW0gaGFzIGNvbmNsdWRlZAogICAgcHViIGZuIHNwYXduX2VtcHR5PCdjPigmJ2MgbXV0IHNlbGYpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICAvLyBTQUZFVFk6IEl0IGlzIGFsd2F5cyBzYWZlIHRvIGlzc3VlIGEgbmV3IGVudGl0eSBJRAogICAgICAgIGxldCBpZCA9IHVuc2FmZSB7IHNlbGYud29ybGRfaWRfZ2VuLmdldF9tdXQoKSB9CiAgICAgICAgICAgIC5icmlkZ2UKICAgICAgICAgICAgLmVudGl0eV9pc3N1ZV9pZCgpOwoKICAgICAgICBzZWxmLnF1ZXVlLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHsKICAgICAgICAgICAgd29ybGQuc3Bhd25fZW1wdHlfd2l0aF9pZChpZCk7CiAgICAgICAgfSk7CgogICAgICAgIEVudGl0eUNvbW1hbmRzIHsgY29tbWFuZHM6IHNlbGYsIGlkIH0KICAgIH0KCiAgICAvLy8gU3Bhd25zIGEgbmV3IGVudGl0eSB3aXRoIGNvbXBvbmVudHMgYWZ0ZXIgdGhlIHN5c3RlbSBoYXMgY29uY2x1ZGVkCiAgICBwdWIgZm4gc3Bhd248J2MsIEE6IEVudGl0eVNldENvbXBvbmVudHNUdXBsZTxCPiArICdzdGF0aWMgKyBTZW5kICsgU3luYz4oCiAgICAgICAgJidjIG11dCBzZWxmLAogICAgICAgIGFyZzogQSwKICAgICkgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIC8vIFNBRkVUWTogSXQgaXMgYWx3YXlzIHNhZmUgdG8gaXNzdWUgYSBuZXcgZW50aXR5IElECiAgICAgICAgbGV0IGlkID0gdW5zYWZlIHsgc2VsZi53b3JsZF9pZF9nZW4uZ2V0X211dCgpIH0KICAgICAgICAgICAgLmJyaWRnZQogICAgICAgICAgICAuZW50aXR5X2lzc3VlX2lkKCk7CgogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5zcGF3bl93aXRoX2lkKGlkLCBhcmcpOwogICAgICAgIH0pOwoKICAgICAgICBFbnRpdHlDb21tYW5kcyB7IGNvbW1hbmRzOiBzZWxmLCBpZCB9CiAgICB9CgogICAgLy8vIERlc3Bhd25zIGFuIGVudGl0eSBhZnRlciB0aGUgc3lzdGVtIGhhcyBjb25jbHVkZWQKICAgIHB1YiBmbiBkZXNwYXduKCZtdXQgc2VsZiwgaWQ6IEVudGl0eSkgewogICAgICAgIHNlbGYucXVldWUKICAgICAgICAgICAgLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IHdvcmxkLmRlc3Bhd24oaWQpKTsKICAgIH0KCiAgICAvLy8gR2V0cyBhY2Nlc3MgdG8gb3BlcmF0aW9ucyByZWxhdGVkIHRvIGVudGl0aWVzCiAgICBwdWIgZm4gZW50aXR5PCdjPigmJ2MgbXV0IHNlbGYsIGlkOiBFbnRpdHkpIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICBFbnRpdHlDb21tYW5kcyB7IGNvbW1hbmRzOiBzZWxmLCBpZCB9CiAgICB9CgogICAgLy8vIFNldHMgYSBzaW5nbGV0b24gYWZ0ZXIgdGhlIHN5c3RlbSBoYXMgY29uY2x1ZGVkCiAgICBwdWIgZm4gc2V0X3NpbmdsZXRvbjwnYywgUzogU2luZ2xldG9uTWFya2VyPigmJ2MgbXV0IHNlbGYsIHZhbHVlOiBTKSB7CiAgICAgICAgc2VsZi5xdWV1ZS5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB7CiAgICAgICAgICAgIHdvcmxkLnNldF9zaW5nbGV0b24odmFsdWUpOwogICAgICAgIH0pOwogICAgfQoKICAgIHB1YiBmbiByZW1vdmVfc2luZ2xldG9uPCdjLCBTOiBTaW5nbGV0b25NYXJrZXI+KCYnYyBtdXQgc2VsZikgewogICAgICAgIHNlbGYucXVldWUucHVzaChtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgewogICAgICAgICAgICB3b3JsZC5yZW1vdmVfc2luZ2xldG9uOjo8Uz4oKTsKICAgICAgICB9KTsKICAgIH0KfQoKLy8vIEFuIG9wZXJhdGlvbiB3aGljaCBjYW4gYmUgYWRkZWQgdG8gYSBjb21tYW5kIHF1ZXVlCnB1YiB0cmFpdCBDb21tYW5kPEI+OiBTZW5kICsgJ3N0YXRpYyB7CiAgICBmbiBhcHBseShzZWxmLCB3b3JsZDogJm11dCBXb3JsZDxCPik7Cn0KCmltcGw8VDogU2VuZCArICdzdGF0aWMsIEI+IENvbW1hbmQ8Qj4gZm9yIFQKd2hlcmUKICAgIFQ6IEZuT25jZSgmbXV0IFdvcmxkPEI+KSwKewogICAgZm4gYXBwbHkoc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pIHsKICAgICAgICAoc2VsZikod29ybGQpCiAgICB9Cn0KCi8vLyBIZWxwZXIgdHJhaXQgZm9yIGBCb3g8ZHluIENvbW1hbmQ+YCB0byBjYWxsIGNvbnN1bWluZyBgYXBwbHlgCnRyYWl0IER5bkNvbW1hbmQ8Qj4gewogICAgZm4gYXBwbHkoJm11dCBzZWxmLCB3b3JsZDogJm11dCBXb3JsZDxCPik7Cn0KCmltcGw8QzogQ29tbWFuZDxCPiwgQj4gRHluQ29tbWFuZDxCPiBmb3IgT3B0aW9uPEM+IHsKICAgIGZuIGFwcGx5KCZtdXQgc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pIHsKICAgICAgICBzZWxmLnRha2UoKS51bndyYXAoKS5hcHBseSh3b3JsZCk7CiAgICB9Cn0KCi8vLyBBIHF1ZXVlIG9mIGNvbW1hbmRzCnB1YiBzdHJ1Y3QgQ29tbWFuZFF1ZXVlPEI+IHsKICAgIGNvbW1hbmRzOiBWZWM8Qm94PGR5biBEeW5Db21tYW5kPEI+Pj4sCn0KCmltcGw8Qj4gRGVmYXVsdCBmb3IgQ29tbWFuZFF1ZXVlPEI+IHsKICAgIGZuIGRlZmF1bHQoKSAtPiBTZWxmIHsKICAgICAgICBTZWxmIHsKICAgICAgICAgICAgY29tbWFuZHM6IFZlYzo6bmV3KCksCiAgICAgICAgfQogICAgfQp9CgppbXBsPEI+IENvbW1hbmRRdWV1ZTxCPiB7CiAgICAvLy8gQWRkcyBhIG5ldyBjb21tYW5kIHRvIHRoZSBlbmQgb2YgdGhlIHF1ZXVlCiAgICBwdWIgZm4gcHVzaDxDOiBDb21tYW5kPEI+PigmbXV0IHNlbGYsIGNvbW1hbmQ6IEMpIHsKICAgICAgICBzZWxmLmNvbW1hbmRzLnB1c2goQm94OjpuZXcoU29tZShjb21tYW5kKSkpOwogICAgfQoKICAgIC8vLyBBcHBsaWVzIGFsbCBxdWV1ZWQgY29tbWFuZHMgdG8gdGhlIHdvcmxkIGFuZCBjbGVhcnMgdGhlIHF1ZXVlCiAgICBwdWIgZm4gYXBwbHkoc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQ8Qj4pIHsKICAgICAgICBmb3IgbXV0IGNvbW1hbmQgaW4gc2VsZi5jb21tYW5kcy5pbnRvX2l0ZXIoKSB7CiAgICAgICAgICAgIGNvbW1hbmQuYXBwbHkod29ybGQpOwogICAgICAgIH0KICAgIH0KfQoKLy8vIENvbW1hbmRzIGZvciBlbnRpdGllcwpwdWIgc3RydWN0IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgIGNvbW1hbmRzOiAmJ2MgbXV0IENvbW1hbmRzPCdmLCAncSwgQj4sCiAgICBpZDogRW50aXR5LAp9CgppbXBsPCdmLCAncSwgJ2MsIEI6IEZhYnJpYz4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgLy8vIEdldHMgdGhlIElEIG9mIGFuIGVudGl0eQogICAgcHViIGZuIGlkKCZzZWxmKSAtPiBFbnRpdHkgewogICAgICAgIHNlbGYuaWQKICAgIH0KCiAgICAvLy8gQWRkcyBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBhbmRfc2V0PEE6IEVudGl0eVNldEFyZzxCPj4obXV0IHNlbGYsIGFyZzogQSkgLT4gRW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYywgQj4gewogICAgICAgIHNlbGYuc2V0KGFyZyk7CiAgICAgICAgc2VsZgogICAgfQoKICAgIC8vLyBNYXliZSBhZGRzIGEgY29tcG9uZW50IHRvIGFuIGVudGl0eS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIGFuZF9zZXRfc29tZTxBOiBFbnRpdHlTZXRBcmc8Qj4+KAogICAgICAgIG11dCBzZWxmLAogICAgICAgIG1heWJlX2FyZzogT3B0aW9uPEE+LAogICAgKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgaWYgbGV0IFNvbWUoYXJnKSA9IG1heWJlX2FyZyB7CiAgICAgICAgICAgIHNlbGYuc2V0KGFyZyk7CiAgICAgICAgfQogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gQWRkcyBhIGNvbXBvbmVudCB0byBhbiBlbnRpdHkuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQgb2YgdGhlIHN5c3RlbS4KICAgIHB1YiBmbiBzZXQ8QTogRW50aXR5U2V0QXJnPEI+PigmbXV0IHNlbGYsIGFyZzogQSkgewogICAgICAgIGxldCBpZCA9IHNlbGYuaWQ7CiAgICAgICAgc2VsZi5jb21tYW5kcwogICAgICAgICAgICAucXVldWUKICAgICAgICAgICAgLnB1c2gobW92ZSB8d29ybGQ6ICZtdXQgV29ybGQ8Qj58IG1hdGNoIHdvcmxkLmdldF9lbnRpdHkoaWQpIHsKICAgICAgICAgICAgICAgIE5vbmUgPT4gewogICAgICAgICAgICAgICAgICAgIGVwcmludGxuISgiY291bGQgbm90IHNldCBlbnRpdHk6IHtpZDo/fSIsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIFNvbWUobXV0IGVudGl0eSkgPT4gYXJnLmVudGl0eV9zZXRfYXJnX2FwcGx5KCZtdXQgZW50aXR5KSwKICAgICAgICAgICAgfSk7CiAgICB9CgogICAgLy8vIEFkZHMgbXVsdGlwbGUgY29tcG9uZW50cyB0byBhbiBlbnRpdHkgYXQgb25jZS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZAogICAgLy8vIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gYW5kX3NldF9tYW55PENDOiAnc3RhdGljICsgU2VuZCArIFN5bmMgKyBFbnRpdHlDb21tYW5kc1NldE1hbnk8Qj4+KAogICAgICAgIG11dCBzZWxmLAogICAgICAgIHZhbHVlczogQ0MsCiAgICApIC0+IEVudGl0eUNvbW1hbmRzPCdmLCAncSwgJ2MsIEI+IHsKICAgICAgICBzZWxmLnNldF9tYW55KHZhbHVlcyk7CiAgICAgICAgc2VsZgogICAgfQoKICAgIC8vLyBBZGRzIG11bHRpcGxlIGNvbXBvbmVudHMgdG8gYW4gZW50aXR5IGF0IG9uY2UuIFRoaXMgb3BlcmF0aW9uIGlzIGRlZmVycmVkIHVudGlsIHRoZSBlbmQKICAgIC8vLyBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIHNldF9tYW55PENDOiAnc3RhdGljICsgU2VuZCArIFN5bmMgKyBFbnRpdHlDb21tYW5kc1NldE1hbnk8Qj4+KCZtdXQgc2VsZiwgdmFsdWVzOiBDQykgewogICAgICAgIGxldCBpZCA9IHNlbGYuaWQ7CiAgICAgICAgc2VsZi5jb21tYW5kcy5xdWV1ZS5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB7CiAgICAgICAgICAgIHZhbHVlcy5hcHBseShpZCwgd29ybGQpOwogICAgICAgIH0pOwogICAgfQoKICAgIC8vLyBSZW1vdmVzIGEgY29tcG9uZW50IGZyb20gYW4gZW50aXR5LiBUaGlzIG9wZXJhdGlvbiBpcyBkZWZlcnJlZCB1bnRpbCB0aGUgZW5kIG9mIHRoZSBzeXN0ZW0uCiAgICBwdWIgZm4gYW5kX3JlbW92ZTxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KG11dCBzZWxmKSAtPiBFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjLCBCPiB7CiAgICAgICAgc2VsZi5yZW1vdmU6OjxDPigpOwogICAgICAgIHNlbGYKICAgIH0KCiAgICAvLy8gUmVtb3ZlcyBhIGNvbXBvbmVudCBmcm9tIGFuIGVudGl0eS4gVGhpcyBvcGVyYXRpb24gaXMgZGVmZXJyZWQgdW50aWwgdGhlIGVuZCBvZiB0aGUgc3lzdGVtLgogICAgcHViIGZuIHJlbW92ZTxDOiBTdGF0aWNTaXplZFNlbmRTeW5jSWQ+KCZtdXQgc2VsZikgewogICAgICAgIGxldCBpZCA9IHNlbGYuaWQ7CiAgICAgICAgc2VsZi5jb21tYW5kcy5xdWV1ZS5wdXNoKAogICAgICAgICAgICBtb3ZlIHx3b3JsZDogJm11dCBXb3JsZDxCPnwgbWF0Y2ggd29ybGQuYnJpZGdlLmVudGl0eShpZCkgewogICAgICAgICAgICAgICAgTm9uZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3QgcmVtb3ZlIGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBTb21lKGVudGl0eSkgPT4gewogICAgICAgICAgICAgICAgICAgIHdvcmxkLmJyaWRnZS5lbnRpdHlfcmVtb3ZlX2NvbXBvbmVudDo6PEM+KGVudGl0eSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKICAgIH0KCiAgICAvLy8gRGVzcGF3bnMgdGhlIGVudGl0eQogICAgcHViIGZuIGRlc3Bhd24oc2VsZikgewogICAgICAgIHNlbGYuY29tbWFuZHMKICAgICAgICAgICAgLnF1ZXVlCiAgICAgICAgICAgIC5wdXNoKG1vdmUgfHdvcmxkOiAmbXV0IFdvcmxkPEI+fCB3b3JsZC5kZXNwYXduKHNlbGYuaWQpKTsKICAgIH0KfQoKcHViIHRyYWl0IEVudGl0eUNvbW1hbmRzU2V0TWFueTxCPiB7CiAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPik7Cn0KCm1hY3JvX3J1bGVzISB0YWJsZV9yb3cgewogICAgKCQoJGE6IGlkZW50KSwqKSA9PiB7CiAgICAgICAgI1thbGxvdyhub25fc25ha2VfY2FzZSldCiAgICAgICAgaW1wbDxCOiBGYWJyaWMsICQoJGE6IEVudGl0eVNldEFyZzxCPiksKj4gRW50aXR5Q29tbWFuZHNTZXRNYW55PEI+IGZvciAoJCgkYSwpKikgewogICAgICAgICAgICBmbiBhcHBseShzZWxmLCBpZDogRW50aXR5LCB3b3JsZDogJm11dCBXb3JsZDxCPikgewogICAgICAgICAgICAgICAgaWYgbGV0IFNvbWUobXV0IGVudGl0eSkgPSB3b3JsZC5nZXRfZW50aXR5KGlkKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0ICgkKCRhLCkqKSA9IHNlbGY7CiAgICAgICAgICAgICAgICAgICAgJCgkYS5lbnRpdHlfc2V0X2FyZ19hcHBseSgmbXV0IGVudGl0eSk7KSoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJjb3VsZCBub3Qgc2V0IGVudGl0eSBjb21wb25lbnQ6IHtpZDo/fSBpcyBub3QgYSB2YWxpZCBlbnRpdHkgSUQiLCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Owp9CgphbGxfdHVwbGVzISh0YWJsZV9yb3csIDEsIDE2LCBBKTsKAAAAAAAAAABjIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+QAAAAAAAAD5AAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "/I/Ikabur/candy/crates/scene_tree/src/scene_tree_mocca.rs",
			"settings":
			{
				"buffer_size": 7760,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					34,
					1,
					"insert",
					{
						"characters": "i"
					},
					"AQAAAMsKAAAAAAAAzAoAAAAAAAAFAAAAZGVwdGg",
					"AQAAAAAAAAABAAAAywoAAAAAAADQCgAAAAAAAAAAAAAAAPC/"
				],
				[
					39,
					1,
					"insert",
					{
						"characters": "i"
					},
					"AQAAAB0LAAAAAAAAHgsAAAAAAAAFAAAAZGVwdGg",
					"AQAAAAAAAAABAAAAHQsAAAAAAAAiCwAAAAAAAAAAAAAAAPC/"
				],
				[
					42,
					1,
					"cut",
					null,
					"AQAAAA4LAAAAAAAADgsAAAAAAAAYAAAASGllcmFyY2h5RGVwdGgoaSBhcyB1MTYp",
					"AQAAAAAAAAABAAAADgsAAAAAAAAmCwAAAAAAAAAAAAAAAPC/"
				],
				[
					45,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAANMKAAAAAAAA4AoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0woAAAAAAADTCgAAAAAAAP///////+9/"
				],
				[
					46,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOAKAAAAAAAA4goAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4AoAAAAAAADgCgAAAAAAAAAAAAAAAPC/"
				],
				[
					47,
					1,
					"paste",
					null,
					"AQAAAOEKAAAAAAAA+QoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4QoAAAAAAADhCgAAAAAAAAAAAAAAAPC/"
				],
				[
					48,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAPkKAAAAAAAA+goAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+QoAAAAAAAD5CgAAAAAAAAAAAAAAAPC/"
				],
				[
					49,
					1,
					"insert",
					{
						"characters": " &v"
					},
					"AwAAAPoKAAAAAAAA+woAAAAAAAAAAAAA+woAAAAAAAD8CgAAAAAAAAAAAAD8CgAAAAAAAP0KAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+goAAAAAAAD6CgAAAAAAAAAAAAAAAPC/"
				],
				[
					53,
					1,
					"left_delete",
					null,
					"AQAAAP4KAAAAAAAA/goAAAAAAABFAAAACiAgICAgICAgICAgIHYuaXRlcigpCiAgICAgICAgICAgICAgICAubWFwKG1vdmUgfCZlbnRpdHl8ICgsIGVudGl0eSkp",
					"AQAAAAAAAAABAAAA/goAAAAAAABDCwAAAAAAAP///////+9/"
				],
				[
					58,
					1,
					"insert",
					{
						"characters": ">"
					},
					"AQAAAJYKAAAAAAAAlwoAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAlgoAAAAAAACWCgAAAAAAAAAAAAAAAPC/"
				],
				[
					59,
					1,
					"rust_fmt_format_buffer",
					null,
					"CgAAAK0KAAAAAAAAugoAAAAAAAAAAAAAwQoAAAAAAADOCgAAAAAAAAAAAADaCgAAAAAAAOcKAAAAAAAAAAAAAPoKAAAAAAAA+goAAAAAAAAOAAAAewogICAgICAgICAgICAYCwAAAAAAABgLAAAAAAAACgAAAAogICAgICAgIH2GCwAAAAAAAIYLAAAAAAAAFgAAAC5pdGVyKCkuZmxhdF9tYXAofHZ8IHuTCwAAAAAAAJMLAAAAAAAAAQAAAHanCwAAAAAAAKcLAAAAAAAABAAAACAgICCnCwAAAAAAAL0LAAAAAAAAAAAAANgLAAAAAAAA2AsAAAAAAAAKAAAACiAgICAgICAgfQ",
					"AQAAAAAAAAABAAAAlwoAAAAAAACXCgAAAAAAAAAAAAAAAPC/"
				],
				[
					62,
					2,
					"left_delete",
					null,
					"AgAAABYLAAAAAAAAFgsAAAAAAAABAAAAdhULAAAAAAAAFQsAAAAAAAABAAAAJg",
					"AQAAAAAAAAABAAAAFwsAAAAAAAAXCwAAAAAAAAAAAAAAAPC/"
				],
				[
					63,
					1,
					"insert",
					{
						"characters": "v.as_slice"
					},
					"CgAAABULAAAAAAAAFgsAAAAAAAAAAAAAFgsAAAAAAAAXCwAAAAAAAAAAAAAXCwAAAAAAABgLAAAAAAAAAAAAABgLAAAAAAAAGQsAAAAAAAAAAAAAGQsAAAAAAAAaCwAAAAAAAAAAAAAaCwAAAAAAABsLAAAAAAAAAAAAABsLAAAAAAAAHAsAAAAAAAAAAAAAHAsAAAAAAAAdCwAAAAAAAAAAAAAdCwAAAAAAAB4LAAAAAAAAAAAAAB4LAAAAAAAAHwsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFQsAAAAAAAAVCwAAAAAAAAAAAAAAAPC/"
				],
				[
					64,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAB8LAAAAAAAAIQsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAHwsAAAAAAAAfCwAAAAAAAAAAAAAAAPC/"
				],
				[
					69,
					1,
					"delete_word",
					{
						"forward": false
					},
					"AQAAAOgKAAAAAAAA6AoAAAAAAAAFAAAAZmxhdF8",
					"AQAAAAAAAAABAAAA7QoAAAAAAADtCgAAAAAAAAAAAAAAAPC/"
				],
				[
					79,
					2,
					"left_delete",
					null,
					"AgAAAF0LAAAAAAAAXQsAAAAAAAAOAAAASGllcmFyY2h5RGVwdGhcCwAAAAAAAFwLAAAAAAAAAQAAACg",
					"AQAAAAAAAAABAAAAXQsAAAAAAABrCwAAAAAAAAAAAAAAAPC/"
				],
				[
					80,
					2,
					"right_delete",
					null,
					"AgAAAFwLAAAAAAAAXAsAAAAAAAABAAAALFwLAAAAAAAAXAsAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAXAsAAAAAAABcCwAAAAAAAAAAAAAAAPC/"
				],
				[
					82,
					1,
					"right_delete",
					null,
					"AQAAAGILAAAAAAAAYgsAAAAAAAABAAAAKQ",
					"AQAAAAAAAAABAAAAYgsAAAAAAABiCwAAAAAAAAAAAAAAAPC/"
				],
				[
					88,
					2,
					"right_delete",
					null,
					"AgAAALULAAAAAAAAtQsAAAAAAAAEAAAAbW92ZbULAAAAAAAAtQsAAAAAAAABAAAAIA",
					"AQAAAAAAAAABAAAAtQsAAAAAAAC5CwAAAAAAAAAAAAAAAPC/"
				],
				[
					90,
					1,
					"rust_accept_suggested_replacement",
					{
						"region":
						[
							2915,
							2915
						],
						"replacement": " + use<'_>"
					},
					"AQAAAGMLAAAAAAAAbQsAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAtQsAAAAAAAC1CwAAAAAAAAAAAAAAAPC/"
				],
				[
					109,
					1,
					"paste",
					null,
					"AQAAALMeAAAAAAAAvh4AAAAAAAALAAAAaXRlcl9ncmFkZWQ",
					"AQAAAAAAAAABAAAAsx4AAAAAAAC+HgAAAAAAAAAAAAAAAPC/"
				],
				[
					112,
					1,
					"left_delete",
					null,
					"AQAAAKceAAAAAAAApx4AAAAAAAABAAAAZQ",
					"AQAAAAAAAAABAAAAqB4AAAAAAACoHgAAAAAAAAAAAAAAAPC/"
				],
				[
					113,
					1,
					"insert",
					{
						"characters": "depth"
					},
					"BQAAAKceAAAAAAAAqB4AAAAAAAAAAAAAqB4AAAAAAACpHgAAAAAAAAAAAACpHgAAAAAAAKoeAAAAAAAAAAAAAKoeAAAAAAAAqx4AAAAAAAAAAAAAqx4AAAAAAACsHgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApx4AAAAAAACnHgAAAAAAAAAAAAAAAPC/"
				],
				[
					115,
					1,
					"insert",
					{
						"characters": "("
					},
					"AQAAAKceAAAAAAAAqB4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAApx4AAAAAAACnHgAAAAAAAAAAAAAAAPC/"
				],
				[
					117,
					1,
					"insert",
					{
						"characters": ","
					},
					"AQAAAK0eAAAAAAAArh4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArR4AAAAAAACtHgAAAAAAAAAAAAAAAPC/"
				],
				[
					118,
					1,
					"insert",
					{
						"characters": " entities)"
					},
					"CgAAAK4eAAAAAAAArx4AAAAAAAAAAAAArx4AAAAAAACwHgAAAAAAAAAAAACwHgAAAAAAALEeAAAAAAAAAAAAALEeAAAAAAAAsh4AAAAAAAAAAAAAsh4AAAAAAACzHgAAAAAAAAAAAACzHgAAAAAAALQeAAAAAAAAAAAAALQeAAAAAAAAtR4AAAAAAAAAAAAAtR4AAAAAAAC2HgAAAAAAAAAAAAC2HgAAAAAAALceAAAAAAAAAAAAALceAAAAAAAAuB4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAArh4AAAAAAACuHgAAAAAAAAAAAAAAAPC/"
				],
				[
					120,
					1,
					"insert",
					{
						"characters": "\nfor"
					},
					"BAAAANIeAAAAAAAA2x4AAAAAAAAAAAAA2x4AAAAAAADcHgAAAAAAAAAAAADcHgAAAAAAAN0eAAAAAAAAAAAAAN0eAAAAAAAA3h4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0h4AAAAAAADSHgAAAAAAAP///////+9/"
				],
				[
					121,
					1,
					"insert",
					{
						"characters": " e"
					},
					"AgAAAN4eAAAAAAAA3x4AAAAAAAAAAAAA3x4AAAAAAADgHgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3h4AAAAAAADeHgAAAAAAAAAAAAAAAPC/"
				],
				[
					122,
					1,
					"insert",
					{
						"characters": " in"
					},
					"AwAAAOAeAAAAAAAA4R4AAAAAAAAAAAAA4R4AAAAAAADiHgAAAAAAAAAAAADiHgAAAAAAAOMeAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4B4AAAAAAADgHgAAAAAAAAAAAAAAAPC/"
				],
				[
					123,
					1,
					"insert",
					{
						"characters": " en"
					},
					"AwAAAOMeAAAAAAAA5B4AAAAAAAAAAAAA5B4AAAAAAADlHgAAAAAAAAAAAADlHgAAAAAAAOYeAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4x4AAAAAAADjHgAAAAAAAAAAAAAAAPC/"
				],
				[
					125,
					1,
					"insert_completion",
					{
						"completion": "entities",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "entities"
					},
					"AgAAAOQeAAAAAAAA5B4AAAAAAAACAAAAZW7kHgAAAAAAAOweAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5h4AAAAAAADmHgAAAAAAAAAAAAAAAPC/"
				],
				[
					126,
					1,
					"insert",
					{
						"characters": " "
					},
					"AQAAAOweAAAAAAAA7R4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7B4AAAAAAADsHgAAAAAAAAAAAAAAAPC/"
				],
				[
					127,
					1,
					"insert_snippet",
					{
						"contents": "{$0}"
					},
					"AQAAAO0eAAAAAAAA7x4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7R4AAAAAAADtHgAAAAAAAAAAAAAAAPC/"
				],
				[
					128,
					1,
					"right_delete",
					null,
					"AQAAAO4eAAAAAAAA7h4AAAAAAAABAAAAfQ",
					"AQAAAAAAAAABAAAA7h4AAAAAAADuHgAAAAAAAAAAAAAAAPC/"
				],
				[
					130,
					1,
					"insert",
					{
						"characters": "\n}"
					},
					"BAAAAH4iAAAAAAAAhyIAAAAAAAAAAAAAhyIAAAAAAACIIgAAAAAAAAAAAAB/IgAAAAAAAH8iAAAAAAAACAAAACAgICAgICAgfyIAAAAAAACDIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAfiIAAAAAAAB+IgAAAAAAAAAAAAAAgG9A"
				],
				[
					131,
					1,
					"rust_fmt_format_buffer",
					null,
					"LAAAAPceAAAAAAAA+x4AAAAAAAAAAAAAIR8AAAAAAAAkHwAAAAAAAAAAAAAwHwAAAAAAADEfAAAAAAAAAAAAAEYfAAAAAAAASB8AAAAAAAAAAAAAVB8AAAAAAABWHwAAAAAAAAAAAAB8HwAAAAAAAH0fAAAAAAAAAAAAAIkfAAAAAAAAjB8AAAAAAAAAAAAAlh8AAAAAAACaHwAAAAAAAAAAAACuHwAAAAAAALIfAAAAAAAAAAAAAOofAAAAAAAA7B8AAAAAAAAAAAAA+B8AAAAAAAD6HwAAAAAAAAAAAAAyIAAAAAAAADQgAAAAAAAAAAAAAEQgAAAAAAAARiAAAAAAAAAAAAAAWyAAAAAAAABcIAAAAAAAAAAAAABsIAAAAAAAAG8gAAAAAAAAAAAAAKEgAAAAAAAApCAAAAAAAAAAAAAAtCAAAAAAAAC1IAAAAAAAAAAAAAC/IAAAAAAAAMIgAAAAAAAAAAAAAM4gAAAAAAAAzyAAAAAAAAAAAAAA0yAAAAAAAADVIAAAAAAAAAAAAADhIAAAAAAAAOMgAAAAAAAAAAAAAAkhAAAAAAAADSEAAAAAAAAAAAAAPCEAAAAAAABAIQAAAAAAAAAAAABQIQAAAAAAAFMhAAAAAAAAAAAAAFshAAAAAAAAXCEAAAAAAAAAAAAAZSEAAAAAAABnIQAAAAAAAAAAAABzIQAAAAAAAHUhAAAAAAAAAAAAAJUhAAAAAAAAliEAAAAAAAAAAAAAoiEAAAAAAAClIQAAAAAAAAAAAADBIQAAAAAAAMUhAAAAAAAAAAAAANghAAAAAAAA3CEAAAAAAAAAAAAA/yEAAAAAAAABIgAAAAAAAAAAAAAJIgAAAAAAAAsiAAAAAAAAAAAAADciAAAAAAAAOSIAAAAAAAAAAAAARSIAAAAAAABHIgAAAAAAAAAAAABcIgAAAAAAAF0iAAAAAAAAAAAAAGkiAAAAAAAAbCIAAAAAAAAAAAAAnCIAAAAAAACfIgAAAAAAAAAAAACrIgAAAAAAAKwiAAAAAAAAAAAAALYiAAAAAAAAuSIAAAAAAAAAAAAAwSIAAAAAAADCIgAAAAAAAAAAAADGIgAAAAAAAMgiAAAAAAAAAAAAANAiAAAAAAAA0iIAAAAAAAAAAAAA4yIAAAAAAADnIgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAhCIAAAAAAACEIgAAAAAAAAAAAAAAAPC/"
				],
				[
					135,
					1,
					"insert",
					{
						"characters": "&"
					},
					"AQAAAN8eAAAAAAAA4B4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3x4AAAAAAADfHgAAAAAAAAAAAAAAAPC/"
				],
				[
					148,
					1,
					"insert",
					{
						"characters": "\n"
					},
					"AQAAANIeAAAAAAAA2x4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA0h4AAAAAAADSHgAAAAAAAAAAAAAAAPC/"
				],
				[
					149,
					1,
					"insert",
					{
						"characters": "prin"
					},
					"BAAAANseAAAAAAAA3B4AAAAAAAAAAAAA3B4AAAAAAADdHgAAAAAAAAAAAADdHgAAAAAAAN4eAAAAAAAAAAAAAN4eAAAAAAAA3x4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA2x4AAAAAAADbHgAAAAAAAAAAAAAAAPC/"
				],
				[
					150,
					1,
					"insert_completion",
					{
						"completion": "println",
						"format": "text",
						"keep_prefix": false,
						"must_insert": false,
						"trigger": "println"
					},
					"AgAAANseAAAAAAAA2x4AAAAAAAAEAAAAcHJpbtseAAAAAAAA4h4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA3x4AAAAAAADfHgAAAAAAAAAAAAAAAPC/"
				],
				[
					151,
					1,
					"insert",
					{
						"characters": "!"
					},
					"AQAAAOIeAAAAAAAA4x4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4h4AAAAAAADiHgAAAAAAAAAAAAAAAPC/"
				],
				[
					152,
					1,
					"insert_snippet",
					{
						"contents": "($0)"
					},
					"AQAAAOMeAAAAAAAA5R4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA4x4AAAAAAADjHgAAAAAAAAAAAAAAAPC/"
				],
				[
					153,
					1,
					"insert_snippet",
					{
						"contents": "\"$0\""
					},
					"AQAAAOQeAAAAAAAA5h4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5B4AAAAAAADkHgAAAAAAAAAAAAAAAPC/"
				],
				[
					154,
					1,
					"insert",
					{
						"characters": "DEPTH:"
					},
					"BgAAAOUeAAAAAAAA5h4AAAAAAAAAAAAA5h4AAAAAAADnHgAAAAAAAAAAAADnHgAAAAAAAOgeAAAAAAAAAAAAAOgeAAAAAAAA6R4AAAAAAAAAAAAA6R4AAAAAAADqHgAAAAAAAAAAAADqHgAAAAAAAOseAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA5R4AAAAAAADlHgAAAAAAAAAAAAAAAPC/"
				],
				[
					155,
					1,
					"left_delete",
					null,
					"AQAAAOoeAAAAAAAA6h4AAAAAAAABAAAAOg",
					"AQAAAAAAAAABAAAA6x4AAAAAAADrHgAAAAAAAAAAAAAAAPC/"
				],
				[
					156,
					1,
					"insert",
					{
						"characters": " {}"
					},
					"AwAAAOoeAAAAAAAA6x4AAAAAAAAAAAAA6x4AAAAAAADsHgAAAAAAAAAAAADsHgAAAAAAAO0eAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA6h4AAAAAAADqHgAAAAAAAAAAAAAAAPC/"
				],
				[
					158,
					1,
					"paste",
					null,
					"AQAAAOweAAAAAAAA8R4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA7B4AAAAAAADsHgAAAAAAAAAAAAAAAPC/"
				],
				[
					161,
					1,
					"insert",
					{
						"characters": ":"
					},
					"AQAAAPIeAAAAAAAA8x4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA8h4AAAAAAADyHgAAAAAAAAAAAAAAAPC/"
				],
				[
					163,
					1,
					"insert",
					{
						"characters": ";"
					},
					"AQAAAPUeAAAAAAAA9h4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9R4AAAAAAAD1HgAAAAAAAP///////+9/"
				],
				[
					178,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAaIwAALy8gQ29weXJpZ2h0IDIwMjMgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6KjsKdXNlIGV4Y2Vzczo6cHJlbHVkZTo6KjsKdXNlIG1hZ2lfZ2Vtczo6U2xvdFZlYzsKdXNlIHNpbXBsZWNzOjp7Q29tbWFuZHMsIE1vY2NhLCBRdWVyeSwgUmVsYXRpb24sIFdvcmxkfTsKdXNlIHN0ZDo6e2NtcDo6T3JkZXJpbmcsIGNvbGxlY3Rpb25zOjpIYXNoTWFwLCBvcHM6OkRlcmVmfTsKCi8vLyBDaGFuZ2VzIHRoZSBwYXJlbnQgb2YgYGNoaWxkYCB0byBgcGFyZW50YAojW2Rlcml2ZShDbG9uZSldCnB1YiBzdHJ1Y3QgQ2hhbmdlSGllcmFyY2h5Q29tbWFuZCB7CiAgICBwdWIgcGFyZW50OiBFbnRpdHksCiAgICBwdWIgY2hpbGQ6IEVudGl0eSwKfQoKLy8vIERlc3Ryb3lzIGFuIGVudGl0eSBhbmQgcG90ZW50aWFsbHkgaXRzIGRlc2NlbmRlbnRzLiBNdXN0IGJlIGFkZGVkIHRvIHRoZSBlbnRpdHkgdG8gZGVzdHJveS4KcHViIHN0cnVjdCBEZXN0cm95RW50aXR5Q29tbWFuZCB7CiAgICAvLy8gSWYgZW5hYmxlZCBhbGwgZGVzY2VuZGVudHMgbGlrZSBjaGlsZHJlbiwgZ3JhbmQtY2hpbGRyZW4sIGV0Yy4gYXJlIGRlc3Ryb3llZC4gT3RoZXJ3aXNlCiAgICAvLy8gdGhlIGRpcmVjdCBjaGlsZHJlbiB3aWxsIGJlY29tZSByb290cy4KICAgIHB1YiByZWN1cnNpdmU6IGJvb2wsCn0KCiNbZGVyaXZlKFNpbmdsZXRvbildCnB1YiBzdHJ1Y3QgUm9vdChFbnRpdHkpOwoKaW1wbCBEZXJlZiBmb3IgUm9vdCB7CiAgICB0eXBlIFRhcmdldCA9IEVudGl0eTsKCiAgICBmbiBkZXJlZigmc2VsZikgLT4gJlNlbGY6OlRhcmdldCB7CiAgICAgICAgJnNlbGYuMAogICAgfQp9CgpwdWIgc3RydWN0IFNjZW5lVHJlZU1vY2NhOwoKaW1wbCBNb2NjYSBmb3IgU2NlbmVUcmVlTW9jY2EgewogICAgZm4gc3RhcnQod29ybGQ6ICZtdXQgV29ybGQpIC0+IFNlbGYgewogICAgICAgIC8vIHdvcmxkLnNldF9zaW5nbGV0b24oU2NlbmVUcmVlVXBkYXRlV29ya3NwYWNlOjpkZWZhdWx0KCkpOwogICAgICAgIHdvcmxkLnNldF9zaW5nbGV0b24oR3JhZGVkRW50aXR5U3RvcmFnZTo6ZGVmYXVsdCgpKTsKCiAgICAgICAgLy8gY3JlYXRlIHJvb3QKICAgICAgICBsZXQgcm9vdCA9IHdvcmxkCiAgICAgICAgICAgIC5zcGF3bigoCiAgICAgICAgICAgICAgICBOYW1lOjpmcm9tX3N0cigiU2NlbmVUcmVlTW9jY2E6OnJvb3QiKSwKICAgICAgICAgICAgICAgIEhpZXJhcmNoeURlcHRoKDApLAogICAgICAgICAgICAgICAgVHJhbnNmb3JtMzo6aWRlbnRpdHkoKSwKICAgICAgICAgICAgKSkKICAgICAgICAgICAgLmlkKCk7CiAgICAgICAgd29ybGQuc2V0X3NpbmdsZXRvbihSb290KHJvb3QpKTsKCiAgICAgICAgU2VsZgogICAgfQoKICAgIGZuIGZpbmkoJm11dCBzZWxmLCB3b3JsZDogJm11dCBXb3JsZCkgewogICAgICAgIC8vIHdvcmxkLnJlbW92ZV9zaW5nbGV0b246OjxTY2VuZVRyZWVVcGRhdGVXb3Jrc3BhY2U+KCk7CiAgICAgICAgd29ybGQucmVtb3ZlX3NpbmdsZXRvbjo6PEdyYWRlZEVudGl0eVN0b3JhZ2U+KCk7CiAgICB9CgogICAgZm4gc3RlcCgmbXV0IHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkKSB7CiAgICAgICAgd29ybGQucnVuKGF0dGFjaF9wYXJlbnRfZW50aXRpZXNfdG9fcm9vdCk7CiAgICAgICAgd29ybGQucnVuKGF0dGFjaF90cmFuc2Zvcm1fZW50aXRpZXNfdG9fcm9vdCk7CgogICAgICAgIHdvcmxkLnJ1bihlbnN1cmVfaGllcmFyY2h5X2RlcHRoX2V4aXN0cyk7CiAgICAgICAgd29ybGQucnVuKGNvbXB1dGVfaGllcmFyY2h5X2RlcHRoKTsKCiAgICAgICAgd29ybGQucnVuKGVzdGFibGlzaF9nbG9iYWxfdHJhbnNmb3JtXzIpOwogICAgICAgIHdvcmxkLnJ1bihncmFkZV90cmFuc2Zvcm1fMl9lbnRpdGllcyk7CiAgICAgICAgd29ybGQucnVuKHVwZGF0ZV9nbG9iYWxfdHJhbnNmb3JtXzIpOwoKICAgICAgICB3b3JsZC5ydW4oZXN0YWJsaXNoX2dsb2JhbF90cmFuc2Zvcm1fMyk7CiAgICAgICAgd29ybGQucnVuKGdyYWRlX3RyYW5zZm9ybV8zX2VudGl0aWVzKTsKICAgICAgICB3b3JsZC5ydW4odXBkYXRlX2dsb2JhbF90cmFuc2Zvcm1fMyk7CiAgICB9Cn0KCi8vICNbZGVyaXZlKFNpbmdsZXRvbiwgRGVmYXVsdCldCi8vIHN0cnVjdCBTY2VuZVRyZWVVcGRhdGVXb3Jrc3BhY2UgewovLyAgICAgdGFza3M6IFZlYzxFbnRpdHk+LAovLyAgICAgdGFza3NfY2hhbmdlX2VuYWJsZWQ6IFZlYzwoRW50aXR5LCBib29sKT4sCi8vIH0KCiNbZGVyaXZlKFNpbmdsZXRvbiwgRGVmYXVsdCldCnN0cnVjdCBHcmFkZWRFbnRpdHlTdG9yYWdlIHsKICAgIGdyYWRlczogU2xvdFZlYzxWZWM8RW50aXR5Pj4sCn0KCmltcGwgR3JhZGVkRW50aXR5U3RvcmFnZSB7CiAgICBwdWIgZm4gY2xlYXIoJm11dCBzZWxmKSB7CiAgICAgICAgZm9yIHYgaW4gc2VsZi5ncmFkZXMuaXRlcl9tdXQoKSB7CiAgICAgICAgICAgIHYuY2xlYXIoKTsKICAgICAgICB9CiAgICB9CgogICAgcHViIGZuIGluc2VydCgmbXV0IHNlbGYsIGRlcHRoOiBIaWVyYXJjaHlEZXB0aCwgZW50aXR5OiBFbnRpdHkpIHsKICAgICAgICBzZWxmLmdyYWRlcy5lbnRyeV9vcl9kZWZhdWx0KGRlcHRoLjAgYXMgdXNpemUpLnB1c2goZW50aXR5KTsKICAgIH0KCiAgICBwdWIgZm4gaXRlcl9ncmFkZXMoJnNlbGYpIC0+IGltcGwgSXRlcmF0b3I8SXRlbSA9IChIaWVyYXJjaHlEZXB0aCwgJltFbnRpdHldKT4gewogICAgICAgIHNlbGYuZ3JhZGVzCiAgICAgICAgICAgIC5pdGVyKCkKICAgICAgICAgICAgLmVudW1lcmF0ZSgpCiAgICAgICAgICAgIC5tYXAofChpLCB2KXwgKEhpZXJhcmNoeURlcHRoKGkgYXMgdTE2KSwgdi5hc19zbGljZSgpKSkKICAgIH0KCiAgICBwdWIgZm4gaXRlcl9ncmFkZWQoJnNlbGYpIC0+IGltcGwgSXRlcmF0b3I8SXRlbSA9IEVudGl0eT4gKyB1c2U8J18+IHsKICAgICAgICBzZWxmLmdyYWRlcwogICAgICAgICAgICAuaXRlcigpCiAgICAgICAgICAgIC5mbGF0X21hcCh8dnwgdi5pdGVyKCkubWFwKHwmZW50aXR5fCBlbnRpdHkpKQogICAgfQp9CgovLy8gRW50aXRpZXMgd2l0aCBjaGlsZHJlbiwgYnV0IHdpdGhvdXQgcGFyZW50IGFyZSBhdHRhY2hlZCB0byB0aGUgZ2xvYmFsIHJvb3QKZm4gYXR0YWNoX3BhcmVudF9lbnRpdGllc190b19yb290KAogICAgcm9vdDogU2luZ2xldG9uTXV0PFJvb3Q+LAogICAgcXVlcnk6IFF1ZXJ5PFRoaXM+LCAvLyBUT0RPIHVzZSBtb3JlIHNvcGhpc3RpY2F0ZWQgcXVlcnkKICAgIGNoaWxkX29mOiBSZWxhdGlvbjxDaGlsZE9mPiwKICAgIHBhcmVudF9vZjogUmVsYXRpb248UGFyZW50T2Y+LAogICAgbXV0IGNtZDogQ29tbWFuZHMsCikgewogICAgbGV0IHJvb3RfZW50aXR5ID0gKipyb290OwogICAgZm9yIGUgaW4gcXVlcnkuaXRlcigpIHsKICAgICAgICBpZiBjaGlsZF9vZi5hbnkoZSkgJiYgcGFyZW50X29mLmdldChlKS5pc19ub25lKCkgJiYgZSAhPSByb290X2VudGl0eSB7CiAgICAgICAgICAgIGxvZzo6ZGVidWchKCJhdHRhY2hlZCB7ZX0gdG8gcm9vdCB7cm9vdF9lbnRpdHl9Iik7CiAgICAgICAgICAgIGNtZC5lbnRpdHkoZSkuc2V0KChDaGlsZE9mLCByb290X2VudGl0eSkpOwogICAgICAgIH0KICAgIH0KfQoKLy8vIEVudGl0aWVzIHdpdGggdHJhbnNmb3JtLCBidXQgd2l0aG91dCBwYXJlbnQgYXJlIGF0dGFjaGVkIHRvIHRoZSBnbG9iYWwgcm9vdApmbiBhdHRhY2hfdHJhbnNmb3JtX2VudGl0aWVzX3RvX3Jvb3QoCiAgICByb290OiBTaW5nbGV0b25NdXQ8Um9vdD4sCiAgICBxdWVyeTogUXVlcnk8VGhpcywgV2l0aDxHbG9iYWxUcmFuc2Zvcm0zPj4sIC8vIFRPRE8gdXNlIG1vcmUgc29waGlzdGljYXRlZCBxdWVyeQogICAgcGFyZW50X29mOiBSZWxhdGlvbjxQYXJlbnRPZj4sCiAgICBtdXQgY21kOiBDb21tYW5kcywKKSB7CiAgICBsZXQgcm9vdF9lbnRpdHkgPSAqKnJvb3Q7CiAgICBmb3IgZSBpbiBxdWVyeS5pdGVyKCkgewogICAgICAgIGlmIHBhcmVudF9vZi5nZXQoZSkuaXNfbm9uZSgpICYmIGUgIT0gcm9vdF9lbnRpdHkgewogICAgICAgICAgICBsb2c6OmRlYnVnISgiYXR0YWNoZWQge2V9IHRvIHJvb3Qge3Jvb3RfZW50aXR5fSIpOwogICAgICAgICAgICBjbWQuZW50aXR5KGUpLnNldCgoQ2hpbGRPZiwgcm9vdF9lbnRpdHkpKTsKICAgICAgICB9CiAgICB9Cn0KCi8vLyBBbGwgZW50aXRpZXMgd2l0aCBhIHBhcmVudCBtdXN0IGhhdmUgYSBIaWVyYXJjaHlEZXB0aApmbiBlbnN1cmVfaGllcmFyY2h5X2RlcHRoX2V4aXN0cygKICAgIHF1ZXJ5OiBRdWVyeTxUaGlzLCAoV2l0aG91dDxIaWVyYXJjaHlEZXB0aD4sIFdpdGg8KFRoaXMsIENoaWxkT2YsIEUxKT4pPiwKICAgIG11dCBjbWQ6IENvbW1hbmRzLAopIHsKICAgIGZvciBlIGluIHF1ZXJ5Lml0ZXIoKSB7CiAgICAgICAgY21kLmVudGl0eShlKS5zZXQoSGllcmFyY2h5RGVwdGgoMCkpOwogICAgfQp9CgovLy8gQ29tcHV0ZSBoaWVyYXJjaHkgZGVwdGgKZm4gY29tcHV0ZV9oaWVyYXJjaHlfZGVwdGgoCiAgICBxdWVyeV9wYXJlbnRfY2hpbGQ6IFF1ZXJ5PChFMCwgRTEpLCAoV2l0aDxIaWVyYXJjaHlEZXB0aD4sIFdpdGg8KEUxLCBDaGlsZE9mLCBFMCk+KT4sCiAgICBtdXQgcXVlcnlfZGVwdGg6IFF1ZXJ5PCZtdXQgSGllcmFyY2h5RGVwdGg+LAopIHsKICAgIC8vIGNvbGxlY3QgYWxsIHBhcmVudC9jaGlsZCBwYWlycwogICAgbGV0IG11dCBpdGVtcyA9IFZlYzo6bmV3KCk7CiAgICBmb3IgKHBhcmVudCwgY2hpbGQpIGluIHF1ZXJ5X3BhcmVudF9jaGlsZC5pdGVyKCkgewogICAgICAgIGl0ZW1zLnB1c2goKHBhcmVudCwgY2hpbGQpKTsKICAgIH0KCiAgICAvLyBzb3J0IHN1Y2ggdGhhdCBwYXJlbnRzIGNvbWUgYmVmb3JlIGNoaWxkcmVuCiAgICBpdGVtcy5zb3J0X2J5KHwocCwgYyksIChhLCBiKXwgewogICAgICAgIGlmIGIgPT0gcCB7CiAgICAgICAgICAgIE9yZGVyaW5nOjpHcmVhdGVyCiAgICAgICAgfSBlbHNlIGlmIGEgPT0gYyB7CiAgICAgICAgICAgIE9yZGVyaW5nOjpMZXNzCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgT3JkZXJpbmc6OkVxdWFsCiAgICAgICAgfQogICAgfSk7CgogICAgLy8gaXRlcmF0ZSBpbiBvcmRlciBhbmQgY29tcHV0ZSBkZXB0aAogICAgZm9yIChwYXJlbnQsIGNoaWxkKSBpbiBpdGVtcy5pbnRvX2l0ZXIoKSB7CiAgICAgICAgbGV0IHBhcmVudF9kZXB0aCA9IHF1ZXJ5X2RlcHRoLmdldF9tdXQocGFyZW50KS51bndyYXAoKTsKICAgICAgICAqcXVlcnlfZGVwdGguZ2V0X211dChjaGlsZCkudW53cmFwKCkgPSBwYXJlbnRfZGVwdGguaW5jKCk7CiAgICB9Cn0KCi8vLyBFYWNoIGVudGl0eSB3aXRoIFRyYW5zZm9ybTIgYWxzbyBoYXMgYSBTdGVwIDEKZm4gZXN0YWJsaXNoX2dsb2JhbF90cmFuc2Zvcm1fMigKICAgIHF1ZXJ5OiBRdWVyeTxUaGlzLCAoV2l0aDxUcmFuc2Zvcm0yPiwgV2l0aG91dDxHbG9iYWxUcmFuc2Zvcm0yPik+LAogICAgbXV0IGNtZDogQ29tbWFuZHMsCikgewogICAgZm9yIGUgaW4gcXVlcnkuaXRlcigpIHsKICAgICAgICBjbWQuZW50aXR5KGUpLnNldChHbG9iYWxUcmFuc2Zvcm0yOjpkZWZhdWx0KCkpOwogICAgfQp9CgovLy8gRWFjaCBlbnRpdHkgd2l0aCBUcmFuc2Zvcm0zIGFsc28gaGFzIGEgR2xvYmFsVHJhbnNmb3JtMwpmbiBlc3RhYmxpc2hfZ2xvYmFsX3RyYW5zZm9ybV8zKAogICAgcXVlcnk6IFF1ZXJ5PFRoaXMsIChXaXRoPFRyYW5zZm9ybTM+LCBXaXRob3V0PEdsb2JhbFRyYW5zZm9ybTM+KT4sCiAgICBtdXQgY21kOiBDb21tYW5kcywKKSB7CiAgICBmb3IgZSBpbiBxdWVyeS5pdGVyKCkgewogICAgICAgIGNtZC5lbnRpdHkoZSkuc2V0KEdsb2JhbFRyYW5zZm9ybTM6OmRlZmF1bHQoKSk7CiAgICB9Cn0KCi8vLyBHcmFkZSB0cmFuc2Zvcm0gZW50aXRpZXMgYnkgaGllcmFyY2h5IGRlcHRoCmZuIGdyYWRlX3RyYW5zZm9ybV8yX2VudGl0aWVzKAogICAgbXV0IGdyYWRlczogU2luZ2xldG9uTXV0PEdyYWRlZEVudGl0eVN0b3JhZ2U+LAogICAgcXVlcnk6IFF1ZXJ5PChUaGlzLCAmSGllcmFyY2h5RGVwdGgpLCBXaXRoPFRyYW5zZm9ybTI+PiwKKSB7CiAgICBncmFkZXMuY2xlYXIoKTsKCiAgICBmb3IgKGUsIGRlcHRoKSBpbiBxdWVyeS5pdGVyKCkgewogICAgICAgIGdyYWRlcy5pbnNlcnQoKmRlcHRoLCBlKTsKICAgIH0KfQoKLy8vIEdyYWRlIHRyYW5zZm9ybSBlbnRpdGllcyBieSBoaWVyYXJjaHkgZGVwdGgKZm4gZ3JhZGVfdHJhbnNmb3JtXzNfZW50aXRpZXMoCiAgICBtdXQgZ3JhZGVzOiBTaW5nbGV0b25NdXQ8R3JhZGVkRW50aXR5U3RvcmFnZT4sCiAgICBxdWVyeTogUXVlcnk8KFRoaXMsICZIaWVyYXJjaHlEZXB0aCksIFdpdGg8VHJhbnNmb3JtMz4+LAopIHsKICAgIGdyYWRlcy5jbGVhcigpOwoKICAgIGZvciAoZSwgZGVwdGgpIGluIHF1ZXJ5Lml0ZXIoKSB7CiAgICAgICAgZ3JhZGVzLmluc2VydCgqZGVwdGgsIGUpOwogICAgfQp9CgovLy8gQ29tcHV0ZXMgZ2xvYmFsIHRyYW5zZm9ybSBiYXNlZCBvbiBwYXJlbnQgc3RhcnRpbmcgYXQgdGhlIHRvcCBvZiB0aGUgaGllcmFyY2h5CmZuIHVwZGF0ZV9nbG9iYWxfdHJhbnNmb3JtXzIoCiAgICBncmFkZXM6IFNpbmdsZXRvbk11dDxHcmFkZWRFbnRpdHlTdG9yYWdlPiwKICAgIHF1ZXJ5X3RmOiBRdWVyeTwmVHJhbnNmb3JtMj4sCiAgICBtdXQgcXVlcnlfZ3RmOiBRdWVyeTwmbXV0IEdsb2JhbFRyYW5zZm9ybTI+LAogICAgcGFyZW50X29mOiBSZWxhdGlvbjxQYXJlbnRPZj4sCikgewogICAgZm9yIGUgaW4gZ3JhZGVzLml0ZXJfZ3JhZGVkKCkgewogICAgICAgIGxldCBTb21lKHRmKSA9IHF1ZXJ5X3RmLmdldChlKSBlbHNlIHsKICAgICAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgZXByaW50bG4hKCJubyBUcmFuc2Zvcm0yIGZvciB7ZTo/fSIpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9OwoKICAgICAgICBsZXQgbmV4dF9ndGYgPSBpZiBsZXQgU29tZShwYXJlbnQpID0gcGFyZW50X29mLmdldChlKSB7CiAgICAgICAgICAgIGxldCBTb21lKHBhcmVudF9ndGYpID0gcXVlcnlfZ3RmLmdldF9tdXQocGFyZW50KSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIHNob3VsZCBub3QgaGFwcGVuCiAgICAgICAgICAgICAgICBlcHJpbnRsbiEoIm5vdCBHbG9iYWxUcmFuc2Zvcm0yIG9uIHBhcmVudCB7ZTo/fSIpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0ZiAqIHBhcmVudF9ndGYKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBubyBwYXJlbnQ6IHNob3VsZCBub3QgaGFwcGVuCiAgICAgICAgICAgIEdsb2JhbFRyYW5zZm9ybTIodGYuaW50bygpKQogICAgICAgIH07CgogICAgICAgIGxldCBTb21lKGd0ZikgPSBxdWVyeV9ndGYuZ2V0X211dChlKSBlbHNlIHsKICAgICAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgZXByaW50bG4hKCJub3QgR2xvYmFsVHJhbnNmb3JtMiBvbiBzZWxmIHtlOj99Iik7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH07CgogICAgICAgICpndGYgPSBuZXh0X2d0ZjsKICAgIH0KfQoKLy8vIENvbXB1dGVzIGdsb2JhbCB0cmFuc2Zvcm0gYmFzZWQgb24gcGFyZW50IHN0YXJ0aW5nIGF0IHRoZSB0b3Agb2YgdGhlIGhpZXJhcmNoeQpmbiB1cGRhdGVfZ2xvYmFsX3RyYW5zZm9ybV8zKAogICAgZ3JhZGVzOiBTaW5nbGV0b25NdXQ8R3JhZGVkRW50aXR5U3RvcmFnZT4sCiAgICBxdWVyeV90ZjogUXVlcnk8JlRyYW5zZm9ybTM+LAogICAgbXV0IHF1ZXJ5X2d0ZjogUXVlcnk8Jm11dCBHbG9iYWxUcmFuc2Zvcm0zPiwKICAgIHBhcmVudF9vZjogUmVsYXRpb248UGFyZW50T2Y+LAopIHsKICAgIGZvciAoZGVwdGgsIGVudGl0aWVzKSBpbiBncmFkZXMuaXRlcl9ncmFkZXMoKSB7CiAgICAgICAgcHJpbnRsbiEoIkRFUFRIIHtkZXB0aH06Iik7CiAgICAgICAgZm9yICZlIGluIGVudGl0aWVzIHsKICAgICAgICAgICAgbGV0IFNvbWUodGYpID0gcXVlcnlfdGYuZ2V0KGUpIGVsc2UgewogICAgICAgICAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgICAgIGVwcmludGxuISgibm8gVHJhbnNmb3JtMyBmb3Ige2U6P30iKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IG5leHRfZ3RmID0gaWYgbGV0IFNvbWUocGFyZW50KSA9IHBhcmVudF9vZi5nZXQoZSkgewogICAgICAgICAgICAgICAgbGV0IFNvbWUocGFyZW50X2d0ZikgPSBxdWVyeV9ndGYuZ2V0X211dChwYXJlbnQpIGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHNob3VsZCBub3QgaGFwcGVuCiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJubyBHbG9iYWxUcmFuc2Zvcm0zIG9uIHBhcmVudCB7ZTo/fSIpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBwcmludGxuISgicGFyZW50X2d0Zjoge3BhcmVudF9ndGZ9Iik7CiAgICAgICAgICAgICAgICBwcmludGxuISgidGY6IHt0Zn0iKTsKCiAgICAgICAgICAgICAgICB0ZiAqIHBhcmVudF9ndGYKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIG5vIHBhcmVudDogc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgICAgIEdsb2JhbFRyYW5zZm9ybTModGYuaW50bygpKQogICAgICAgICAgICB9OwogICAgICAgICAgICBwcmludGxuISgibmV4dF9ndGY6IHtuZXh0X2d0Zn0iKTsKCiAgICAgICAgICAgIGxldCBTb21lKGd0ZikgPSBxdWVyeV9ndGYuZ2V0X211dChlKSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIHNob3VsZCBub3QgaGFwcGVuCiAgICAgICAgICAgICAgICBlcHJpbnRsbiEoIm5vIEdsb2JhbFRyYW5zZm9ybTMgb24gc2VsZiB7ZTo/fSIpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICAqZ3RmID0gbmV4dF9ndGY7CiAgICAgICAgfQogICAgfQp9CgAAAAAAAAAAKCMAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAzQQAAAAAAADNBAAAAAAAAAAAAAAAAPC/"
				],
				[
					179,
					1,
					"rust_accept_suggested_replacement",
					{
						"region":
						[
							206,
							228
						],
						"replacement": ""
					},
					"AQAAAM4AAAAAAAAAzgAAAAAAAAAWAAAALCBjb2xsZWN0aW9uczo6SGFzaE1hcA",
					"AQAAAAAAAAABAAAAzQQAAAAAAADNBAAAAAAAAAAAAAAAAPC/"
				],
				[
					183,
					1,
					"rust_accept_suggested_replacement",
					{
						"region":
						[
							7826,
							7831
						],
						"replacement": "_depth"
					},
					"AQAAAJIeAAAAAAAAmB4AAAAAAAAFAAAAZGVwdGg",
					"AQAAAAAAAAABAAAAHAEAAAAAAAAcAQAAAAAAAAAAAAAAAPC/"
				],
				[
					186,
					1,
					"right_delete",
					null,
					"AQAAAL4eAAAAAAAAvh4AAAAAAAApAAAAICAgICAgICAvLyBwcmludGxuISgiREVQVEgge2RlcHRoOj99OiIpOwo",
					"AQAAAAAAAAABAAAAvh4AAAAAAADnHgAAAAAAAAAAAAAAAPC/"
				],
				[
					189,
					2,
					"right_delete",
					null,
					"AgAAAL8gAAAAAAAAvyAAAAAAAABiAAAAICAgICAgICAgICAgICAgIC8vIHByaW50bG4hKCJwYXJlbnRfZ3RmOiB7cGFyZW50X2d0Zn0iKTsKICAgICAgICAgICAgICAgIC8vIHByaW50bG4hKCJ0Zjoge3RmfSIpOwq/IAAAAAAAAL8gAAAAAAAAAQAAAAo",
					"AQAAAAAAAAABAAAAvyAAAAAAAAAhIQAAAAAAAAAAAAAAAPC/"
				],
				[
					196,
					1,
					"right_delete",
					null,
					"AQAAAF8hAAAAAAAAXyEAAAAAAAAxAAAAICAgICAgICAgICAgLy8gcHJpbnRsbiEoIm5leHRfZ3RmOiB7bmV4dF9ndGZ9Iik7Cg",
					"AQAAAAAAAAABAAAAXyEAAAAAAACQIQAAAAAAAAAAAAAAAPC/"
				],
				[
					202,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABWIgAALy8gQ29weXJpZ2h0IDIwMjMgYnkgRGF2aWQgV2Vpa2Vyc2RvcmZlci4gQWxsIHJpZ2h0cyByZXNlcnZlZC4KCnVzZSBjcmF0ZTo6KjsKdXNlIGV4Y2Vzczo6cHJlbHVkZTo6KjsKdXNlIG1hZ2lfZ2Vtczo6U2xvdFZlYzsKdXNlIHNpbXBsZWNzOjp7Q29tbWFuZHMsIE1vY2NhLCBRdWVyeSwgUmVsYXRpb24sIFdvcmxkfTsKdXNlIHN0ZDo6e2NtcDo6T3JkZXJpbmcsIG9wczo6RGVyZWZ9OwoKLy8vIENoYW5nZXMgdGhlIHBhcmVudCBvZiBgY2hpbGRgIHRvIGBwYXJlbnRgCiNbZGVyaXZlKENsb25lKV0KcHViIHN0cnVjdCBDaGFuZ2VIaWVyYXJjaHlDb21tYW5kIHsKICAgIHB1YiBwYXJlbnQ6IEVudGl0eSwKICAgIHB1YiBjaGlsZDogRW50aXR5LAp9CgovLy8gRGVzdHJveXMgYW4gZW50aXR5IGFuZCBwb3RlbnRpYWxseSBpdHMgZGVzY2VuZGVudHMuIE11c3QgYmUgYWRkZWQgdG8gdGhlIGVudGl0eSB0byBkZXN0cm95LgpwdWIgc3RydWN0IERlc3Ryb3lFbnRpdHlDb21tYW5kIHsKICAgIC8vLyBJZiBlbmFibGVkIGFsbCBkZXNjZW5kZW50cyBsaWtlIGNoaWxkcmVuLCBncmFuZC1jaGlsZHJlbiwgZXRjLiBhcmUgZGVzdHJveWVkLiBPdGhlcndpc2UKICAgIC8vLyB0aGUgZGlyZWN0IGNoaWxkcmVuIHdpbGwgYmVjb21lIHJvb3RzLgogICAgcHViIHJlY3Vyc2l2ZTogYm9vbCwKfQoKI1tkZXJpdmUoU2luZ2xldG9uKV0KcHViIHN0cnVjdCBSb290KEVudGl0eSk7CgppbXBsIERlcmVmIGZvciBSb290IHsKICAgIHR5cGUgVGFyZ2V0ID0gRW50aXR5OwoKICAgIGZuIGRlcmVmKCZzZWxmKSAtPiAmU2VsZjo6VGFyZ2V0IHsKICAgICAgICAmc2VsZi4wCiAgICB9Cn0KCnB1YiBzdHJ1Y3QgU2NlbmVUcmVlTW9jY2E7CgppbXBsIE1vY2NhIGZvciBTY2VuZVRyZWVNb2NjYSB7CiAgICBmbiBzdGFydCh3b3JsZDogJm11dCBXb3JsZCkgLT4gU2VsZiB7CiAgICAgICAgLy8gd29ybGQuc2V0X3NpbmdsZXRvbihTY2VuZVRyZWVVcGRhdGVXb3Jrc3BhY2U6OmRlZmF1bHQoKSk7CiAgICAgICAgd29ybGQuc2V0X3NpbmdsZXRvbihHcmFkZWRFbnRpdHlTdG9yYWdlOjpkZWZhdWx0KCkpOwoKICAgICAgICAvLyBjcmVhdGUgcm9vdAogICAgICAgIGxldCByb290ID0gd29ybGQKICAgICAgICAgICAgLnNwYXduKCgKICAgICAgICAgICAgICAgIE5hbWU6OmZyb21fc3RyKCJTY2VuZVRyZWVNb2NjYTo6cm9vdCIpLAogICAgICAgICAgICAgICAgSGllcmFyY2h5RGVwdGgoMCksCiAgICAgICAgICAgICAgICBUcmFuc2Zvcm0zOjppZGVudGl0eSgpLAogICAgICAgICAgICApKQogICAgICAgICAgICAuaWQoKTsKICAgICAgICB3b3JsZC5zZXRfc2luZ2xldG9uKFJvb3Qocm9vdCkpOwoKICAgICAgICBTZWxmCiAgICB9CgogICAgZm4gZmluaSgmbXV0IHNlbGYsIHdvcmxkOiAmbXV0IFdvcmxkKSB7CiAgICAgICAgLy8gd29ybGQucmVtb3ZlX3NpbmdsZXRvbjo6PFNjZW5lVHJlZVVwZGF0ZVdvcmtzcGFjZT4oKTsKICAgICAgICB3b3JsZC5yZW1vdmVfc2luZ2xldG9uOjo8R3JhZGVkRW50aXR5U3RvcmFnZT4oKTsKICAgIH0KCiAgICBmbiBzdGVwKCZtdXQgc2VsZiwgd29ybGQ6ICZtdXQgV29ybGQpIHsKICAgICAgICB3b3JsZC5ydW4oYXR0YWNoX3BhcmVudF9lbnRpdGllc190b19yb290KTsKICAgICAgICB3b3JsZC5ydW4oYXR0YWNoX3RyYW5zZm9ybV9lbnRpdGllc190b19yb290KTsKCiAgICAgICAgd29ybGQucnVuKGVuc3VyZV9oaWVyYXJjaHlfZGVwdGhfZXhpc3RzKTsKICAgICAgICB3b3JsZC5ydW4oY29tcHV0ZV9oaWVyYXJjaHlfZGVwdGgpOwoKICAgICAgICB3b3JsZC5ydW4oZXN0YWJsaXNoX2dsb2JhbF90cmFuc2Zvcm1fMik7CiAgICAgICAgd29ybGQucnVuKGdyYWRlX3RyYW5zZm9ybV8yX2VudGl0aWVzKTsKICAgICAgICB3b3JsZC5ydW4odXBkYXRlX2dsb2JhbF90cmFuc2Zvcm1fMik7CgogICAgICAgIHdvcmxkLnJ1bihlc3RhYmxpc2hfZ2xvYmFsX3RyYW5zZm9ybV8zKTsKICAgICAgICB3b3JsZC5ydW4oZ3JhZGVfdHJhbnNmb3JtXzNfZW50aXRpZXMpOwogICAgICAgIHdvcmxkLnJ1bih1cGRhdGVfZ2xvYmFsX3RyYW5zZm9ybV8zKTsKICAgIH0KfQoKLy8gI1tkZXJpdmUoU2luZ2xldG9uLCBEZWZhdWx0KV0KLy8gc3RydWN0IFNjZW5lVHJlZVVwZGF0ZVdvcmtzcGFjZSB7Ci8vICAgICB0YXNrczogVmVjPEVudGl0eT4sCi8vICAgICB0YXNrc19jaGFuZ2VfZW5hYmxlZDogVmVjPChFbnRpdHksIGJvb2wpPiwKLy8gfQoKI1tkZXJpdmUoU2luZ2xldG9uLCBEZWZhdWx0KV0Kc3RydWN0IEdyYWRlZEVudGl0eVN0b3JhZ2UgewogICAgZ3JhZGVzOiBTbG90VmVjPFZlYzxFbnRpdHk+PiwKfQoKaW1wbCBHcmFkZWRFbnRpdHlTdG9yYWdlIHsKICAgIHB1YiBmbiBjbGVhcigmbXV0IHNlbGYpIHsKICAgICAgICBmb3IgdiBpbiBzZWxmLmdyYWRlcy5pdGVyX211dCgpIHsKICAgICAgICAgICAgdi5jbGVhcigpOwogICAgICAgIH0KICAgIH0KCiAgICBwdWIgZm4gaW5zZXJ0KCZtdXQgc2VsZiwgZGVwdGg6IEhpZXJhcmNoeURlcHRoLCBlbnRpdHk6IEVudGl0eSkgewogICAgICAgIHNlbGYuZ3JhZGVzLmVudHJ5X29yX2RlZmF1bHQoZGVwdGguMCBhcyB1c2l6ZSkucHVzaChlbnRpdHkpOwogICAgfQoKICAgIHB1YiBmbiBpdGVyX2dyYWRlcygmc2VsZikgLT4gaW1wbCBJdGVyYXRvcjxJdGVtID0gKEhpZXJhcmNoeURlcHRoLCAmW0VudGl0eV0pPiB7CiAgICAgICAgc2VsZi5ncmFkZXMKICAgICAgICAgICAgLml0ZXIoKQogICAgICAgICAgICAuZW51bWVyYXRlKCkKICAgICAgICAgICAgLm1hcCh8KGksIHYpfCAoSGllcmFyY2h5RGVwdGgoaSBhcyB1MTYpLCB2LmFzX3NsaWNlKCkpKQogICAgfQoKICAgIHB1YiBmbiBpdGVyX2dyYWRlZCgmc2VsZikgLT4gaW1wbCBJdGVyYXRvcjxJdGVtID0gRW50aXR5PiArIHVzZTwnXz4gewogICAgICAgIHNlbGYuZ3JhZGVzCiAgICAgICAgICAgIC5pdGVyKCkKICAgICAgICAgICAgLmZsYXRfbWFwKHx2fCB2Lml0ZXIoKS5tYXAofCZlbnRpdHl8IGVudGl0eSkpCiAgICB9Cn0KCi8vLyBFbnRpdGllcyB3aXRoIGNoaWxkcmVuLCBidXQgd2l0aG91dCBwYXJlbnQgYXJlIGF0dGFjaGVkIHRvIHRoZSBnbG9iYWwgcm9vdApmbiBhdHRhY2hfcGFyZW50X2VudGl0aWVzX3RvX3Jvb3QoCiAgICByb290OiBTaW5nbGV0b25NdXQ8Um9vdD4sCiAgICBxdWVyeTogUXVlcnk8VGhpcz4sIC8vIFRPRE8gdXNlIG1vcmUgc29waGlzdGljYXRlZCBxdWVyeQogICAgY2hpbGRfb2Y6IFJlbGF0aW9uPENoaWxkT2Y+LAogICAgcGFyZW50X29mOiBSZWxhdGlvbjxQYXJlbnRPZj4sCiAgICBtdXQgY21kOiBDb21tYW5kcywKKSB7CiAgICBsZXQgcm9vdF9lbnRpdHkgPSAqKnJvb3Q7CiAgICBmb3IgZSBpbiBxdWVyeS5pdGVyKCkgewogICAgICAgIGlmIGNoaWxkX29mLmFueShlKSAmJiBwYXJlbnRfb2YuZ2V0KGUpLmlzX25vbmUoKSAmJiBlICE9IHJvb3RfZW50aXR5IHsKICAgICAgICAgICAgbG9nOjpkZWJ1ZyEoImF0dGFjaGVkIHtlfSB0byByb290IHtyb290X2VudGl0eX0iKTsKICAgICAgICAgICAgY21kLmVudGl0eShlKS5zZXQoKENoaWxkT2YsIHJvb3RfZW50aXR5KSk7CiAgICAgICAgfQogICAgfQp9CgovLy8gRW50aXRpZXMgd2l0aCB0cmFuc2Zvcm0sIGJ1dCB3aXRob3V0IHBhcmVudCBhcmUgYXR0YWNoZWQgdG8gdGhlIGdsb2JhbCByb290CmZuIGF0dGFjaF90cmFuc2Zvcm1fZW50aXRpZXNfdG9fcm9vdCgKICAgIHJvb3Q6IFNpbmdsZXRvbk11dDxSb290PiwKICAgIHF1ZXJ5OiBRdWVyeTxUaGlzLCBXaXRoPEdsb2JhbFRyYW5zZm9ybTM+PiwgLy8gVE9ETyB1c2UgbW9yZSBzb3BoaXN0aWNhdGVkIHF1ZXJ5CiAgICBwYXJlbnRfb2Y6IFJlbGF0aW9uPFBhcmVudE9mPiwKICAgIG11dCBjbWQ6IENvbW1hbmRzLAopIHsKICAgIGxldCByb290X2VudGl0eSA9ICoqcm9vdDsKICAgIGZvciBlIGluIHF1ZXJ5Lml0ZXIoKSB7CiAgICAgICAgaWYgcGFyZW50X29mLmdldChlKS5pc19ub25lKCkgJiYgZSAhPSByb290X2VudGl0eSB7CiAgICAgICAgICAgIGxvZzo6ZGVidWchKCJhdHRhY2hlZCB7ZX0gdG8gcm9vdCB7cm9vdF9lbnRpdHl9Iik7CiAgICAgICAgICAgIGNtZC5lbnRpdHkoZSkuc2V0KChDaGlsZE9mLCByb290X2VudGl0eSkpOwogICAgICAgIH0KICAgIH0KfQoKLy8vIEFsbCBlbnRpdGllcyB3aXRoIGEgcGFyZW50IG11c3QgaGF2ZSBhIEhpZXJhcmNoeURlcHRoCmZuIGVuc3VyZV9oaWVyYXJjaHlfZGVwdGhfZXhpc3RzKAogICAgcXVlcnk6IFF1ZXJ5PFRoaXMsIChXaXRob3V0PEhpZXJhcmNoeURlcHRoPiwgV2l0aDwoVGhpcywgQ2hpbGRPZiwgRTEpPik+LAogICAgbXV0IGNtZDogQ29tbWFuZHMsCikgewogICAgZm9yIGUgaW4gcXVlcnkuaXRlcigpIHsKICAgICAgICBjbWQuZW50aXR5KGUpLnNldChIaWVyYXJjaHlEZXB0aCgwKSk7CiAgICB9Cn0KCi8vLyBDb21wdXRlIGhpZXJhcmNoeSBkZXB0aApmbiBjb21wdXRlX2hpZXJhcmNoeV9kZXB0aCgKICAgIHF1ZXJ5X3BhcmVudF9jaGlsZDogUXVlcnk8KEUwLCBFMSksIChXaXRoPEhpZXJhcmNoeURlcHRoPiwgV2l0aDwoRTEsIENoaWxkT2YsIEUwKT4pPiwKICAgIG11dCBxdWVyeV9kZXB0aDogUXVlcnk8Jm11dCBIaWVyYXJjaHlEZXB0aD4sCikgewogICAgLy8gY29sbGVjdCBhbGwgcGFyZW50L2NoaWxkIHBhaXJzCiAgICBsZXQgbXV0IGl0ZW1zID0gVmVjOjpuZXcoKTsKICAgIGZvciAocGFyZW50LCBjaGlsZCkgaW4gcXVlcnlfcGFyZW50X2NoaWxkLml0ZXIoKSB7CiAgICAgICAgaXRlbXMucHVzaCgocGFyZW50LCBjaGlsZCkpOwogICAgfQoKICAgIC8vIHNvcnQgc3VjaCB0aGF0IHBhcmVudHMgY29tZSBiZWZvcmUgY2hpbGRyZW4KICAgIGl0ZW1zLnNvcnRfYnkofChwLCBjKSwgKGEsIGIpfCB7CiAgICAgICAgaWYgYiA9PSBwIHsKICAgICAgICAgICAgT3JkZXJpbmc6OkdyZWF0ZXIKICAgICAgICB9IGVsc2UgaWYgYSA9PSBjIHsKICAgICAgICAgICAgT3JkZXJpbmc6Okxlc3MKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBPcmRlcmluZzo6RXF1YWwKICAgICAgICB9CiAgICB9KTsKCiAgICAvLyBpdGVyYXRlIGluIG9yZGVyIGFuZCBjb21wdXRlIGRlcHRoCiAgICBmb3IgKHBhcmVudCwgY2hpbGQpIGluIGl0ZW1zLmludG9faXRlcigpIHsKICAgICAgICBsZXQgcGFyZW50X2RlcHRoID0gcXVlcnlfZGVwdGguZ2V0X211dChwYXJlbnQpLnVud3JhcCgpOwogICAgICAgICpxdWVyeV9kZXB0aC5nZXRfbXV0KGNoaWxkKS51bndyYXAoKSA9IHBhcmVudF9kZXB0aC5pbmMoKTsKICAgIH0KfQoKLy8vIEVhY2ggZW50aXR5IHdpdGggVHJhbnNmb3JtMiBhbHNvIGhhcyBhIFN0ZXAgMQpmbiBlc3RhYmxpc2hfZ2xvYmFsX3RyYW5zZm9ybV8yKAogICAgcXVlcnk6IFF1ZXJ5PFRoaXMsIChXaXRoPFRyYW5zZm9ybTI+LCBXaXRob3V0PEdsb2JhbFRyYW5zZm9ybTI+KT4sCiAgICBtdXQgY21kOiBDb21tYW5kcywKKSB7CiAgICBmb3IgZSBpbiBxdWVyeS5pdGVyKCkgewogICAgICAgIGNtZC5lbnRpdHkoZSkuc2V0KEdsb2JhbFRyYW5zZm9ybTI6OmRlZmF1bHQoKSk7CiAgICB9Cn0KCi8vLyBFYWNoIGVudGl0eSB3aXRoIFRyYW5zZm9ybTMgYWxzbyBoYXMgYSBHbG9iYWxUcmFuc2Zvcm0zCmZuIGVzdGFibGlzaF9nbG9iYWxfdHJhbnNmb3JtXzMoCiAgICBxdWVyeTogUXVlcnk8VGhpcywgKFdpdGg8VHJhbnNmb3JtMz4sIFdpdGhvdXQ8R2xvYmFsVHJhbnNmb3JtMz4pPiwKICAgIG11dCBjbWQ6IENvbW1hbmRzLAopIHsKICAgIGZvciBlIGluIHF1ZXJ5Lml0ZXIoKSB7CiAgICAgICAgY21kLmVudGl0eShlKS5zZXQoR2xvYmFsVHJhbnNmb3JtMzo6ZGVmYXVsdCgpKTsKICAgIH0KfQoKLy8vIEdyYWRlIHRyYW5zZm9ybSBlbnRpdGllcyBieSBoaWVyYXJjaHkgZGVwdGgKZm4gZ3JhZGVfdHJhbnNmb3JtXzJfZW50aXRpZXMoCiAgICBtdXQgZ3JhZGVzOiBTaW5nbGV0b25NdXQ8R3JhZGVkRW50aXR5U3RvcmFnZT4sCiAgICBxdWVyeTogUXVlcnk8KFRoaXMsICZIaWVyYXJjaHlEZXB0aCksIFdpdGg8VHJhbnNmb3JtMj4+LAopIHsKICAgIGdyYWRlcy5jbGVhcigpOwoKICAgIGZvciAoZSwgZGVwdGgpIGluIHF1ZXJ5Lml0ZXIoKSB7CiAgICAgICAgZ3JhZGVzLmluc2VydCgqZGVwdGgsIGUpOwogICAgfQp9CgovLy8gR3JhZGUgdHJhbnNmb3JtIGVudGl0aWVzIGJ5IGhpZXJhcmNoeSBkZXB0aApmbiBncmFkZV90cmFuc2Zvcm1fM19lbnRpdGllcygKICAgIG11dCBncmFkZXM6IFNpbmdsZXRvbk11dDxHcmFkZWRFbnRpdHlTdG9yYWdlPiwKICAgIHF1ZXJ5OiBRdWVyeTwoVGhpcywgJkhpZXJhcmNoeURlcHRoKSwgV2l0aDxUcmFuc2Zvcm0zPj4sCikgewogICAgZ3JhZGVzLmNsZWFyKCk7CgogICAgZm9yIChlLCBkZXB0aCkgaW4gcXVlcnkuaXRlcigpIHsKICAgICAgICBncmFkZXMuaW5zZXJ0KCpkZXB0aCwgZSk7CiAgICB9Cn0KCi8vLyBDb21wdXRlcyBnbG9iYWwgdHJhbnNmb3JtIGJhc2VkIG9uIHBhcmVudCBzdGFydGluZyBhdCB0aGUgdG9wIG9mIHRoZSBoaWVyYXJjaHkKZm4gdXBkYXRlX2dsb2JhbF90cmFuc2Zvcm1fMigKICAgIGdyYWRlczogU2luZ2xldG9uTXV0PEdyYWRlZEVudGl0eVN0b3JhZ2U+LAogICAgcXVlcnlfdGY6IFF1ZXJ5PCZUcmFuc2Zvcm0yPiwKICAgIG11dCBxdWVyeV9ndGY6IFF1ZXJ5PCZtdXQgR2xvYmFsVHJhbnNmb3JtMj4sCiAgICBwYXJlbnRfb2Y6IFJlbGF0aW9uPFBhcmVudE9mPiwKKSB7CiAgICBmb3IgZSBpbiBncmFkZXMuaXRlcl9ncmFkZWQoKSB7CiAgICAgICAgbGV0IFNvbWUodGYpID0gcXVlcnlfdGYuZ2V0KGUpIGVsc2UgewogICAgICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbgogICAgICAgICAgICBlcHJpbnRsbiEoIm5vIFRyYW5zZm9ybTIgZm9yIHtlOj99Iik7CiAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH07CgogICAgICAgIGxldCBuZXh0X2d0ZiA9IGlmIGxldCBTb21lKHBhcmVudCkgPSBwYXJlbnRfb2YuZ2V0KGUpIHsKICAgICAgICAgICAgbGV0IFNvbWUocGFyZW50X2d0ZikgPSBxdWVyeV9ndGYuZ2V0X211dChwYXJlbnQpIGVsc2UgewogICAgICAgICAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgICAgIGVwcmludGxuISgibm90IEdsb2JhbFRyYW5zZm9ybTIgb24gcGFyZW50IHtlOj99Iik7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIHRmICogcGFyZW50X2d0ZgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIG5vIHBhcmVudDogc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgR2xvYmFsVHJhbnNmb3JtMih0Zi5pbnRvKCkpCiAgICAgICAgfTsKCiAgICAgICAgbGV0IFNvbWUoZ3RmKSA9IHF1ZXJ5X2d0Zi5nZXRfbXV0KGUpIGVsc2UgewogICAgICAgICAgICAvLyBzaG91bGQgbm90IGhhcHBlbgogICAgICAgICAgICBlcHJpbnRsbiEoIm5vdCBHbG9iYWxUcmFuc2Zvcm0yIG9uIHNlbGYge2U6P30iKTsKICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgfTsKCiAgICAgICAgKmd0ZiA9IG5leHRfZ3RmOwogICAgfQp9CgovLy8gQ29tcHV0ZXMgZ2xvYmFsIHRyYW5zZm9ybSBiYXNlZCBvbiBwYXJlbnQgc3RhcnRpbmcgYXQgdGhlIHRvcCBvZiB0aGUgaGllcmFyY2h5CmZuIHVwZGF0ZV9nbG9iYWxfdHJhbnNmb3JtXzMoCiAgICBncmFkZXM6IFNpbmdsZXRvbk11dDxHcmFkZWRFbnRpdHlTdG9yYWdlPiwKICAgIHF1ZXJ5X3RmOiBRdWVyeTwmVHJhbnNmb3JtMz4sCiAgICBtdXQgcXVlcnlfZ3RmOiBRdWVyeTwmbXV0IEdsb2JhbFRyYW5zZm9ybTM+LAogICAgcGFyZW50X29mOiBSZWxhdGlvbjxQYXJlbnRPZj4sCikgewogICAgZm9yIChfZGVwdGgsIGVudGl0aWVzKSBpbiBncmFkZXMuaXRlcl9ncmFkZXMoKSB7CiAgICAgICAgZm9yICZlIGluIGVudGl0aWVzIHsKICAgICAgICAgICAgbGV0IFNvbWUodGYpID0gcXVlcnlfdGYuZ2V0KGUpIGVsc2UgewogICAgICAgICAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgICAgIGVwcmludGxuISgibm8gVHJhbnNmb3JtMyBmb3Ige2U6P30iKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IG5leHRfZ3RmID0gaWYgbGV0IFNvbWUocGFyZW50KSA9IHBhcmVudF9vZi5nZXQoZSkgewogICAgICAgICAgICAgICAgbGV0IFNvbWUocGFyZW50X2d0ZikgPSBxdWVyeV9ndGYuZ2V0X211dChwYXJlbnQpIGVsc2UgewogICAgICAgICAgICAgICAgICAgIC8vIHNob3VsZCBub3QgaGFwcGVuCiAgICAgICAgICAgICAgICAgICAgZXByaW50bG4hKCJubyBHbG9iYWxUcmFuc2Zvcm0zIG9uIHBhcmVudCB7ZTo/fSIpOwogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICB0ZiAqIHBhcmVudF9ndGYKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIG5vIHBhcmVudDogc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgICAgIEdsb2JhbFRyYW5zZm9ybTModGYuaW50bygpKQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IFNvbWUoZ3RmKSA9IHF1ZXJ5X2d0Zi5nZXRfbXV0KGUpIGVsc2UgewogICAgICAgICAgICAgICAgLy8gc2hvdWxkIG5vdCBoYXBwZW4KICAgICAgICAgICAgICAgIGVwcmludGxuISgibm8gR2xvYmFsVHJhbnNmb3JtMyBvbiBzZWxmIHtlOj99Iik7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICpndGYgPSBuZXh0X2d0ZjsKICAgICAgICB9CiAgICB9Cn0KAAAAAAAAAABQHgAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA9BoAAAAAAAD0GgAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "/I/Ikabur/candy/crates/candy/src/renderer/renderer.rs",
			"settings":
			{
				"buffer_size": 16008,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					156,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACmOAAAdXNlIGNyYXRlOjp7CiAgICBCaW5kR3JvdXAsIEJpbmRHcm91cEJ1aWxkZXIsIEJpbmRHcm91cExheW91dEJ1aWxkZXIsIENhbWVyYUJ1ZmZlciwgQ2FtZXJhVW5pZm9ybUdyb3VwLAogICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsIEZyYW1lLCBTaGFyZWRXZ3B1UmVzLCBVYmVySW5zdGFuY2VCdWZmZXIsIFViZXJJbnN0YW5jZVBvZCwgVWJlclBpcGVsaW5lLAogICAgV2luZG93LAogICAgbWVzaDo6e01lc2hQcm94eUlkLCBTaGFyZWRNZXNoUHJveHlTdG9yZX0sCiAgICBzdHJlYW06OntTaGFyZWRVYmVySW5kZXhCdWZmZXIsIFNoYXJlZFViZXJWZXJ0ZXhCdWZmZXJ9LAp9Owp1c2Ugc3RkOjp7Y2VsbDo6UmVmQ2VsbCwgY29sbGVjdGlvbnM6Okhhc2hNYXB9Owp1c2Ugd2dwdTo6dXRpbDo6RGV2aWNlRXh0OwoKY29uc3QgVUJFUl9JTlNUQU5DRV9DT1VOVDogdXNpemUgPSAxMF8wMDA7CgpwdWIgc3RydWN0IFJlbmRlcmVySGFuZGxlcyB7CiAgICBwdWIgd2dwdTogU2hhcmVkV2dwdVJlcywKICAgIHB1YiBpbmRleF9idWY6IFNoYXJlZFViZXJJbmRleEJ1ZmZlciwKICAgIHB1YiB2ZXJ0ZXhfYnVmOiBTaGFyZWRVYmVyVmVydGV4QnVmZmVyLAogICAgcHViIG1lc2hfcHJveHlfc3RvcmU6IFNoYXJlZE1lc2hQcm94eVN0b3JlLAp9CgpwdWIgc3RydWN0IFJlbmRlcmVyIHsKICAgIGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcywKCiAgICBjYW1lcmFfYnVmOiBDYW1lcmFCdWZmZXIsCiAgICBjYW1lcmFfYmc6IEJpbmRHcm91cCwKCiAgICBpbnN0YW5jZV9idWY6IFJlZkNlbGw8VWJlckluc3RhbmNlQnVmZmVyPiwKICAgIGluc3RhbmNlX2JnOiBCaW5kR3JvdXAsCgogICAgaW5kZXhfYmc6IEJpbmRHcm91cCwKICAgIHZlcnRleF9iZzogQmluZEdyb3VwLAoKICAgIHViZXJfcGlwZWxpbmU6IFViZXJQaXBlbGluZSwKfQoKaW1wbCBSZW5kZXJlciB7CiAgICBwdWIgZm4gbmV3KGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcykgLT4gU2VsZiB7CiAgICAgICAgY29uc3QgQ09MT1JfRk9STUFUOiB3Z3B1OjpUZXh0dXJlRm9ybWF0ID0gd2dwdTo6VGV4dHVyZUZvcm1hdDo6QmdyYThVbm9ybVNyZ2I7CgogICAgICAgIGxldCB3Z3B1X2RldmljZSA9IGhhbmRsZXMud2dwdS5kZXZpY2UoKTsKCiAgICAgICAgbGV0IGNhbWVyYV9idWYgPSBDYW1lcmFCdWZmZXI6Om5ldyh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbnN0YW5jZV9idWYgPSBVYmVySW5zdGFuY2VCdWZmZXI6Om5ldyhVQkVSX0lOU1RBTkNFX0NPVU5ULCB3Z3B1X2RldmljZSk7CgogICAgICAgIC8vIGxldCB0cmFuc2Zvcm1fYnVmID0gVHJhbnNmb3JtQnVmZmVyR3B1OjpuZXcod2dwdS5kZXZpY2UoKSk7CgogICAgICAgIC8vIGxldCBpZF9pbnN0YW5jZV9idWYgPSBHcHVCdWZmZXI6OmZyb21fc2xpY2UoCiAgICAgICAgLy8gICAgICZbVGYxMjo6ZnJvbV9nbG9iYWxfdHJhbnNmb3JtXzMoJkdsb2JhbFRyYW5zZm9ybTM6OmlkZW50aXR5KCkpXSwKICAgICAgICAvLyAgICAgImlkIGluc3QgYnVmIiwKICAgICAgICAvLyAgICAgd2dwdS5kZXZpY2UoKSwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgYnVmZmVycyA9IEdwdUJ1ZmZlclN0b3JlOjpuZXcoKTsKCiAgICAgICAgLy8gbGV0IGJpbmRfZ3JvdXBfdGV4dHVyZV9sYXlvdXQgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgIC8vICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCB0ZXh0dXJlIGJpbmQgZ3JvdXAgbGF5b3V0IikKICAgICAgICAvLyAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6U2FtcGxlcigKICAgICAgICAvLyAgICAgICAgIHdncHU6OlNhbXBsZXJCaW5kaW5nVHlwZTo6RmlsdGVyaW5nLAogICAgICAgIC8vICAgICApKQogICAgICAgIC8vICAgICAud2l0aF9iaW5kaW5nKHdncHU6OkJpbmRpbmdUeXBlOjpUZXh0dXJlIHsKICAgICAgICAvLyAgICAgICAgIHNhbXBsZV90eXBlOiB3Z3B1OjpUZXh0dXJlU2FtcGxlVHlwZTo6RmxvYXQgeyBmaWx0ZXJhYmxlOiB0cnVlIH0sCiAgICAgICAgLy8gICAgICAgICB2aWV3X2RpbWVuc2lvbjogd2dwdTo6VGV4dHVyZVZpZXdEaW1lbnNpb246OkQyLAogICAgICAgIC8vICAgICAgICAgbXVsdGlzYW1wbGVkOiBmYWxzZSwKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgICAgLmZpbmFsaXplKHdncHUuZGV2aWNlKCkpOwoKICAgICAgICBsZXQgY2FtZXJhX2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJkZWZhdWx0IGNhbWVyYSB1bmlmb3JtIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoQ2FtZXJhVW5pZm9ybUdyb3VwOjpiaW5kaW5nX3R5cGUoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgbGV0IGNhbWVyYV9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhjYW1lcmFfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCBjYW1lcmEgdW5pZm9ybSIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoY2FtZXJhX2J1Zi5yZXMoKS5hc19lbnRpcmVfYmluZGluZygpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmdsID0gQmluZEdyb3VwTGF5b3V0QnVpbGRlcjo6bmV3KCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgaW5zdGFuY2UgYnVmZmVyIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcod2dwdTo6QmluZGluZ1R5cGU6OkJ1ZmZlciB7CiAgICAgICAgICAgICAgICB0eTogd2dwdTo6QnVmZmVyQmluZGluZ1R5cGU6OlN0b3JhZ2UgeyByZWFkX29ubHk6IHRydWUgfSwKICAgICAgICAgICAgICAgIGhhc19keW5hbWljX29mZnNldDogZmFsc2UsCiAgICAgICAgICAgICAgICBtaW5fYmluZGluZ19zaXplOiBOb25lLAogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcoaW5zdGFuY2VfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbnN0YW5jZSBidWZmZXIiKQogICAgICAgICAgICAud2l0aF9iaW5kaW5nKGluc3RhbmNlX2J1Zi5kZXZpY2UuYXNfd2dwdV9iaW5kaW5nX3Jlc291cmNlKCkpCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZ2wgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbmRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhpbmRleF9iZ2wpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIGluZGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy5pbmRleF9idWYubG9jaygpLmFzX3dncHVfYmluZGluZ19yZXNvdXJjZSgpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgdmVydGV4X2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIHZlcnRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCB2ZXJ0ZXhfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcodmVydGV4X2JnbCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgdmVydGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKS5hc193Z3B1X2JpbmRpbmdfcmVzb3VyY2UoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgLy8gbGV0IHBhcnRpY2xlX3JlbmRlcl9waXBlbGluZSA9IFNpbXBsZVJlbmRlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgLy8gICAgICJQYXJ0aWNsZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvcGFydGljbGUud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVTdHJpcCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgLy8gICAgIFVWZXJ0ZXg6OmxheW91dCgzKSwKICAgICAgICAvLyAgICAgU29tZShQYXJ0aWNsZUluc3RhbmNlOjpsYXlvdXQoMCkpLAogICAgICAgIC8vICAgICAmWyZjYW1lcmFfYmddLAogICAgICAgIC8vICAgICB3Z3B1X2RldmljZSwKICAgICAgICAvLyAgICAgQ09MT1JfRk9STUFULAogICAgICAgIC8vICAgICBERVBUSF9TVEVOQ0lMX0ZPUk1BVCwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgbGluZV9yZW5kZXJfcGlwZWxpbmUgPSBTaW1wbGVSZW5kZXJQaXBlbGluZTo6bmV3KAogICAgICAgIC8vICAgICAiTGluZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvbGluZS53Z3NsIiksCiAgICAgICAgLy8gICAgIHdncHU6OlByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lTGlzdCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkxpbmUsCiAgICAgICAgLy8gICAgIFBjVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgyKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIC8vIGxldCBvcGFxdWVfcmVuZGVyX3BpcGVsaW5lID0gU2ltcGxlUmVuZGVyUGlwZWxpbmU6Om5ldygKICAgICAgICAvLyAgICAgIk1lc2ggUmVuZGVyIFBpcGVsaW5lIiwKICAgICAgICAvLyAgICAgaW5jbHVkZV9zdHIhKCIuLi8uLi9zaGFkZXJzL21lc2gud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVMaXN0LAogICAgICAgIC8vICAgICB3Z3B1OjpQb2x5Z29uTW9kZTo6RmlsbCwKICAgICAgICAvLyAgICAgUGNuVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgzKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIGxldCB1YmVyX3BpcGVsaW5lID0gVWJlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgICAgIGluY2x1ZGVfc3RyISgiLi4vLi4vc2hhZGVycy91YmVyLndnc2wiKSwKICAgICAgICAgICAgd2dwdTo6UHJpbWl0aXZlVG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCwKICAgICAgICAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgICAgICZbJmNhbWVyYV9iZywgJmluc3RhbmNlX2JnLCAmdmVydGV4X2JnXSwKICAgICAgICAgICAgd2dwdV9kZXZpY2UsCiAgICAgICAgICAgIENPTE9SX0ZPUk1BVCwKICAgICAgICAgICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsCiAgICAgICAgKTsKCiAgICAgICAgUmVuZGVyZXIgewogICAgICAgICAgICBoYW5kbGVzLAogICAgICAgICAgICBjYW1lcmFfYnVmLAogICAgICAgICAgICBjYW1lcmFfYmcsCiAgICAgICAgICAgIGluc3RhbmNlX2J1ZjogUmVmQ2VsbDo6bmV3KGluc3RhbmNlX2J1ZiksCiAgICAgICAgICAgIGluc3RhbmNlX2JnLAogICAgICAgICAgICBpbmRleF9iZywKICAgICAgICAgICAgdmVydGV4X2JnLAogICAgICAgICAgICB1YmVyX3BpcGVsaW5lLAogICAgICAgIH0KICAgIH0KCiAgICAvLyBwdWIgZm4gcHJvY2Vzc19idWZmZXJfY29tbWFuZHMoJm11dCBzZWxmLCBjbWRzOiBpbXBsIEludG9JdGVyYXRvcjxJdGVtID0gQnVmZmVyQ29tbWFuZD4pIHsKICAgIC8vICAgICBmb3IgY21kIGluIGNtZHMuaW50b19pdGVyKCkgewogICAgLy8gICAgICAgICBzZWxmLmJ1ZmZlcnMub25fY29tbWFuZChjbWQpOwogICAgLy8gICAgIH0KICAgIC8vIH0KCiAgICBwdWIgZm4gcmVuZGVyX3dpbmRvdygmc2VsZiwgd2luOiAmbXV0IFdpbmRvdywgZnJhbWU6ICZGcmFtZSkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICAgICAgc2VsZi5yZW5kZXJlcl9ycGFzcyh3aW4sIGZyYW1lKT87CiAgICAgICAgT2soKCkpCiAgICB9CgogICAgZm4gcmVuZGVyZXJfcnBhc3MoJnNlbGYsIHdpbjogJm11dCBXaW5kb3csIGZyYW1lOiAmRnJhbWUpIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCB3Z3B1ID0gJipzZWxmLmhhbmRsZXMud2dwdTsKCiAgICAgICAgc2VsZi5jYW1lcmFfYnVmCiAgICAgICAgICAgIC53cml0ZV9idWZmZXIoJmZyYW1lLmNhbWVyYSwgd2luLnNpemUuc2NyZWVuX3NpemUsIHdncHUucXVldWUoKSk7CgogICAgICAgIC8vIHNlbGYudHJhbnNmb3JtX2J1Zi51cGxvYWQoJmZyYW1lLnRmX2J1ZmZlciwgd2dwdS5xdWV1ZSgpKTsKCiAgICAgICAgbGV0IG11dCBlbmNvZGVyID0gd2dwdS5kZXZpY2UoKS5jcmVhdGVfY29tbWFuZF9lbmNvZGVyKCZEZWZhdWx0OjpkZWZhdWx0KCkpOwoKICAgICAgICBsZXQgY29sb3JfdGV4X3ZpZXcgPSB3aW4ud2luLnByZXBhcmVfcHJlc2VudCgpPzsKCiAgICAgICAgc2VsZi5lbmNvZGVfcmVuZGVyX3Bhc3MoCiAgICAgICAgICAgICZtdXQgZW5jb2RlciwKICAgICAgICAgICAgJmNvbG9yX3RleF92aWV3LAogICAgICAgICAgICB3aW4ucmVzLmRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudF92aWV3KCksCiAgICAgICAgICAgIGZyYW1lLAogICAgICAgICk7CgogICAgICAgIC8vIHJlbmRlciBFR1VJCiAgICAgICAgaWYgbGV0IFNvbWUoZWd1aXIpID0gd2luLmd1aV9yZXMuYXNfbXV0KCkgewogICAgICAgICAgICBlZ3Vpci5iZWdpbl9mcmFtZSgmd2luLndpbik7CgogICAgICAgICAgICBpZiBsZXQgU29tZShndWkpID0gd2luLmd1aV9kZWYuYXNfcmVmKCkgewogICAgICAgICAgICAgICAgZ3VpLjAuc2hvdyhlZ3Vpci5jb250ZXh0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGVndWkuc2hvdyhlZ3Vpci5jb250ZXh0KCksIG1vZGVsKTsKICAgICAgICAgICAgLy8gZWd1aXIuZGVtbygpOwoKICAgICAgICAgICAgbGV0IHNjcmVlbl9kZXNjID0gZWd1aV93Z3B1OjpTY3JlZW5EZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHNpemVfaW5fcGl4ZWxzOiB3aW4ud2luLndpZHRoX2hlaWdodF91MzIoKSwKICAgICAgICAgICAgICAgIHBpeGVsc19wZXJfcG9pbnQ6IHdpbi53aW4uc2NhbGVfZmFjdG9yKCkgYXMgZjMyICogZWd1aXIuc2NhbGVfZmFjdG9yKCksCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBlZ3Vpci5lbmRfZnJhbWVfYW5kX2RyYXcoCiAgICAgICAgICAgICAgICB3Z3B1LmRldmljZSgpLAogICAgICAgICAgICAgICAgd2dwdS5xdWV1ZSgpLAogICAgICAgICAgICAgICAgJm11dCBlbmNvZGVyLAogICAgICAgICAgICAgICAgJndpbi53aW4sCiAgICAgICAgICAgICAgICAmY29sb3JfdGV4X3ZpZXcsCiAgICAgICAgICAgICAgICBzY3JlZW5fZGVzYywKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHdncHUucXVldWUuc3VibWl0KFtlbmNvZGVyLmZpbmlzaCgpXSk7CgogICAgICAgIHdpbi53aW4uZmluYWxpemVfcHJlc2VudCgpPzsKCiAgICAgICAgLy8gRklYTUUgd2Ugc2hvdWxkIGFsd2F5cyByZXF1ZXN0IGEgcmVkcmF3IG90aGVyd2lzZSByZW5kZXIgd2lsbCBuZXZlciBiZSBydW4gYWdhaW4KICAgICAgICB3aW4ud2luLnJlcXVlc3RfcmVkcmF3KCk7CgogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIGVuY29kZV9yZW5kZXJfcGFzcygKICAgICAgICAmc2VsZiwKICAgICAgICBlbmNvZGVyOiAmbXV0IHdncHU6OkNvbW1hbmRFbmNvZGVyLAogICAgICAgIGNvbG9yX3RleF92aWV3OiAmd2dwdTo6VGV4dHVyZVZpZXcsCiAgICAgICAgZGVwdGhfc3RlbmNpbF90ZXhfdmlldzogJndncHU6OlRleHR1cmVWaWV3LAogICAgICAgIGZyYW1lOiAmRnJhbWUsCiAgICApIHsKICAgICAgICBsZXQgbXV0IHJwYXNzID0gZW5jb2Rlci5iZWdpbl9yZW5kZXJfcGFzcygmd2dwdTo6UmVuZGVyUGFzc0Rlc2NyaXB0b3IgewogICAgICAgICAgICBsYWJlbDogTm9uZSwKICAgICAgICAgICAgY29sb3JfYXR0YWNobWVudHM6ICZbU29tZSh3Z3B1OjpSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50IHsKICAgICAgICAgICAgICAgIHZpZXc6IGNvbG9yX3RleF92aWV3LAogICAgICAgICAgICAgICAgcmVzb2x2ZV90YXJnZXQ6IE5vbmUsCiAgICAgICAgICAgICAgICBvcHM6IHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIod2dwdTo6Q29sb3IgewogICAgICAgICAgICAgICAgICAgICAgICByOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBnOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBiOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBhOiAxLiwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBzdG9yZTogd2dwdTo6U3RvcmVPcDo6U3RvcmUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KV0sCiAgICAgICAgICAgIGRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudDogU29tZSh3Z3B1OjpSZW5kZXJQYXNzRGVwdGhTdGVuY2lsQXR0YWNobWVudCB7CiAgICAgICAgICAgICAgICB2aWV3OiBkZXB0aF9zdGVuY2lsX3RleF92aWV3LAogICAgICAgICAgICAgICAgZGVwdGhfb3BzOiBTb21lKHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIoMS4wKSwgLy8gQ2xlYXIgdG8gZmFyIHBsYW5lCiAgICAgICAgICAgICAgICAgICAgc3RvcmU6IHdncHU6OlN0b3JlT3A6OlN0b3JlLAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzdGVuY2lsX29wczogTm9uZSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRpbWVzdGFtcF93cml0ZXM6IE5vbmUsCiAgICAgICAgICAgIG9jY2x1c2lvbl9xdWVyeV9zZXQ6IE5vbmUsCiAgICAgICAgfSk7CgogICAgICAgIC8vIG9wYXF1ZQogICAgICAgIGxvZzo6dHJhY2UhKCJvcGFxdWUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUub3BhcXVlLml0ZW1zLmxlbigpKTsKCiAgICAgICAgcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYudWJlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMSwgc2VsZi5pbnN0YW5jZV9iZy5yZXMoKSwgJltdKTsKICAgICAgICBycGFzcy5zZXRfYmluZF9ncm91cCgyLCBzZWxmLnZlcnRleF9iZy5yZXMoKSwgJltdKTsKCiAgICAgICAgbGV0IG11dCBpbnN0X3NldHM6IEhhc2hNYXA8TWVzaFByb3h5SWQsIFZlYzxVYmVySW5zdGFuY2VQb2Q+PiA9IEhhc2hNYXA6Om5ldygpOwoKICAgICAgICBmb3IgaXRlbSBpbiBmcmFtZS5vcGFxdWUuaXRlbXMuaXRlcigpIHsKICAgICAgICAgICAgaW5zdF9zZXRzCiAgICAgICAgICAgICAgICAuZW50cnkoaXRlbS5tZXNoKQogICAgICAgICAgICAgICAgLm9yX2RlZmF1bHQoKQogICAgICAgICAgICAgICAgLnB1c2goVWJlckluc3RhbmNlUG9kIHsKICAgICAgICAgICAgICAgICAgICB0ZjogaXRlbS50Zi5jbG9uZSgpLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBsZXQgbXV0IGluc3RfaWR4X3N0YWdlID0gVmVjOjo8d2dwdTo6dXRpbDo6RHJhd0luZGV4ZWRJbmRpcmVjdEFyZ3M+OjpuZXcoKTsKCiAgICAgICAgbGV0IG1lc2hfcHJveHlfc3RvcmUgPSBzZWxmLmhhbmRsZXMubWVzaF9wcm94eV9zdG9yZS5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfaW5kZXhfYnVmID0gc2VsZi5oYW5kbGVzLnZlcnRleF9idWYubG9jaygpOwogICAgICAgIGxldCB1YmVyX3ZlcnRleF9idWYgPSBzZWxmLmhhbmRsZXMudmVydGV4X2J1Zi5sb2NrKCk7CiAgICAgICAgbGV0IG11dCBpbnN0YW5jZV9idWYgPSBzZWxmLmluc3RhbmNlX2J1Zi5ib3Jyb3dfbXV0KCk7CgogICAgICAgIGZvciAoJm1lc2hfaWQsIGluc3RhbmNlcykgaW4gaW5zdF9zZXRzLml0ZXIoKSB7CiAgICAgICAgICAgIGxldCBTb21lKG1lc2gpID0gbWVzaF9wcm94eV9zdG9yZS5nZXQobWVzaF9pZCkgZWxzZSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGxldCBTb21lKGZpcnN0X2luZGV4KSA9IHViZXJfaW5kZXhfYnVmLmxvY2F0ZV91bml0KG1lc2hfaWQpIGVsc2UgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH07CgogICAgICAgICAgICBsZXQgU29tZShiYXNlX3ZlcnRleCkgPSB1YmVyX3ZlcnRleF9idWYubG9jYXRlX3VuaXQobWVzaF9pZCkgZWxzZSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGxldCBmaXJzdF9pbnN0YW5jZSA9IGluc3RhbmNlX2J1Zi5zdGFnZS5sZW4oKTsKCiAgICAgICAgICAgIGluc3RfaWR4X3N0YWdlLnB1c2god2dwdTo6dXRpbDo6RHJhd0luZGV4ZWRJbmRpcmVjdEFyZ3MgewogICAgICAgICAgICAgICAgaW5kZXhfY291bnQ6IG1lc2guaW5kZXhfY291bnQoKSBhcyB1MzIsCiAgICAgICAgICAgICAgICBpbnN0YW5jZV9jb3VudDogaW5zdGFuY2VzLmxlbigpIGFzIHUzMiwKICAgICAgICAgICAgICAgIGZpcnN0X2luZGV4LAogICAgICAgICAgICAgICAgYmFzZV92ZXJ0ZXg6IGJhc2VfdmVydGV4IGFzIGkzMiwKICAgICAgICAgICAgICAgIGZpcnN0X2luc3RhbmNlOiBmaXJzdF9pbnN0YW5jZSBhcyB1MzIsCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgZm9yIGluc3RhbmNlIGluIGluc3RhbmNlcy5pdGVyKCkgewogICAgICAgICAgICAgICAgaW5zdGFuY2VfYnVmLnN0YWdlLnB1c2goVWJlckluc3RhbmNlUG9kIHsgdGY6IGluc3RhbmNlLnRmIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBpbnN0YW5jZV9idWYudXBsb2FkKCZzZWxmLmhhbmRsZXMud2dwdS5xdWV1ZSk7CgogICAgICAgIGxldCBpbnN0X2lkeF9idWZmZXIgPQogICAgICAgICAgICBzZWxmLmhhbmRsZXMKICAgICAgICAgICAgICAgIC53Z3B1CiAgICAgICAgICAgICAgICAuZGV2aWNlKCkKICAgICAgICAgICAgICAgIC5jcmVhdGVfYnVmZmVyX2luaXQoJndncHU6OnV0aWw6OkJ1ZmZlckluaXREZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogU29tZSgiRHJhd0luZGV4ZWRJbmRpcmVjdCBCdWZmZXIiKSwKICAgICAgICAgICAgICAgICAgICBjb250ZW50czogYnl0ZW11Y2s6OmNhc3Rfc2xpY2UoJmluc3RfaWR4X3N0YWdlKSwKICAgICAgICAgICAgICAgICAgICB1c2FnZTogd2dwdTo6QnVmZmVyVXNhZ2VzOjpJTkRJUkVDVCwKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICBycGFzcy5tdWx0aV9kcmF3X2luZGV4ZWRfaW5kaXJlY3QoJmluc3RfaWR4X2J1ZmZlciwgMCwgaW5zdF9pZHhfc3RhZ2UubGVuKCkgYXMgdTMyKTsKCiAgICAgICAgLy8gLy8gbGluZXMKICAgICAgICAvLyBsb2c6OnRyYWNlISgibGluZSBwaXBlbGluZToge30gaXRlbXMiLCBmcmFtZS5saW5lcy5pdGVtcy5sZW4oKSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYubGluZV9yZW5kZXJfcGlwZWxpbmUucmVzKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDAsIHNlbGYuY2FtZXJhX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDEsIHNlbGYudHJhbnNmb3JtX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIGZvciBpdGVtIGluIGZyYW1lLmxpbmVzLml0ZW1zLml0ZXIoKSB7CiAgICAgICAgLy8gICAgIGxldCBTb21lKHZidWYpID0gc2VsZi5idWZmZXJzLmdldChpdGVtLnZlcnRpY2VzKSBlbHNlIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgbGV0IGlidWYgPSBtYXRjaCBpdGVtLmluc3RhbmNlcyB7CiAgICAgICAgLy8gICAgICAgICBTb21lKGlkKSA9PiBtYXRjaCBzZWxmLmJ1ZmZlcnMuZ2V0KGlkKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgU29tZShidWYpID0+IGJ1ZiwKICAgICAgICAvLyAgICAgICAgICAgICBOb25lID0+IGNvbnRpbnVlLAogICAgICAgIC8vICAgICAgICAgfSwKICAgICAgICAvLyAgICAgICAgIE5vbmUgPT4gJnNlbGYuaWRfaW5zdGFuY2VfYnVmLAogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgaWYgdmJ1Zi5lbGVtZW50X2NvdW50KCkgPT0gMCB8fCBpYnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9CgogICAgICAgIC8vICAgICBycGFzcy5zZXRfdmVydGV4X2J1ZmZlcigwLCB2YnVmLmJ1ZmZlcigpLnNsaWNlKC4uKSk7CiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDEsIGlidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKCiAgICAgICAgLy8gICAgIHJwYXNzLmRyYXcoCiAgICAgICAgLy8gICAgICAgICAwLi52YnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICAgICAwLi5pYnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICk7CiAgICAgICAgLy8gfQoKICAgICAgICAvLyAvLyBwYXJ0aWNsZXMKICAgICAgICAvLyBsb2c6OnRyYWNlISgicGFydGljbGUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUucGFydGljbGVzLml0ZW1zLmxlbigpKTsKICAgICAgICAvLyBycGFzcy5zZXRfcGlwZWxpbmUoc2VsZi5wYXJ0aWNsZV9yZW5kZXJfcGlwZWxpbmUucmVzKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDAsIHNlbGYuY2FtZXJhX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIGZvciBpdGVtIGluIGZyYW1lLnBhcnRpY2xlcy5pdGVtcy5pdGVyKCkgewogICAgICAgIC8vICAgICBsZXQgU29tZSh2YnVmKSA9IHNlbGYuYnVmZmVycy5nZXQoaXRlbS52ZXJ0aWNlcykgZWxzZSB7CiAgICAgICAgLy8gICAgICAgICBjb250aW51ZTsKICAgICAgICAvLyAgICAgfTsKCiAgICAgICAgLy8gICAgIGxldCBpYnVmID0gbWF0Y2ggaXRlbS5pbnN0YW5jZXMgewogICAgICAgIC8vICAgICAgICAgU29tZShpZCkgPT4gbWF0Y2ggc2VsZi5idWZmZXJzLmdldChpZCkgewogICAgICAgIC8vICAgICAgICAgICAgIFNvbWUoYnVmKSA9PiBidWYsCiAgICAgICAgLy8gICAgICAgICAgICAgTm9uZSA9PiBjb250aW51ZSwKICAgICAgICAvLyAgICAgICAgIH0sCiAgICAgICAgLy8gICAgICAgICBOb25lID0+IGNvbnRpbnVlLAogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgaWYgdmJ1Zi5lbGVtZW50X2NvdW50KCkgPT0gMCB8fCBpYnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9CgogICAgICAgIC8vICAgICBycGFzcy5zZXRfdmVydGV4X2J1ZmZlcigwLCB2YnVmLmJ1ZmZlcigpLnNsaWNlKC4uKSk7CiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDEsIGlidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKCiAgICAgICAgLy8gICAgIHJwYXNzLmRyYXcoCiAgICAgICAgLy8gICAgICAgICAwLi52YnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICAgICAwLi5pYnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICk7CiAgICAgICAgLy8gfQoKICAgICAgICAvLyBFbmQgdGhlIHJlbmRlcnBhc3MuCiAgICAgICAgZHJvcChycGFzcyk7CiAgICB9Cn0KAAAAAAAAAAClOAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgQAAAAAAAASBAAAAAAAAAAAAAAAAPC/"
				],
				[
					157,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAClOAAAdXNlIGNyYXRlOjp7CiAgICBCaW5kR3JvdXAsIEJpbmRHcm91cEJ1aWxkZXIsIEJpbmRHcm91cExheW91dEJ1aWxkZXIsIENhbWVyYUJ1ZmZlciwgQ2FtZXJhVW5pZm9ybUdyb3VwLAogICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsIEZyYW1lLCBTaGFyZWRXZ3B1UmVzLCBVYmVySW5zdGFuY2VCdWZmZXIsIFViZXJJbnN0YW5jZVBvZCwgVWJlclBpcGVsaW5lLAogICAgV2luZG93LAogICAgbWVzaDo6e01lc2hQcm94eUlkLCBTaGFyZWRNZXNoUHJveHlTdG9yZX0sCiAgICBzdHJlYW06OntTaGFyZWRVYmVySW5kZXhCdWZmZXIsIFNoYXJlZFViZXJWZXJ0ZXhCdWZmZXJ9LAp9Owp1c2Ugc3RkOjp7Y2VsbDo6UmVmQ2VsbCwgY29sbGVjdGlvbnM6Okhhc2hNYXB9Owp1c2Ugd2dwdTo6dXRpbDo6RGV2aWNlRXh0OwoKY29uc3QgVUJFUl9JTlNUQU5DRV9DT1VOVDogdXNpemUgPSAxMF8wMDA7CgpwdWIgc3RydWN0IFJlbmRlcmVySGFuZGxlcyB7CiAgICBwdWIgd2dwdTogU2hhcmVkV2dwdVJlcywKICAgIHB1YiBpbmRleF9idWY6IFNoYXJlZFViZXJJbmRleEJ1ZmZlciwKICAgIHB1YiB2ZXJ0ZXhfYnVmOiBTaGFyZWRVYmVyVmVydGV4QnVmZmVyLAogICAgcHViIG1lc2hfcHJveHlfc3RvcmU6IFNoYXJlZE1lc2hQcm94eVN0b3JlLAp9CgpwdWIgc3RydWN0IFJlbmRlcmVyIHsKICAgIGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcywKCiAgICBjYW1lcmFfYnVmOiBDYW1lcmFCdWZmZXIsCiAgICBjYW1lcmFfYmc6IEJpbmRHcm91cCwKCiAgICBpbnN0YW5jZV9idWY6IFJlZkNlbGw8VWJlckluc3RhbmNlQnVmZmVyPiwKICAgIGluc3RhbmNlX2JnOiBCaW5kR3JvdXAsCgogICAgaW5kZXhfYmc6IEJpbmRHcm91cCwKICAgIHZlcnRleF9iZzogQmluZEdyb3VwLAoKICAgIHViZXJfcGlwZWxpbmU6IFViZXJQaXBlbGluZSwKfQoKaW1wbCBSZW5kZXJlciB7CiAgICBwdWIgZm4gbmV3KGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcykgLT4gU2VsZiB7CiAgICAgICAgY29uc3QgQ09MT1JfRk9STUFUOiB3Z3B1OjpUZXh0dXJlRm9ybWF0ID0gd2dwdTo6VGV4dHVyZUZvcm1hdDo6QmdyYThVbm9ybVNyZ2I7CgogICAgICAgIGxldCB3Z3B1X2RldmljZSA9IGhhbmRsZXMud2dwdS5kZXZpY2UoKTsKCiAgICAgICAgbGV0IGNhbWVyYV9idWYgPSBDYW1lcmFCdWZmZXI6Om5ldyh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbnN0YW5jZV9idWYgPSBVYmVySW5zdGFuY2VCdWZmZXI6Om5ldyhVQkVSX0lOU1RBTkNFX0NPVU5ULCB3Z3B1X2RldmljZSk7CgogICAgICAgIC8vIGxldCB0cmFuc2Zvcm1fYnVmID0gVHJhbnNmb3JtQnVmZmVyR3B1OjpuZXcod2dwdS5kZXZpY2UoKSk7CgogICAgICAgIC8vIGxldCBpZF9pbnN0YW5jZV9idWYgPSBHcHVCdWZmZXI6OmZyb21fc2xpY2UoCiAgICAgICAgLy8gICAgICZbVGYxMjo6ZnJvbV9nbG9iYWxfdHJhbnNmb3JtXzMoJkdsb2JhbFRyYW5zZm9ybTM6OmlkZW50aXR5KCkpXSwKICAgICAgICAvLyAgICAgImlkIGluc3QgYnVmIiwKICAgICAgICAvLyAgICAgd2dwdS5kZXZpY2UoKSwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgYnVmZmVycyA9IEdwdUJ1ZmZlclN0b3JlOjpuZXcoKTsKCiAgICAgICAgLy8gbGV0IGJpbmRfZ3JvdXBfdGV4dHVyZV9sYXlvdXQgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgIC8vICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCB0ZXh0dXJlIGJpbmQgZ3JvdXAgbGF5b3V0IikKICAgICAgICAvLyAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6U2FtcGxlcigKICAgICAgICAvLyAgICAgICAgIHdncHU6OlNhbXBsZXJCaW5kaW5nVHlwZTo6RmlsdGVyaW5nLAogICAgICAgIC8vICAgICApKQogICAgICAgIC8vICAgICAud2l0aF9iaW5kaW5nKHdncHU6OkJpbmRpbmdUeXBlOjpUZXh0dXJlIHsKICAgICAgICAvLyAgICAgICAgIHNhbXBsZV90eXBlOiB3Z3B1OjpUZXh0dXJlU2FtcGxlVHlwZTo6RmxvYXQgeyBmaWx0ZXJhYmxlOiB0cnVlIH0sCiAgICAgICAgLy8gICAgICAgICB2aWV3X2RpbWVuc2lvbjogd2dwdTo6VGV4dHVyZVZpZXdEaW1lbnNpb246OkQyLAogICAgICAgIC8vICAgICAgICAgbXVsdGlzYW1wbGVkOiBmYWxzZSwKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgICAgLmZpbmFsaXplKHdncHUuZGV2aWNlKCkpOwoKICAgICAgICBsZXQgY2FtZXJhX2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJkZWZhdWx0IGNhbWVyYSB1bmlmb3JtIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoQ2FtZXJhVW5pZm9ybUdyb3VwOjpiaW5kaW5nX3R5cGUoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgbGV0IGNhbWVyYV9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhjYW1lcmFfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCBjYW1lcmEgdW5pZm9ybSIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoY2FtZXJhX2J1Zi5yZXMoKS5hc19lbnRpcmVfYmluZGluZygpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmdsID0gQmluZEdyb3VwTGF5b3V0QnVpbGRlcjo6bmV3KCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgaW5zdGFuY2UgYnVmZmVyIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcod2dwdTo6QmluZGluZ1R5cGU6OkJ1ZmZlciB7CiAgICAgICAgICAgICAgICB0eTogd2dwdTo6QnVmZmVyQmluZGluZ1R5cGU6OlN0b3JhZ2UgeyByZWFkX29ubHk6IHRydWUgfSwKICAgICAgICAgICAgICAgIGhhc19keW5hbWljX29mZnNldDogZmFsc2UsCiAgICAgICAgICAgICAgICBtaW5fYmluZGluZ19zaXplOiBOb25lLAogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcoaW5zdGFuY2VfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbnN0YW5jZSBidWZmZXIiKQogICAgICAgICAgICAud2l0aF9iaW5kaW5nKGluc3RhbmNlX2J1Zi5kZXZpY2UuYXNfd2dwdV9iaW5kaW5nX3Jlc291cmNlKCkpCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZ2wgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbmRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhpbmRleF9iZ2wpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIGluZGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy5pbmRleF9idWYubG9jaygpLmFzX3dncHVfYmluZGluZ19yZXNvdXJjZSgpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgdmVydGV4X2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIHZlcnRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCB2ZXJ0ZXhfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcodmVydGV4X2JnbCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgdmVydGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKS5hc193Z3B1X2JpbmRpbmdfcmVzb3VyY2UoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgLy8gbGV0IHBhcnRpY2xlX3JlbmRlcl9waXBlbGluZSA9IFNpbXBsZVJlbmRlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgLy8gICAgICJQYXJ0aWNsZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvcGFydGljbGUud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVTdHJpcCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgLy8gICAgIFVWZXJ0ZXg6OmxheW91dCgzKSwKICAgICAgICAvLyAgICAgU29tZShQYXJ0aWNsZUluc3RhbmNlOjpsYXlvdXQoMCkpLAogICAgICAgIC8vICAgICAmWyZjYW1lcmFfYmddLAogICAgICAgIC8vICAgICB3Z3B1X2RldmljZSwKICAgICAgICAvLyAgICAgQ09MT1JfRk9STUFULAogICAgICAgIC8vICAgICBERVBUSF9TVEVOQ0lMX0ZPUk1BVCwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgbGluZV9yZW5kZXJfcGlwZWxpbmUgPSBTaW1wbGVSZW5kZXJQaXBlbGluZTo6bmV3KAogICAgICAgIC8vICAgICAiTGluZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvbGluZS53Z3NsIiksCiAgICAgICAgLy8gICAgIHdncHU6OlByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lTGlzdCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkxpbmUsCiAgICAgICAgLy8gICAgIFBjVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgyKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIC8vIGxldCBvcGFxdWVfcmVuZGVyX3BpcGVsaW5lID0gU2ltcGxlUmVuZGVyUGlwZWxpbmU6Om5ldygKICAgICAgICAvLyAgICAgIk1lc2ggUmVuZGVyIFBpcGVsaW5lIiwKICAgICAgICAvLyAgICAgaW5jbHVkZV9zdHIhKCIuLi8uLi9zaGFkZXJzL21lc2gud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVMaXN0LAogICAgICAgIC8vICAgICB3Z3B1OjpQb2x5Z29uTW9kZTo6RmlsbCwKICAgICAgICAvLyAgICAgUGNuVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgzKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIGxldCB1YmVyX3BpcGVsaW5lID0gVWJlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgICAgIGluY2x1ZGVfc3RyISgiLi4vLi4vc2hhZGVycy91YmVyLndnc2wiKSwKICAgICAgICAgICAgd2dwdTo6UHJpbWl0aXZlVG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCwKICAgICAgICAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgICAgICZbJmNhbWVyYV9iZywgJmluc3RhbmNlX2JnLCAmdmVydGV4X2JnXSwKICAgICAgICAgICAgd2dwdV9kZXZpY2UsCiAgICAgICAgICAgIENPTE9SX0ZPUk1BVCwKICAgICAgICAgICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsCiAgICAgICAgKTsKCiAgICAgICAgUmVuZGVyZXIgewogICAgICAgICAgICBoYW5kbGVzLAogICAgICAgICAgICBjYW1lcmFfYnVmLAogICAgICAgICAgICBjYW1lcmFfYmcsCiAgICAgICAgICAgIGluc3RhbmNlX2J1ZjogUmVmQ2VsbDo6bmV3KGluc3RhbmNlX2J1ZiksCiAgICAgICAgICAgIGluc3RhbmNlX2JnLAogICAgICAgICAgICBpbmRleF9iZywKICAgICAgICAgICAgdmVydGV4X2JnLAogICAgICAgICAgICB1YmVyX3BpcGVsaW5lLAogICAgICAgIH0KICAgIH0KCiAgICAvLyBwdWIgZm4gcHJvY2Vzc19idWZmZXJfY29tbWFuZHMoJm11dCBzZWxmLCBjbWRzOiBpbXBsIEludG9JdGVyYXRvcjxJdGVtID0gQnVmZmVyQ29tbWFuZD4pIHsKICAgIC8vICAgICBmb3IgY21kIGluIGNtZHMuaW50b19pdGVyKCkgewogICAgLy8gICAgICAgICBzZWxmLmJ1ZmZlcnMub25fY29tbWFuZChjbWQpOwogICAgLy8gICAgIH0KICAgIC8vIH0KCiAgICBwdWIgZm4gcmVuZGVyX3dpbmRvdygmc2VsZiwgd2luOiAmbXV0IFdpbmRvdywgZnJhbWU6ICZGcmFtZSkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICAgICAgc2VsZi5yZW5kZXJlcl9ycGFzcyh3aW4sIGZyYW1lKT87CiAgICAgICAgT2soKCkpCiAgICB9CgogICAgZm4gcmVuZGVyZXJfcnBhc3MoJnNlbGYsIHdpbjogJm11dCBXaW5kb3csIGZyYW1lOiAmRnJhbWUpIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCB3Z3B1ID0gJipzZWxmLmhhbmRsZXMud2dwdTsKCiAgICAgICAgc2VsZi5jYW1lcmFfYnVmCiAgICAgICAgICAgIC53cml0ZV9idWZmZXIoJmZyYW1lLmNhbWVyYSwgd2luLnNpemUuc2NyZWVuX3NpemUsIHdncHUucXVldWUoKSk7CgogICAgICAgIC8vIHNlbGYudHJhbnNmb3JtX2J1Zi51cGxvYWQoJmZyYW1lLnRmX2J1ZmZlciwgd2dwdS5xdWV1ZSgpKTsKCiAgICAgICAgbGV0IG11dCBlbmNvZGVyID0gd2dwdS5kZXZpY2UoKS5jcmVhdGVfY29tbWFuZF9lbmNvZGVyKCZEZWZhdWx0OjpkZWZhdWx0KCkpOwoKICAgICAgICBsZXQgY29sb3JfdGV4X3ZpZXcgPSB3aW4ud2luLnByZXBhcmVfcHJlc2VudCgpPzsKCiAgICAgICAgc2VsZi5lbmNvZGVfcmVuZGVyX3Bhc3MoCiAgICAgICAgICAgICZtdXQgZW5jb2RlciwKICAgICAgICAgICAgJmNvbG9yX3RleF92aWV3LAogICAgICAgICAgICB3aW4ucmVzLmRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudF92aWV3KCksCiAgICAgICAgICAgIGZyYW1lLAogICAgICAgICk7CgogICAgICAgIC8vIHJlbmRlciBFR1VJCiAgICAgICAgaWYgbGV0IFNvbWUoZWd1aXIpID0gd2luLmd1aV9yZXMuYXNfbXV0KCkgewogICAgICAgICAgICBlZ3Vpci5iZWdpbl9mcmFtZSgmd2luLndpbik7CgogICAgICAgICAgICBpZiBsZXQgU29tZShndWkpID0gd2luLmd1aV9kZWYuYXNfcmVmKCkgewogICAgICAgICAgICAgICAgZ3VpLjAuc2hvdyhlZ3Vpci5jb250ZXh0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGVndWkuc2hvdyhlZ3Vpci5jb250ZXh0KCksIG1vZGVsKTsKICAgICAgICAgICAgLy8gZWd1aXIuZGVtbygpOwoKICAgICAgICAgICAgbGV0IHNjcmVlbl9kZXNjID0gZWd1aV93Z3B1OjpTY3JlZW5EZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHNpemVfaW5fcGl4ZWxzOiB3aW4ud2luLndpZHRoX2hlaWdodF91MzIoKSwKICAgICAgICAgICAgICAgIHBpeGVsc19wZXJfcG9pbnQ6IHdpbi53aW4uc2NhbGVfZmFjdG9yKCkgYXMgZjMyICogZWd1aXIuc2NhbGVfZmFjdG9yKCksCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBlZ3Vpci5lbmRfZnJhbWVfYW5kX2RyYXcoCiAgICAgICAgICAgICAgICB3Z3B1LmRldmljZSgpLAogICAgICAgICAgICAgICAgd2dwdS5xdWV1ZSgpLAogICAgICAgICAgICAgICAgJm11dCBlbmNvZGVyLAogICAgICAgICAgICAgICAgJndpbi53aW4sCiAgICAgICAgICAgICAgICAmY29sb3JfdGV4X3ZpZXcsCiAgICAgICAgICAgICAgICBzY3JlZW5fZGVzYywKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHdncHUucXVldWUuc3VibWl0KFtlbmNvZGVyLmZpbmlzaCgpXSk7CgogICAgICAgIHdpbi53aW4uZmluYWxpemVfcHJlc2VudCgpPzsKCiAgICAgICAgLy8gRklYTUUgd2Ugc2hvdWxkIGFsd2F5cyByZXF1ZXN0IGEgcmVkcmF3IG90aGVyd2lzZSByZW5kZXIgd2lsbCBuZXZlciBiZSBydW4gYWdhaW4KICAgICAgICB3aW4ud2luLnJlcXVlc3RfcmVkcmF3KCk7CgogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIGVuY29kZV9yZW5kZXJfcGFzcygKICAgICAgICAmc2VsZiwKICAgICAgICBlbmNvZGVyOiAmbXV0IHdncHU6OkNvbW1hbmRFbmNvZGVyLAogICAgICAgIGNvbG9yX3RleF92aWV3OiAmd2dwdTo6VGV4dHVyZVZpZXcsCiAgICAgICAgZGVwdGhfc3RlbmNpbF90ZXhfdmlldzogJndncHU6OlRleHR1cmVWaWV3LAogICAgICAgIGZyYW1lOiAmRnJhbWUsCiAgICApIHsKICAgICAgICBsZXQgbXV0IHJwYXNzID0gZW5jb2Rlci5iZWdpbl9yZW5kZXJfcGFzcygmd2dwdTo6UmVuZGVyUGFzc0Rlc2NyaXB0b3IgewogICAgICAgICAgICBsYWJlbDogTm9uZSwKICAgICAgICAgICAgY29sb3JfYXR0YWNobWVudHM6ICZbU29tZSh3Z3B1OjpSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50IHsKICAgICAgICAgICAgICAgIHZpZXc6IGNvbG9yX3RleF92aWV3LAogICAgICAgICAgICAgICAgcmVzb2x2ZV90YXJnZXQ6IE5vbmUsCiAgICAgICAgICAgICAgICBvcHM6IHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIod2dwdTo6Q29sb3IgewogICAgICAgICAgICAgICAgICAgICAgICByOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBnOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBiOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBhOiAxLiwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBzdG9yZTogd2dwdTo6U3RvcmVPcDo6U3RvcmUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KV0sCiAgICAgICAgICAgIGRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudDogU29tZSh3Z3B1OjpSZW5kZXJQYXNzRGVwdGhTdGVuY2lsQXR0YWNobWVudCB7CiAgICAgICAgICAgICAgICB2aWV3OiBkZXB0aF9zdGVuY2lsX3RleF92aWV3LAogICAgICAgICAgICAgICAgZGVwdGhfb3BzOiBTb21lKHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIoMS4wKSwgLy8gQ2xlYXIgdG8gZmFyIHBsYW5lCiAgICAgICAgICAgICAgICAgICAgc3RvcmU6IHdncHU6OlN0b3JlT3A6OlN0b3JlLAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzdGVuY2lsX29wczogTm9uZSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRpbWVzdGFtcF93cml0ZXM6IE5vbmUsCiAgICAgICAgICAgIG9jY2x1c2lvbl9xdWVyeV9zZXQ6IE5vbmUsCiAgICAgICAgfSk7CgogICAgICAgIC8vIG9wYXF1ZQogICAgICAgIGxvZzo6dHJhY2UhKCJvcGFxdWUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUub3BhcXVlLml0ZW1zLmxlbigpKTsKCiAgICAgICAgcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYudWJlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMSwgc2VsZi5pbnN0YW5jZV9iZy5yZXMoKSwgJltdKTsKICAgICAgICBycGFzcy5zZXRfYmluZF9ncm91cCgyLCBzZWxmLnZlcnRleF9iZy5yZXMoKSwgJltdKTsKCiAgICAgICAgbGV0IG11dCBpbnN0X3NldHM6IEhhc2hNYXA8TWVzaFByb3h5SWQsIFZlYzxVYmVySW5zdGFuY2VQb2Q+PiA9IEhhc2hNYXA6Om5ldygpOwoKICAgICAgICBmb3IgaXRlbSBpbiBmcmFtZS5vcGFxdWUuaXRlbXMuaXRlcigpIHsKICAgICAgICAgICAgaW5zdF9zZXRzCiAgICAgICAgICAgICAgICAuZW50cnkoaXRlbS5tZXNoKQogICAgICAgICAgICAgICAgLm9yX2RlZmF1bHQoKQogICAgICAgICAgICAgICAgLnB1c2goVWJlckluc3RhbmNlUG9kIHsKICAgICAgICAgICAgICAgICAgICB0ZjogaXRlbS50Zi5jbG9uZSgpLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBsZXQgbXV0IGluc3RfaWR4X3N0YWdlID0gVmVjOjo8d2dwdTo6dXRpbDo6RHJhd0luZGV4ZWRJbmRpcmVjdEFyZ3M+OjpuZXcoKTsKCiAgICAgICAgbGV0IG1lc2hfcHJveHlfc3RvcmUgPSBzZWxmLmhhbmRsZXMubWVzaF9wcm94eV9zdG9yZS5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfaW5kZXhfYnVmID0gc2VsZi5oYW5kbGVzLmluZGV4X2J1Zi5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfdmVydGV4X2J1ZiA9IHNlbGYuaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKTsKICAgICAgICBsZXQgbXV0IGluc3RhbmNlX2J1ZiA9IHNlbGYuaW5zdGFuY2VfYnVmLmJvcnJvd19tdXQoKTsKCiAgICAgICAgZm9yICgmbWVzaF9pZCwgaW5zdGFuY2VzKSBpbiBpbnN0X3NldHMuaXRlcigpIHsKICAgICAgICAgICAgbGV0IFNvbWUobWVzaCkgPSBtZXNoX3Byb3h5X3N0b3JlLmdldChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IFNvbWUoZmlyc3RfaW5kZXgpID0gdWJlcl9pbmRleF9idWYubG9jYXRlX3VuaXQobWVzaF9pZCkgZWxzZSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGxldCBTb21lKGJhc2VfdmVydGV4KSA9IHViZXJfdmVydGV4X2J1Zi5sb2NhdGVfdW5pdChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IGZpcnN0X2luc3RhbmNlID0gaW5zdGFuY2VfYnVmLnN0YWdlLmxlbigpOwoKICAgICAgICAgICAgaW5zdF9pZHhfc3RhZ2UucHVzaCh3Z3B1Ojp1dGlsOjpEcmF3SW5kZXhlZEluZGlyZWN0QXJncyB7CiAgICAgICAgICAgICAgICBpbmRleF9jb3VudDogbWVzaC5pbmRleF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAgICAgICAgIGluc3RhbmNlX2NvdW50OiBpbnN0YW5jZXMubGVuKCkgYXMgdTMyLAogICAgICAgICAgICAgICAgZmlyc3RfaW5kZXgsCiAgICAgICAgICAgICAgICBiYXNlX3ZlcnRleDogYmFzZV92ZXJ0ZXggYXMgaTMyLAogICAgICAgICAgICAgICAgZmlyc3RfaW5zdGFuY2U6IGZpcnN0X2luc3RhbmNlIGFzIHUzMiwKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBmb3IgaW5zdGFuY2UgaW4gaW5zdGFuY2VzLml0ZXIoKSB7CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9idWYuc3RhZ2UucHVzaChVYmVySW5zdGFuY2VQb2QgeyB0ZjogaW5zdGFuY2UudGYgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGluc3RhbmNlX2J1Zi51cGxvYWQoJnNlbGYuaGFuZGxlcy53Z3B1LnF1ZXVlKTsKCiAgICAgICAgbGV0IGluc3RfaWR4X2J1ZmZlciA9CiAgICAgICAgICAgIHNlbGYuaGFuZGxlcwogICAgICAgICAgICAgICAgLndncHUKICAgICAgICAgICAgICAgIC5kZXZpY2UoKQogICAgICAgICAgICAgICAgLmNyZWF0ZV9idWZmZXJfaW5pdCgmd2dwdTo6dXRpbDo6QnVmZmVySW5pdERlc2NyaXB0b3IgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBTb21lKCJEcmF3SW5kZXhlZEluZGlyZWN0IEJ1ZmZlciIpLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBieXRlbXVjazo6Y2FzdF9zbGljZSgmaW5zdF9pZHhfc3RhZ2UpLAogICAgICAgICAgICAgICAgICAgIHVzYWdlOiB3Z3B1OjpCdWZmZXJVc2FnZXM6OklORElSRUNULAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgIHJwYXNzLm11bHRpX2RyYXdfaW5kZXhlZF9pbmRpcmVjdCgmaW5zdF9pZHhfYnVmZmVyLCAwLCBpbnN0X2lkeF9zdGFnZS5sZW4oKSBhcyB1MzIpOwoKICAgICAgICAvLyAvLyBsaW5lcwogICAgICAgIC8vIGxvZzo6dHJhY2UhKCJsaW5lIHBpcGVsaW5lOiB7fSBpdGVtcyIsIGZyYW1lLmxpbmVzLml0ZW1zLmxlbigpKTsKICAgICAgICAvLyBycGFzcy5zZXRfcGlwZWxpbmUoc2VsZi5saW5lX3JlbmRlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMSwgc2VsZi50cmFuc2Zvcm1fYmcucmVzKCksICZbXSk7CiAgICAgICAgLy8gZm9yIGl0ZW0gaW4gZnJhbWUubGluZXMuaXRlbXMuaXRlcigpIHsKICAgICAgICAvLyAgICAgbGV0IFNvbWUodmJ1ZikgPSBzZWxmLmJ1ZmZlcnMuZ2V0KGl0ZW0udmVydGljZXMpIGVsc2UgewogICAgICAgIC8vICAgICAgICAgY29udGludWU7CiAgICAgICAgLy8gICAgIH07CgogICAgICAgIC8vICAgICBsZXQgaWJ1ZiA9IG1hdGNoIGl0ZW0uaW5zdGFuY2VzIHsKICAgICAgICAvLyAgICAgICAgIFNvbWUoaWQpID0+IG1hdGNoIHNlbGYuYnVmZmVycy5nZXQoaWQpIHsKICAgICAgICAvLyAgICAgICAgICAgICBTb21lKGJ1ZikgPT4gYnVmLAogICAgICAgIC8vICAgICAgICAgICAgIE5vbmUgPT4gY29udGludWUsCiAgICAgICAgLy8gICAgICAgICB9LAogICAgICAgIC8vICAgICAgICAgTm9uZSA9PiAmc2VsZi5pZF9pbnN0YW5jZV9idWYsCiAgICAgICAgLy8gICAgIH07CgogICAgICAgIC8vICAgICBpZiB2YnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHx8IGlidWYuZWxlbWVudF9jb3VudCgpID09IDAgewogICAgICAgIC8vICAgICAgICAgY29udGludWU7CiAgICAgICAgLy8gICAgIH0KCiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDAsIHZidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKICAgICAgICAvLyAgICAgcnBhc3Muc2V0X3ZlcnRleF9idWZmZXIoMSwgaWJ1Zi5idWZmZXIoKS5zbGljZSguLikpOwoKICAgICAgICAvLyAgICAgcnBhc3MuZHJhdygKICAgICAgICAvLyAgICAgICAgIDAuLnZidWYuZWxlbWVudF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAvLyAgICAgICAgIDAuLmlidWYuZWxlbWVudF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAvLyAgICAgKTsKICAgICAgICAvLyB9CgogICAgICAgIC8vIC8vIHBhcnRpY2xlcwogICAgICAgIC8vIGxvZzo6dHJhY2UhKCJwYXJ0aWNsZSBwaXBlbGluZToge30gaXRlbXMiLCBmcmFtZS5wYXJ0aWNsZXMuaXRlbXMubGVuKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9waXBlbGluZShzZWxmLnBhcnRpY2xlX3JlbmRlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgLy8gZm9yIGl0ZW0gaW4gZnJhbWUucGFydGljbGVzLml0ZW1zLml0ZXIoKSB7CiAgICAgICAgLy8gICAgIGxldCBTb21lKHZidWYpID0gc2VsZi5idWZmZXJzLmdldChpdGVtLnZlcnRpY2VzKSBlbHNlIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgbGV0IGlidWYgPSBtYXRjaCBpdGVtLmluc3RhbmNlcyB7CiAgICAgICAgLy8gICAgICAgICBTb21lKGlkKSA9PiBtYXRjaCBzZWxmLmJ1ZmZlcnMuZ2V0KGlkKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgU29tZShidWYpID0+IGJ1ZiwKICAgICAgICAvLyAgICAgICAgICAgICBOb25lID0+IGNvbnRpbnVlLAogICAgICAgIC8vICAgICAgICAgfSwKICAgICAgICAvLyAgICAgICAgIE5vbmUgPT4gY29udGludWUsCiAgICAgICAgLy8gICAgIH07CgogICAgICAgIC8vICAgICBpZiB2YnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHx8IGlidWYuZWxlbWVudF9jb3VudCgpID09IDAgewogICAgICAgIC8vICAgICAgICAgY29udGludWU7CiAgICAgICAgLy8gICAgIH0KCiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDAsIHZidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKICAgICAgICAvLyAgICAgcnBhc3Muc2V0X3ZlcnRleF9idWZmZXIoMSwgaWJ1Zi5idWZmZXIoKS5zbGljZSguLikpOwoKICAgICAgICAvLyAgICAgcnBhc3MuZHJhdygKICAgICAgICAvLyAgICAgICAgIDAuLnZidWYuZWxlbWVudF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAvLyAgICAgICAgIDAuLmlidWYuZWxlbWVudF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAvLyAgICAgKTsKICAgICAgICAvLyB9CgogICAgICAgIC8vIEVuZCB0aGUgcmVuZGVycGFzcy4KICAgICAgICBkcm9wKHJwYXNzKTsKICAgIH0KfQoAAAAAAAAAAP84AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgQAAAAAAAASBAAAAAAAAAAAAAAAAPC/"
				],
				[
					158,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAD/OAAAdXNlIGNyYXRlOjp7CiAgICBCaW5kR3JvdXAsIEJpbmRHcm91cEJ1aWxkZXIsIEJpbmRHcm91cExheW91dEJ1aWxkZXIsIENhbWVyYUJ1ZmZlciwgQ2FtZXJhVW5pZm9ybUdyb3VwLAogICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsIEZyYW1lLCBTaGFyZWRXZ3B1UmVzLCBVYmVySW5zdGFuY2VCdWZmZXIsIFViZXJJbnN0YW5jZVBvZCwgVWJlclBpcGVsaW5lLAogICAgV2luZG93LAogICAgbWVzaDo6e01lc2hQcm94eUlkLCBTaGFyZWRNZXNoUHJveHlTdG9yZX0sCiAgICBzdHJlYW06OntTaGFyZWRVYmVySW5kZXhCdWZmZXIsIFNoYXJlZFViZXJWZXJ0ZXhCdWZmZXJ9LAp9Owp1c2Ugc3RkOjp7Y2VsbDo6UmVmQ2VsbCwgY29sbGVjdGlvbnM6Okhhc2hNYXB9Owp1c2Ugd2dwdTo6dXRpbDo6RGV2aWNlRXh0OwoKY29uc3QgVUJFUl9JTlNUQU5DRV9DT1VOVDogdXNpemUgPSAxMF8wMDA7CgpwdWIgc3RydWN0IFJlbmRlcmVySGFuZGxlcyB7CiAgICBwdWIgd2dwdTogU2hhcmVkV2dwdVJlcywKICAgIHB1YiBpbmRleF9idWY6IFNoYXJlZFViZXJJbmRleEJ1ZmZlciwKICAgIHB1YiB2ZXJ0ZXhfYnVmOiBTaGFyZWRVYmVyVmVydGV4QnVmZmVyLAogICAgcHViIG1lc2hfcHJveHlfc3RvcmU6IFNoYXJlZE1lc2hQcm94eVN0b3JlLAp9CgpwdWIgc3RydWN0IFJlbmRlcmVyIHsKICAgIGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcywKCiAgICBjYW1lcmFfYnVmOiBDYW1lcmFCdWZmZXIsCiAgICBjYW1lcmFfYmc6IEJpbmRHcm91cCwKCiAgICBpbnN0YW5jZV9idWY6IFJlZkNlbGw8VWJlckluc3RhbmNlQnVmZmVyPiwKICAgIGluc3RhbmNlX2JnOiBCaW5kR3JvdXAsCgogICAgaW5kZXhfYmc6IEJpbmRHcm91cCwKICAgIHZlcnRleF9iZzogQmluZEdyb3VwLAoKICAgIHViZXJfcGlwZWxpbmU6IFViZXJQaXBlbGluZSwKfQoKaW1wbCBSZW5kZXJlciB7CiAgICBwdWIgZm4gbmV3KGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcykgLT4gU2VsZiB7CiAgICAgICAgY29uc3QgQ09MT1JfRk9STUFUOiB3Z3B1OjpUZXh0dXJlRm9ybWF0ID0gd2dwdTo6VGV4dHVyZUZvcm1hdDo6QmdyYThVbm9ybVNyZ2I7CgogICAgICAgIGxldCB3Z3B1X2RldmljZSA9IGhhbmRsZXMud2dwdS5kZXZpY2UoKTsKCiAgICAgICAgbGV0IGNhbWVyYV9idWYgPSBDYW1lcmFCdWZmZXI6Om5ldyh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbnN0YW5jZV9idWYgPSBVYmVySW5zdGFuY2VCdWZmZXI6Om5ldyhVQkVSX0lOU1RBTkNFX0NPVU5ULCB3Z3B1X2RldmljZSk7CgogICAgICAgIC8vIGxldCB0cmFuc2Zvcm1fYnVmID0gVHJhbnNmb3JtQnVmZmVyR3B1OjpuZXcod2dwdS5kZXZpY2UoKSk7CgogICAgICAgIC8vIGxldCBpZF9pbnN0YW5jZV9idWYgPSBHcHVCdWZmZXI6OmZyb21fc2xpY2UoCiAgICAgICAgLy8gICAgICZbVGYxMjo6ZnJvbV9nbG9iYWxfdHJhbnNmb3JtXzMoJkdsb2JhbFRyYW5zZm9ybTM6OmlkZW50aXR5KCkpXSwKICAgICAgICAvLyAgICAgImlkIGluc3QgYnVmIiwKICAgICAgICAvLyAgICAgd2dwdS5kZXZpY2UoKSwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgYnVmZmVycyA9IEdwdUJ1ZmZlclN0b3JlOjpuZXcoKTsKCiAgICAgICAgLy8gbGV0IGJpbmRfZ3JvdXBfdGV4dHVyZV9sYXlvdXQgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgIC8vICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCB0ZXh0dXJlIGJpbmQgZ3JvdXAgbGF5b3V0IikKICAgICAgICAvLyAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6U2FtcGxlcigKICAgICAgICAvLyAgICAgICAgIHdncHU6OlNhbXBsZXJCaW5kaW5nVHlwZTo6RmlsdGVyaW5nLAogICAgICAgIC8vICAgICApKQogICAgICAgIC8vICAgICAud2l0aF9iaW5kaW5nKHdncHU6OkJpbmRpbmdUeXBlOjpUZXh0dXJlIHsKICAgICAgICAvLyAgICAgICAgIHNhbXBsZV90eXBlOiB3Z3B1OjpUZXh0dXJlU2FtcGxlVHlwZTo6RmxvYXQgeyBmaWx0ZXJhYmxlOiB0cnVlIH0sCiAgICAgICAgLy8gICAgICAgICB2aWV3X2RpbWVuc2lvbjogd2dwdTo6VGV4dHVyZVZpZXdEaW1lbnNpb246OkQyLAogICAgICAgIC8vICAgICAgICAgbXVsdGlzYW1wbGVkOiBmYWxzZSwKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgICAgLmZpbmFsaXplKHdncHUuZGV2aWNlKCkpOwoKICAgICAgICBsZXQgY2FtZXJhX2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJkZWZhdWx0IGNhbWVyYSB1bmlmb3JtIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoQ2FtZXJhVW5pZm9ybUdyb3VwOjpiaW5kaW5nX3R5cGUoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgbGV0IGNhbWVyYV9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhjYW1lcmFfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCBjYW1lcmEgdW5pZm9ybSIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoY2FtZXJhX2J1Zi5yZXMoKS5hc19lbnRpcmVfYmluZGluZygpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmdsID0gQmluZEdyb3VwTGF5b3V0QnVpbGRlcjo6bmV3KCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgaW5zdGFuY2UgYnVmZmVyIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcod2dwdTo6QmluZGluZ1R5cGU6OkJ1ZmZlciB7CiAgICAgICAgICAgICAgICB0eTogd2dwdTo6QnVmZmVyQmluZGluZ1R5cGU6OlN0b3JhZ2UgeyByZWFkX29ubHk6IHRydWUgfSwKICAgICAgICAgICAgICAgIGhhc19keW5hbWljX29mZnNldDogZmFsc2UsCiAgICAgICAgICAgICAgICBtaW5fYmluZGluZ19zaXplOiBOb25lLAogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcoaW5zdGFuY2VfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbnN0YW5jZSBidWZmZXIiKQogICAgICAgICAgICAud2l0aF9iaW5kaW5nKGluc3RhbmNlX2J1Zi5kZXZpY2UuYXNfd2dwdV9iaW5kaW5nX3Jlc291cmNlKCkpCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZ2wgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbmRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhpbmRleF9iZ2wpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIGluZGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy5pbmRleF9idWYubG9jaygpLmFzX3dncHVfYmluZGluZ19yZXNvdXJjZSgpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgdmVydGV4X2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIHZlcnRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCB2ZXJ0ZXhfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcodmVydGV4X2JnbCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgdmVydGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKS5hc193Z3B1X2JpbmRpbmdfcmVzb3VyY2UoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgLy8gbGV0IHBhcnRpY2xlX3JlbmRlcl9waXBlbGluZSA9IFNpbXBsZVJlbmRlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgLy8gICAgICJQYXJ0aWNsZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvcGFydGljbGUud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVTdHJpcCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgLy8gICAgIFVWZXJ0ZXg6OmxheW91dCgzKSwKICAgICAgICAvLyAgICAgU29tZShQYXJ0aWNsZUluc3RhbmNlOjpsYXlvdXQoMCkpLAogICAgICAgIC8vICAgICAmWyZjYW1lcmFfYmddLAogICAgICAgIC8vICAgICB3Z3B1X2RldmljZSwKICAgICAgICAvLyAgICAgQ09MT1JfRk9STUFULAogICAgICAgIC8vICAgICBERVBUSF9TVEVOQ0lMX0ZPUk1BVCwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgbGluZV9yZW5kZXJfcGlwZWxpbmUgPSBTaW1wbGVSZW5kZXJQaXBlbGluZTo6bmV3KAogICAgICAgIC8vICAgICAiTGluZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvbGluZS53Z3NsIiksCiAgICAgICAgLy8gICAgIHdncHU6OlByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lTGlzdCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkxpbmUsCiAgICAgICAgLy8gICAgIFBjVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgyKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIC8vIGxldCBvcGFxdWVfcmVuZGVyX3BpcGVsaW5lID0gU2ltcGxlUmVuZGVyUGlwZWxpbmU6Om5ldygKICAgICAgICAvLyAgICAgIk1lc2ggUmVuZGVyIFBpcGVsaW5lIiwKICAgICAgICAvLyAgICAgaW5jbHVkZV9zdHIhKCIuLi8uLi9zaGFkZXJzL21lc2gud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVMaXN0LAogICAgICAgIC8vICAgICB3Z3B1OjpQb2x5Z29uTW9kZTo6RmlsbCwKICAgICAgICAvLyAgICAgUGNuVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgzKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIGxldCB1YmVyX3BpcGVsaW5lID0gVWJlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgICAgIGluY2x1ZGVfc3RyISgiLi4vLi4vc2hhZGVycy91YmVyLndnc2wiKSwKICAgICAgICAgICAgd2dwdTo6UHJpbWl0aXZlVG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCwKICAgICAgICAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgICAgICZbJmNhbWVyYV9iZywgJmluc3RhbmNlX2JnLCAmdmVydGV4X2JnXSwKICAgICAgICAgICAgd2dwdV9kZXZpY2UsCiAgICAgICAgICAgIENPTE9SX0ZPUk1BVCwKICAgICAgICAgICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsCiAgICAgICAgKTsKCiAgICAgICAgUmVuZGVyZXIgewogICAgICAgICAgICBoYW5kbGVzLAogICAgICAgICAgICBjYW1lcmFfYnVmLAogICAgICAgICAgICBjYW1lcmFfYmcsCiAgICAgICAgICAgIGluc3RhbmNlX2J1ZjogUmVmQ2VsbDo6bmV3KGluc3RhbmNlX2J1ZiksCiAgICAgICAgICAgIGluc3RhbmNlX2JnLAogICAgICAgICAgICBpbmRleF9iZywKICAgICAgICAgICAgdmVydGV4X2JnLAogICAgICAgICAgICB1YmVyX3BpcGVsaW5lLAogICAgICAgIH0KICAgIH0KCiAgICAvLyBwdWIgZm4gcHJvY2Vzc19idWZmZXJfY29tbWFuZHMoJm11dCBzZWxmLCBjbWRzOiBpbXBsIEludG9JdGVyYXRvcjxJdGVtID0gQnVmZmVyQ29tbWFuZD4pIHsKICAgIC8vICAgICBmb3IgY21kIGluIGNtZHMuaW50b19pdGVyKCkgewogICAgLy8gICAgICAgICBzZWxmLmJ1ZmZlcnMub25fY29tbWFuZChjbWQpOwogICAgLy8gICAgIH0KICAgIC8vIH0KCiAgICBwdWIgZm4gcmVuZGVyX3dpbmRvdygmc2VsZiwgd2luOiAmbXV0IFdpbmRvdywgZnJhbWU6ICZGcmFtZSkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICAgICAgc2VsZi5yZW5kZXJlcl9ycGFzcyh3aW4sIGZyYW1lKT87CiAgICAgICAgT2soKCkpCiAgICB9CgogICAgZm4gcmVuZGVyZXJfcnBhc3MoJnNlbGYsIHdpbjogJm11dCBXaW5kb3csIGZyYW1lOiAmRnJhbWUpIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCB3Z3B1ID0gJipzZWxmLmhhbmRsZXMud2dwdTsKCiAgICAgICAgc2VsZi5jYW1lcmFfYnVmCiAgICAgICAgICAgIC53cml0ZV9idWZmZXIoJmZyYW1lLmNhbWVyYSwgd2luLnNpemUuc2NyZWVuX3NpemUsIHdncHUucXVldWUoKSk7CgogICAgICAgIC8vIHNlbGYudHJhbnNmb3JtX2J1Zi51cGxvYWQoJmZyYW1lLnRmX2J1ZmZlciwgd2dwdS5xdWV1ZSgpKTsKCiAgICAgICAgbGV0IG11dCBlbmNvZGVyID0gd2dwdS5kZXZpY2UoKS5jcmVhdGVfY29tbWFuZF9lbmNvZGVyKCZEZWZhdWx0OjpkZWZhdWx0KCkpOwoKICAgICAgICBsZXQgY29sb3JfdGV4X3ZpZXcgPSB3aW4ud2luLnByZXBhcmVfcHJlc2VudCgpPzsKCiAgICAgICAgc2VsZi5lbmNvZGVfcmVuZGVyX3Bhc3MoCiAgICAgICAgICAgICZtdXQgZW5jb2RlciwKICAgICAgICAgICAgJmNvbG9yX3RleF92aWV3LAogICAgICAgICAgICB3aW4ucmVzLmRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudF92aWV3KCksCiAgICAgICAgICAgIGZyYW1lLAogICAgICAgICk7CgogICAgICAgIC8vIHJlbmRlciBFR1VJCiAgICAgICAgaWYgbGV0IFNvbWUoZWd1aXIpID0gd2luLmd1aV9yZXMuYXNfbXV0KCkgewogICAgICAgICAgICBlZ3Vpci5iZWdpbl9mcmFtZSgmd2luLndpbik7CgogICAgICAgICAgICBpZiBsZXQgU29tZShndWkpID0gd2luLmd1aV9kZWYuYXNfcmVmKCkgewogICAgICAgICAgICAgICAgZ3VpLjAuc2hvdyhlZ3Vpci5jb250ZXh0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGVndWkuc2hvdyhlZ3Vpci5jb250ZXh0KCksIG1vZGVsKTsKICAgICAgICAgICAgLy8gZWd1aXIuZGVtbygpOwoKICAgICAgICAgICAgbGV0IHNjcmVlbl9kZXNjID0gZWd1aV93Z3B1OjpTY3JlZW5EZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHNpemVfaW5fcGl4ZWxzOiB3aW4ud2luLndpZHRoX2hlaWdodF91MzIoKSwKICAgICAgICAgICAgICAgIHBpeGVsc19wZXJfcG9pbnQ6IHdpbi53aW4uc2NhbGVfZmFjdG9yKCkgYXMgZjMyICogZWd1aXIuc2NhbGVfZmFjdG9yKCksCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBlZ3Vpci5lbmRfZnJhbWVfYW5kX2RyYXcoCiAgICAgICAgICAgICAgICB3Z3B1LmRldmljZSgpLAogICAgICAgICAgICAgICAgd2dwdS5xdWV1ZSgpLAogICAgICAgICAgICAgICAgJm11dCBlbmNvZGVyLAogICAgICAgICAgICAgICAgJndpbi53aW4sCiAgICAgICAgICAgICAgICAmY29sb3JfdGV4X3ZpZXcsCiAgICAgICAgICAgICAgICBzY3JlZW5fZGVzYywKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHdncHUucXVldWUuc3VibWl0KFtlbmNvZGVyLmZpbmlzaCgpXSk7CgogICAgICAgIHdpbi53aW4uZmluYWxpemVfcHJlc2VudCgpPzsKCiAgICAgICAgLy8gRklYTUUgd2Ugc2hvdWxkIGFsd2F5cyByZXF1ZXN0IGEgcmVkcmF3IG90aGVyd2lzZSByZW5kZXIgd2lsbCBuZXZlciBiZSBydW4gYWdhaW4KICAgICAgICB3aW4ud2luLnJlcXVlc3RfcmVkcmF3KCk7CgogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIGVuY29kZV9yZW5kZXJfcGFzcygKICAgICAgICAmc2VsZiwKICAgICAgICBlbmNvZGVyOiAmbXV0IHdncHU6OkNvbW1hbmRFbmNvZGVyLAogICAgICAgIGNvbG9yX3RleF92aWV3OiAmd2dwdTo6VGV4dHVyZVZpZXcsCiAgICAgICAgZGVwdGhfc3RlbmNpbF90ZXhfdmlldzogJndncHU6OlRleHR1cmVWaWV3LAogICAgICAgIGZyYW1lOiAmRnJhbWUsCiAgICApIHsKICAgICAgICBsZXQgbXV0IHJwYXNzID0gZW5jb2Rlci5iZWdpbl9yZW5kZXJfcGFzcygmd2dwdTo6UmVuZGVyUGFzc0Rlc2NyaXB0b3IgewogICAgICAgICAgICBsYWJlbDogTm9uZSwKICAgICAgICAgICAgY29sb3JfYXR0YWNobWVudHM6ICZbU29tZSh3Z3B1OjpSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50IHsKICAgICAgICAgICAgICAgIHZpZXc6IGNvbG9yX3RleF92aWV3LAogICAgICAgICAgICAgICAgcmVzb2x2ZV90YXJnZXQ6IE5vbmUsCiAgICAgICAgICAgICAgICBvcHM6IHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIod2dwdTo6Q29sb3IgewogICAgICAgICAgICAgICAgICAgICAgICByOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBnOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBiOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBhOiAxLiwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBzdG9yZTogd2dwdTo6U3RvcmVPcDo6U3RvcmUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KV0sCiAgICAgICAgICAgIGRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudDogU29tZSh3Z3B1OjpSZW5kZXJQYXNzRGVwdGhTdGVuY2lsQXR0YWNobWVudCB7CiAgICAgICAgICAgICAgICB2aWV3OiBkZXB0aF9zdGVuY2lsX3RleF92aWV3LAogICAgICAgICAgICAgICAgZGVwdGhfb3BzOiBTb21lKHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIoMS4wKSwgLy8gQ2xlYXIgdG8gZmFyIHBsYW5lCiAgICAgICAgICAgICAgICAgICAgc3RvcmU6IHdncHU6OlN0b3JlT3A6OlN0b3JlLAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzdGVuY2lsX29wczogTm9uZSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRpbWVzdGFtcF93cml0ZXM6IE5vbmUsCiAgICAgICAgICAgIG9jY2x1c2lvbl9xdWVyeV9zZXQ6IE5vbmUsCiAgICAgICAgfSk7CgogICAgICAgIC8vIG9wYXF1ZQogICAgICAgIGxvZzo6dHJhY2UhKCJvcGFxdWUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUub3BhcXVlLml0ZW1zLmxlbigpKTsKCiAgICAgICAgcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYudWJlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMSwgc2VsZi5pbnN0YW5jZV9iZy5yZXMoKSwgJltdKTsKICAgICAgICBycGFzcy5zZXRfYmluZF9ncm91cCgyLCBzZWxmLnZlcnRleF9iZy5yZXMoKSwgJltdKTsKCiAgICAgICAgbGV0IG11dCBpbnN0X3NldHM6IEhhc2hNYXA8TWVzaFByb3h5SWQsIFZlYzxVYmVySW5zdGFuY2VQb2Q+PiA9IEhhc2hNYXA6Om5ldygpOwoKICAgICAgICBmb3IgaXRlbSBpbiBmcmFtZS5vcGFxdWUuaXRlbXMuaXRlcigpIHsKICAgICAgICAgICAgaW5zdF9zZXRzCiAgICAgICAgICAgICAgICAuZW50cnkoaXRlbS5tZXNoKQogICAgICAgICAgICAgICAgLm9yX2RlZmF1bHQoKQogICAgICAgICAgICAgICAgLnB1c2goVWJlckluc3RhbmNlUG9kIHsKICAgICAgICAgICAgICAgICAgICB0ZjogaXRlbS50Zi5jbG9uZSgpLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBsZXQgbXV0IGluc3RfaWR4X3N0YWdlID0gVmVjOjo8d2dwdTo6dXRpbDo6RHJhd0luZGV4ZWRJbmRpcmVjdEFyZ3M+OjpuZXcoKTsKCiAgICAgICAgbGV0IG1lc2hfcHJveHlfc3RvcmUgPSBzZWxmLmhhbmRsZXMubWVzaF9wcm94eV9zdG9yZS5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfaW5kZXhfYnVmID0gc2VsZi5oYW5kbGVzLmluZGV4X2J1Zi5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfdmVydGV4X2J1ZiA9IHNlbGYuaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKTsKICAgICAgICBsZXQgbXV0IGluc3RhbmNlX2J1ZiA9IHNlbGYuaW5zdGFuY2VfYnVmLmJvcnJvd19tdXQoKTsKCiAgICAgICAgZm9yICgmbWVzaF9pZCwgaW5zdGFuY2VzKSBpbiBpbnN0X3NldHMuaXRlcigpIHsKICAgICAgICAgICAgbGV0IFNvbWUobWVzaCkgPSBtZXNoX3Byb3h5X3N0b3JlLmdldChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IFNvbWUoZmlyc3RfaW5kZXgpID0gdWJlcl9pbmRleF9idWYubG9jYXRlX3VuaXQobWVzaF9pZCkgZWxzZSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGxldCBTb21lKGJhc2VfdmVydGV4KSA9IHViZXJfdmVydGV4X2J1Zi5sb2NhdGVfdW5pdChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IGZpcnN0X2luc3RhbmNlID0gaW5zdGFuY2VfYnVmLnN0YWdlLmxlbigpOwoKICAgICAgICAgICAgbGV0IGFyZ3MgPSB3Z3B1Ojp1dGlsOjpEcmF3SW5kZXhlZEluZGlyZWN0QXJncyB7CiAgICAgICAgICAgICAgICBpbmRleF9jb3VudDogbWVzaC5pbmRleF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAgICAgICAgIGluc3RhbmNlX2NvdW50OiBpbnN0YW5jZXMubGVuKCkgYXMgdTMyLAogICAgICAgICAgICAgICAgZmlyc3RfaW5kZXgsCiAgICAgICAgICAgICAgICBiYXNlX3ZlcnRleDogYmFzZV92ZXJ0ZXggYXMgaTMyLAogICAgICAgICAgICAgICAgZmlyc3RfaW5zdGFuY2U6IGZpcnN0X2luc3RhbmNlIGFzIHUzMiwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcHJpbnRsbiEoIkRyYXdJbmRleGVkSW5kaXJlY3RBcmdzOiB7Oj99IiwgYXJncyk7CiAgICAgICAgICAgIGluc3RfaWR4X3N0YWdlLnB1c2goYXJncyk7CgogICAgICAgICAgICBmb3IgaW5zdGFuY2UgaW4gaW5zdGFuY2VzLml0ZXIoKSB7CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9idWYuc3RhZ2UucHVzaChVYmVySW5zdGFuY2VQb2QgeyB0ZjogaW5zdGFuY2UudGYgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGluc3RhbmNlX2J1Zi51cGxvYWQoJnNlbGYuaGFuZGxlcy53Z3B1LnF1ZXVlKTsKCiAgICAgICAgbGV0IGluc3RfaWR4X2J1ZmZlciA9CiAgICAgICAgICAgIHNlbGYuaGFuZGxlcwogICAgICAgICAgICAgICAgLndncHUKICAgICAgICAgICAgICAgIC5kZXZpY2UoKQogICAgICAgICAgICAgICAgLmNyZWF0ZV9idWZmZXJfaW5pdCgmd2dwdTo6dXRpbDo6QnVmZmVySW5pdERlc2NyaXB0b3IgewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiBTb21lKCJEcmF3SW5kZXhlZEluZGlyZWN0IEJ1ZmZlciIpLAogICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBieXRlbXVjazo6Y2FzdF9zbGljZSgmaW5zdF9pZHhfc3RhZ2UpLAogICAgICAgICAgICAgICAgICAgIHVzYWdlOiB3Z3B1OjpCdWZmZXJVc2FnZXM6OklORElSRUNULAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgIHJwYXNzLm11bHRpX2RyYXdfaW5kZXhlZF9pbmRpcmVjdCgmaW5zdF9pZHhfYnVmZmVyLCAwLCBpbnN0X2lkeF9zdGFnZS5sZW4oKSBhcyB1MzIpOwoKICAgICAgICAvLyAvLyBsaW5lcwogICAgICAgIC8vIGxvZzo6dHJhY2UhKCJsaW5lIHBpcGVsaW5lOiB7fSBpdGVtcyIsIGZyYW1lLmxpbmVzLml0ZW1zLmxlbigpKTsKICAgICAgICAvLyBycGFzcy5zZXRfcGlwZWxpbmUoc2VsZi5saW5lX3JlbmRlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMSwgc2VsZi50cmFuc2Zvcm1fYmcucmVzKCksICZbXSk7CiAgICAgICAgLy8gZm9yIGl0ZW0gaW4gZnJhbWUubGluZXMuaXRlbXMuaXRlcigpIHsKICAgICAgICAvLyAgICAgbGV0IFNvbWUodmJ1ZikgPSBzZWxmLmJ1ZmZlcnMuZ2V0KGl0ZW0udmVydGljZXMpIGVsc2UgewogICAgICAgIC8vICAgICAgICAgY29udGludWU7CiAgICAgICAgLy8gICAgIH07CgogICAgICAgIC8vICAgICBsZXQgaWJ1ZiA9IG1hdGNoIGl0ZW0uaW5zdGFuY2VzIHsKICAgICAgICAvLyAgICAgICAgIFNvbWUoaWQpID0+IG1hdGNoIHNlbGYuYnVmZmVycy5nZXQoaWQpIHsKICAgICAgICAvLyAgICAgICAgICAgICBTb21lKGJ1ZikgPT4gYnVmLAogICAgICAgIC8vICAgICAgICAgICAgIE5vbmUgPT4gY29udGludWUsCiAgICAgICAgLy8gICAgICAgICB9LAogICAgICAgIC8vICAgICAgICAgTm9uZSA9PiAmc2VsZi5pZF9pbnN0YW5jZV9idWYsCiAgICAgICAgLy8gICAgIH07CgogICAgICAgIC8vICAgICBpZiB2YnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHx8IGlidWYuZWxlbWVudF9jb3VudCgpID09IDAgewogICAgICAgIC8vICAgICAgICAgY29udGludWU7CiAgICAgICAgLy8gICAgIH0KCiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDAsIHZidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKICAgICAgICAvLyAgICAgcnBhc3Muc2V0X3ZlcnRleF9idWZmZXIoMSwgaWJ1Zi5idWZmZXIoKS5zbGljZSguLikpOwoKICAgICAgICAvLyAgICAgcnBhc3MuZHJhdygKICAgICAgICAvLyAgICAgICAgIDAuLnZidWYuZWxlbWVudF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAvLyAgICAgICAgIDAuLmlidWYuZWxlbWVudF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAvLyAgICAgKTsKICAgICAgICAvLyB9CgogICAgICAgIC8vIC8vIHBhcnRpY2xlcwogICAgICAgIC8vIGxvZzo6dHJhY2UhKCJwYXJ0aWNsZSBwaXBlbGluZToge30gaXRlbXMiLCBmcmFtZS5wYXJ0aWNsZXMuaXRlbXMubGVuKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9waXBlbGluZShzZWxmLnBhcnRpY2xlX3JlbmRlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgLy8gZm9yIGl0ZW0gaW4gZnJhbWUucGFydGljbGVzLml0ZW1zLml0ZXIoKSB7CiAgICAgICAgLy8gICAgIGxldCBTb21lKHZidWYpID0gc2VsZi5idWZmZXJzLmdldChpdGVtLnZlcnRpY2VzKSBlbHNlIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgbGV0IGlidWYgPSBtYXRjaCBpdGVtLmluc3RhbmNlcyB7CiAgICAgICAgLy8gICAgICAgICBTb21lKGlkKSA9PiBtYXRjaCBzZWxmLmJ1ZmZlcnMuZ2V0KGlkKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgU29tZShidWYpID0+IGJ1ZiwKICAgICAgICAvLyAgICAgICAgICAgICBOb25lID0+IGNvbnRpbnVlLAogICAgICAgIC8vICAgICAgICAgfSwKICAgICAgICAvLyAgICAgICAgIE5vbmUgPT4gY29udGludWUsCiAgICAgICAgLy8gICAgIH07CgogICAgICAgIC8vICAgICBpZiB2YnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHx8IGlidWYuZWxlbWVudF9jb3VudCgpID09IDAgewogICAgICAgIC8vICAgICAgICAgY29udGludWU7CiAgICAgICAgLy8gICAgIH0KCiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDAsIHZidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKICAgICAgICAvLyAgICAgcnBhc3Muc2V0X3ZlcnRleF9idWZmZXIoMSwgaWJ1Zi5idWZmZXIoKS5zbGljZSguLikpOwoKICAgICAgICAvLyAgICAgcnBhc3MuZHJhdygKICAgICAgICAvLyAgICAgICAgIDAuLnZidWYuZWxlbWVudF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAvLyAgICAgICAgIDAuLmlidWYuZWxlbWVudF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAvLyAgICAgKTsKICAgICAgICAvLyB9CgogICAgICAgIC8vIEVuZCB0aGUgcmVuZGVycGFzcy4KICAgICAgICBkcm9wKHJwYXNzKTsKICAgIH0KfQoAAAAAAAAAAFc5AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgQAAAAAAAASBAAAAAAAAAAAAAAAAPC/"
				],
				[
					159,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABXOQAAdXNlIGNyYXRlOjp7CiAgICBCaW5kR3JvdXAsIEJpbmRHcm91cEJ1aWxkZXIsIEJpbmRHcm91cExheW91dEJ1aWxkZXIsIENhbWVyYUJ1ZmZlciwgQ2FtZXJhVW5pZm9ybUdyb3VwLAogICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsIEZyYW1lLCBTaGFyZWRXZ3B1UmVzLCBVYmVySW5zdGFuY2VCdWZmZXIsIFViZXJJbnN0YW5jZVBvZCwgVWJlclBpcGVsaW5lLAogICAgV2luZG93LAogICAgbWVzaDo6e01lc2hQcm94eUlkLCBTaGFyZWRNZXNoUHJveHlTdG9yZX0sCiAgICBzdHJlYW06OntTaGFyZWRVYmVySW5kZXhCdWZmZXIsIFNoYXJlZFViZXJWZXJ0ZXhCdWZmZXJ9LAp9Owp1c2Ugc3RkOjp7Y2VsbDo6UmVmQ2VsbCwgY29sbGVjdGlvbnM6Okhhc2hNYXB9Owp1c2Ugd2dwdTo6dXRpbDo6RGV2aWNlRXh0OwoKY29uc3QgVUJFUl9JTlNUQU5DRV9DT1VOVDogdXNpemUgPSAxMF8wMDA7CgpwdWIgc3RydWN0IFJlbmRlcmVySGFuZGxlcyB7CiAgICBwdWIgd2dwdTogU2hhcmVkV2dwdVJlcywKICAgIHB1YiBpbmRleF9idWY6IFNoYXJlZFViZXJJbmRleEJ1ZmZlciwKICAgIHB1YiB2ZXJ0ZXhfYnVmOiBTaGFyZWRVYmVyVmVydGV4QnVmZmVyLAogICAgcHViIG1lc2hfcHJveHlfc3RvcmU6IFNoYXJlZE1lc2hQcm94eVN0b3JlLAp9CgpwdWIgc3RydWN0IFJlbmRlcmVyIHsKICAgIGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcywKCiAgICBjYW1lcmFfYnVmOiBDYW1lcmFCdWZmZXIsCiAgICBjYW1lcmFfYmc6IEJpbmRHcm91cCwKCiAgICBpbnN0YW5jZV9idWY6IFJlZkNlbGw8VWJlckluc3RhbmNlQnVmZmVyPiwKICAgIGluc3RhbmNlX2JnOiBCaW5kR3JvdXAsCgogICAgaW5kZXhfYmc6IEJpbmRHcm91cCwKICAgIHZlcnRleF9iZzogQmluZEdyb3VwLAoKICAgIHViZXJfcGlwZWxpbmU6IFViZXJQaXBlbGluZSwKfQoKaW1wbCBSZW5kZXJlciB7CiAgICBwdWIgZm4gbmV3KGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcykgLT4gU2VsZiB7CiAgICAgICAgY29uc3QgQ09MT1JfRk9STUFUOiB3Z3B1OjpUZXh0dXJlRm9ybWF0ID0gd2dwdTo6VGV4dHVyZUZvcm1hdDo6QmdyYThVbm9ybVNyZ2I7CgogICAgICAgIGxldCB3Z3B1X2RldmljZSA9IGhhbmRsZXMud2dwdS5kZXZpY2UoKTsKCiAgICAgICAgbGV0IGNhbWVyYV9idWYgPSBDYW1lcmFCdWZmZXI6Om5ldyh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbnN0YW5jZV9idWYgPSBVYmVySW5zdGFuY2VCdWZmZXI6Om5ldyhVQkVSX0lOU1RBTkNFX0NPVU5ULCB3Z3B1X2RldmljZSk7CgogICAgICAgIC8vIGxldCB0cmFuc2Zvcm1fYnVmID0gVHJhbnNmb3JtQnVmZmVyR3B1OjpuZXcod2dwdS5kZXZpY2UoKSk7CgogICAgICAgIC8vIGxldCBpZF9pbnN0YW5jZV9idWYgPSBHcHVCdWZmZXI6OmZyb21fc2xpY2UoCiAgICAgICAgLy8gICAgICZbVGYxMjo6ZnJvbV9nbG9iYWxfdHJhbnNmb3JtXzMoJkdsb2JhbFRyYW5zZm9ybTM6OmlkZW50aXR5KCkpXSwKICAgICAgICAvLyAgICAgImlkIGluc3QgYnVmIiwKICAgICAgICAvLyAgICAgd2dwdS5kZXZpY2UoKSwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgYnVmZmVycyA9IEdwdUJ1ZmZlclN0b3JlOjpuZXcoKTsKCiAgICAgICAgLy8gbGV0IGJpbmRfZ3JvdXBfdGV4dHVyZV9sYXlvdXQgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgIC8vICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCB0ZXh0dXJlIGJpbmQgZ3JvdXAgbGF5b3V0IikKICAgICAgICAvLyAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6U2FtcGxlcigKICAgICAgICAvLyAgICAgICAgIHdncHU6OlNhbXBsZXJCaW5kaW5nVHlwZTo6RmlsdGVyaW5nLAogICAgICAgIC8vICAgICApKQogICAgICAgIC8vICAgICAud2l0aF9iaW5kaW5nKHdncHU6OkJpbmRpbmdUeXBlOjpUZXh0dXJlIHsKICAgICAgICAvLyAgICAgICAgIHNhbXBsZV90eXBlOiB3Z3B1OjpUZXh0dXJlU2FtcGxlVHlwZTo6RmxvYXQgeyBmaWx0ZXJhYmxlOiB0cnVlIH0sCiAgICAgICAgLy8gICAgICAgICB2aWV3X2RpbWVuc2lvbjogd2dwdTo6VGV4dHVyZVZpZXdEaW1lbnNpb246OkQyLAogICAgICAgIC8vICAgICAgICAgbXVsdGlzYW1wbGVkOiBmYWxzZSwKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgICAgLmZpbmFsaXplKHdncHUuZGV2aWNlKCkpOwoKICAgICAgICBsZXQgY2FtZXJhX2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJkZWZhdWx0IGNhbWVyYSB1bmlmb3JtIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoQ2FtZXJhVW5pZm9ybUdyb3VwOjpiaW5kaW5nX3R5cGUoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgbGV0IGNhbWVyYV9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhjYW1lcmFfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCBjYW1lcmEgdW5pZm9ybSIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoY2FtZXJhX2J1Zi5yZXMoKS5hc19lbnRpcmVfYmluZGluZygpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmdsID0gQmluZEdyb3VwTGF5b3V0QnVpbGRlcjo6bmV3KCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgaW5zdGFuY2UgYnVmZmVyIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcod2dwdTo6QmluZGluZ1R5cGU6OkJ1ZmZlciB7CiAgICAgICAgICAgICAgICB0eTogd2dwdTo6QnVmZmVyQmluZGluZ1R5cGU6OlN0b3JhZ2UgeyByZWFkX29ubHk6IHRydWUgfSwKICAgICAgICAgICAgICAgIGhhc19keW5hbWljX29mZnNldDogZmFsc2UsCiAgICAgICAgICAgICAgICBtaW5fYmluZGluZ19zaXplOiBOb25lLAogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcoaW5zdGFuY2VfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbnN0YW5jZSBidWZmZXIiKQogICAgICAgICAgICAud2l0aF9iaW5kaW5nKGluc3RhbmNlX2J1Zi5kZXZpY2UuYXNfd2dwdV9iaW5kaW5nX3Jlc291cmNlKCkpCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZ2wgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbmRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhpbmRleF9iZ2wpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIGluZGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy5pbmRleF9idWYubG9jaygpLmFzX3dncHVfYmluZGluZ19yZXNvdXJjZSgpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgdmVydGV4X2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIHZlcnRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCB2ZXJ0ZXhfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcodmVydGV4X2JnbCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgdmVydGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKS5hc193Z3B1X2JpbmRpbmdfcmVzb3VyY2UoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgLy8gbGV0IHBhcnRpY2xlX3JlbmRlcl9waXBlbGluZSA9IFNpbXBsZVJlbmRlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgLy8gICAgICJQYXJ0aWNsZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvcGFydGljbGUud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVTdHJpcCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgLy8gICAgIFVWZXJ0ZXg6OmxheW91dCgzKSwKICAgICAgICAvLyAgICAgU29tZShQYXJ0aWNsZUluc3RhbmNlOjpsYXlvdXQoMCkpLAogICAgICAgIC8vICAgICAmWyZjYW1lcmFfYmddLAogICAgICAgIC8vICAgICB3Z3B1X2RldmljZSwKICAgICAgICAvLyAgICAgQ09MT1JfRk9STUFULAogICAgICAgIC8vICAgICBERVBUSF9TVEVOQ0lMX0ZPUk1BVCwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgbGluZV9yZW5kZXJfcGlwZWxpbmUgPSBTaW1wbGVSZW5kZXJQaXBlbGluZTo6bmV3KAogICAgICAgIC8vICAgICAiTGluZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvbGluZS53Z3NsIiksCiAgICAgICAgLy8gICAgIHdncHU6OlByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lTGlzdCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkxpbmUsCiAgICAgICAgLy8gICAgIFBjVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgyKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIC8vIGxldCBvcGFxdWVfcmVuZGVyX3BpcGVsaW5lID0gU2ltcGxlUmVuZGVyUGlwZWxpbmU6Om5ldygKICAgICAgICAvLyAgICAgIk1lc2ggUmVuZGVyIFBpcGVsaW5lIiwKICAgICAgICAvLyAgICAgaW5jbHVkZV9zdHIhKCIuLi8uLi9zaGFkZXJzL21lc2gud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVMaXN0LAogICAgICAgIC8vICAgICB3Z3B1OjpQb2x5Z29uTW9kZTo6RmlsbCwKICAgICAgICAvLyAgICAgUGNuVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgzKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIGxldCB1YmVyX3BpcGVsaW5lID0gVWJlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgICAgIGluY2x1ZGVfc3RyISgiLi4vLi4vc2hhZGVycy91YmVyLndnc2wiKSwKICAgICAgICAgICAgd2dwdTo6UHJpbWl0aXZlVG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCwKICAgICAgICAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgICAgICZbJmNhbWVyYV9iZywgJmluc3RhbmNlX2JnLCAmdmVydGV4X2JnXSwKICAgICAgICAgICAgd2dwdV9kZXZpY2UsCiAgICAgICAgICAgIENPTE9SX0ZPUk1BVCwKICAgICAgICAgICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsCiAgICAgICAgKTsKCiAgICAgICAgUmVuZGVyZXIgewogICAgICAgICAgICBoYW5kbGVzLAogICAgICAgICAgICBjYW1lcmFfYnVmLAogICAgICAgICAgICBjYW1lcmFfYmcsCiAgICAgICAgICAgIGluc3RhbmNlX2J1ZjogUmVmQ2VsbDo6bmV3KGluc3RhbmNlX2J1ZiksCiAgICAgICAgICAgIGluc3RhbmNlX2JnLAogICAgICAgICAgICBpbmRleF9iZywKICAgICAgICAgICAgdmVydGV4X2JnLAogICAgICAgICAgICB1YmVyX3BpcGVsaW5lLAogICAgICAgIH0KICAgIH0KCiAgICAvLyBwdWIgZm4gcHJvY2Vzc19idWZmZXJfY29tbWFuZHMoJm11dCBzZWxmLCBjbWRzOiBpbXBsIEludG9JdGVyYXRvcjxJdGVtID0gQnVmZmVyQ29tbWFuZD4pIHsKICAgIC8vICAgICBmb3IgY21kIGluIGNtZHMuaW50b19pdGVyKCkgewogICAgLy8gICAgICAgICBzZWxmLmJ1ZmZlcnMub25fY29tbWFuZChjbWQpOwogICAgLy8gICAgIH0KICAgIC8vIH0KCiAgICBwdWIgZm4gcmVuZGVyX3dpbmRvdygmc2VsZiwgd2luOiAmbXV0IFdpbmRvdywgZnJhbWU6ICZGcmFtZSkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICAgICAgc2VsZi5yZW5kZXJlcl9ycGFzcyh3aW4sIGZyYW1lKT87CiAgICAgICAgT2soKCkpCiAgICB9CgogICAgZm4gcmVuZGVyZXJfcnBhc3MoJnNlbGYsIHdpbjogJm11dCBXaW5kb3csIGZyYW1lOiAmRnJhbWUpIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCB3Z3B1ID0gJipzZWxmLmhhbmRsZXMud2dwdTsKCiAgICAgICAgc2VsZi5jYW1lcmFfYnVmCiAgICAgICAgICAgIC53cml0ZV9idWZmZXIoJmZyYW1lLmNhbWVyYSwgd2luLnNpemUuc2NyZWVuX3NpemUsIHdncHUucXVldWUoKSk7CgogICAgICAgIC8vIHNlbGYudHJhbnNmb3JtX2J1Zi51cGxvYWQoJmZyYW1lLnRmX2J1ZmZlciwgd2dwdS5xdWV1ZSgpKTsKCiAgICAgICAgbGV0IG11dCBlbmNvZGVyID0gd2dwdS5kZXZpY2UoKS5jcmVhdGVfY29tbWFuZF9lbmNvZGVyKCZEZWZhdWx0OjpkZWZhdWx0KCkpOwoKICAgICAgICBsZXQgY29sb3JfdGV4X3ZpZXcgPSB3aW4ud2luLnByZXBhcmVfcHJlc2VudCgpPzsKCiAgICAgICAgc2VsZi5lbmNvZGVfcmVuZGVyX3Bhc3MoCiAgICAgICAgICAgICZtdXQgZW5jb2RlciwKICAgICAgICAgICAgJmNvbG9yX3RleF92aWV3LAogICAgICAgICAgICB3aW4ucmVzLmRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudF92aWV3KCksCiAgICAgICAgICAgIGZyYW1lLAogICAgICAgICk7CgogICAgICAgIC8vIHJlbmRlciBFR1VJCiAgICAgICAgaWYgbGV0IFNvbWUoZWd1aXIpID0gd2luLmd1aV9yZXMuYXNfbXV0KCkgewogICAgICAgICAgICBlZ3Vpci5iZWdpbl9mcmFtZSgmd2luLndpbik7CgogICAgICAgICAgICBpZiBsZXQgU29tZShndWkpID0gd2luLmd1aV9kZWYuYXNfcmVmKCkgewogICAgICAgICAgICAgICAgZ3VpLjAuc2hvdyhlZ3Vpci5jb250ZXh0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGVndWkuc2hvdyhlZ3Vpci5jb250ZXh0KCksIG1vZGVsKTsKICAgICAgICAgICAgLy8gZWd1aXIuZGVtbygpOwoKICAgICAgICAgICAgbGV0IHNjcmVlbl9kZXNjID0gZWd1aV93Z3B1OjpTY3JlZW5EZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHNpemVfaW5fcGl4ZWxzOiB3aW4ud2luLndpZHRoX2hlaWdodF91MzIoKSwKICAgICAgICAgICAgICAgIHBpeGVsc19wZXJfcG9pbnQ6IHdpbi53aW4uc2NhbGVfZmFjdG9yKCkgYXMgZjMyICogZWd1aXIuc2NhbGVfZmFjdG9yKCksCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBlZ3Vpci5lbmRfZnJhbWVfYW5kX2RyYXcoCiAgICAgICAgICAgICAgICB3Z3B1LmRldmljZSgpLAogICAgICAgICAgICAgICAgd2dwdS5xdWV1ZSgpLAogICAgICAgICAgICAgICAgJm11dCBlbmNvZGVyLAogICAgICAgICAgICAgICAgJndpbi53aW4sCiAgICAgICAgICAgICAgICAmY29sb3JfdGV4X3ZpZXcsCiAgICAgICAgICAgICAgICBzY3JlZW5fZGVzYywKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHdncHUucXVldWUuc3VibWl0KFtlbmNvZGVyLmZpbmlzaCgpXSk7CgogICAgICAgIHdpbi53aW4uZmluYWxpemVfcHJlc2VudCgpPzsKCiAgICAgICAgLy8gRklYTUUgd2Ugc2hvdWxkIGFsd2F5cyByZXF1ZXN0IGEgcmVkcmF3IG90aGVyd2lzZSByZW5kZXIgd2lsbCBuZXZlciBiZSBydW4gYWdhaW4KICAgICAgICB3aW4ud2luLnJlcXVlc3RfcmVkcmF3KCk7CgogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIGVuY29kZV9yZW5kZXJfcGFzcygKICAgICAgICAmc2VsZiwKICAgICAgICBlbmNvZGVyOiAmbXV0IHdncHU6OkNvbW1hbmRFbmNvZGVyLAogICAgICAgIGNvbG9yX3RleF92aWV3OiAmd2dwdTo6VGV4dHVyZVZpZXcsCiAgICAgICAgZGVwdGhfc3RlbmNpbF90ZXhfdmlldzogJndncHU6OlRleHR1cmVWaWV3LAogICAgICAgIGZyYW1lOiAmRnJhbWUsCiAgICApIHsKICAgICAgICBsZXQgbXV0IHJwYXNzID0gZW5jb2Rlci5iZWdpbl9yZW5kZXJfcGFzcygmd2dwdTo6UmVuZGVyUGFzc0Rlc2NyaXB0b3IgewogICAgICAgICAgICBsYWJlbDogTm9uZSwKICAgICAgICAgICAgY29sb3JfYXR0YWNobWVudHM6ICZbU29tZSh3Z3B1OjpSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50IHsKICAgICAgICAgICAgICAgIHZpZXc6IGNvbG9yX3RleF92aWV3LAogICAgICAgICAgICAgICAgcmVzb2x2ZV90YXJnZXQ6IE5vbmUsCiAgICAgICAgICAgICAgICBvcHM6IHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIod2dwdTo6Q29sb3IgewogICAgICAgICAgICAgICAgICAgICAgICByOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBnOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBiOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBhOiAxLiwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBzdG9yZTogd2dwdTo6U3RvcmVPcDo6U3RvcmUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KV0sCiAgICAgICAgICAgIGRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudDogU29tZSh3Z3B1OjpSZW5kZXJQYXNzRGVwdGhTdGVuY2lsQXR0YWNobWVudCB7CiAgICAgICAgICAgICAgICB2aWV3OiBkZXB0aF9zdGVuY2lsX3RleF92aWV3LAogICAgICAgICAgICAgICAgZGVwdGhfb3BzOiBTb21lKHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIoMS4wKSwgLy8gQ2xlYXIgdG8gZmFyIHBsYW5lCiAgICAgICAgICAgICAgICAgICAgc3RvcmU6IHdncHU6OlN0b3JlT3A6OlN0b3JlLAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzdGVuY2lsX29wczogTm9uZSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRpbWVzdGFtcF93cml0ZXM6IE5vbmUsCiAgICAgICAgICAgIG9jY2x1c2lvbl9xdWVyeV9zZXQ6IE5vbmUsCiAgICAgICAgfSk7CgogICAgICAgIC8vIG9wYXF1ZQogICAgICAgIGxvZzo6dHJhY2UhKCJvcGFxdWUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUub3BhcXVlLml0ZW1zLmxlbigpKTsKCiAgICAgICAgcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYudWJlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMSwgc2VsZi5pbnN0YW5jZV9iZy5yZXMoKSwgJltdKTsKICAgICAgICBycGFzcy5zZXRfYmluZF9ncm91cCgyLCBzZWxmLnZlcnRleF9iZy5yZXMoKSwgJltdKTsKCiAgICAgICAgbGV0IG11dCBpbnN0X3NldHM6IEhhc2hNYXA8TWVzaFByb3h5SWQsIFZlYzxVYmVySW5zdGFuY2VQb2Q+PiA9IEhhc2hNYXA6Om5ldygpOwoKICAgICAgICBmb3IgaXRlbSBpbiBmcmFtZS5vcGFxdWUuaXRlbXMuaXRlcigpIHsKICAgICAgICAgICAgaW5zdF9zZXRzCiAgICAgICAgICAgICAgICAuZW50cnkoaXRlbS5tZXNoKQogICAgICAgICAgICAgICAgLm9yX2RlZmF1bHQoKQogICAgICAgICAgICAgICAgLnB1c2goVWJlckluc3RhbmNlUG9kIHsKICAgICAgICAgICAgICAgICAgICB0ZjogaXRlbS50Zi5jbG9uZSgpLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBsZXQgbXV0IGluc3RfaWR4X3N0YWdlID0gVmVjOjo8d2dwdTo6dXRpbDo6RHJhd0luZGV4ZWRJbmRpcmVjdEFyZ3M+OjpuZXcoKTsKCiAgICAgICAgbGV0IG1lc2hfcHJveHlfc3RvcmUgPSBzZWxmLmhhbmRsZXMubWVzaF9wcm94eV9zdG9yZS5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfaW5kZXhfYnVmID0gc2VsZi5oYW5kbGVzLmluZGV4X2J1Zi5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfdmVydGV4X2J1ZiA9IHNlbGYuaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKTsKICAgICAgICBsZXQgbXV0IGluc3RhbmNlX2J1ZiA9IHNlbGYuaW5zdGFuY2VfYnVmLmJvcnJvd19tdXQoKTsKCiAgICAgICAgZm9yICgmbWVzaF9pZCwgaW5zdGFuY2VzKSBpbiBpbnN0X3NldHMuaXRlcigpIHsKICAgICAgICAgICAgbGV0IFNvbWUobWVzaCkgPSBtZXNoX3Byb3h5X3N0b3JlLmdldChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IFNvbWUoZmlyc3RfaW5kZXgpID0gdWJlcl9pbmRleF9idWYubG9jYXRlX3VuaXQobWVzaF9pZCkgZWxzZSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGxldCBTb21lKGJhc2VfdmVydGV4KSA9IHViZXJfdmVydGV4X2J1Zi5sb2NhdGVfdW5pdChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IGZpcnN0X2luc3RhbmNlID0gaW5zdGFuY2VfYnVmLnN0YWdlLmxlbigpOwoKICAgICAgICAgICAgbGV0IGFyZ3MgPSB3Z3B1Ojp1dGlsOjpEcmF3SW5kZXhlZEluZGlyZWN0QXJncyB7CiAgICAgICAgICAgICAgICBpbmRleF9jb3VudDogbWVzaC5pbmRleF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAgICAgICAgIGluc3RhbmNlX2NvdW50OiBpbnN0YW5jZXMubGVuKCkgYXMgdTMyLAogICAgICAgICAgICAgICAgZmlyc3RfaW5kZXgsCiAgICAgICAgICAgICAgICBiYXNlX3ZlcnRleDogYmFzZV92ZXJ0ZXggYXMgaTMyLAogICAgICAgICAgICAgICAgZmlyc3RfaW5zdGFuY2U6IGZpcnN0X2luc3RhbmNlIGFzIHUzMiwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcHJpbnRsbiEoIkRyYXdJbmRleGVkSW5kaXJlY3RBcmdzOiB7Oj99IiwgYXJncyk7CiAgICAgICAgICAgIGluc3RfaWR4X3N0YWdlLnB1c2goYXJncyk7CgogICAgICAgICAgICBmb3IgaW5zdGFuY2UgaW4gaW5zdGFuY2VzLml0ZXIoKSB7CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9idWYuc3RhZ2UucHVzaChVYmVySW5zdGFuY2VQb2QgeyB0ZjogaW5zdGFuY2UudGYgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGluc3RhbmNlX2J1Zi51cGxvYWQoJnNlbGYuaGFuZGxlcy53Z3B1LnF1ZXVlKTsKCiAgICAgICAgaWYgaW5zdF9pZHhfc3RhZ2UubGVuKCkgPiAwIHsKICAgICAgICAgICAgbGV0IGluc3RfaWR4X2J1ZmZlciA9CiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZXMKICAgICAgICAgICAgICAgICAgICAud2dwdQogICAgICAgICAgICAgICAgICAgIC5kZXZpY2UoKQogICAgICAgICAgICAgICAgICAgIC5jcmVhdGVfYnVmZmVyX2luaXQoJndncHU6OnV0aWw6OkJ1ZmZlckluaXREZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFNvbWUoIkRyYXdJbmRleGVkSW5kaXJlY3QgQnVmZmVyIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBieXRlbXVjazo6Y2FzdF9zbGljZSgmaW5zdF9pZHhfc3RhZ2UpLAogICAgICAgICAgICAgICAgICAgICAgICB1c2FnZTogd2dwdTo6QnVmZmVyVXNhZ2VzOjpJTkRJUkVDVCwKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJwYXNzLm11bHRpX2RyYXdfaW5kZXhlZF9pbmRpcmVjdCgmaW5zdF9pZHhfYnVmZmVyLCAwLCBpbnN0X2lkeF9zdGFnZS5sZW4oKSBhcyB1MzIpOwogICAgICAgIH0KCiAgICAgICAgLy8gLy8gbGluZXMKICAgICAgICAvLyBsb2c6OnRyYWNlISgibGluZSBwaXBlbGluZToge30gaXRlbXMiLCBmcmFtZS5saW5lcy5pdGVtcy5sZW4oKSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYubGluZV9yZW5kZXJfcGlwZWxpbmUucmVzKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDAsIHNlbGYuY2FtZXJhX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDEsIHNlbGYudHJhbnNmb3JtX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIGZvciBpdGVtIGluIGZyYW1lLmxpbmVzLml0ZW1zLml0ZXIoKSB7CiAgICAgICAgLy8gICAgIGxldCBTb21lKHZidWYpID0gc2VsZi5idWZmZXJzLmdldChpdGVtLnZlcnRpY2VzKSBlbHNlIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgbGV0IGlidWYgPSBtYXRjaCBpdGVtLmluc3RhbmNlcyB7CiAgICAgICAgLy8gICAgICAgICBTb21lKGlkKSA9PiBtYXRjaCBzZWxmLmJ1ZmZlcnMuZ2V0KGlkKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgU29tZShidWYpID0+IGJ1ZiwKICAgICAgICAvLyAgICAgICAgICAgICBOb25lID0+IGNvbnRpbnVlLAogICAgICAgIC8vICAgICAgICAgfSwKICAgICAgICAvLyAgICAgICAgIE5vbmUgPT4gJnNlbGYuaWRfaW5zdGFuY2VfYnVmLAogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgaWYgdmJ1Zi5lbGVtZW50X2NvdW50KCkgPT0gMCB8fCBpYnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9CgogICAgICAgIC8vICAgICBycGFzcy5zZXRfdmVydGV4X2J1ZmZlcigwLCB2YnVmLmJ1ZmZlcigpLnNsaWNlKC4uKSk7CiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDEsIGlidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKCiAgICAgICAgLy8gICAgIHJwYXNzLmRyYXcoCiAgICAgICAgLy8gICAgICAgICAwLi52YnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICAgICAwLi5pYnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICk7CiAgICAgICAgLy8gfQoKICAgICAgICAvLyAvLyBwYXJ0aWNsZXMKICAgICAgICAvLyBsb2c6OnRyYWNlISgicGFydGljbGUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUucGFydGljbGVzLml0ZW1zLmxlbigpKTsKICAgICAgICAvLyBycGFzcy5zZXRfcGlwZWxpbmUoc2VsZi5wYXJ0aWNsZV9yZW5kZXJfcGlwZWxpbmUucmVzKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDAsIHNlbGYuY2FtZXJhX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIGZvciBpdGVtIGluIGZyYW1lLnBhcnRpY2xlcy5pdGVtcy5pdGVyKCkgewogICAgICAgIC8vICAgICBsZXQgU29tZSh2YnVmKSA9IHNlbGYuYnVmZmVycy5nZXQoaXRlbS52ZXJ0aWNlcykgZWxzZSB7CiAgICAgICAgLy8gICAgICAgICBjb250aW51ZTsKICAgICAgICAvLyAgICAgfTsKCiAgICAgICAgLy8gICAgIGxldCBpYnVmID0gbWF0Y2ggaXRlbS5pbnN0YW5jZXMgewogICAgICAgIC8vICAgICAgICAgU29tZShpZCkgPT4gbWF0Y2ggc2VsZi5idWZmZXJzLmdldChpZCkgewogICAgICAgIC8vICAgICAgICAgICAgIFNvbWUoYnVmKSA9PiBidWYsCiAgICAgICAgLy8gICAgICAgICAgICAgTm9uZSA9PiBjb250aW51ZSwKICAgICAgICAvLyAgICAgICAgIH0sCiAgICAgICAgLy8gICAgICAgICBOb25lID0+IGNvbnRpbnVlLAogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgaWYgdmJ1Zi5lbGVtZW50X2NvdW50KCkgPT0gMCB8fCBpYnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9CgogICAgICAgIC8vICAgICBycGFzcy5zZXRfdmVydGV4X2J1ZmZlcigwLCB2YnVmLmJ1ZmZlcigpLnNsaWNlKC4uKSk7CiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDEsIGlidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKCiAgICAgICAgLy8gICAgIHJwYXNzLmRyYXcoCiAgICAgICAgLy8gICAgICAgICAwLi52YnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICAgICAwLi5pYnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICk7CiAgICAgICAgLy8gfQoKICAgICAgICAvLyBFbmQgdGhlIHJlbmRlcnBhc3MuCiAgICAgICAgZHJvcChycGFzcyk7CiAgICB9Cn0KAAAAAAAAAACZOQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgQAAAAAAAASBAAAAAAAAAAAAAAAAPC/"
				],
				[
					160,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACZOQAAdXNlIGNyYXRlOjp7CiAgICBCaW5kR3JvdXAsIEJpbmRHcm91cEJ1aWxkZXIsIEJpbmRHcm91cExheW91dEJ1aWxkZXIsIENhbWVyYUJ1ZmZlciwgQ2FtZXJhVW5pZm9ybUdyb3VwLAogICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsIEZyYW1lLCBTaGFyZWRXZ3B1UmVzLCBVYmVySW5zdGFuY2VCdWZmZXIsIFViZXJJbnN0YW5jZVBvZCwgVWJlclBpcGVsaW5lLAogICAgV2luZG93LAogICAgbWVzaDo6e01lc2hQcm94eUlkLCBTaGFyZWRNZXNoUHJveHlTdG9yZX0sCiAgICBzdHJlYW06OntTaGFyZWRVYmVySW5kZXhCdWZmZXIsIFNoYXJlZFViZXJWZXJ0ZXhCdWZmZXJ9LAp9Owp1c2Ugc3RkOjp7Y2VsbDo6UmVmQ2VsbCwgY29sbGVjdGlvbnM6Okhhc2hNYXB9Owp1c2Ugd2dwdTo6dXRpbDo6RGV2aWNlRXh0OwoKY29uc3QgVUJFUl9JTlNUQU5DRV9DT1VOVDogdXNpemUgPSAxMF8wMDA7CgpwdWIgc3RydWN0IFJlbmRlcmVySGFuZGxlcyB7CiAgICBwdWIgd2dwdTogU2hhcmVkV2dwdVJlcywKICAgIHB1YiBpbmRleF9idWY6IFNoYXJlZFViZXJJbmRleEJ1ZmZlciwKICAgIHB1YiB2ZXJ0ZXhfYnVmOiBTaGFyZWRVYmVyVmVydGV4QnVmZmVyLAogICAgcHViIG1lc2hfcHJveHlfc3RvcmU6IFNoYXJlZE1lc2hQcm94eVN0b3JlLAp9CgpwdWIgc3RydWN0IFJlbmRlcmVyIHsKICAgIGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcywKCiAgICBjYW1lcmFfYnVmOiBDYW1lcmFCdWZmZXIsCiAgICBjYW1lcmFfYmc6IEJpbmRHcm91cCwKCiAgICBpbnN0YW5jZV9idWY6IFJlZkNlbGw8VWJlckluc3RhbmNlQnVmZmVyPiwKICAgIGluc3RhbmNlX2JnOiBCaW5kR3JvdXAsCgogICAgaW5kZXhfYmc6IEJpbmRHcm91cCwKICAgIHZlcnRleF9iZzogQmluZEdyb3VwLAoKICAgIHViZXJfcGlwZWxpbmU6IFViZXJQaXBlbGluZSwKfQoKaW1wbCBSZW5kZXJlciB7CiAgICBwdWIgZm4gbmV3KGhhbmRsZXM6IFJlbmRlcmVySGFuZGxlcykgLT4gU2VsZiB7CiAgICAgICAgY29uc3QgQ09MT1JfRk9STUFUOiB3Z3B1OjpUZXh0dXJlRm9ybWF0ID0gd2dwdTo6VGV4dHVyZUZvcm1hdDo6QmdyYThVbm9ybVNyZ2I7CgogICAgICAgIGxldCB3Z3B1X2RldmljZSA9IGhhbmRsZXMud2dwdS5kZXZpY2UoKTsKCiAgICAgICAgbGV0IGNhbWVyYV9idWYgPSBDYW1lcmFCdWZmZXI6Om5ldyh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbnN0YW5jZV9idWYgPSBVYmVySW5zdGFuY2VCdWZmZXI6Om5ldyhVQkVSX0lOU1RBTkNFX0NPVU5ULCB3Z3B1X2RldmljZSk7CgogICAgICAgIC8vIGxldCB0cmFuc2Zvcm1fYnVmID0gVHJhbnNmb3JtQnVmZmVyR3B1OjpuZXcod2dwdS5kZXZpY2UoKSk7CgogICAgICAgIC8vIGxldCBpZF9pbnN0YW5jZV9idWYgPSBHcHVCdWZmZXI6OmZyb21fc2xpY2UoCiAgICAgICAgLy8gICAgICZbVGYxMjo6ZnJvbV9nbG9iYWxfdHJhbnNmb3JtXzMoJkdsb2JhbFRyYW5zZm9ybTM6OmlkZW50aXR5KCkpXSwKICAgICAgICAvLyAgICAgImlkIGluc3QgYnVmIiwKICAgICAgICAvLyAgICAgd2dwdS5kZXZpY2UoKSwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgYnVmZmVycyA9IEdwdUJ1ZmZlclN0b3JlOjpuZXcoKTsKCiAgICAgICAgLy8gbGV0IGJpbmRfZ3JvdXBfdGV4dHVyZV9sYXlvdXQgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgIC8vICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCB0ZXh0dXJlIGJpbmQgZ3JvdXAgbGF5b3V0IikKICAgICAgICAvLyAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6U2FtcGxlcigKICAgICAgICAvLyAgICAgICAgIHdncHU6OlNhbXBsZXJCaW5kaW5nVHlwZTo6RmlsdGVyaW5nLAogICAgICAgIC8vICAgICApKQogICAgICAgIC8vICAgICAud2l0aF9iaW5kaW5nKHdncHU6OkJpbmRpbmdUeXBlOjpUZXh0dXJlIHsKICAgICAgICAvLyAgICAgICAgIHNhbXBsZV90eXBlOiB3Z3B1OjpUZXh0dXJlU2FtcGxlVHlwZTo6RmxvYXQgeyBmaWx0ZXJhYmxlOiB0cnVlIH0sCiAgICAgICAgLy8gICAgICAgICB2aWV3X2RpbWVuc2lvbjogd2dwdTo6VGV4dHVyZVZpZXdEaW1lbnNpb246OkQyLAogICAgICAgIC8vICAgICAgICAgbXVsdGlzYW1wbGVkOiBmYWxzZSwKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgICAgLmZpbmFsaXplKHdncHUuZGV2aWNlKCkpOwoKICAgICAgICBsZXQgY2FtZXJhX2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJkZWZhdWx0IGNhbWVyYSB1bmlmb3JtIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoQ2FtZXJhVW5pZm9ybUdyb3VwOjpiaW5kaW5nX3R5cGUoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgbGV0IGNhbWVyYV9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhjYW1lcmFfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCBjYW1lcmEgdW5pZm9ybSIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoY2FtZXJhX2J1Zi5yZXMoKS5hc19lbnRpcmVfYmluZGluZygpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmdsID0gQmluZEdyb3VwTGF5b3V0QnVpbGRlcjo6bmV3KCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgaW5zdGFuY2UgYnVmZmVyIGxheW91dCIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcod2dwdTo6QmluZGluZ1R5cGU6OkJ1ZmZlciB7CiAgICAgICAgICAgICAgICB0eTogd2dwdTo6QnVmZmVyQmluZGluZ1R5cGU6OlN0b3JhZ2UgeyByZWFkX29ubHk6IHRydWUgfSwKICAgICAgICAgICAgICAgIGhhc19keW5hbWljX29mZnNldDogZmFsc2UsCiAgICAgICAgICAgICAgICBtaW5fYmluZGluZ19zaXplOiBOb25lLAogICAgICAgICAgICB9KQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcoaW5zdGFuY2VfYmdsKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbnN0YW5jZSBidWZmZXIiKQogICAgICAgICAgICAud2l0aF9iaW5kaW5nKGluc3RhbmNlX2J1Zi5kZXZpY2UuYXNfd2dwdV9iaW5kaW5nX3Jlc291cmNlKCkpCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZ2wgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgICAgICAud2l0aF9sYWJlbCgidWJlciBpbmRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBpbmRleF9iZyA9IEJpbmRHcm91cEJ1aWxkZXI6Om5ldyhpbmRleF9iZ2wpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIGluZGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy5pbmRleF9idWYubG9jaygpLmFzX3dncHVfYmluZGluZ19yZXNvdXJjZSgpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgdmVydGV4X2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIHZlcnRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCB2ZXJ0ZXhfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcodmVydGV4X2JnbCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgdmVydGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKS5hc193Z3B1X2JpbmRpbmdfcmVzb3VyY2UoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgLy8gbGV0IHBhcnRpY2xlX3JlbmRlcl9waXBlbGluZSA9IFNpbXBsZVJlbmRlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgLy8gICAgICJQYXJ0aWNsZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvcGFydGljbGUud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVTdHJpcCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgLy8gICAgIFVWZXJ0ZXg6OmxheW91dCgzKSwKICAgICAgICAvLyAgICAgU29tZShQYXJ0aWNsZUluc3RhbmNlOjpsYXlvdXQoMCkpLAogICAgICAgIC8vICAgICAmWyZjYW1lcmFfYmddLAogICAgICAgIC8vICAgICB3Z3B1X2RldmljZSwKICAgICAgICAvLyAgICAgQ09MT1JfRk9STUFULAogICAgICAgIC8vICAgICBERVBUSF9TVEVOQ0lMX0ZPUk1BVCwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgbGluZV9yZW5kZXJfcGlwZWxpbmUgPSBTaW1wbGVSZW5kZXJQaXBlbGluZTo6bmV3KAogICAgICAgIC8vICAgICAiTGluZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvbGluZS53Z3NsIiksCiAgICAgICAgLy8gICAgIHdncHU6OlByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lTGlzdCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkxpbmUsCiAgICAgICAgLy8gICAgIFBjVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgyKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIC8vIGxldCBvcGFxdWVfcmVuZGVyX3BpcGVsaW5lID0gU2ltcGxlUmVuZGVyUGlwZWxpbmU6Om5ldygKICAgICAgICAvLyAgICAgIk1lc2ggUmVuZGVyIFBpcGVsaW5lIiwKICAgICAgICAvLyAgICAgaW5jbHVkZV9zdHIhKCIuLi8uLi9zaGFkZXJzL21lc2gud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVMaXN0LAogICAgICAgIC8vICAgICB3Z3B1OjpQb2x5Z29uTW9kZTo6RmlsbCwKICAgICAgICAvLyAgICAgUGNuVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgzKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIGxldCB1YmVyX3BpcGVsaW5lID0gVWJlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgICAgIGluY2x1ZGVfc3RyISgiLi4vLi4vc2hhZGVycy91YmVyLndnc2wiKSwKICAgICAgICAgICAgd2dwdTo6UHJpbWl0aXZlVG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCwKICAgICAgICAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgICAgICZbJmNhbWVyYV9iZywgJmluc3RhbmNlX2JnLCAmdmVydGV4X2JnXSwKICAgICAgICAgICAgd2dwdV9kZXZpY2UsCiAgICAgICAgICAgIENPTE9SX0ZPUk1BVCwKICAgICAgICAgICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsCiAgICAgICAgKTsKCiAgICAgICAgUmVuZGVyZXIgewogICAgICAgICAgICBoYW5kbGVzLAogICAgICAgICAgICBjYW1lcmFfYnVmLAogICAgICAgICAgICBjYW1lcmFfYmcsCiAgICAgICAgICAgIGluc3RhbmNlX2J1ZjogUmVmQ2VsbDo6bmV3KGluc3RhbmNlX2J1ZiksCiAgICAgICAgICAgIGluc3RhbmNlX2JnLAogICAgICAgICAgICBpbmRleF9iZywKICAgICAgICAgICAgdmVydGV4X2JnLAogICAgICAgICAgICB1YmVyX3BpcGVsaW5lLAogICAgICAgIH0KICAgIH0KCiAgICAvLyBwdWIgZm4gcHJvY2Vzc19idWZmZXJfY29tbWFuZHMoJm11dCBzZWxmLCBjbWRzOiBpbXBsIEludG9JdGVyYXRvcjxJdGVtID0gQnVmZmVyQ29tbWFuZD4pIHsKICAgIC8vICAgICBmb3IgY21kIGluIGNtZHMuaW50b19pdGVyKCkgewogICAgLy8gICAgICAgICBzZWxmLmJ1ZmZlcnMub25fY29tbWFuZChjbWQpOwogICAgLy8gICAgIH0KICAgIC8vIH0KCiAgICBwdWIgZm4gcmVuZGVyX3dpbmRvdygmc2VsZiwgd2luOiAmbXV0IFdpbmRvdywgZnJhbWU6ICZGcmFtZSkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICAgICAgc2VsZi5yZW5kZXJlcl9ycGFzcyh3aW4sIGZyYW1lKT87CiAgICAgICAgT2soKCkpCiAgICB9CgogICAgZm4gcmVuZGVyZXJfcnBhc3MoJnNlbGYsIHdpbjogJm11dCBXaW5kb3csIGZyYW1lOiAmRnJhbWUpIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCB3Z3B1ID0gJipzZWxmLmhhbmRsZXMud2dwdTsKCiAgICAgICAgc2VsZi5jYW1lcmFfYnVmCiAgICAgICAgICAgIC53cml0ZV9idWZmZXIoJmZyYW1lLmNhbWVyYSwgd2luLnNpemUuc2NyZWVuX3NpemUsIHdncHUucXVldWUoKSk7CgogICAgICAgIC8vIHNlbGYudHJhbnNmb3JtX2J1Zi51cGxvYWQoJmZyYW1lLnRmX2J1ZmZlciwgd2dwdS5xdWV1ZSgpKTsKCiAgICAgICAgbGV0IG11dCBlbmNvZGVyID0gd2dwdS5kZXZpY2UoKS5jcmVhdGVfY29tbWFuZF9lbmNvZGVyKCZEZWZhdWx0OjpkZWZhdWx0KCkpOwoKICAgICAgICBsZXQgY29sb3JfdGV4X3ZpZXcgPSB3aW4ud2luLnByZXBhcmVfcHJlc2VudCgpPzsKCiAgICAgICAgc2VsZi5lbmNvZGVfcmVuZGVyX3Bhc3MoCiAgICAgICAgICAgICZtdXQgZW5jb2RlciwKICAgICAgICAgICAgJmNvbG9yX3RleF92aWV3LAogICAgICAgICAgICB3aW4ucmVzLmRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudF92aWV3KCksCiAgICAgICAgICAgIGZyYW1lLAogICAgICAgICk7CgogICAgICAgIC8vIHJlbmRlciBFR1VJCiAgICAgICAgaWYgbGV0IFNvbWUoZWd1aXIpID0gd2luLmd1aV9yZXMuYXNfbXV0KCkgewogICAgICAgICAgICBlZ3Vpci5iZWdpbl9mcmFtZSgmd2luLndpbik7CgogICAgICAgICAgICBpZiBsZXQgU29tZShndWkpID0gd2luLmd1aV9kZWYuYXNfcmVmKCkgewogICAgICAgICAgICAgICAgZ3VpLjAuc2hvdyhlZ3Vpci5jb250ZXh0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGVndWkuc2hvdyhlZ3Vpci5jb250ZXh0KCksIG1vZGVsKTsKICAgICAgICAgICAgLy8gZWd1aXIuZGVtbygpOwoKICAgICAgICAgICAgbGV0IHNjcmVlbl9kZXNjID0gZWd1aV93Z3B1OjpTY3JlZW5EZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHNpemVfaW5fcGl4ZWxzOiB3aW4ud2luLndpZHRoX2hlaWdodF91MzIoKSwKICAgICAgICAgICAgICAgIHBpeGVsc19wZXJfcG9pbnQ6IHdpbi53aW4uc2NhbGVfZmFjdG9yKCkgYXMgZjMyICogZWd1aXIuc2NhbGVfZmFjdG9yKCksCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBlZ3Vpci5lbmRfZnJhbWVfYW5kX2RyYXcoCiAgICAgICAgICAgICAgICB3Z3B1LmRldmljZSgpLAogICAgICAgICAgICAgICAgd2dwdS5xdWV1ZSgpLAogICAgICAgICAgICAgICAgJm11dCBlbmNvZGVyLAogICAgICAgICAgICAgICAgJndpbi53aW4sCiAgICAgICAgICAgICAgICAmY29sb3JfdGV4X3ZpZXcsCiAgICAgICAgICAgICAgICBzY3JlZW5fZGVzYywKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHdncHUucXVldWUuc3VibWl0KFtlbmNvZGVyLmZpbmlzaCgpXSk7CgogICAgICAgIHdpbi53aW4uZmluYWxpemVfcHJlc2VudCgpPzsKCiAgICAgICAgLy8gRklYTUUgd2Ugc2hvdWxkIGFsd2F5cyByZXF1ZXN0IGEgcmVkcmF3IG90aGVyd2lzZSByZW5kZXIgd2lsbCBuZXZlciBiZSBydW4gYWdhaW4KICAgICAgICB3aW4ud2luLnJlcXVlc3RfcmVkcmF3KCk7CgogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIGVuY29kZV9yZW5kZXJfcGFzcygKICAgICAgICAmc2VsZiwKICAgICAgICBlbmNvZGVyOiAmbXV0IHdncHU6OkNvbW1hbmRFbmNvZGVyLAogICAgICAgIGNvbG9yX3RleF92aWV3OiAmd2dwdTo6VGV4dHVyZVZpZXcsCiAgICAgICAgZGVwdGhfc3RlbmNpbF90ZXhfdmlldzogJndncHU6OlRleHR1cmVWaWV3LAogICAgICAgIGZyYW1lOiAmRnJhbWUsCiAgICApIHsKICAgICAgICBsZXQgbXV0IHJwYXNzID0gZW5jb2Rlci5iZWdpbl9yZW5kZXJfcGFzcygmd2dwdTo6UmVuZGVyUGFzc0Rlc2NyaXB0b3IgewogICAgICAgICAgICBsYWJlbDogTm9uZSwKICAgICAgICAgICAgY29sb3JfYXR0YWNobWVudHM6ICZbU29tZSh3Z3B1OjpSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50IHsKICAgICAgICAgICAgICAgIHZpZXc6IGNvbG9yX3RleF92aWV3LAogICAgICAgICAgICAgICAgcmVzb2x2ZV90YXJnZXQ6IE5vbmUsCiAgICAgICAgICAgICAgICBvcHM6IHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIod2dwdTo6Q29sb3IgewogICAgICAgICAgICAgICAgICAgICAgICByOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBnOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBiOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBhOiAxLiwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBzdG9yZTogd2dwdTo6U3RvcmVPcDo6U3RvcmUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KV0sCiAgICAgICAgICAgIGRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudDogU29tZSh3Z3B1OjpSZW5kZXJQYXNzRGVwdGhTdGVuY2lsQXR0YWNobWVudCB7CiAgICAgICAgICAgICAgICB2aWV3OiBkZXB0aF9zdGVuY2lsX3RleF92aWV3LAogICAgICAgICAgICAgICAgZGVwdGhfb3BzOiBTb21lKHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIoMS4wKSwgLy8gQ2xlYXIgdG8gZmFyIHBsYW5lCiAgICAgICAgICAgICAgICAgICAgc3RvcmU6IHdncHU6OlN0b3JlT3A6OlN0b3JlLAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzdGVuY2lsX29wczogTm9uZSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRpbWVzdGFtcF93cml0ZXM6IE5vbmUsCiAgICAgICAgICAgIG9jY2x1c2lvbl9xdWVyeV9zZXQ6IE5vbmUsCiAgICAgICAgfSk7CgogICAgICAgIC8vIG9wYXF1ZQogICAgICAgIGxvZzo6dHJhY2UhKCJvcGFxdWUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUub3BhcXVlLml0ZW1zLmxlbigpKTsKCiAgICAgICAgcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYudWJlcl9waXBlbGluZS5yZXMoKSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMCwgc2VsZi5jYW1lcmFfYmcucmVzKCksICZbXSk7CiAgICAgICAgcnBhc3Muc2V0X2JpbmRfZ3JvdXAoMSwgc2VsZi5pbnN0YW5jZV9iZy5yZXMoKSwgJltdKTsKICAgICAgICBycGFzcy5zZXRfYmluZF9ncm91cCgyLCBzZWxmLnZlcnRleF9iZy5yZXMoKSwgJltdKTsKCiAgICAgICAgbGV0IG11dCBpbnN0X3NldHM6IEhhc2hNYXA8TWVzaFByb3h5SWQsIFZlYzxVYmVySW5zdGFuY2VQb2Q+PiA9IEhhc2hNYXA6Om5ldygpOwoKICAgICAgICBwcmludGxuISgiZnJhbWUub3BhcXVlLml0ZW1zOiB7Oj99IiwgZnJhbWUub3BhcXVlLml0ZW1zKTsKICAgICAgICBmb3IgaXRlbSBpbiBmcmFtZS5vcGFxdWUuaXRlbXMuaXRlcigpIHsKICAgICAgICAgICAgaW5zdF9zZXRzCiAgICAgICAgICAgICAgICAuZW50cnkoaXRlbS5tZXNoKQogICAgICAgICAgICAgICAgLm9yX2RlZmF1bHQoKQogICAgICAgICAgICAgICAgLnB1c2goVWJlckluc3RhbmNlUG9kIHsKICAgICAgICAgICAgICAgICAgICB0ZjogaXRlbS50Zi5jbG9uZSgpLAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBsZXQgbXV0IGluc3RfaWR4X3N0YWdlID0gVmVjOjo8d2dwdTo6dXRpbDo6RHJhd0luZGV4ZWRJbmRpcmVjdEFyZ3M+OjpuZXcoKTsKCiAgICAgICAgbGV0IG1lc2hfcHJveHlfc3RvcmUgPSBzZWxmLmhhbmRsZXMubWVzaF9wcm94eV9zdG9yZS5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfaW5kZXhfYnVmID0gc2VsZi5oYW5kbGVzLmluZGV4X2J1Zi5sb2NrKCk7CiAgICAgICAgbGV0IHViZXJfdmVydGV4X2J1ZiA9IHNlbGYuaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKTsKICAgICAgICBsZXQgbXV0IGluc3RhbmNlX2J1ZiA9IHNlbGYuaW5zdGFuY2VfYnVmLmJvcnJvd19tdXQoKTsKCiAgICAgICAgZm9yICgmbWVzaF9pZCwgaW5zdGFuY2VzKSBpbiBpbnN0X3NldHMuaXRlcigpIHsKICAgICAgICAgICAgbGV0IFNvbWUobWVzaCkgPSBtZXNoX3Byb3h5X3N0b3JlLmdldChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IFNvbWUoZmlyc3RfaW5kZXgpID0gdWJlcl9pbmRleF9idWYubG9jYXRlX3VuaXQobWVzaF9pZCkgZWxzZSB7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGxldCBTb21lKGJhc2VfdmVydGV4KSA9IHViZXJfdmVydGV4X2J1Zi5sb2NhdGVfdW5pdChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgbGV0IGZpcnN0X2luc3RhbmNlID0gaW5zdGFuY2VfYnVmLnN0YWdlLmxlbigpOwoKICAgICAgICAgICAgbGV0IGFyZ3MgPSB3Z3B1Ojp1dGlsOjpEcmF3SW5kZXhlZEluZGlyZWN0QXJncyB7CiAgICAgICAgICAgICAgICBpbmRleF9jb3VudDogbWVzaC5pbmRleF9jb3VudCgpIGFzIHUzMiwKICAgICAgICAgICAgICAgIGluc3RhbmNlX2NvdW50OiBpbnN0YW5jZXMubGVuKCkgYXMgdTMyLAogICAgICAgICAgICAgICAgZmlyc3RfaW5kZXgsCiAgICAgICAgICAgICAgICBiYXNlX3ZlcnRleDogYmFzZV92ZXJ0ZXggYXMgaTMyLAogICAgICAgICAgICAgICAgZmlyc3RfaW5zdGFuY2U6IGZpcnN0X2luc3RhbmNlIGFzIHUzMiwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgcHJpbnRsbiEoIkRyYXdJbmRleGVkSW5kaXJlY3RBcmdzOiB7Oj99IiwgYXJncyk7CiAgICAgICAgICAgIGluc3RfaWR4X3N0YWdlLnB1c2goYXJncyk7CgogICAgICAgICAgICBmb3IgaW5zdGFuY2UgaW4gaW5zdGFuY2VzLml0ZXIoKSB7CiAgICAgICAgICAgICAgICBpbnN0YW5jZV9idWYuc3RhZ2UucHVzaChVYmVySW5zdGFuY2VQb2QgeyB0ZjogaW5zdGFuY2UudGYgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGluc3RhbmNlX2J1Zi51cGxvYWQoJnNlbGYuaGFuZGxlcy53Z3B1LnF1ZXVlKTsKCiAgICAgICAgaWYgaW5zdF9pZHhfc3RhZ2UubGVuKCkgPiAwIHsKICAgICAgICAgICAgbGV0IGluc3RfaWR4X2J1ZmZlciA9CiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZXMKICAgICAgICAgICAgICAgICAgICAud2dwdQogICAgICAgICAgICAgICAgICAgIC5kZXZpY2UoKQogICAgICAgICAgICAgICAgICAgIC5jcmVhdGVfYnVmZmVyX2luaXQoJndncHU6OnV0aWw6OkJ1ZmZlckluaXREZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFNvbWUoIkRyYXdJbmRleGVkSW5kaXJlY3QgQnVmZmVyIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBieXRlbXVjazo6Y2FzdF9zbGljZSgmaW5zdF9pZHhfc3RhZ2UpLAogICAgICAgICAgICAgICAgICAgICAgICB1c2FnZTogd2dwdTo6QnVmZmVyVXNhZ2VzOjpJTkRJUkVDVCwKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIHJwYXNzLm11bHRpX2RyYXdfaW5kZXhlZF9pbmRpcmVjdCgmaW5zdF9pZHhfYnVmZmVyLCAwLCBpbnN0X2lkeF9zdGFnZS5sZW4oKSBhcyB1MzIpOwogICAgICAgIH0KCiAgICAgICAgLy8gLy8gbGluZXMKICAgICAgICAvLyBsb2c6OnRyYWNlISgibGluZSBwaXBlbGluZToge30gaXRlbXMiLCBmcmFtZS5saW5lcy5pdGVtcy5sZW4oKSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYubGluZV9yZW5kZXJfcGlwZWxpbmUucmVzKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDAsIHNlbGYuY2FtZXJhX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDEsIHNlbGYudHJhbnNmb3JtX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIGZvciBpdGVtIGluIGZyYW1lLmxpbmVzLml0ZW1zLml0ZXIoKSB7CiAgICAgICAgLy8gICAgIGxldCBTb21lKHZidWYpID0gc2VsZi5idWZmZXJzLmdldChpdGVtLnZlcnRpY2VzKSBlbHNlIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgbGV0IGlidWYgPSBtYXRjaCBpdGVtLmluc3RhbmNlcyB7CiAgICAgICAgLy8gICAgICAgICBTb21lKGlkKSA9PiBtYXRjaCBzZWxmLmJ1ZmZlcnMuZ2V0KGlkKSB7CiAgICAgICAgLy8gICAgICAgICAgICAgU29tZShidWYpID0+IGJ1ZiwKICAgICAgICAvLyAgICAgICAgICAgICBOb25lID0+IGNvbnRpbnVlLAogICAgICAgIC8vICAgICAgICAgfSwKICAgICAgICAvLyAgICAgICAgIE5vbmUgPT4gJnNlbGYuaWRfaW5zdGFuY2VfYnVmLAogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgaWYgdmJ1Zi5lbGVtZW50X2NvdW50KCkgPT0gMCB8fCBpYnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9CgogICAgICAgIC8vICAgICBycGFzcy5zZXRfdmVydGV4X2J1ZmZlcigwLCB2YnVmLmJ1ZmZlcigpLnNsaWNlKC4uKSk7CiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDEsIGlidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKCiAgICAgICAgLy8gICAgIHJwYXNzLmRyYXcoCiAgICAgICAgLy8gICAgICAgICAwLi52YnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICAgICAwLi5pYnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICk7CiAgICAgICAgLy8gfQoKICAgICAgICAvLyAvLyBwYXJ0aWNsZXMKICAgICAgICAvLyBsb2c6OnRyYWNlISgicGFydGljbGUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUucGFydGljbGVzLml0ZW1zLmxlbigpKTsKICAgICAgICAvLyBycGFzcy5zZXRfcGlwZWxpbmUoc2VsZi5wYXJ0aWNsZV9yZW5kZXJfcGlwZWxpbmUucmVzKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9iaW5kX2dyb3VwKDAsIHNlbGYuY2FtZXJhX2JnLnJlcygpLCAmW10pOwogICAgICAgIC8vIGZvciBpdGVtIGluIGZyYW1lLnBhcnRpY2xlcy5pdGVtcy5pdGVyKCkgewogICAgICAgIC8vICAgICBsZXQgU29tZSh2YnVmKSA9IHNlbGYuYnVmZmVycy5nZXQoaXRlbS52ZXJ0aWNlcykgZWxzZSB7CiAgICAgICAgLy8gICAgICAgICBjb250aW51ZTsKICAgICAgICAvLyAgICAgfTsKCiAgICAgICAgLy8gICAgIGxldCBpYnVmID0gbWF0Y2ggaXRlbS5pbnN0YW5jZXMgewogICAgICAgIC8vICAgICAgICAgU29tZShpZCkgPT4gbWF0Y2ggc2VsZi5idWZmZXJzLmdldChpZCkgewogICAgICAgIC8vICAgICAgICAgICAgIFNvbWUoYnVmKSA9PiBidWYsCiAgICAgICAgLy8gICAgICAgICAgICAgTm9uZSA9PiBjb250aW51ZSwKICAgICAgICAvLyAgICAgICAgIH0sCiAgICAgICAgLy8gICAgICAgICBOb25lID0+IGNvbnRpbnVlLAogICAgICAgIC8vICAgICB9OwoKICAgICAgICAvLyAgICAgaWYgdmJ1Zi5lbGVtZW50X2NvdW50KCkgPT0gMCB8fCBpYnVmLmVsZW1lbnRfY291bnQoKSA9PSAwIHsKICAgICAgICAvLyAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIC8vICAgICB9CgogICAgICAgIC8vICAgICBycGFzcy5zZXRfdmVydGV4X2J1ZmZlcigwLCB2YnVmLmJ1ZmZlcigpLnNsaWNlKC4uKSk7CiAgICAgICAgLy8gICAgIHJwYXNzLnNldF92ZXJ0ZXhfYnVmZmVyKDEsIGlidWYuYnVmZmVyKCkuc2xpY2UoLi4pKTsKCiAgICAgICAgLy8gICAgIHJwYXNzLmRyYXcoCiAgICAgICAgLy8gICAgICAgICAwLi52YnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICAgICAwLi5pYnVmLmVsZW1lbnRfY291bnQoKSBhcyB1MzIsCiAgICAgICAgLy8gICAgICk7CiAgICAgICAgLy8gfQoKICAgICAgICAvLyBFbmQgdGhlIHJlbmRlcnBhc3MuCiAgICAgICAgZHJvcChycGFzcyk7CiAgICB9Cn0KAAAAAAAAAAAPPQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgQAAAAAAAASBAAAAAAAAAAAAAAAAPC/"
				],
				[
					161,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAAPPQAAdXNlIGNyYXRlOjp7CiAgICBCaW5kR3JvdXAsIEJpbmRHcm91cEJ1aWxkZXIsIEJpbmRHcm91cExheW91dEJ1aWxkZXIsIENhbWVyYUJ1ZmZlciwgQ2FtZXJhVW5pZm9ybUdyb3VwLAogICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsIEZyYW1lLCBTaGFyZWRXZ3B1UmVzLCBVYmVySW5zdGFuY2VCdWZmZXIsIFViZXJJbnN0YW5jZVBvZCwgVWJlclBpcGVsaW5lLAogICAgV2luZG93LAogICAgbWVzaDo6e01lc2hQcm94eUlkLCBTaGFyZWRNZXNoUHJveHlTdG9yZX0sCiAgICBzdHJlYW06OntTaGFyZWRVYmVySW5kZXhCdWZmZXIsIFNoYXJlZFViZXJWZXJ0ZXhCdWZmZXJ9LAp9Owp1c2Ugc3RkOjp7CiAgICBjZWxsOjpSZWZDZWxsLAogICAgY29sbGVjdGlvbnM6OntCVHJlZU1hcCwgSGFzaE1hcH0sCn07CnVzZSB3Z3B1Ojp7CiAgICB1dGlsOjp7RGV2aWNlRXh0LCBSZW5kZXJFbmNvZGVyfSwKICAgIHdndDo6aW5zdGFuY2UsCn07Cgpjb25zdCBVQkVSX0lOU1RBTkNFX0NPVU5UOiB1c2l6ZSA9IDEwXzAwMDsKCnB1YiBzdHJ1Y3QgUmVuZGVyZXJIYW5kbGVzIHsKICAgIHB1YiB3Z3B1OiBTaGFyZWRXZ3B1UmVzLAogICAgcHViIGluZGV4X2J1ZjogU2hhcmVkVWJlckluZGV4QnVmZmVyLAogICAgcHViIHZlcnRleF9idWY6IFNoYXJlZFViZXJWZXJ0ZXhCdWZmZXIsCiAgICBwdWIgbWVzaF9wcm94eV9zdG9yZTogU2hhcmVkTWVzaFByb3h5U3RvcmUsCn0KCnB1YiBzdHJ1Y3QgUmVuZGVyZXIgewogICAgaGFuZGxlczogUmVuZGVyZXJIYW5kbGVzLAoKICAgIGNhbWVyYV9idWY6IENhbWVyYUJ1ZmZlciwKICAgIGNhbWVyYV9iZzogQmluZEdyb3VwLAoKICAgIGluc3RhbmNlX2J1ZjogUmVmQ2VsbDxVYmVySW5zdGFuY2VCdWZmZXI+LAogICAgaW5zdGFuY2VfYmc6IEJpbmRHcm91cCwKCiAgICB2ZXJ0ZXhfYmc6IEJpbmRHcm91cCwKCiAgICB1YmVyX3BpcGVsaW5lOiBVYmVyUGlwZWxpbmUsCn0KCmltcGwgUmVuZGVyZXIgewogICAgcHViIGZuIG5ldyhoYW5kbGVzOiBSZW5kZXJlckhhbmRsZXMpIC0+IFNlbGYgewogICAgICAgIGNvbnN0IENPTE9SX0ZPUk1BVDogd2dwdTo6VGV4dHVyZUZvcm1hdCA9IHdncHU6OlRleHR1cmVGb3JtYXQ6OkJncmE4VW5vcm1TcmdiOwoKICAgICAgICBsZXQgd2dwdV9kZXZpY2UgPSBoYW5kbGVzLndncHUuZGV2aWNlKCk7CgogICAgICAgIGxldCBjYW1lcmFfYnVmID0gQ2FtZXJhQnVmZmVyOjpuZXcod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgaW5zdGFuY2VfYnVmID0gVWJlckluc3RhbmNlQnVmZmVyOjpuZXcoVUJFUl9JTlNUQU5DRV9DT1VOVCwgd2dwdV9kZXZpY2UpOwoKICAgICAgICAvLyBsZXQgdHJhbnNmb3JtX2J1ZiA9IFRyYW5zZm9ybUJ1ZmZlckdwdTo6bmV3KHdncHUuZGV2aWNlKCkpOwoKICAgICAgICAvLyBsZXQgaWRfaW5zdGFuY2VfYnVmID0gR3B1QnVmZmVyOjpmcm9tX3NsaWNlKAogICAgICAgIC8vICAgICAmW1RmMTI6OmZyb21fZ2xvYmFsX3RyYW5zZm9ybV8zKCZHbG9iYWxUcmFuc2Zvcm0zOjppZGVudGl0eSgpKV0sCiAgICAgICAgLy8gICAgICJpZCBpbnN0IGJ1ZiIsCiAgICAgICAgLy8gICAgIHdncHUuZGV2aWNlKCksCiAgICAgICAgLy8gKTsKCiAgICAgICAgLy8gbGV0IGJ1ZmZlcnMgPSBHcHVCdWZmZXJTdG9yZTo6bmV3KCk7CgogICAgICAgIC8vIGxldCBiaW5kX2dyb3VwX3RleHR1cmVfbGF5b3V0ID0gQmluZEdyb3VwTGF5b3V0QnVpbGRlcjo6bmV3KCkKICAgICAgICAvLyAgICAgLndpdGhfbGFiZWwoImRlZmF1bHQgdGV4dHVyZSBiaW5kIGdyb3VwIGxheW91dCIpCiAgICAgICAgLy8gICAgIC53aXRoX2JpbmRpbmcod2dwdTo6QmluZGluZ1R5cGU6OlNhbXBsZXIoCiAgICAgICAgLy8gICAgICAgICB3Z3B1OjpTYW1wbGVyQmluZGluZ1R5cGU6OkZpbHRlcmluZywKICAgICAgICAvLyAgICAgKSkKICAgICAgICAvLyAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6VGV4dHVyZSB7CiAgICAgICAgLy8gICAgICAgICBzYW1wbGVfdHlwZTogd2dwdTo6VGV4dHVyZVNhbXBsZVR5cGU6OkZsb2F0IHsgZmlsdGVyYWJsZTogdHJ1ZSB9LAogICAgICAgIC8vICAgICAgICAgdmlld19kaW1lbnNpb246IHdncHU6OlRleHR1cmVWaWV3RGltZW5zaW9uOjpEMiwKICAgICAgICAvLyAgICAgICAgIG11bHRpc2FtcGxlZDogZmFsc2UsCiAgICAgICAgLy8gICAgIH0pCiAgICAgICAgLy8gICAgIC5maW5hbGl6ZSh3Z3B1LmRldmljZSgpKTsKCiAgICAgICAgbGV0IGNhbWVyYV9iZ2wgPSBCaW5kR3JvdXBMYXlvdXRCdWlsZGVyOjpuZXcoKQogICAgICAgICAgICAud2l0aF9sYWJlbCgiZGVmYXVsdCBjYW1lcmEgdW5pZm9ybSBsYXlvdXQiKQogICAgICAgICAgICAud2l0aF9iaW5kaW5nKENhbWVyYVVuaWZvcm1Hcm91cDo6YmluZGluZ190eXBlKCkpCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCBjYW1lcmFfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcoY2FtZXJhX2JnbCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoImRlZmF1bHQgY2FtZXJhIHVuaWZvcm0iKQogICAgICAgICAgICAud2l0aF9iaW5kaW5nKGNhbWVyYV9idWYucmVzKCkuYXNfZW50aXJlX2JpbmRpbmcoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgbGV0IGluc3RhbmNlX2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIGluc3RhbmNlIGJ1ZmZlciBsYXlvdXQiKQogICAgICAgICAgICAud2l0aF9iaW5kaW5nKHdncHU6OkJpbmRpbmdUeXBlOjpCdWZmZXIgewogICAgICAgICAgICAgICAgdHk6IHdncHU6OkJ1ZmZlckJpbmRpbmdUeXBlOjpTdG9yYWdlIHsgcmVhZF9vbmx5OiB0cnVlIH0sCiAgICAgICAgICAgICAgICBoYXNfZHluYW1pY19vZmZzZXQ6IGZhbHNlLAogICAgICAgICAgICAgICAgbWluX2JpbmRpbmdfc2l6ZTogTm9uZSwKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgbGV0IGluc3RhbmNlX2JnID0gQmluZEdyb3VwQnVpbGRlcjo6bmV3KGluc3RhbmNlX2JnbCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgaW5zdGFuY2UgYnVmZmVyIikKICAgICAgICAgICAgLndpdGhfYmluZGluZyhpbnN0YW5jZV9idWYuZGV2aWNlLmFzX3dncHVfYmluZGluZ19yZXNvdXJjZSgpKQogICAgICAgICAgICAuZmluYWxpemUod2dwdV9kZXZpY2UpOwoKICAgICAgICBsZXQgdmVydGV4X2JnbCA9IEJpbmRHcm91cExheW91dEJ1aWxkZXI6Om5ldygpCiAgICAgICAgICAgIC53aXRoX2xhYmVsKCJ1YmVyIHZlcnRleCBidWZmZXIgbGF5b3V0IikKICAgICAgICAgICAgLndpdGhfYmluZGluZyh3Z3B1OjpCaW5kaW5nVHlwZTo6QnVmZmVyIHsKICAgICAgICAgICAgICAgIHR5OiB3Z3B1OjpCdWZmZXJCaW5kaW5nVHlwZTo6U3RvcmFnZSB7IHJlYWRfb25seTogdHJ1ZSB9LAogICAgICAgICAgICAgICAgaGFzX2R5bmFtaWNfb2Zmc2V0OiBmYWxzZSwKICAgICAgICAgICAgICAgIG1pbl9iaW5kaW5nX3NpemU6IE5vbmUsCiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5maW5hbGl6ZSh3Z3B1X2RldmljZSk7CgogICAgICAgIGxldCB2ZXJ0ZXhfYmcgPSBCaW5kR3JvdXBCdWlsZGVyOjpuZXcodmVydGV4X2JnbCkKICAgICAgICAgICAgLndpdGhfbGFiZWwoInViZXIgdmVydGV4IGJ1ZmZlciIpCiAgICAgICAgICAgIC53aXRoX2JpbmRpbmcoaGFuZGxlcy52ZXJ0ZXhfYnVmLmxvY2soKS5hc193Z3B1X2JpbmRpbmdfcmVzb3VyY2UoKSkKICAgICAgICAgICAgLmZpbmFsaXplKHdncHVfZGV2aWNlKTsKCiAgICAgICAgLy8gbGV0IHBhcnRpY2xlX3JlbmRlcl9waXBlbGluZSA9IFNpbXBsZVJlbmRlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgLy8gICAgICJQYXJ0aWNsZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvcGFydGljbGUud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVTdHJpcCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgLy8gICAgIFVWZXJ0ZXg6OmxheW91dCgzKSwKICAgICAgICAvLyAgICAgU29tZShQYXJ0aWNsZUluc3RhbmNlOjpsYXlvdXQoMCkpLAogICAgICAgIC8vICAgICAmWyZjYW1lcmFfYmddLAogICAgICAgIC8vICAgICB3Z3B1X2RldmljZSwKICAgICAgICAvLyAgICAgQ09MT1JfRk9STUFULAogICAgICAgIC8vICAgICBERVBUSF9TVEVOQ0lMX0ZPUk1BVCwKICAgICAgICAvLyApOwoKICAgICAgICAvLyBsZXQgbGluZV9yZW5kZXJfcGlwZWxpbmUgPSBTaW1wbGVSZW5kZXJQaXBlbGluZTo6bmV3KAogICAgICAgIC8vICAgICAiTGluZSBSZW5kZXIgUGlwZWxpbmUiLAogICAgICAgIC8vICAgICBpbmNsdWRlX3N0ciEoIi4uLy4uL3NoYWRlcnMvbGluZS53Z3NsIiksCiAgICAgICAgLy8gICAgIHdncHU6OlByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lTGlzdCwKICAgICAgICAvLyAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkxpbmUsCiAgICAgICAgLy8gICAgIFBjVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgyKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIC8vIGxldCBvcGFxdWVfcmVuZGVyX3BpcGVsaW5lID0gU2ltcGxlUmVuZGVyUGlwZWxpbmU6Om5ldygKICAgICAgICAvLyAgICAgIk1lc2ggUmVuZGVyIFBpcGVsaW5lIiwKICAgICAgICAvLyAgICAgaW5jbHVkZV9zdHIhKCIuLi8uLi9zaGFkZXJzL21lc2gud2dzbCIpLAogICAgICAgIC8vICAgICB3Z3B1OjpQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVMaXN0LAogICAgICAgIC8vICAgICB3Z3B1OjpQb2x5Z29uTW9kZTo6RmlsbCwKICAgICAgICAvLyAgICAgUGNuVmVydGV4OjpsYXlvdXQoMCksCiAgICAgICAgLy8gICAgIFNvbWUoVHJhbnNmb3JtSW5kZXg6OmxheW91dCgzKSksCiAgICAgICAgLy8gICAgICZbJmNhbWVyYV9iZywgJnRyYW5zZm9ybV9iZ10sCiAgICAgICAgLy8gICAgIHdncHVfZGV2aWNlLAogICAgICAgIC8vICAgICBDT0xPUl9GT1JNQVQsCiAgICAgICAgLy8gICAgIERFUFRIX1NURU5DSUxfRk9STUFULAogICAgICAgIC8vICk7CgogICAgICAgIGxldCB1YmVyX3BpcGVsaW5lID0gVWJlclBpcGVsaW5lOjpuZXcoCiAgICAgICAgICAgIGluY2x1ZGVfc3RyISgiLi4vLi4vc2hhZGVycy91YmVyLndnc2wiKSwKICAgICAgICAgICAgd2dwdTo6UHJpbWl0aXZlVG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCwKICAgICAgICAgICAgd2dwdTo6UG9seWdvbk1vZGU6OkZpbGwsCiAgICAgICAgICAgICZbJmNhbWVyYV9iZywgJmluc3RhbmNlX2JnLCAmdmVydGV4X2JnXSwKICAgICAgICAgICAgd2dwdV9kZXZpY2UsCiAgICAgICAgICAgIENPTE9SX0ZPUk1BVCwKICAgICAgICAgICAgREVQVEhfU1RFTkNJTF9GT1JNQVQsCiAgICAgICAgKTsKCiAgICAgICAgUmVuZGVyZXIgewogICAgICAgICAgICBoYW5kbGVzLAogICAgICAgICAgICBjYW1lcmFfYnVmLAogICAgICAgICAgICBjYW1lcmFfYmcsCiAgICAgICAgICAgIGluc3RhbmNlX2J1ZjogUmVmQ2VsbDo6bmV3KGluc3RhbmNlX2J1ZiksCiAgICAgICAgICAgIGluc3RhbmNlX2JnLAogICAgICAgICAgICB2ZXJ0ZXhfYmcsCiAgICAgICAgICAgIHViZXJfcGlwZWxpbmUsCiAgICAgICAgfQogICAgfQoKICAgIC8vIHB1YiBmbiBwcm9jZXNzX2J1ZmZlcl9jb21tYW5kcygmbXV0IHNlbGYsIGNtZHM6IGltcGwgSW50b0l0ZXJhdG9yPEl0ZW0gPSBCdWZmZXJDb21tYW5kPikgewogICAgLy8gICAgIGZvciBjbWQgaW4gY21kcy5pbnRvX2l0ZXIoKSB7CiAgICAvLyAgICAgICAgIHNlbGYuYnVmZmVycy5vbl9jb21tYW5kKGNtZCk7CiAgICAvLyAgICAgfQogICAgLy8gfQoKICAgIHB1YiBmbiByZW5kZXJfd2luZG93KCZzZWxmLCB3aW46ICZtdXQgV2luZG93LCBmcmFtZTogJkZyYW1lKSAtPiBleXJlOjpSZXN1bHQ8KCk+IHsKICAgICAgICBzZWxmLnJlbmRlcmVyX3JwYXNzKHdpbiwgZnJhbWUpPzsKICAgICAgICBPaygoKSkKICAgIH0KCiAgICBmbiByZW5kZXJlcl9ycGFzcygmc2VsZiwgd2luOiAmbXV0IFdpbmRvdywgZnJhbWU6ICZGcmFtZSkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICAgICAgbGV0IHdncHUgPSAmKnNlbGYuaGFuZGxlcy53Z3B1OwoKICAgICAgICBzZWxmLmNhbWVyYV9idWYKICAgICAgICAgICAgLndyaXRlX2J1ZmZlcigmZnJhbWUuY2FtZXJhLCB3aW4uc2l6ZS5zY3JlZW5fc2l6ZSwgd2dwdS5xdWV1ZSgpKTsKCiAgICAgICAgbGV0IG11dCBlbmNvZGVyID0gd2dwdS5kZXZpY2UoKS5jcmVhdGVfY29tbWFuZF9lbmNvZGVyKCZEZWZhdWx0OjpkZWZhdWx0KCkpOwoKICAgICAgICBsZXQgY29sb3JfdGV4X3ZpZXcgPSB3aW4ud2luLnByZXBhcmVfcHJlc2VudCgpPzsKCiAgICAgICAgc2VsZi5lbmNvZGVfcmVuZGVyX3Bhc3MoCiAgICAgICAgICAgICZtdXQgZW5jb2RlciwKICAgICAgICAgICAgJmNvbG9yX3RleF92aWV3LAogICAgICAgICAgICB3aW4ucmVzLmRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudF92aWV3KCksCiAgICAgICAgICAgIGZyYW1lLAogICAgICAgICk7CgogICAgICAgIC8vIHJlbmRlciBFR1VJCiAgICAgICAgaWYgbGV0IFNvbWUoZWd1aXIpID0gd2luLmd1aV9yZXMuYXNfbXV0KCkgewogICAgICAgICAgICBlZ3Vpci5iZWdpbl9mcmFtZSgmd2luLndpbik7CgogICAgICAgICAgICBpZiBsZXQgU29tZShndWkpID0gd2luLmd1aV9kZWYuYXNfcmVmKCkgewogICAgICAgICAgICAgICAgZ3VpLjAuc2hvdyhlZ3Vpci5jb250ZXh0KCkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGVndWkuc2hvdyhlZ3Vpci5jb250ZXh0KCksIG1vZGVsKTsKICAgICAgICAgICAgLy8gZWd1aXIuZGVtbygpOwoKICAgICAgICAgICAgbGV0IHNjcmVlbl9kZXNjID0gZWd1aV93Z3B1OjpTY3JlZW5EZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHNpemVfaW5fcGl4ZWxzOiB3aW4ud2luLndpZHRoX2hlaWdodF91MzIoKSwKICAgICAgICAgICAgICAgIHBpeGVsc19wZXJfcG9pbnQ6IHdpbi53aW4uc2NhbGVfZmFjdG9yKCkgYXMgZjMyICogZWd1aXIuc2NhbGVfZmFjdG9yKCksCiAgICAgICAgICAgIH07CgogICAgICAgICAgICBlZ3Vpci5lbmRfZnJhbWVfYW5kX2RyYXcoCiAgICAgICAgICAgICAgICB3Z3B1LmRldmljZSgpLAogICAgICAgICAgICAgICAgd2dwdS5xdWV1ZSgpLAogICAgICAgICAgICAgICAgJm11dCBlbmNvZGVyLAogICAgICAgICAgICAgICAgJndpbi53aW4sCiAgICAgICAgICAgICAgICAmY29sb3JfdGV4X3ZpZXcsCiAgICAgICAgICAgICAgICBzY3JlZW5fZGVzYywKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIHdncHUucXVldWUuc3VibWl0KFtlbmNvZGVyLmZpbmlzaCgpXSk7CgogICAgICAgIHdpbi53aW4uZmluYWxpemVfcHJlc2VudCgpPzsKCiAgICAgICAgLy8gRklYTUUgd2Ugc2hvdWxkIGFsd2F5cyByZXF1ZXN0IGEgcmVkcmF3IG90aGVyd2lzZSByZW5kZXIgd2lsbCBuZXZlciBiZSBydW4gYWdhaW4KICAgICAgICB3aW4ud2luLnJlcXVlc3RfcmVkcmF3KCk7CgogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIGVuY29kZV9yZW5kZXJfcGFzcygKICAgICAgICAmc2VsZiwKICAgICAgICBlbmNvZGVyOiAmbXV0IHdncHU6OkNvbW1hbmRFbmNvZGVyLAogICAgICAgIGNvbG9yX3RleF92aWV3OiAmd2dwdTo6VGV4dHVyZVZpZXcsCiAgICAgICAgZGVwdGhfc3RlbmNpbF90ZXhfdmlldzogJndncHU6OlRleHR1cmVWaWV3LAogICAgICAgIGZyYW1lOiAmRnJhbWUsCiAgICApIHsKICAgICAgICBsZXQgbXV0IHJwYXNzID0gZW5jb2Rlci5iZWdpbl9yZW5kZXJfcGFzcygmd2dwdTo6UmVuZGVyUGFzc0Rlc2NyaXB0b3IgewogICAgICAgICAgICBsYWJlbDogTm9uZSwKICAgICAgICAgICAgY29sb3JfYXR0YWNobWVudHM6ICZbU29tZSh3Z3B1OjpSZW5kZXJQYXNzQ29sb3JBdHRhY2htZW50IHsKICAgICAgICAgICAgICAgIHZpZXc6IGNvbG9yX3RleF92aWV3LAogICAgICAgICAgICAgICAgcmVzb2x2ZV90YXJnZXQ6IE5vbmUsCiAgICAgICAgICAgICAgICBvcHM6IHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIod2dwdTo6Q29sb3IgewogICAgICAgICAgICAgICAgICAgICAgICByOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBnOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBiOiAwLjA2LAogICAgICAgICAgICAgICAgICAgICAgICBhOiAxLiwKICAgICAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgICAgICBzdG9yZTogd2dwdTo6U3RvcmVPcDo6U3RvcmUsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KV0sCiAgICAgICAgICAgIGRlcHRoX3N0ZW5jaWxfYXR0YWNobWVudDogU29tZSh3Z3B1OjpSZW5kZXJQYXNzRGVwdGhTdGVuY2lsQXR0YWNobWVudCB7CiAgICAgICAgICAgICAgICB2aWV3OiBkZXB0aF9zdGVuY2lsX3RleF92aWV3LAogICAgICAgICAgICAgICAgZGVwdGhfb3BzOiBTb21lKHdncHU6Ok9wZXJhdGlvbnMgewogICAgICAgICAgICAgICAgICAgIGxvYWQ6IHdncHU6OkxvYWRPcDo6Q2xlYXIoMS4wKSwgLy8gQ2xlYXIgdG8gZmFyIHBsYW5lCiAgICAgICAgICAgICAgICAgICAgc3RvcmU6IHdncHU6OlN0b3JlT3A6OlN0b3JlLAogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzdGVuY2lsX29wczogTm9uZSwKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIHRpbWVzdGFtcF93cml0ZXM6IE5vbmUsCiAgICAgICAgICAgIG9jY2x1c2lvbl9xdWVyeV9zZXQ6IE5vbmUsCiAgICAgICAgfSk7CgogICAgICAgIC8vIG9wYXF1ZQoKICAgICAgICBycGFzcy5zZXRfcGlwZWxpbmUoc2VsZi51YmVyX3BpcGVsaW5lLnJlcygpKTsKICAgICAgICBycGFzcy5zZXRfYmluZF9ncm91cCgwLCBzZWxmLmNhbWVyYV9iZy5yZXMoKSwgJltdKTsKICAgICAgICBycGFzcy5zZXRfYmluZF9ncm91cCgxLCBzZWxmLmluc3RhbmNlX2JnLnJlcygpLCAmW10pOwogICAgICAgIHJwYXNzLnNldF9iaW5kX2dyb3VwKDIsIHNlbGYudmVydGV4X2JnLnJlcygpLCAmW10pOwogICAgICAgIHJwYXNzLnNldF9pbmRleF9idWZmZXIoCiAgICAgICAgICAgIHNlbGYuaGFuZGxlcy5pbmRleF9idWYubG9jaygpLmRldmljZV9idWZmZXJfc2xpY2UoKSwKICAgICAgICAgICAgd2dwdTo6SW5kZXhGb3JtYXQ6OlVpbnQzMiwKICAgICAgICApOwoKICAgICAgICAvLyBDb2xsZWN0IGluc3RhbmNlcyBwZXIgbWVzaAogICAgICAgIGxldCBtdXQgaW5zdF9zZXRzOiBCVHJlZU1hcDxNZXNoUHJveHlJZCwgVmVjPFViZXJJbnN0YW5jZVBvZD4+ID0gQlRyZWVNYXA6Om5ldygpOwogICAgICAgIGZvciBpdGVtIGluIGZyYW1lLm9wYXF1ZS5pdGVtcy5pdGVyKCkgewogICAgICAgICAgICBpbnN0X3NldHMKICAgICAgICAgICAgICAgIC5lbnRyeShpdGVtLm1lc2gpCiAgICAgICAgICAgICAgICAub3JfZGVmYXVsdCgpCiAgICAgICAgICAgICAgICAucHVzaChVYmVySW5zdGFuY2VQb2QgewogICAgICAgICAgICAgICAgICAgIHRmOiBpdGVtLnRmLmNsb25lKCksCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgbG9nOjp0cmFjZSEoCiAgICAgICAgICAgICJvcHFhcXVlOiB7fSBpbnN0YW5jZXMgb3ZlciB7fSBtZXNoZXMiLAogICAgICAgICAgICBmcmFtZS5vcGFxdWUuaXRlbXMubGVuKCksCiAgICAgICAgICAgIGluc3Rfc2V0cy5sZW4oKQogICAgICAgICk7CgogICAgICAgIGxldCBtZXNoX3Byb3h5X3N0b3JlID0gc2VsZi5oYW5kbGVzLm1lc2hfcHJveHlfc3RvcmUubG9jaygpOwogICAgICAgIGxldCB1YmVyX2luZGV4X2J1ZiA9IHNlbGYuaGFuZGxlcy5pbmRleF9idWYubG9jaygpOwogICAgICAgIGxldCB1YmVyX3ZlcnRleF9idWYgPSBzZWxmLmhhbmRsZXMudmVydGV4X2J1Zi5sb2NrKCk7CgogICAgICAgIGxldCBtdXQgaW5zdGFuY2VfYnVmID0gc2VsZi5pbnN0YW5jZV9idWYuYm9ycm93X211dCgpOwogICAgICAgIGluc3RhbmNlX2J1Zi5zdGFnZS5jbGVhcigpOwoKICAgICAgICBsZXQgbXV0IGluc3RfaWR4X3N0YWdlID0gVmVjOjo8d2dwdTo6dXRpbDo6RHJhd0luZGV4ZWRJbmRpcmVjdEFyZ3M+OjpuZXcoKTsKCiAgICAgICAgZm9yIChtZXNoX2lkLCBpbnN0YW5jZXMpIGluIGluc3Rfc2V0cyB7CiAgICAgICAgICAgIC8vIEZpbmQgbWVzaCBpbiBpbmRleCBidWZmZXIKICAgICAgICAgICAgbGV0IFNvbWUobWVzaCkgPSBtZXNoX3Byb3h5X3N0b3JlLmdldChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwogICAgICAgICAgICBsZXQgaW5kZXhfY291bnQgPSBtZXNoLmluZGV4X2NvdW50KCk7CiAgICAgICAgICAgIGxldCBTb21lKGZpcnN0X2luZGV4KSA9IHViZXJfaW5kZXhfYnVmLmxvY2F0ZV91bml0KG1lc2hfaWQpIGVsc2UgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIGluZGV4X2NvdW50ID09IDAgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEZpbmQgbWVzaCBpbiB2ZXJ0ZXggYnVmZmVyCiAgICAgICAgICAgIGxldCBTb21lKGJhc2VfdmVydGV4KSA9IHViZXJfdmVydGV4X2J1Zi5sb2NhdGVfdW5pdChtZXNoX2lkKSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgLy8gQWRkIGluc3RhbmNlcyB0byBpbnN0YW5jZSBidWZmZXIKICAgICAgICAgICAgbGV0IGZpcnN0X2luc3RhbmNlID0gaW5zdGFuY2VfYnVmLnN0YWdlLmxlbigpOwogICAgICAgICAgICBsZXQgaW5zdGFuY2VfY291bnQgPSBpbnN0YW5jZXMubGVuKCk7CiAgICAgICAgICAgIGlmIGluc3RhbmNlX2NvdW50ID09IDAgewogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaW5zdGFuY2VfYnVmLnN0YWdlLmV4dGVuZChpbnN0YW5jZXMpOwoKICAgICAgICAgICAgbGV0IGFyZ3MgPSB3Z3B1Ojp1dGlsOjpEcmF3SW5kZXhlZEluZGlyZWN0QXJncyB7CiAgICAgICAgICAgICAgICBmaXJzdF9pbmRleCwKICAgICAgICAgICAgICAgIGluZGV4X2NvdW50OiBpbmRleF9jb3VudCBhcyB1MzIsCiAgICAgICAgICAgICAgICBmaXJzdF9pbnN0YW5jZTogZmlyc3RfaW5zdGFuY2UgYXMgdTMyLAogICAgICAgICAgICAgICAgaW5zdGFuY2VfY291bnQ6IGluc3RhbmNlX2NvdW50IGFzIHUzMiwKICAgICAgICAgICAgICAgIGJhc2VfdmVydGV4OiBiYXNlX3ZlcnRleCBhcyBpMzIsCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGluc3RfaWR4X3N0YWdlLnB1c2goYXJncyk7CiAgICAgICAgfQoKICAgICAgICBkZWJ1Z19wcmludF9pbnN0YW5jZV9idWZmZXIoaW5zdGFuY2VfYnVmLnN0YWdlLmFzX3NsaWNlKCkpOwoKICAgICAgICBpbnN0YW5jZV9idWYudXBsb2FkKCZzZWxmLmhhbmRsZXMud2dwdS5xdWV1ZSk7CgogICAgICAgIGlmIGluc3RfaWR4X3N0YWdlLmxlbigpID4gMCB7CiAgICAgICAgICAgIC8vIGRlYnVnX3ByaW50X2RyYXdfaW5kZXhlZF9pbmRpcmVjdF9zdGFnZSgmaW5zdF9pZHhfc3RhZ2UpOwoKICAgICAgICAgICAgbGV0IGluc3RfaWR4X2J1ZmZlciA9CiAgICAgICAgICAgICAgICBzZWxmLmhhbmRsZXMKICAgICAgICAgICAgICAgICAgICAud2dwdQogICAgICAgICAgICAgICAgICAgIC5kZXZpY2UoKQogICAgICAgICAgICAgICAgICAgIC5jcmVhdGVfYnVmZmVyX2luaXQoJndncHU6OnV0aWw6OkJ1ZmZlckluaXREZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IFNvbWUoIkRyYXdJbmRleGVkSW5kaXJlY3QgQnVmZmVyIiksCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBieXRlbXVjazo6Y2FzdF9zbGljZSgmaW5zdF9pZHhfc3RhZ2UpLAogICAgICAgICAgICAgICAgICAgICAgICB1c2FnZTogd2dwdTo6QnVmZmVyVXNhZ2VzOjpJTkRJUkVDVCB8IHdncHU6OkJ1ZmZlclVzYWdlczo6Q09QWV9EU1QsCiAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBycGFzcy5tdWx0aV9kcmF3X2luZGV4ZWRfaW5kaXJlY3QoJmluc3RfaWR4X2J1ZmZlciwgMCwgaW5zdF9pZHhfc3RhZ2UubGVuKCkgYXMgdTMyKTsKICAgICAgICB9CgogICAgICAgIC8vIC8vIGxpbmVzCiAgICAgICAgLy8gbG9nOjp0cmFjZSEoImxpbmUgcGlwZWxpbmU6IHt9IGl0ZW1zIiwgZnJhbWUubGluZXMuaXRlbXMubGVuKCkpOwogICAgICAgIC8vIHJwYXNzLnNldF9waXBlbGluZShzZWxmLmxpbmVfcmVuZGVyX3BpcGVsaW5lLnJlcygpKTsKICAgICAgICAvLyBycGFzcy5zZXRfYmluZF9ncm91cCgwLCBzZWxmLmNhbWVyYV9iZy5yZXMoKSwgJltdKTsKICAgICAgICAvLyBycGFzcy5zZXRfYmluZF9ncm91cCgxLCBzZWxmLnRyYW5zZm9ybV9iZy5yZXMoKSwgJltdKTsKICAgICAgICAvLyBmb3IgaXRlbSBpbiBmcmFtZS5saW5lcy5pdGVtcy5pdGVyKCkgewogICAgICAgIC8vICAgICBsZXQgU29tZSh2YnVmKSA9IHNlbGYuYnVmZmVycy5nZXQoaXRlbS52ZXJ0aWNlcykgZWxzZSB7CiAgICAgICAgLy8gICAgICAgICBjb250aW51ZTsKICAgICAgICAvLyAgICAgfTsKCiAgICAgICAgLy8gICAgIGxldCBpYnVmID0gbWF0Y2ggaXRlbS5pbnN0YW5jZXMgewogICAgICAgIC8vICAgICAgICAgU29tZShpZCkgPT4gbWF0Y2ggc2VsZi5idWZmZXJzLmdldChpZCkgewogICAgICAgIC8vICAgICAgICAgICAgIFNvbWUoYnVmKSA9PiBidWYsCiAgICAgICAgLy8gICAgICAgICAgICAgTm9uZSA9PiBjb250aW51ZSwKICAgICAgICAvLyAgICAgICAgIH0sCiAgICAgICAgLy8gICAgICAgICBOb25lID0+ICZzZWxmLmlkX2luc3RhbmNlX2J1ZiwKICAgICAgICAvLyAgICAgfTsKCiAgICAgICAgLy8gICAgIGlmIHZidWYuZWxlbWVudF9jb3VudCgpID09IDAgfHwgaWJ1Zi5lbGVtZW50X2NvdW50KCkgPT0gMCB7CiAgICAgICAgLy8gICAgICAgICBjb250aW51ZTsKICAgICAgICAvLyAgICAgfQoKICAgICAgICAvLyAgICAgcnBhc3Muc2V0X3ZlcnRleF9idWZmZXIoMCwgdmJ1Zi5idWZmZXIoKS5zbGljZSguLikpOwogICAgICAgIC8vICAgICBycGFzcy5zZXRfdmVydGV4X2J1ZmZlcigxLCBpYnVmLmJ1ZmZlcigpLnNsaWNlKC4uKSk7CgogICAgICAgIC8vICAgICBycGFzcy5kcmF3KAogICAgICAgIC8vICAgICAgICAgMC4udmJ1Zi5lbGVtZW50X2NvdW50KCkgYXMgdTMyLAogICAgICAgIC8vICAgICAgICAgMC4uaWJ1Zi5lbGVtZW50X2NvdW50KCkgYXMgdTMyLAogICAgICAgIC8vICAgICApOwogICAgICAgIC8vIH0KCiAgICAgICAgLy8gLy8gcGFydGljbGVzCiAgICAgICAgLy8gbG9nOjp0cmFjZSEoInBhcnRpY2xlIHBpcGVsaW5lOiB7fSBpdGVtcyIsIGZyYW1lLnBhcnRpY2xlcy5pdGVtcy5sZW4oKSk7CiAgICAgICAgLy8gcnBhc3Muc2V0X3BpcGVsaW5lKHNlbGYucGFydGljbGVfcmVuZGVyX3BpcGVsaW5lLnJlcygpKTsKICAgICAgICAvLyBycGFzcy5zZXRfYmluZF9ncm91cCgwLCBzZWxmLmNhbWVyYV9iZy5yZXMoKSwgJltdKTsKICAgICAgICAvLyBmb3IgaXRlbSBpbiBmcmFtZS5wYXJ0aWNsZXMuaXRlbXMuaXRlcigpIHsKICAgICAgICAvLyAgICAgbGV0IFNvbWUodmJ1ZikgPSBzZWxmLmJ1ZmZlcnMuZ2V0KGl0ZW0udmVydGljZXMpIGVsc2UgewogICAgICAgIC8vICAgICAgICAgY29udGludWU7CiAgICAgICAgLy8gICAgIH07CgogICAgICAgIC8vICAgICBsZXQgaWJ1ZiA9IG1hdGNoIGl0ZW0uaW5zdGFuY2VzIHsKICAgICAgICAvLyAgICAgICAgIFNvbWUoaWQpID0+IG1hdGNoIHNlbGYuYnVmZmVycy5nZXQoaWQpIHsKICAgICAgICAvLyAgICAgICAgICAgICBTb21lKGJ1ZikgPT4gYnVmLAogICAgICAgIC8vICAgICAgICAgICAgIE5vbmUgPT4gY29udGludWUsCiAgICAgICAgLy8gICAgICAgICB9LAogICAgICAgIC8vICAgICAgICAgTm9uZSA9PiBjb250aW51ZSwKICAgICAgICAvLyAgICAgfTsKCiAgICAgICAgLy8gICAgIGlmIHZidWYuZWxlbWVudF9jb3VudCgpID09IDAgfHwgaWJ1Zi5lbGVtZW50X2NvdW50KCkgPT0gMCB7CiAgICAgICAgLy8gICAgICAgICBjb250aW51ZTsKICAgICAgICAvLyAgICAgfQoKICAgICAgICAvLyAgICAgcnBhc3Muc2V0X3ZlcnRleF9idWZmZXIoMCwgdmJ1Zi5idWZmZXIoKS5zbGljZSguLikpOwogICAgICAgIC8vICAgICBycGFzcy5zZXRfdmVydGV4X2J1ZmZlcigxLCBpYnVmLmJ1ZmZlcigpLnNsaWNlKC4uKSk7CgogICAgICAgIC8vICAgICBycGFzcy5kcmF3KAogICAgICAgIC8vICAgICAgICAgMC4udmJ1Zi5lbGVtZW50X2NvdW50KCkgYXMgdTMyLAogICAgICAgIC8vICAgICAgICAgMC4uaWJ1Zi5lbGVtZW50X2NvdW50KCkgYXMgdTMyLAogICAgICAgIC8vICAgICApOwogICAgICAgIC8vIH0KCiAgICAgICAgLy8gRW5kIHRoZSByZW5kZXJwYXNzLgogICAgICAgIGRyb3AocnBhc3MpOwogICAgfQp9CgpmbiBkZWJ1Z19wcmludF9pbnN0YW5jZV9idWZmZXIoc3RhZ2U6ICZbVWJlckluc3RhbmNlUG9kXSkgewogICAgbG9nOjp0cmFjZSEoImluc3RhbmNlIGJ1ZmZlciB3aXRoIHt9IGluc3RhbmNlczoiLCBzdGFnZS5sZW4oKSk7CiAgICBmb3IgKGksIGluc3RhbmNlKSBpbiBzdGFnZS5pdGVyKCkuZW51bWVyYXRlKCkgewogICAgICAgIGxvZzo6dHJhY2UhKCJbe2k6MDN9XTogdGY6IHs6P30iLCBpbnN0YW5jZS50Zik7CiAgICB9Cn0KCmZuIGRlYnVnX3ByaW50X2RyYXdfaW5kZXhlZF9pbmRpcmVjdF9zdGFnZShzdGFnZTogJlt3Z3B1Ojp1dGlsOjpEcmF3SW5kZXhlZEluZGlyZWN0QXJnc10pIHsKICAgIGxvZzo6dHJhY2UhKCJtdWx0aV9kcmF3X2luZGV4ZWRfaW5kaXJlY3Qgd2l0aCB7fSBjb21tYW5kczoiLCBzdGFnZS5sZW4oKSk7CiAgICBmb3IgKGksIGFyZ3MpIGluIHN0YWdlLml0ZXIoKS5lbnVtZXJhdGUoKSB7CiAgICAgICAgLy8gbGV0IGFyZ3NfYnl0ZXMgPSBieXRlbXVjazo6Ynl0ZXNfb2YoYXJncyk7CiAgICAgICAgLy8gbG9nOjp0cmFjZSEoIntpOjAzfTogYnl0ZXM6IHs6P30iLCBhcmdzX2J5dGVzKTsKICAgICAgICBsb2c6OnRyYWNlISgKICAgICAgICAgICAgIiAgW3tpOjAzfV06IGluZGljZXM6IHs6NX0uLns6NX0sIGJhc2VfdmVydGV4OiB7OjV9LCBpbnN0YW5jZXM6IHs6M30uLns6M30iLAogICAgICAgICAgICBhcmdzLmZpcnN0X2luZGV4LAogICAgICAgICAgICBhcmdzLmZpcnN0X2luZGV4ICsgYXJncy5pbmRleF9jb3VudCwKICAgICAgICAgICAgYXJncy5iYXNlX3ZlcnRleCwKICAgICAgICAgICAgYXJncy5maXJzdF9pbnN0YW5jZSwKICAgICAgICAgICAgYXJncy5maXJzdF9pbnN0YW5jZSArIGFyZ3MuaW5zdGFuY2VfY291bnQKICAgICAgICApOwogICAgfQp9CgAAAAAAAAAAiD4AAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAEgQAAAAAAAASBAAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "/I/Ikabur/candy/crates/candy/src/asset_library.rs",
			"settings":
			{
				"buffer_size": 14159,
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					9,
					1,
					"rust_fmt_format_buffer",
					null,
					"BQAAABEAAAAAAAAAEQAAAAAAAAAQAAAATWVzaEZpbHRlciwKICAgIBgAAAAAAAAAGAAAAAAAAAAAAAAAJAEAAAAAAAA0AQAAAAAAAAAAAABaAQAAAAAAAGYBAAAAAAAAAAAAAHwBAAAAAAAAfAEAAAAAAAAMAAAALCBiYWlsLCBleXJl",
					"AQAAAAAAAAABAAAAxAMAAAAAAADEAwAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACxNAAAdXNlIGNyYXRlOjp7CiAgICBidWY6OnsKICAgICAgICBBY2Nlc3NvciwgQnVmZmVyU291cmNlLCBCdWZmZXJTb3VyY2VJZCwgU2VnbWVudCwgU2hhcmVkQnVmZmVyU291cmNlU3RvcmUsCiAgICAgICAgVW5jb21wcmVzc2VkRmlsZUJ1ZmZlclNvdXJjZSwKICAgIH0sCiAgICBtZXNoOjp7CiAgICAgICAgQXR0cmlidXRlLCBBdHRyaWJ1dGVNYXAsIENvbXBvbmVudFNoYXBlLCBFbGVtZW50VHlwZSwgTWVzaFByb3h5LCBQcmltaXRpdmVUb3BvbG9neSwKICAgICAgICBTaGFyZWRNZXNoUHJveHlTdG9yZSwKICAgIH0sCiAgICBNZXNoRmlsdGVyLAp9Owp1c2UgZXhjZXNzOjpwcmVsdWRlOjoqOwp1c2UgZXlyZTo6e2JhaWwsIGV5cmUsIENvbnRleHQsIENvbnRleHRDb21wYXR9Owp1c2UgZ2xhbTo6VmVjMzsKdXNlIGdsdGY6OkdsdGY7CnVzZSBtYWdpX2dlbXM6Okl0ZXJVdGlsczsKdXNlIG1hZ2lfc2U6OlNPMzsKdXNlIHNjZW5lX3RyZWU6OntDaGlsZE9mLCBJbnN0YW5jZU9mLCBUcmFuc2Zvcm0zfTsKdXNlIHNpbXBsZWNzOjpwcmVsdWRlOjoqOwp1c2Ugc3RkOjp7CiAgICBjb2xsZWN0aW9uczo6SGFzaE1hcCwKICAgIG51bTo6Tm9uWmVyb1UzMiwKICAgIG9wczo6RGVyZWYsCiAgICBwYXRoOjp7UGF0aCwgUGF0aEJ1Zn0sCn07CgojW2Rlcml2ZShTaW5nbGV0b24pXQpwdWIgc3RydWN0IEFzc2V0TGlicmFyeSB7CiAgICBidWZmZXJfc291cmNlX3N0b3JlOiBTaGFyZWRCdWZmZXJTb3VyY2VTdG9yZSwKICAgIG1lc2hfcHJveHlfc3RvcmU6IFNoYXJlZE1lc2hQcm94eVN0b3JlLAogICAgYXNzZXRzOiBIYXNoTWFwPEFzc2V0VWlkLCBHbHRmQXNzZXQ+LAp9CgovLy8gQSB1bmlxdWUgaWRlbnRpZmllciB1c2VyLWRlZmluZWQgaWRlbnRpZmllciBmb3IgYW4gYXNzZXQgaW4gdGhlIGxpYnJhcnkuCiNbZGVyaXZlKERlYnVnLCBDbG9uZSwgUGFydGlhbEVxLCBFcSwgSGFzaCldCnB1YiBzdHJ1Y3QgQXNzZXRVaWQocHViIFN0cmluZyk7CgppbXBsIEFzc2V0VWlkIHsKICAgIHB1YiBmbiBmcm9tX3N0cihpZDogJnN0cikgLT4gU2VsZiB7CiAgICAgICAgU2VsZihpZC50b19zdHJpbmcoKSkKICAgIH0KfQoKc3RydWN0IEdsdGZBc3NldCB7CiAgICBkZXNjcmlwdG9yOiBHbHRmQXNzZXREZXNjcmlwdG9yLAogICAgcHJlZmFiX2VudGl0eTogRW50aXR5LAp9CgojW2Rlcml2ZShDbG9uZSwgQ29weSwgUGFydGlhbEVxLCBFcSwgSGFzaCldCnB1YiBzdHJ1Y3QgQXNzZXRJZChwdWIgRW50aXR5KTsKCmltcGwgRGVyZWYgZm9yIEFzc2V0SWQgewogICAgdHlwZSBUYXJnZXQgPSBFbnRpdHk7CgogICAgZm4gZGVyZWYoJnNlbGYpIC0+ICZTZWxmOjpUYXJnZXQgewogICAgICAgICZzZWxmLjAKICAgIH0KfQoKLy8vIExvYWRzIGEgR0xURiBub2RlIGFuZCBpdHMgY2hpbGRyZW4gaW50byB0aGUgc2NlbmUgZ3JhcGguIEVhY2ggbm9kZSBpcyByZW5kZXJlZCBieSBvbmUgR0xURgovLy8gIm1lc2giIHdoaWNoIGl0c2VsZiBjb25zaXN0cyBvZiBvbmUgb3IgbW9yZSBHTFRGICJwcmltaXRpdmVzIiB3aXRoIG1lc2ggZGF0YSBhbmQgbWF0ZXJpYWwuCi8vLyBUaGUgYXNzZXQgbG9hZGVyIGNyZWF0ZXMgb25lIGVudGl0eSBwZXIgcHJpbWl0aXZlLgojW2Rlcml2ZShDb21wb25lbnQsIERlYnVnLCBQYXJ0aWFsRXEsIEVxLCBIYXNoKV0KcHViIHN0cnVjdCBHbHRmQXNzZXREZXNjcmlwdG9yIHsKICAgIC8vLyBQYXRoIHRvIEdMVEYgZmlsZSAtIGN1cnJlbnRseSBvbmx5ICouZ2xiIGlzIHN1cHBvcnRlZAogICAgcHViIHBhdGg6IFBhdGhCdWYsCgogICAgLy8vIFNjZW5lIHRvIGxvYWQuIElmIE5vbmUsIHRoZSBkZWZhdWx0IHNjZW5lIHdpbGwgYmUgbG9hZGVkLgogICAgcHViIHNjZW5lOiBPcHRpb248U3RyaW5nPiwKCiAgICAvLy8gTmFtZSBvZiBHTFRGIG5vZGUgaW4gdGhlIHNjZW5lIHRvIGxvYWQuIElmIE5vbmUsIHRoZSBmdWxsIHNjZW5lIHdpbGwgYmUgbG9hZGVkLgogICAgcHViIG5vZGU6IE9wdGlvbjxTdHJpbmc+LAp9CgojW2Rlcml2ZShDb21wb25lbnQpXQpzdHJ1Y3QgQXNzZXRQcmVmYWI7CgojW2Rlcml2ZShEZWJ1ZywgdGhpc2Vycm9yOjpFcnJvcildCnB1YiBlbnVtIEFzc2V0TGlicmFyeUVycm9yIHsKICAgICNbZXJyb3IoIkZhaWxlZCB0byBsb2FkIEdMVEYgYXNzZXQiKV0KICAgIEZhaWxlZFRvTG9hZEdsdGYoQXNzZXRVaWQsIEdsdGZBc3NldERlc2NyaXB0b3IsIFN0cmluZyksCgogICAgI1tlcnJvcigiT3RoZXIgZXJyb3IiKV0KICAgIE90aGVyKEFzc2V0VWlkLCBTdHJpbmcpLAp9CgojW2Rlcml2ZShDb21wb25lbnQpXQpzdHJ1Y3QgQXNzZXRCdWZmZXIge30KCmltcGwgQXNzZXRMaWJyYXJ5IHsKICAgIHB1YiBmbiBuZXcoCiAgICAgICAgYnVmZmVyX3NvdXJjZV9zdG9yZTogU2hhcmVkQnVmZmVyU291cmNlU3RvcmUsCiAgICAgICAgbWVzaF9wcm94eV9zdG9yZTogU2hhcmVkTWVzaFByb3h5U3RvcmUsCiAgICApIC0+IFNlbGYgewogICAgICAgIEFzc2V0TGlicmFyeSB7CiAgICAgICAgICAgIGJ1ZmZlcl9zb3VyY2Vfc3RvcmUsCiAgICAgICAgICAgIG1lc2hfcHJveHlfc3RvcmUsCiAgICAgICAgICAgIGFzc2V0czogSGFzaE1hcDo6bmV3KCksCiAgICAgICAgfQogICAgfQoKICAgIHB1YiBmbiBsb2FkX2dsdGYoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIHVpZDogQXNzZXRVaWQsCiAgICAgICAgZGVzY3JpcHRvcjogR2x0ZkFzc2V0RGVzY3JpcHRvciwKICAgICAgICBjbWQ6ICZtdXQgQ29tbWFuZHMsCiAgICApIC0+IFJlc3VsdDwoKSwgQXNzZXRMaWJyYXJ5RXJyb3I+IHsKICAgICAgICBpZiBzZWxmLmFzc2V0cy5jb250YWluc19rZXkoJnVpZCkgewogICAgICAgICAgICByZXR1cm4gT2soKCkpOwogICAgICAgIH0KCiAgICAgICAgbGV0IHByZWZhYl9lbnRpdHkgPSBjbWQuc3Bhd24oQXNzZXRQcmVmYWIpLmlkKCk7CgogICAgICAgIG1hdGNoIHNlbGYuc3Bhd25fZ2x0Zl9ub2RlKHByZWZhYl9lbnRpdHksICZkZXNjcmlwdG9yLCBjbWQpIHsKICAgICAgICAgICAgT2soXykgPT4gewogICAgICAgICAgICAgICAgc2VsZi5hc3NldHMuaW5zZXJ0KAogICAgICAgICAgICAgICAgICAgIHVpZCwKICAgICAgICAgICAgICAgICAgICBHbHRmQXNzZXQgewogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLAogICAgICAgICAgICAgICAgICAgICAgICBwcmVmYWJfZW50aXR5LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgT2soKCkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRXJyKGVycikgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIEVycihBc3NldExpYnJhcnlFcnJvcjo6RmFpbGVkVG9Mb2FkR2x0ZigKICAgICAgICAgICAgICAgICAgICB1aWQsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvciwKICAgICAgICAgICAgICAgICAgICBlcnIudG9fc3RyaW5nKCksCiAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwdWIgZm4gaW5zdGFudGlhdGU8J2wsICdmLCAncSwgJ2M+KAogICAgICAgICYnbCBtdXQgc2VsZiwKICAgICAgICB1aWQ6IEFzc2V0VWlkLAogICAgICAgIGNtZDogJidjIG11dCBDb21tYW5kczwnZiwgJ3E+LAogICAgKSAtPiBleXJlOjpSZXN1bHQ8RW50aXR5Q29tbWFuZHM8J2YsICdxLCAnYz4+IHsKICAgICAgICBsZXQgYXNzZXQgPSBzZWxmCiAgICAgICAgICAgIC5hc3NldHMKICAgICAgICAgICAgLmdldCgmdWlkKQogICAgICAgICAgICAub2tfb3JfZWxzZSh8fCBleXJlISgidW5rbm93biBhc3NldDoge3VpZDo/fSIpKT87CiAgICAgICAgT2soY21kLnNwYXduKCgoSW5zdGFuY2VPZiwgYXNzZXQucHJlZmFiX2VudGl0eSksKSkpCiAgICB9CgogICAgZm4gc3Bhd25fZ2x0Zl9ub2RlKAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBlbnRpdHk6IEVudGl0eSwKICAgICAgICBkZXNjcmlwdG9yOiAmR2x0ZkFzc2V0RGVzY3JpcHRvciwKICAgICAgICBjbWQ6ICZtdXQgQ29tbWFuZHMsCiAgICApIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCBwYXRoID0gJmRlc2NyaXB0b3IucGF0aDsKCiAgICAgICAgbGV0IGdsdGYgPSBHbHRmOjpvcGVuKHBhdGgpLndpdGhfY29udGV4dCh8fCBmb3JtYXQhKCJlcnJvciBsb2FkaW5nIGZpbGU6IHtwYXRoOj99IikpPzsKCiAgICAgICAgLy8gZmluZCBzY2VuZQogICAgICAgIGxldCBzY2VuZSA9IG1hdGNoIGRlc2NyaXB0b3Iuc2NlbmUuYXNfcmVmKCkgewogICAgICAgICAgICBTb21lKHNjZW5lX25hbWUpID0+IGdsdGYKICAgICAgICAgICAgICAgIC5zY2VuZXMoKQogICAgICAgICAgICAgICAgLmZpbmQofHNjZW5lfCBzY2VuZS5uYW1lKCkgPT0gU29tZSgmc2NlbmVfbmFtZSkpCiAgICAgICAgICAgICAgICAud2l0aF9jb250ZXh0KHx8IHsKICAgICAgICAgICAgICAgICAgICBsZXQgc2NlbmVzID0gZ2x0Zi5zY2VuZXMoKS5maWx0ZXJfbWFwKHxzY2VuZXwgc2NlbmUubmFtZSgpKS5jb2xsZWN0Ojo8VmVjPF8+PigpOwogICAgICAgICAgICAgICAgICAgIGZvcm1hdCEoImNvdWxkIG5vdCBmaW5kIHNjZW5lIHtzY2VuZV9uYW1lOj99IGluIGdsdGYgZmlsZSB7cGF0aDo/fS5cbkF2YWlsYWJsZSBzY2VuZXM6IHs6P30iLCBzY2VuZXMpCiAgICAgICAgICAgICAgICB9KT8sCiAgICAgICAgICAgIE5vbmUgPT4gZ2x0ZgogICAgICAgICAgICAgICAgLnNjZW5lcygpCiAgICAgICAgICAgICAgICAuc2luZ2xlKCkKICAgICAgICAgICAgICAgIC53aXRoX2NvbnRleHQofHwgZm9ybWF0ISgibm8gZGVmYXVsdCBzY2VuZSBpbiBnbHRmIGZpbGUge3BhdGg6P30iKSk/LAogICAgICAgIH07CgogICAgICAgIC8vIGZpbmQgbm9kZSBpbiBzY2VuZQogICAgICAgIGxldCBub2RlID0gbWF0Y2ggZGVzY3JpcHRvci5ub2RlLmFzX3JlZigpIHsKICAgICAgICAgICAgU29tZShub2RlX25hbWUpID0+IHNjZW5lCiAgICAgICAgICAgICAgICAubm9kZXMoKQogICAgICAgICAgICAgICAgLmZpbmQofG5vZGV8IG5vZGUubmFtZSgpID09IFNvbWUoJm5vZGVfbmFtZSkpCiAgICAgICAgICAgICAgICAud2l0aF9jb250ZXh0KHx8IHsKICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZXMgPSBzY2VuZQogICAgICAgICAgICAgICAgICAgICAgICAubm9kZXMoKQogICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyX21hcCh8bm9kZXwgbm9kZS5uYW1lKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsZWN0Ojo8VmVjPF8+PigpOwogICAgICAgICAgICAgICAgICAgIGZvcm1hdCEoCiAgICAgICAgICAgICAgICAgICAgICAgICJjb3VsZCBub3QgZmluZCBub2RlIHtub2RlX25hbWU6P30gaW4gc2NlbmUgezo/fSBnbHRmIGZpbGUge3BhdGg6P30uXG5BdmFpbGFibGUgbm9kZXM6IHs6P30iLAogICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5uYW1lKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfSk/LAogICAgICAgICAgICBOb25lID0+IHNjZW5lLm5vZGVzKCkuc2luZ2xlKCkud2l0aF9jb250ZXh0KHx8IHsKICAgICAgICAgICAgICAgIGZvcm1hdCEoCiAgICAgICAgICAgICAgICAgICAgIm5vIGRlZmF1bHQgbm9kZSBpbiBzY2VuZSB7Oj99IGdsdGYgZmlsZSB7cGF0aDo/fSIsCiAgICAgICAgICAgICAgICAgICAgc2NlbmUubmFtZSgpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0pPywKICAgICAgICB9OwoKICAgICAgICAvLyBnZXQgdGhlIEJJTiBjaHVuayBvZiB0aGUgZ2x0ZiBmaWxlIGFzIGEgc2VnbWVudAogICAgICAgIGxldCBmaWxlX2Jpbl9zZWcgPSBnbHRmX2Jpbl9zZWdtZW50KHBhdGgpCiAgICAgICAgICAgIC53aXRoX2NvbnRleHQofHwgZm9ybWF0ISgiY291bGQgbm90IGZpbmQgQklOIGNodW5rIGluIGdsdGYgZmlsZSB7cGF0aDo/fSIpKT87CgogICAgICAgIC8vIGNyZWF0ZSBidWZmZXIgc291cmNlIGVudGl0eQogICAgICAgIGxldCBidWZmZXJfc291cmNlX2lkID0KICAgICAgICAgICAgc2VsZi5idWZmZXJfc291cmNlX3N0b3JlCiAgICAgICAgICAgICAgICAubG9jaygpCiAgICAgICAgICAgICAgICAuaW5zZXJ0KEJ1ZmZlclNvdXJjZTo6VW5jb21wcmVzc2VkRmlsZSgKICAgICAgICAgICAgICAgICAgICBVbmNvbXByZXNzZWRGaWxlQnVmZmVyU291cmNlOjpuZXcocGF0aCwgZmlsZV9iaW5fc2VnKSwKICAgICAgICAgICAgICAgICkpOwoKICAgICAgICBzZWxmLnNwYXduX2dsdGZfbm9kZV9pbXBsKG5vZGUsIGJ1ZmZlcl9zb3VyY2VfaWQsIGVudGl0eSwgdHJ1ZSwgY21kKT87CgogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIHNwYXduX2dsdGZfbm9kZV9pbXBsKAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBub2RlOiBnbHRmOjpOb2RlPCdfPiwKICAgICAgICBidWZmZXJfc291cmNlX2lkOiBCdWZmZXJTb3VyY2VJZCwKICAgICAgICBlaWQ6IEVudGl0eSwKICAgICAgICBpc19yb290OiBib29sLAogICAgICAgIGNtZDogJm11dCBDb21tYW5kcywKICAgICkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICAgICAgbGV0IG11dCBlbnRpdHkgPSBjbWQKICAgICAgICAgICAgLmVudGl0eShlaWQpCiAgICAgICAgICAgIC5hbmRfc2V0KE5hbWU6Om5ldyhub2RlLm5hbWUoKS51bndyYXBfb3IoIiIpLnRvX293bmVkKCkpKTsKCiAgICAgICAgaWYgIWlzX3Jvb3QgewogICAgICAgICAgICBsZXQgKHBvcywgcm90LCBzY2wpID0gbm9kZS50cmFuc2Zvcm0oKS5kZWNvbXBvc2VkKCk7CiAgICAgICAgICAgIGVudGl0eS5zZXQoCiAgICAgICAgICAgICAgICBUcmFuc2Zvcm0zOjppZGVudGl0eSgpCiAgICAgICAgICAgICAgICAgICAgLndpdGhfdHJhbnNsYXRpb24oVmVjMzo6ZnJvbV9hcnJheShwb3MpKQogICAgICAgICAgICAgICAgICAgIC53aXRoX3JvdGF0aW9uKFNPMzo6ZnJvbV94eXp3X2FycmF5KHJvdCkpCiAgICAgICAgICAgICAgICAgICAgLndpdGhfc2NhbGUoVmVjMzo6ZnJvbV9hcnJheShzY2wpKSwKICAgICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIGlmIGxldCBTb21lKG1lc2gpID0gbm9kZS5tZXNoKCkgewogICAgICAgICAgICBsZXQgbXV0IHBhcnRzID0gVmVjOjpuZXcoKTsKCiAgICAgICAgICAgIGZvciBwcmltaXRpdmUgaW4gbWVzaC5wcmltaXRpdmVzKCkgewogICAgICAgICAgICAgICAgbGV0IG1lc2hfcHJveHkgPSBsb2FkX2dsdGZfcHJpbWl0aXZlKGJ1ZmZlcl9zb3VyY2VfaWQsIHByaW1pdGl2ZSk/OwogICAgICAgICAgICAgICAgbGV0IG1lc2hfcHJveHlfaWQgPSBzZWxmLm1lc2hfcHJveHlfc3RvcmUubG9jaygpLmluc2VydChtZXNoX3Byb3h5KTsKICAgICAgICAgICAgICAgIHBhcnRzLnB1c2gobWVzaF9wcm94eV9pZCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGxvZzo6ZGVidWchKCJMb2FkZWQgbWVzaCB7Oj99IHdpdGgge30gcGFydChzKSIsIG1lc2gubmFtZSgpLCBwYXJ0cy5sZW4oKSk7CgogICAgICAgICAgICBlbnRpdHkuc2V0KE1lc2hGaWx0ZXIgeyBwYXJ0cyB9KTsKICAgICAgICB9CgogICAgICAgIC8vIHJlY3Vyc2Ugb3ZlciBjaGlsZHJlbgogICAgICAgIGZvciBjaGlsZCBpbiBub2RlLmNoaWxkcmVuKCkgewogICAgICAgICAgICBsZXQgY2hpbGRfZW50aXR5ID0gY21kLnNwYXduKCgoQ2hpbGRPZiwgZWlkKSwpKS5pZCgpOwogICAgICAgICAgICBzZWxmLnNwYXduX2dsdGZfbm9kZV9pbXBsKGNoaWxkLCBidWZmZXJfc291cmNlX2lkLCBjaGlsZF9lbnRpdHksIGZhbHNlLCBjbWQpPzsKICAgICAgICB9CgogICAgICAgIE9rKCgpKQogICAgfQp9CgpmbiBsb2FkX2dsdGZfcHJpbWl0aXZlKAogICAgYnVmZmVyX3NvdXJjZV9pZDogQnVmZmVyU291cmNlSWQsCiAgICBwcmltaXRpdmU6IGdsdGY6OlByaW1pdGl2ZTwnXz4sCikgLT4gZXlyZTo6UmVzdWx0PE1lc2hQcm94eT4gewogICAgbGV0IHByaW1pdGl2ZV90b3BvbG9neSA9IG1hdGNoIHByaW1pdGl2ZS5tb2RlKCkgewogICAgICAgIGdsdGY6Om1lc2g6Ok1vZGU6OlBvaW50cyA9PiBQcmltaXRpdmVUb3BvbG9neTo6UG9pbnRMaXN0LAogICAgICAgIGdsdGY6Om1lc2g6Ok1vZGU6OkxpbmVzID0+IFByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lTGlzdCwKICAgICAgICBnbHRmOjptZXNoOjpNb2RlOjpUcmlhbmdsZXMgPT4gUHJpbWl0aXZlVG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCwKICAgICAgICAvLyBtZXNoOjpNb2RlOjpMaW5lU3RyaXAgPT4gUHJpbWl0aXZlVG9wb2xvZ3k6OkxpbmVTdHJpcCwKICAgICAgICAvLyBtZXNoOjpNb2RlOjpUcmlhbmdsZVN0cmlwID0+IFByaW1pdGl2ZVRvcG9sb2d5OjpUcmlhbmdsZVN0cmlwLAogICAgICAgIC8vIG1lc2g6Ok1vZGU6OlRyaWFuZ2xlRmFuID0+IFByaW1pdGl2ZVRvcG9sb2d5OjpUcmlhbmdsZUZhbiwKICAgICAgICBfID0+IHsKICAgICAgICAgICAgYmFpbCEoInVuc3VwcG9ydGVkIHByaW1pdGl2ZSBtb2RlOiB7Oj99IiwgcHJpbWl0aXZlLm1vZGUoKSk7CiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgaW5kaWNlcyA9IG1hdGNoIHByaW1pdGl2ZS5pbmRpY2VzKCkgewogICAgICAgIFNvbWUoZ2xhY2MpID0+IHsKICAgICAgICAgICAgbGV0IFNvbWUoaW5kaWNlcykgPSBidWlsZF9hY2Nlc3NvcigmZ2xhY2MpIGVsc2UgewogICAgICAgICAgICAgICAgYmFpbCEoImZhaWxlZCB0byBwYXJzZSBpbmRpY2VzIGFjY2Vzc29yOiB7Z2xhY2M6P30iKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgU29tZShpbmRpY2VzKQogICAgICAgIH0KICAgICAgICBOb25lID0+IE5vbmUsCiAgICB9OwoKICAgIGxldCBtdXQgYXR0cmlidXRlcyA9IEF0dHJpYnV0ZU1hcDo6bmV3KCk7CgogICAgZm9yIChzZW0sIGdsYWNjKSBpbiBwcmltaXRpdmUuYXR0cmlidXRlcygpIHsKICAgICAgICBsZXQgU29tZShhY2MpID0gYnVpbGRfYWNjZXNzb3IoJmdsYWNjKSBlbHNlIHsKICAgICAgICAgICAgYmFpbCEoIkZhaWxlZCB0byBwYXJzZSBhdHRyaWJ1dGUgYWNjZXNzb3I6IHtnbGFjYzo/fSIpOwogICAgICAgIH07CgogICAgICAgIGxldCBhdHRyaWJ1dGUgPSBtYXRjaCBzZW0gewogICAgICAgICAgICBnbHRmOjpTZW1hbnRpYzo6UG9zaXRpb25zID0+IEF0dHJpYnV0ZTo6UG9zaXRpb25zLAogICAgICAgICAgICBnbHRmOjpTZW1hbnRpYzo6Tm9ybWFscyA9PiBBdHRyaWJ1dGU6Ok5vcm1hbHMsCiAgICAgICAgICAgIGdsdGY6OlNlbWFudGljOjpDb2xvcnMoXykgPT4gQXR0cmlidXRlOjpDb2xvcnMsCiAgICAgICAgICAgIGdsdGY6OlNlbWFudGljOjpUZXhDb29yZHMoXykgPT4gQXR0cmlidXRlOjpUZXhDb29yZHMsCiAgICAgICAgICAgIF8gPT4gewogICAgICAgICAgICAgICAgbG9nOjp3YXJuISgidW5zdXBwb3J0ZWQgYXR0cmlidXRlOiB7Oj99Iiwgc2VtKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgbG9nOjp0cmFjZSEoImF0dHJpYnV0ZSB7YXR0cmlidXRlOj99OiB7YWNjOj99Iik7CgogICAgICAgIGF0dHJpYnV0ZXMuaW5zZXJ0KGF0dHJpYnV0ZSwgYWNjKTsKICAgIH0KCiAgICBsZXQgYW1hID0gTWVzaFByb3h5OjpuZXcoYnVmZmVyX3NvdXJjZV9pZCwgcHJpbWl0aXZlX3RvcG9sb2d5LCBpbmRpY2VzLCBhdHRyaWJ1dGVzKT87CgogICAgT2soYW1hKQp9CgpmbiBnbHRmX2Jpbl9zZWdtZW50KHBhdGg6ICZQYXRoKSAtPiBleXJlOjpSZXN1bHQ8U2VnbWVudD4gewogICAgdXNlIHN0ZDo6aW86OntSZWFkLCBTZWVrfTsKCiAgICBmbiByZWFkX3UzMihyZWFkZXI6ICZtdXQgc3RkOjppbzo6QnVmUmVhZGVyPHN0ZDo6ZnM6OkZpbGU+KSAtPiBleXJlOjpSZXN1bHQ8dTMyPiB7CiAgICAgICAgbGV0IG11dCBidWYgPSBbMHU4OyA0XTsKICAgICAgICByZWFkZXIucmVhZF9leGFjdCgmbXV0IGJ1Zik/OwogICAgICAgIE9rKHUzMjo6ZnJvbV9sZV9ieXRlcyhidWYpKQogICAgfQoKICAgIGZuIHUzMl9hbGlnbmVkKGxlbjogdTMyKSAtPiB1MzIgewogICAgICAgIChsZW4gKyAzKSAmICEzCiAgICB9CgogICAgY29uc3QgR0xURl9NQUdJQzogdTMyID0gMHg0NjU0NkM2NzsKICAgIGNvbnN0IEdMVEZfVkVSU0lPTjogdTMyID0gMjsKICAgIGNvbnN0IEdMVEZfQ0hVTktfVFlQRV9KU09OOiB1MzIgPSAweDRFNEY1MzRBOwogICAgY29uc3QgR0xURl9DSFVOS19UWVBFX0JJTjogdTMyID0gMHgwMDRFNDk0MjsKICAgIGNvbnN0IEdMVEZfSEVBREVSX0xFTjogdTMyID0gMTI7CiAgICBjb25zdCBHTFRGX0NIVU5LX0hFQURFUl9MRU46IHUzMiA9IDg7CgogICAgbGV0IGZpbGUgPSBzdGQ6OmZzOjpGaWxlOjpvcGVuKHBhdGgpPzsKICAgIGxldCBtdXQgcmVhZGVyID0gc3RkOjppbzo6QnVmUmVhZGVyOjpuZXcoZmlsZSk7CgogICAgbGV0IG1hZ2ljID0gcmVhZF91MzIoJm11dCByZWFkZXIpPzsKICAgIGlmIG1hZ2ljICE9IEdMVEZfTUFHSUMgewogICAgICAgIGJhaWwhKCJpbnZhbGlkIEdMQiBtYWdpYyBudW1iZXI6IHttYWdpYzowOFh9Iik7CiAgICB9CgogICAgbGV0IHZlcnNpb24gPSByZWFkX3UzMigmbXV0IHJlYWRlcik/OwogICAgaWYgdmVyc2lvbiAhPSBHTFRGX1ZFUlNJT04gewogICAgICAgIGJhaWwhKCJ1bnN1cHBvcnRlZCBHTEIgdmVyc2lvbjoge3ZlcnNpb259Iik7CiAgICB9CgogICAgbGV0IGxlbmd0aCA9IHJlYWRfdTMyKCZtdXQgcmVhZGVyKT87CgogICAgbGV0IGNodW5rXzFfbGVuZ3RoID0gdTMyX2FsaWduZWQocmVhZF91MzIoJm11dCByZWFkZXIpPyk7CiAgICBsZXQgY2h1bmtfMV90eXBlID0gcmVhZF91MzIoJm11dCByZWFkZXIpPzsKICAgIGlmIGNodW5rXzFfdHlwZSAhPSBHTFRGX0NIVU5LX1RZUEVfSlNPTiB7CiAgICAgICAgYmFpbCEoImV4cGVjdGVkIEpTT04gYXMgZmlyc3QgY2h1bms6IHtjaHVua18xX3R5cGV9Iik7CiAgICB9CgogICAgLy8gY2h1bmsgbGVuZ3RoIGRvZXMgbm90IGluY2x1ZGUgdGhlIDggYnl0ZXMgZm9yIGNodW5rIGxlbmd0aCBhbmQgY2h1bmsgdHlwZQogICAgcmVhZGVyLnNlZWsoc3RkOjppbzo6U2Vla0Zyb206OkN1cnJlbnQoY2h1bmtfMV9sZW5ndGggYXMgaTY0KSk/OwoKICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZXJlIGFjdHVhbGx5IGlzIGEgYmluYXJ5IGNodW5rCiAgICBpZiBHTFRGX0hFQURFUl9MRU4gKyBjaHVua18xX2xlbmd0aCArIEdMVEZfQ0hVTktfSEVBREVSX0xFTiA9PSBsZW5ndGggewogICAgICAgIGJhaWwhKCJubyBiaW5hcnkgY2h1bmsiKTsKICAgIH0KCiAgICBsZXQgY2h1bmtfMl9sZW5ndGggPSB1MzJfYWxpZ25lZChyZWFkX3UzMigmbXV0IHJlYWRlcik/KTsKICAgIGxldCBjaHVua18yX3R5cGUgPSByZWFkX3UzMigmbXV0IHJlYWRlcik/OwogICAgaWYgY2h1bmtfMl90eXBlICE9IEdMVEZfQ0hVTktfVFlQRV9CSU4gewogICAgICAgIGJhaWwhKCJleHBlY3RlZCBCSU4gYXMgc2Vjb25kIGNodW5rOiB7Y2h1bmtfMl90eXBlfSIpOwogICAgfQoKICAgIGxldCBjaHVua18yX2RhdGFfb2Zmc2V0ID0KICAgICAgICBHTFRGX0hFQURFUl9MRU4gKyBHTFRGX0NIVU5LX0hFQURFUl9MRU4gKyBjaHVua18xX2xlbmd0aCArIEdMVEZfQ0hVTktfSEVBREVSX0xFTjsKCiAgICBpZiBjaHVua18yX2RhdGFfb2Zmc2V0ICsgY2h1bmtfMl9sZW5ndGggIT0gbGVuZ3RoIHsKICAgICAgICBiYWlsISgiaW52YWxpZCBjaHVuayBsZW5ndGhzOiB7bGVuZ3RofSwge2NodW5rXzFfbGVuZ3RofSwge2NodW5rXzJfbGVuZ3RofSIpOwogICAgfQoKICAgIE9rKFNlZ21lbnQgewogICAgICAgIG9mZnNldDogY2h1bmtfMl9kYXRhX29mZnNldCBhcyB1c2l6ZSwKICAgICAgICBsZW46IGNodW5rXzJfbGVuZ3RoIGFzIHVzaXplLAogICAgfSkKfQoKLy8vIENvbnN0cnVjdCBvd2VyIG93biBidWY6OkFjY2Vzc29yIGZyb20gYSBnbHRmIEFjY2Vzc29yIGFuZCBjb3JyZXNwb25kaW5nIGdsdGYgQnVmZmVyVmlldwpmbiBidWlsZF9hY2Nlc3NvcihhY2Nlc3NvcjogJmdsdGY6OkFjY2Vzc29yKSAtPiBPcHRpb248QWNjZXNzb3I+IHsKICAgIGxldCBidWZ2aWV3ID0gYWNjZXNzb3IudmlldygpPzsKCiAgICBtYXRjaCBidWZ2aWV3LmJ1ZmZlcigpLnNvdXJjZSgpIHsKICAgICAgICBnbHRmOjpidWZmZXI6OlNvdXJjZTo6QmluID0+IHt9CiAgICAgICAgZ2x0Zjo6YnVmZmVyOjpTb3VyY2U6OlVyaShfKSA9PiB7CiAgICAgICAgICAgIGxvZzo6ZXJyb3IhKCJVUkkgYnVmZmVyIHNvdXJjZSBub3Qgc3VwcG9ydGVkIik7CiAgICAgICAgICAgIHJldHVybiBOb25lOwogICAgICAgIH0KICAgIH0KCiAgICBsZXQgZWxlbWVudF90eXBlID0gbWF0Y2ggYWNjZXNzb3IuZGF0YV90eXBlKCkgewogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6VTggPT4gRWxlbWVudFR5cGU6OlU4LAogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6STggPT4gRWxlbWVudFR5cGU6Okk4LAogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6VTE2ID0+IEVsZW1lbnRUeXBlOjpVMTYsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRhdGFUeXBlOjpJMTYgPT4gRWxlbWVudFR5cGU6OkkxNiwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGF0YVR5cGU6OlUzMiA9PiBFbGVtZW50VHlwZTo6VTMyLAogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6RjMyID0+IEVsZW1lbnRUeXBlOjpGMzIsCiAgICB9OwoKICAgIGxldCBjb21wb25lbnRfc2hhcGUgPSBtYXRjaCBhY2Nlc3Nvci5kaW1lbnNpb25zKCkgewogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEaW1lbnNpb25zOjpTY2FsYXIgPT4gQ29tcG9uZW50U2hhcGU6OlNjYWxhciwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6VmVjMiA9PiBDb21wb25lbnRTaGFwZTo6VmVjMiwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6VmVjMyA9PiBDb21wb25lbnRTaGFwZTo6VmVjMywKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6VmVjNCA9PiBDb21wb25lbnRTaGFwZTo6VmVjNCwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6TWF0MiA9PiBDb21wb25lbnRTaGFwZTo6TWF0MiwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6TWF0MyA9PiBDb21wb25lbnRTaGFwZTo6TWF0MywKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6TWF0NCA9PiBDb21wb25lbnRTaGFwZTo6TWF0NCwKICAgIH07CgogICAgbGV0IGNvdW50ID0gYWNjZXNzb3IuY291bnQoKTsKCiAgICBTb21lKEFjY2Vzc29yIHsKICAgICAgICBzZWdtZW50OiBTZWdtZW50IHsKICAgICAgICAgICAgb2Zmc2V0OiBidWZ2aWV3Lm9mZnNldCgpICsgYWNjZXNzb3Iub2Zmc2V0KCksCiAgICAgICAgICAgIGxlbjogYnVmdmlldy5sZW5ndGgoKSwKICAgICAgICB9LAogICAgICAgIHN0cmlkZTogYnVmdmlldy5zdHJpZGUoKS5tYXAofHN8IE5vblplcm9VMzI6Om5ldyhzIGFzIHUzMikudW53cmFwKCkpLAogICAgICAgIGVsZW1lbnRfdHlwZSwKICAgICAgICBjb21wb25lbnRfc2hhcGUsCiAgICAgICAgY291bnQsCiAgICB9KQp9CgAAAAAAAAAAsjcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+Q0AAAAAAAD8DQAAAAAAAAAAAAAAAPC/"
				],
				[
					19,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACyNwAAdXNlIGNyYXRlOjp7CiAgICBNZXNoRmlsdGVyLAogICAgYnVmOjp7CiAgICAgICAgQWNjZXNzb3IsIEJ1ZmZlclNvdXJjZSwgQnVmZmVyU291cmNlSWQsIFNlZ21lbnQsIFNoYXJlZEJ1ZmZlclNvdXJjZVN0b3JlLAogICAgICAgIFVuY29tcHJlc3NlZEZpbGVCdWZmZXJTb3VyY2UsCiAgICB9LAogICAgbWVzaDo6ewogICAgICAgIEF0dHJpYnV0ZSwgQXR0cmlidXRlTWFwLCBDb21wb25lbnRTaGFwZSwgRWxlbWVudFR5cGUsIE1lc2hQcm94eSwgUHJpbWl0aXZlVG9wb2xvZ3ksCiAgICAgICAgU2hhcmVkTWVzaFByb3h5U3RvcmUsCiAgICB9LAp9Owp1c2UgZXhjZXNzOjpwcmVsdWRlOjoqOwp1c2UgZXlyZTo6e0NvbnRleHQsIENvbnRleHRDb21wYXQsIGJhaWwsIGV5cmV9Owp1c2UgZ2xhbTo6VmVjMzsKdXNlIGdsdGY6OkdsdGY7CnVzZSBtYWdpX2dlbXM6OntJdGVyVXRpbHMsIFJlc3VsdExvZ307CnVzZSBtYWdpX3NlOjpTTzM7CnVzZSBzY2VuZV90cmVlOjp7Q2hpbGRPZiwgSW5zdGFuY2VPZiwgVHJhbnNmb3JtM307CnVzZSBzaW1wbGVjczo6cHJlbHVkZTo6KjsKdXNlIHN0ZDo6ewogICAgY29sbGVjdGlvbnM6Okhhc2hNYXAsCiAgICBudW06Ok5vblplcm9VMzIsCiAgICBvcHM6OkRlcmVmLAogICAgcGF0aDo6e1BhdGgsIFBhdGhCdWZ9LAp9OwoKI1tkZXJpdmUoU2luZ2xldG9uKV0KcHViIHN0cnVjdCBBc3NldExpYnJhcnkgewogICAgYnVmZmVyX3NvdXJjZV9zdG9yZTogU2hhcmVkQnVmZmVyU291cmNlU3RvcmUsCiAgICBtZXNoX3Byb3h5X3N0b3JlOiBTaGFyZWRNZXNoUHJveHlTdG9yZSwKICAgIGFzc2V0czogSGFzaE1hcDxBc3NldFVpZCwgR2x0ZkFzc2V0PiwKCiAgICB0YXNrczogVmVjPFRhc2s+LAp9CgpwdWIgZW51bSBUYXNrIHsKICAgIExvYWRBc3NldChBc3NldFVpZCwgR2x0ZkFzc2V0RGVzY3JpcHRvciksCn0KCi8vLyBBIHVuaXF1ZSBpZGVudGlmaWVyIHVzZXItZGVmaW5lZCBpZGVudGlmaWVyIGZvciBhbiBhc3NldCBpbiB0aGUgbGlicmFyeS4KI1tkZXJpdmUoRGVidWcsIENsb25lLCBQYXJ0aWFsRXEsIEVxLCBIYXNoKV0KcHViIHN0cnVjdCBBc3NldFVpZChwdWIgU3RyaW5nKTsKCmltcGwgQXNzZXRVaWQgewogICAgcHViIGZuIGZyb21fc3RyKGlkOiAmc3RyKSAtPiBTZWxmIHsKICAgICAgICBTZWxmKGlkLnRvX3N0cmluZygpKQogICAgfQp9CgpzdHJ1Y3QgR2x0ZkFzc2V0IHsKICAgIGRlc2NyaXB0b3I6IEdsdGZBc3NldERlc2NyaXB0b3IsCiAgICBwcmVmYWJfZW50aXR5OiBFbnRpdHksCn0KCiNbZGVyaXZlKENsb25lLCBDb3B5LCBQYXJ0aWFsRXEsIEVxLCBIYXNoKV0KcHViIHN0cnVjdCBBc3NldElkKHB1YiBFbnRpdHkpOwoKaW1wbCBEZXJlZiBmb3IgQXNzZXRJZCB7CiAgICB0eXBlIFRhcmdldCA9IEVudGl0eTsKCiAgICBmbiBkZXJlZigmc2VsZikgLT4gJlNlbGY6OlRhcmdldCB7CiAgICAgICAgJnNlbGYuMAogICAgfQp9CgovLy8gTG9hZHMgYSBHTFRGIG5vZGUgYW5kIGl0cyBjaGlsZHJlbiBpbnRvIHRoZSBzY2VuZSBncmFwaC4gRWFjaCBub2RlIGlzIHJlbmRlcmVkIGJ5IG9uZSBHTFRGCi8vLyAibWVzaCIgd2hpY2ggaXRzZWxmIGNvbnNpc3RzIG9mIG9uZSBvciBtb3JlIEdMVEYgInByaW1pdGl2ZXMiIHdpdGggbWVzaCBkYXRhIGFuZCBtYXRlcmlhbC4KLy8vIFRoZSBhc3NldCBsb2FkZXIgY3JlYXRlcyBvbmUgZW50aXR5IHBlciBwcmltaXRpdmUuCiNbZGVyaXZlKENvbXBvbmVudCwgRGVidWcsIFBhcnRpYWxFcSwgRXEsIEhhc2gpXQpwdWIgc3RydWN0IEdsdGZBc3NldERlc2NyaXB0b3IgewogICAgLy8vIFBhdGggdG8gR0xURiBmaWxlIC0gY3VycmVudGx5IG9ubHkgKi5nbGIgaXMgc3VwcG9ydGVkCiAgICBwdWIgcGF0aDogUGF0aEJ1ZiwKCiAgICAvLy8gU2NlbmUgdG8gbG9hZC4gSWYgTm9uZSwgdGhlIGRlZmF1bHQgc2NlbmUgd2lsbCBiZSBsb2FkZWQuCiAgICBwdWIgc2NlbmU6IE9wdGlvbjxTdHJpbmc+LAoKICAgIC8vLyBOYW1lIG9mIEdMVEYgbm9kZSBpbiB0aGUgc2NlbmUgdG8gbG9hZC4gSWYgTm9uZSwgdGhlIGZ1bGwgc2NlbmUgd2lsbCBiZSBsb2FkZWQuCiAgICBwdWIgbm9kZTogT3B0aW9uPFN0cmluZz4sCn0KCiNbZGVyaXZlKENvbXBvbmVudCldCnN0cnVjdCBBc3NldFByZWZhYjsKCiNbZGVyaXZlKERlYnVnLCB0aGlzZXJyb3I6OkVycm9yKV0KcHViIGVudW0gQXNzZXRMaWJyYXJ5RXJyb3IgewogICAgI1tlcnJvcigiRmFpbGVkIHRvIGxvYWQgR0xURiBhc3NldCIpXQogICAgRmFpbGVkVG9Mb2FkR2x0ZihBc3NldFVpZCwgR2x0ZkFzc2V0RGVzY3JpcHRvciwgU3RyaW5nKSwKCiAgICAjW2Vycm9yKCJPdGhlciBlcnJvciIpXQogICAgT3RoZXIoQXNzZXRVaWQsIFN0cmluZyksCn0KCiNbZGVyaXZlKENvbXBvbmVudCldCnN0cnVjdCBBc3NldEJ1ZmZlciB7fQoKaW1wbCBBc3NldExpYnJhcnkgewogICAgcHViIGZuIG5ldygKICAgICAgICBidWZmZXJfc291cmNlX3N0b3JlOiBTaGFyZWRCdWZmZXJTb3VyY2VTdG9yZSwKICAgICAgICBtZXNoX3Byb3h5X3N0b3JlOiBTaGFyZWRNZXNoUHJveHlTdG9yZSwKICAgICkgLT4gU2VsZiB7CiAgICAgICAgQXNzZXRMaWJyYXJ5IHsKICAgICAgICAgICAgYnVmZmVyX3NvdXJjZV9zdG9yZSwKICAgICAgICAgICAgbWVzaF9wcm94eV9zdG9yZSwKICAgICAgICAgICAgYXNzZXRzOiBIYXNoTWFwOjpuZXcoKSwKICAgICAgICAgICAgdGFza3M6IFZlYzo6bmV3KCksCiAgICAgICAgfQogICAgfQoKICAgIHB1YiBmbiBsb2FkX2dsdGYoJm11dCBzZWxmLCB1aWQ6ICZBc3NldFVpZCwgZGVzY3JpcHRvcjogR2x0ZkFzc2V0RGVzY3JpcHRvcikgewogICAgICAgIHNlbGYudGFza3MucHVzaChUYXNrOjpMb2FkQXNzZXQodWlkLmNsb25lKCksIGRlc2NyaXB0b3IpKTsKICAgIH0KCiAgICBwdWIoY3JhdGUpIGZuIHByb2Nlc3NfdGFza3MoJm11dCBzZWxmLCBjbWQ6ICZtdXQgQ29tbWFuZHMpIHsKICAgICAgICBsZXQgbXV0IHRhc2tzID0gVmVjOjpuZXcoKTsKICAgICAgICBzdGQ6Om1lbTo6c3dhcCgmbXV0IHNlbGYudGFza3MsICZtdXQgdGFza3MpOwogICAgICAgIGZvciB0YXNrIGluIHRhc2tzLmRyYWluKC4uKSB7CiAgICAgICAgICAgIG1hdGNoIHRhc2sgewogICAgICAgICAgICAgICAgVGFzazo6TG9hZEFzc2V0KHVpZCwgZGVzY3JpcHRvcikgPT4gewogICAgICAgICAgICAgICAgICAgIHNlbGYubG9hZF9nbHRmX2ltcGwodWlkLmNsb25lKCksIGRlc2NyaXB0b3IsIGNtZCkub2tfbG9nKCk7CiAgICAgICAgICAgICAgICAgICAgbG9nOjpkZWJ1ZyEoImxvYWRlZCBhc3NldCB7dWlkOj99Iik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgZm4gbG9hZF9nbHRmX2ltcGwoCiAgICAgICAgJm11dCBzZWxmLAogICAgICAgIHVpZDogQXNzZXRVaWQsCiAgICAgICAgZGVzY3JpcHRvcjogR2x0ZkFzc2V0RGVzY3JpcHRvciwKICAgICAgICBjbWQ6ICZtdXQgQ29tbWFuZHMsCiAgICApIC0+IFJlc3VsdDwoKSwgQXNzZXRMaWJyYXJ5RXJyb3I+IHsKICAgICAgICBpZiBzZWxmLmFzc2V0cy5jb250YWluc19rZXkoJnVpZCkgewogICAgICAgICAgICByZXR1cm4gT2soKCkpOwogICAgICAgIH0KCiAgICAgICAgbGV0IHByZWZhYl9lbnRpdHkgPSBjbWQuc3Bhd24oQXNzZXRQcmVmYWIpLmlkKCk7CgogICAgICAgIG1hdGNoIHNlbGYuc3Bhd25fZ2x0Zl9ub2RlKHByZWZhYl9lbnRpdHksICZkZXNjcmlwdG9yLCBjbWQpIHsKICAgICAgICAgICAgT2soXykgPT4gewogICAgICAgICAgICAgICAgc2VsZi5hc3NldHMuaW5zZXJ0KAogICAgICAgICAgICAgICAgICAgIHVpZCwKICAgICAgICAgICAgICAgICAgICBHbHRmQXNzZXQgewogICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdG9yLAogICAgICAgICAgICAgICAgICAgICAgICBwcmVmYWJfZW50aXR5LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgT2soKCkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgRXJyKGVycikgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIEVycihBc3NldExpYnJhcnlFcnJvcjo6RmFpbGVkVG9Mb2FkR2x0ZigKICAgICAgICAgICAgICAgICAgICB1aWQsCiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvciwKICAgICAgICAgICAgICAgICAgICBlcnIudG9fc3RyaW5nKCksCiAgICAgICAgICAgICAgICApKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICBwdWIgZm4gaW5zdGFudGlhdGU8J2wsICdmLCAncSwgJ2M+KAogICAgICAgICYnbCBtdXQgc2VsZiwKICAgICAgICBlbnRpdHk6IEVudGl0eSwKICAgICAgICB1aWQ6ICZBc3NldFVpZCwKICAgICAgICBjbWQ6ICYnYyBtdXQgQ29tbWFuZHM8J2YsICdxPiwKICAgICkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICAgICAgbGV0IGFzc2V0ID0gc2VsZgogICAgICAgICAgICAuYXNzZXRzCiAgICAgICAgICAgIC5nZXQodWlkKQogICAgICAgICAgICAub2tfb3JfZWxzZSh8fCBleXJlISgidW5rbm93biBhc3NldDoge3VpZDo/fSIpKT87CiAgICAgICAgY21kLmVudGl0eShlbnRpdHkpLnNldCgoSW5zdGFuY2VPZiwgYXNzZXQucHJlZmFiX2VudGl0eSkpOwogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIHNwYXduX2dsdGZfbm9kZSgKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgZW50aXR5OiBFbnRpdHksCiAgICAgICAgZGVzY3JpcHRvcjogJkdsdGZBc3NldERlc2NyaXB0b3IsCiAgICAgICAgY21kOiAmbXV0IENvbW1hbmRzLAogICAgKSAtPiBleXJlOjpSZXN1bHQ8KCk+IHsKICAgICAgICBsZXQgcGF0aCA9ICZkZXNjcmlwdG9yLnBhdGg7CgogICAgICAgIGxldCBnbHRmID0gR2x0Zjo6b3BlbihwYXRoKS53aXRoX2NvbnRleHQofHwgZm9ybWF0ISgiZXJyb3IgbG9hZGluZyBmaWxlOiB7cGF0aDo/fSIpKT87CgogICAgICAgIC8vIGZpbmQgc2NlbmUKICAgICAgICBsZXQgc2NlbmUgPSBtYXRjaCBkZXNjcmlwdG9yLnNjZW5lLmFzX3JlZigpIHsKICAgICAgICAgICAgU29tZShzY2VuZV9uYW1lKSA9PiBnbHRmCiAgICAgICAgICAgICAgICAuc2NlbmVzKCkKICAgICAgICAgICAgICAgIC5maW5kKHxzY2VuZXwgc2NlbmUubmFtZSgpID09IFNvbWUoJnNjZW5lX25hbWUpKQogICAgICAgICAgICAgICAgLndpdGhfY29udGV4dCh8fCB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHNjZW5lcyA9IGdsdGYuc2NlbmVzKCkuZmlsdGVyX21hcCh8c2NlbmV8IHNjZW5lLm5hbWUoKSkuY29sbGVjdDo6PFZlYzxfPj4oKTsKICAgICAgICAgICAgICAgICAgICBmb3JtYXQhKCJjb3VsZCBub3QgZmluZCBzY2VuZSB7c2NlbmVfbmFtZTo/fSBpbiBnbHRmIGZpbGUge3BhdGg6P30uXG5BdmFpbGFibGUgc2NlbmVzOiB7Oj99Iiwgc2NlbmVzKQogICAgICAgICAgICAgICAgfSk/LAogICAgICAgICAgICBOb25lID0+IGdsdGYKICAgICAgICAgICAgICAgIC5zY2VuZXMoKQogICAgICAgICAgICAgICAgLnNpbmdsZSgpCiAgICAgICAgICAgICAgICAud2l0aF9jb250ZXh0KHx8IGZvcm1hdCEoIm5vIGRlZmF1bHQgc2NlbmUgaW4gZ2x0ZiBmaWxlIHtwYXRoOj99IikpPywKICAgICAgICB9OwoKICAgICAgICAvLyBmaW5kIG5vZGUgaW4gc2NlbmUKICAgICAgICBsZXQgbm9kZSA9IG1hdGNoIGRlc2NyaXB0b3Iubm9kZS5hc19yZWYoKSB7CiAgICAgICAgICAgIFNvbWUobm9kZV9uYW1lKSA9PiBzY2VuZQogICAgICAgICAgICAgICAgLm5vZGVzKCkKICAgICAgICAgICAgICAgIC5maW5kKHxub2RlfCBub2RlLm5hbWUoKSA9PSBTb21lKCZub2RlX25hbWUpKQogICAgICAgICAgICAgICAgLndpdGhfY29udGV4dCh8fCB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG5vZGVzID0gc2NlbmUKICAgICAgICAgICAgICAgICAgICAgICAgLm5vZGVzKCkKICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcl9tYXAofG5vZGV8IG5vZGUubmFtZSgpKQogICAgICAgICAgICAgICAgICAgICAgICAuY29sbGVjdDo6PFZlYzxfPj4oKTsKICAgICAgICAgICAgICAgICAgICBmb3JtYXQhKAogICAgICAgICAgICAgICAgICAgICAgICAiY291bGQgbm90IGZpbmQgbm9kZSB7bm9kZV9uYW1lOj99IGluIHNjZW5lIHs6P30gZ2x0ZiBmaWxlIHtwYXRoOj99LlxuQXZhaWxhYmxlIG5vZGVzOiB7Oj99IiwKICAgICAgICAgICAgICAgICAgICAgICAgc2NlbmUubmFtZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBub2RlcwogICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgIH0pPywKICAgICAgICAgICAgTm9uZSA9PiBzY2VuZS5ub2RlcygpLnNpbmdsZSgpLndpdGhfY29udGV4dCh8fCB7CiAgICAgICAgICAgICAgICBmb3JtYXQhKAogICAgICAgICAgICAgICAgICAgICJubyBkZWZhdWx0IG5vZGUgaW4gc2NlbmUgezo/fSBnbHRmIGZpbGUge3BhdGg6P30iLAogICAgICAgICAgICAgICAgICAgIHNjZW5lLm5hbWUoKQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICB9KT8sCiAgICAgICAgfTsKCiAgICAgICAgLy8gZ2V0IHRoZSBCSU4gY2h1bmsgb2YgdGhlIGdsdGYgZmlsZSBhcyBhIHNlZ21lbnQKICAgICAgICBsZXQgZmlsZV9iaW5fc2VnID0gZ2x0Zl9iaW5fc2VnbWVudChwYXRoKQogICAgICAgICAgICAud2l0aF9jb250ZXh0KHx8IGZvcm1hdCEoImNvdWxkIG5vdCBmaW5kIEJJTiBjaHVuayBpbiBnbHRmIGZpbGUge3BhdGg6P30iKSk/OwoKICAgICAgICAvLyBjcmVhdGUgYnVmZmVyIHNvdXJjZSBlbnRpdHkKICAgICAgICBsZXQgYnVmZmVyX3NvdXJjZV9pZCA9CiAgICAgICAgICAgIHNlbGYuYnVmZmVyX3NvdXJjZV9zdG9yZQogICAgICAgICAgICAgICAgLmxvY2soKQogICAgICAgICAgICAgICAgLmluc2VydChCdWZmZXJTb3VyY2U6OlVuY29tcHJlc3NlZEZpbGUoCiAgICAgICAgICAgICAgICAgICAgVW5jb21wcmVzc2VkRmlsZUJ1ZmZlclNvdXJjZTo6bmV3KHBhdGgsIGZpbGVfYmluX3NlZyksCiAgICAgICAgICAgICAgICApKTsKCiAgICAgICAgc2VsZi5zcGF3bl9nbHRmX25vZGVfaW1wbChub2RlLCBidWZmZXJfc291cmNlX2lkLCBlbnRpdHksIHRydWUsIGNtZCk/OwoKICAgICAgICBPaygoKSkKICAgIH0KCiAgICBmbiBzcGF3bl9nbHRmX25vZGVfaW1wbCgKICAgICAgICAmbXV0IHNlbGYsCiAgICAgICAgbm9kZTogZ2x0Zjo6Tm9kZTwnXz4sCiAgICAgICAgYnVmZmVyX3NvdXJjZV9pZDogQnVmZmVyU291cmNlSWQsCiAgICAgICAgZWlkOiBFbnRpdHksCiAgICAgICAgaXNfcm9vdDogYm9vbCwKICAgICAgICBjbWQ6ICZtdXQgQ29tbWFuZHMsCiAgICApIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCBtdXQgZW50aXR5ID0gY21kCiAgICAgICAgICAgIC5lbnRpdHkoZWlkKQogICAgICAgICAgICAuYW5kX3NldChOYW1lOjpuZXcobm9kZS5uYW1lKCkudW53cmFwX29yKCIiKS50b19vd25lZCgpKSk7CgogICAgICAgIGlmICFpc19yb290IHsKICAgICAgICAgICAgbGV0IChwb3MsIHJvdCwgc2NsKSA9IG5vZGUudHJhbnNmb3JtKCkuZGVjb21wb3NlZCgpOwogICAgICAgICAgICBlbnRpdHkuc2V0KAogICAgICAgICAgICAgICAgVHJhbnNmb3JtMzo6aWRlbnRpdHkoKQogICAgICAgICAgICAgICAgICAgIC53aXRoX3RyYW5zbGF0aW9uKFZlYzM6OmZyb21fYXJyYXkocG9zKSkKICAgICAgICAgICAgICAgICAgICAud2l0aF9yb3RhdGlvbihTTzM6OmZyb21feHl6d19hcnJheShyb3QpKQogICAgICAgICAgICAgICAgICAgIC53aXRoX3NjYWxlKFZlYzM6OmZyb21fYXJyYXkoc2NsKSksCiAgICAgICAgICAgICk7CiAgICAgICAgfQoKICAgICAgICBpZiBsZXQgU29tZShtZXNoKSA9IG5vZGUubWVzaCgpIHsKICAgICAgICAgICAgbGV0IG11dCBwYXJ0cyA9IFZlYzo6bmV3KCk7CgogICAgICAgICAgICBmb3IgcHJpbWl0aXZlIGluIG1lc2gucHJpbWl0aXZlcygpIHsKICAgICAgICAgICAgICAgIGxldCBtZXNoX3Byb3h5ID0gbG9hZF9nbHRmX3ByaW1pdGl2ZShidWZmZXJfc291cmNlX2lkLCBwcmltaXRpdmUpPzsKICAgICAgICAgICAgICAgIGxldCBtZXNoX3Byb3h5X2lkID0gc2VsZi5tZXNoX3Byb3h5X3N0b3JlLmxvY2soKS5pbnNlcnQobWVzaF9wcm94eSk7CiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKG1lc2hfcHJveHlfaWQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsb2c6OmRlYnVnISgiTG9hZGVkIG1lc2ggezo/fSB3aXRoIHt9IHBhcnQocykiLCBtZXNoLm5hbWUoKSwgcGFydHMubGVuKCkpOwoKICAgICAgICAgICAgZW50aXR5LnNldChNZXNoRmlsdGVyIHsgcGFydHMgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyByZWN1cnNlIG92ZXIgY2hpbGRyZW4KICAgICAgICBmb3IgY2hpbGQgaW4gbm9kZS5jaGlsZHJlbigpIHsKICAgICAgICAgICAgbGV0IGNoaWxkX2VudGl0eSA9IGNtZC5zcGF3bigoKENoaWxkT2YsIGVpZCksKSkuaWQoKTsKICAgICAgICAgICAgc2VsZi5zcGF3bl9nbHRmX25vZGVfaW1wbChjaGlsZCwgYnVmZmVyX3NvdXJjZV9pZCwgY2hpbGRfZW50aXR5LCBmYWxzZSwgY21kKT87CiAgICAgICAgfQoKICAgICAgICBPaygoKSkKICAgIH0KfQoKZm4gbG9hZF9nbHRmX3ByaW1pdGl2ZSgKICAgIGJ1ZmZlcl9zb3VyY2VfaWQ6IEJ1ZmZlclNvdXJjZUlkLAogICAgcHJpbWl0aXZlOiBnbHRmOjpQcmltaXRpdmU8J18+LAopIC0+IGV5cmU6OlJlc3VsdDxNZXNoUHJveHk+IHsKICAgIGxldCBwcmltaXRpdmVfdG9wb2xvZ3kgPSBtYXRjaCBwcmltaXRpdmUubW9kZSgpIHsKICAgICAgICBnbHRmOjptZXNoOjpNb2RlOjpQb2ludHMgPT4gUHJpbWl0aXZlVG9wb2xvZ3k6OlBvaW50TGlzdCwKICAgICAgICBnbHRmOjptZXNoOjpNb2RlOjpMaW5lcyA9PiBQcmltaXRpdmVUb3BvbG9neTo6TGluZUxpc3QsCiAgICAgICAgZ2x0Zjo6bWVzaDo6TW9kZTo6VHJpYW5nbGVzID0+IFByaW1pdGl2ZVRvcG9sb2d5OjpUcmlhbmdsZUxpc3QsCiAgICAgICAgLy8gbWVzaDo6TW9kZTo6TGluZVN0cmlwID0+IFByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lU3RyaXAsCiAgICAgICAgLy8gbWVzaDo6TW9kZTo6VHJpYW5nbGVTdHJpcCA9PiBQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVTdHJpcCwKICAgICAgICAvLyBtZXNoOjpNb2RlOjpUcmlhbmdsZUZhbiA9PiBQcmltaXRpdmVUb3BvbG9neTo6VHJpYW5nbGVGYW4sCiAgICAgICAgXyA9PiB7CiAgICAgICAgICAgIGJhaWwhKCJ1bnN1cHBvcnRlZCBwcmltaXRpdmUgbW9kZTogezo/fSIsIHByaW1pdGl2ZS5tb2RlKCkpOwogICAgICAgIH0KICAgIH07CgogICAgbGV0IGluZGljZXMgPSBtYXRjaCBwcmltaXRpdmUuaW5kaWNlcygpIHsKICAgICAgICBTb21lKGdsYWNjKSA9PiB7CiAgICAgICAgICAgIGxldCBTb21lKGluZGljZXMpID0gYnVpbGRfYWNjZXNzb3IoJmdsYWNjKSBlbHNlIHsKICAgICAgICAgICAgICAgIGJhaWwhKCJmYWlsZWQgdG8gcGFyc2UgaW5kaWNlcyBhY2Nlc3Nvcjoge2dsYWNjOj99Iik7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIFNvbWUoaW5kaWNlcykKICAgICAgICB9CiAgICAgICAgTm9uZSA9PiBOb25lLAogICAgfTsKCiAgICBsZXQgbXV0IGF0dHJpYnV0ZXMgPSBBdHRyaWJ1dGVNYXA6Om5ldygpOwoKICAgIGZvciAoc2VtLCBnbGFjYykgaW4gcHJpbWl0aXZlLmF0dHJpYnV0ZXMoKSB7CiAgICAgICAgbGV0IFNvbWUoYWNjKSA9IGJ1aWxkX2FjY2Vzc29yKCZnbGFjYykgZWxzZSB7CiAgICAgICAgICAgIGJhaWwhKCJGYWlsZWQgdG8gcGFyc2UgYXR0cmlidXRlIGFjY2Vzc29yOiB7Z2xhY2M6P30iKTsKICAgICAgICB9OwoKICAgICAgICBsZXQgYXR0cmlidXRlID0gbWF0Y2ggc2VtIHsKICAgICAgICAgICAgZ2x0Zjo6U2VtYW50aWM6OlBvc2l0aW9ucyA9PiBBdHRyaWJ1dGU6OlBvc2l0aW9ucywKICAgICAgICAgICAgZ2x0Zjo6U2VtYW50aWM6Ok5vcm1hbHMgPT4gQXR0cmlidXRlOjpOb3JtYWxzLAogICAgICAgICAgICBnbHRmOjpTZW1hbnRpYzo6Q29sb3JzKF8pID0+IEF0dHJpYnV0ZTo6Q29sb3JzLAogICAgICAgICAgICBnbHRmOjpTZW1hbnRpYzo6VGV4Q29vcmRzKF8pID0+IEF0dHJpYnV0ZTo6VGV4Q29vcmRzLAogICAgICAgICAgICBfID0+IHsKICAgICAgICAgICAgICAgIGxvZzo6d2FybiEoInVuc3VwcG9ydGVkIGF0dHJpYnV0ZTogezo/fSIsIHNlbSk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIGxvZzo6dHJhY2UhKCJhdHRyaWJ1dGUge2F0dHJpYnV0ZTo/fToge2FjYzo/fSIpOwoKICAgICAgICBhdHRyaWJ1dGVzLmluc2VydChhdHRyaWJ1dGUsIGFjYyk7CiAgICB9CgogICAgbGV0IGFtYSA9IE1lc2hQcm94eTo6bmV3KGJ1ZmZlcl9zb3VyY2VfaWQsIHByaW1pdGl2ZV90b3BvbG9neSwgaW5kaWNlcywgYXR0cmlidXRlcyk/OwoKICAgIE9rKGFtYSkKfQoKZm4gZ2x0Zl9iaW5fc2VnbWVudChwYXRoOiAmUGF0aCkgLT4gZXlyZTo6UmVzdWx0PFNlZ21lbnQ+IHsKICAgIHVzZSBzdGQ6OmlvOjp7UmVhZCwgU2Vla307CgogICAgZm4gcmVhZF91MzIocmVhZGVyOiAmbXV0IHN0ZDo6aW86OkJ1ZlJlYWRlcjxzdGQ6OmZzOjpGaWxlPikgLT4gZXlyZTo6UmVzdWx0PHUzMj4gewogICAgICAgIGxldCBtdXQgYnVmID0gWzB1ODsgNF07CiAgICAgICAgcmVhZGVyLnJlYWRfZXhhY3QoJm11dCBidWYpPzsKICAgICAgICBPayh1MzI6OmZyb21fbGVfYnl0ZXMoYnVmKSkKICAgIH0KCiAgICBmbiB1MzJfYWxpZ25lZChsZW46IHUzMikgLT4gdTMyIHsKICAgICAgICAobGVuICsgMykgJiAhMwogICAgfQoKICAgIGNvbnN0IEdMVEZfTUFHSUM6IHUzMiA9IDB4NDY1NDZDNjc7CiAgICBjb25zdCBHTFRGX1ZFUlNJT046IHUzMiA9IDI7CiAgICBjb25zdCBHTFRGX0NIVU5LX1RZUEVfSlNPTjogdTMyID0gMHg0RTRGNTM0QTsKICAgIGNvbnN0IEdMVEZfQ0hVTktfVFlQRV9CSU46IHUzMiA9IDB4MDA0RTQ5NDI7CiAgICBjb25zdCBHTFRGX0hFQURFUl9MRU46IHUzMiA9IDEyOwogICAgY29uc3QgR0xURl9DSFVOS19IRUFERVJfTEVOOiB1MzIgPSA4OwoKICAgIGxldCBmaWxlID0gc3RkOjpmczo6RmlsZTo6b3BlbihwYXRoKT87CiAgICBsZXQgbXV0IHJlYWRlciA9IHN0ZDo6aW86OkJ1ZlJlYWRlcjo6bmV3KGZpbGUpOwoKICAgIGxldCBtYWdpYyA9IHJlYWRfdTMyKCZtdXQgcmVhZGVyKT87CiAgICBpZiBtYWdpYyAhPSBHTFRGX01BR0lDIHsKICAgICAgICBiYWlsISgiaW52YWxpZCBHTEIgbWFnaWMgbnVtYmVyOiB7bWFnaWM6MDhYfSIpOwogICAgfQoKICAgIGxldCB2ZXJzaW9uID0gcmVhZF91MzIoJm11dCByZWFkZXIpPzsKICAgIGlmIHZlcnNpb24gIT0gR0xURl9WRVJTSU9OIHsKICAgICAgICBiYWlsISgidW5zdXBwb3J0ZWQgR0xCIHZlcnNpb246IHt2ZXJzaW9ufSIpOwogICAgfQoKICAgIGxldCBsZW5ndGggPSByZWFkX3UzMigmbXV0IHJlYWRlcik/OwoKICAgIGxldCBjaHVua18xX2xlbmd0aCA9IHUzMl9hbGlnbmVkKHJlYWRfdTMyKCZtdXQgcmVhZGVyKT8pOwogICAgbGV0IGNodW5rXzFfdHlwZSA9IHJlYWRfdTMyKCZtdXQgcmVhZGVyKT87CiAgICBpZiBjaHVua18xX3R5cGUgIT0gR0xURl9DSFVOS19UWVBFX0pTT04gewogICAgICAgIGJhaWwhKCJleHBlY3RlZCBKU09OIGFzIGZpcnN0IGNodW5rOiB7Y2h1bmtfMV90eXBlfSIpOwogICAgfQoKICAgIC8vIGNodW5rIGxlbmd0aCBkb2VzIG5vdCBpbmNsdWRlIHRoZSA4IGJ5dGVzIGZvciBjaHVuayBsZW5ndGggYW5kIGNodW5rIHR5cGUKICAgIHJlYWRlci5zZWVrKHN0ZDo6aW86OlNlZWtGcm9tOjpDdXJyZW50KGNodW5rXzFfbGVuZ3RoIGFzIGk2NCkpPzsKCiAgICAvLyBtYWtlIHN1cmUgdGhhdCB0aGVyZSBhY3R1YWxseSBpcyBhIGJpbmFyeSBjaHVuawogICAgaWYgR0xURl9IRUFERVJfTEVOICsgY2h1bmtfMV9sZW5ndGggKyBHTFRGX0NIVU5LX0hFQURFUl9MRU4gPT0gbGVuZ3RoIHsKICAgICAgICBiYWlsISgibm8gYmluYXJ5IGNodW5rIik7CiAgICB9CgogICAgbGV0IGNodW5rXzJfbGVuZ3RoID0gdTMyX2FsaWduZWQocmVhZF91MzIoJm11dCByZWFkZXIpPyk7CiAgICBsZXQgY2h1bmtfMl90eXBlID0gcmVhZF91MzIoJm11dCByZWFkZXIpPzsKICAgIGlmIGNodW5rXzJfdHlwZSAhPSBHTFRGX0NIVU5LX1RZUEVfQklOIHsKICAgICAgICBiYWlsISgiZXhwZWN0ZWQgQklOIGFzIHNlY29uZCBjaHVuazoge2NodW5rXzJfdHlwZX0iKTsKICAgIH0KCiAgICBsZXQgY2h1bmtfMl9kYXRhX29mZnNldCA9CiAgICAgICAgR0xURl9IRUFERVJfTEVOICsgR0xURl9DSFVOS19IRUFERVJfTEVOICsgY2h1bmtfMV9sZW5ndGggKyBHTFRGX0NIVU5LX0hFQURFUl9MRU47CgogICAgaWYgY2h1bmtfMl9kYXRhX29mZnNldCArIGNodW5rXzJfbGVuZ3RoICE9IGxlbmd0aCB7CiAgICAgICAgYmFpbCEoImludmFsaWQgY2h1bmsgbGVuZ3Roczoge2xlbmd0aH0sIHtjaHVua18xX2xlbmd0aH0sIHtjaHVua18yX2xlbmd0aH0iKTsKICAgIH0KCiAgICBPayhTZWdtZW50IHsKICAgICAgICBvZmZzZXQ6IGNodW5rXzJfZGF0YV9vZmZzZXQgYXMgdXNpemUsCiAgICAgICAgbGVuOiBjaHVua18yX2xlbmd0aCBhcyB1c2l6ZSwKICAgIH0pCn0KCi8vLyBDb25zdHJ1Y3Qgb3dlciBvd24gYnVmOjpBY2Nlc3NvciBmcm9tIGEgZ2x0ZiBBY2Nlc3NvciBhbmQgY29ycmVzcG9uZGluZyBnbHRmIEJ1ZmZlclZpZXcKZm4gYnVpbGRfYWNjZXNzb3IoYWNjZXNzb3I6ICZnbHRmOjpBY2Nlc3NvcikgLT4gT3B0aW9uPEFjY2Vzc29yPiB7CiAgICBsZXQgYnVmdmlldyA9IGFjY2Vzc29yLnZpZXcoKT87CgogICAgbWF0Y2ggYnVmdmlldy5idWZmZXIoKS5zb3VyY2UoKSB7CiAgICAgICAgZ2x0Zjo6YnVmZmVyOjpTb3VyY2U6OkJpbiA9PiB7fQogICAgICAgIGdsdGY6OmJ1ZmZlcjo6U291cmNlOjpVcmkoXykgPT4gewogICAgICAgICAgICBsb2c6OmVycm9yISgiVVJJIGJ1ZmZlciBzb3VyY2Ugbm90IHN1cHBvcnRlZCIpOwogICAgICAgICAgICByZXR1cm4gTm9uZTsKICAgICAgICB9CiAgICB9CgogICAgbGV0IGVsZW1lbnRfdHlwZSA9IG1hdGNoIGFjY2Vzc29yLmRhdGFfdHlwZSgpIHsKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGF0YVR5cGU6OlU4ID0+IEVsZW1lbnRUeXBlOjpVOCwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGF0YVR5cGU6Okk4ID0+IEVsZW1lbnRUeXBlOjpJOCwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGF0YVR5cGU6OlUxNiA9PiBFbGVtZW50VHlwZTo6VTE2LAogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6STE2ID0+IEVsZW1lbnRUeXBlOjpJMTYsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRhdGFUeXBlOjpVMzIgPT4gRWxlbWVudFR5cGU6OlUzMiwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGF0YVR5cGU6OkYzMiA9PiBFbGVtZW50VHlwZTo6RjMyLAogICAgfTsKCiAgICBsZXQgY29tcG9uZW50X3NoYXBlID0gbWF0Y2ggYWNjZXNzb3IuZGltZW5zaW9ucygpIHsKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6U2NhbGFyID0+IENvbXBvbmVudFNoYXBlOjpTY2FsYXIsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRpbWVuc2lvbnM6OlZlYzIgPT4gQ29tcG9uZW50U2hhcGU6OlZlYzIsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRpbWVuc2lvbnM6OlZlYzMgPT4gQ29tcG9uZW50U2hhcGU6OlZlYzMsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRpbWVuc2lvbnM6OlZlYzQgPT4gQ29tcG9uZW50U2hhcGU6OlZlYzQsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRpbWVuc2lvbnM6Ok1hdDIgPT4gQ29tcG9uZW50U2hhcGU6Ok1hdDIsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRpbWVuc2lvbnM6Ok1hdDMgPT4gQ29tcG9uZW50U2hhcGU6Ok1hdDMsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRpbWVuc2lvbnM6Ok1hdDQgPT4gQ29tcG9uZW50U2hhcGU6Ok1hdDQsCiAgICB9OwoKICAgIGxldCBjb3VudCA9IGFjY2Vzc29yLmNvdW50KCk7CgogICAgU29tZShBY2Nlc3NvciB7CiAgICAgICAgc2VnbWVudDogU2VnbWVudCB7CiAgICAgICAgICAgIG9mZnNldDogYnVmdmlldy5vZmZzZXQoKSArIGFjY2Vzc29yLm9mZnNldCgpLAogICAgICAgICAgICBsZW46IGJ1ZnZpZXcubGVuZ3RoKCksCiAgICAgICAgfSwKICAgICAgICBzdHJpZGU6IGJ1ZnZpZXcuc3RyaWRlKCkubWFwKHxzfCBOb25aZXJvVTMyOjpuZXcocyBhcyB1MzIpLnVud3JhcCgpKSwKICAgICAgICBlbGVtZW50X3R5cGUsCiAgICAgICAgY29tcG9uZW50X3NoYXBlLAogICAgICAgIGNvdW50LAogICAgfSkKfQoAAAAAAAAAAGY3AAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+Q0AAAAAAAD8DQAAAAAAAAAAAAAAAPC/"
				],
				[
					20,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAABmNwAAdXNlIGNyYXRlOjp7CiAgICBNZXNoRmlsdGVyLAogICAgYnVmOjp7CiAgICAgICAgQWNjZXNzb3IsIEJ1ZmZlclNvdXJjZSwgQnVmZmVyU291cmNlSWQsIFNlZ21lbnQsIFNoYXJlZEJ1ZmZlclNvdXJjZVN0b3JlLAogICAgICAgIFVuY29tcHJlc3NlZEZpbGVCdWZmZXJTb3VyY2UsCiAgICB9LAogICAgbWVzaDo6ewogICAgICAgIEF0dHJpYnV0ZSwgQXR0cmlidXRlTWFwLCBDb21wb25lbnRTaGFwZSwgRWxlbWVudFR5cGUsIE1lc2hQcm94eSwgUHJpbWl0aXZlVG9wb2xvZ3ksCiAgICAgICAgU2hhcmVkTWVzaFByb3h5U3RvcmUsCiAgICB9LAp9Owp1c2UgZXhjZXNzOjpwcmVsdWRlOjoqOwp1c2UgZXlyZTo6e0NvbnRleHQsIENvbnRleHRDb21wYXQsIGJhaWwsIGV5cmV9Owp1c2UgZ2xhbTo6VmVjMzsKdXNlIGdsdGY6OkdsdGY7CnVzZSBtYWdpX2dlbXM6OntJdGVyVXRpbHMsIFJlc3VsdExvZ307CnVzZSBtYWdpX3NlOjpTTzM7CnVzZSBzY2VuZV90cmVlOjp7Q2hpbGRPZiwgSW5zdGFuY2VPZiwgVHJhbnNmb3JtM307CnVzZSBzaW1wbGVjczo6cHJlbHVkZTo6KjsKdXNlIHN0ZDo6ewogICAgY29sbGVjdGlvbnM6Okhhc2hNYXAsCiAgICBudW06Ok5vblplcm9VMzIsCiAgICBvcHM6OkRlcmVmLAogICAgcGF0aDo6e1BhdGgsIFBhdGhCdWZ9LAp9OwoKI1tkZXJpdmUoU2luZ2xldG9uKV0KcHViIHN0cnVjdCBBc3NldExpYnJhcnkgewogICAgYnVmZmVyX3NvdXJjZV9zdG9yZTogU2hhcmVkQnVmZmVyU291cmNlU3RvcmUsCiAgICBtZXNoX3Byb3h5X3N0b3JlOiBTaGFyZWRNZXNoUHJveHlTdG9yZSwKICAgIGFzc2V0czogSGFzaE1hcDxBc3NldFVpZCwgR2x0ZkFzc2V0PiwKCiAgICB0YXNrczogVmVjPFRhc2s+LAp9CgpwdWIgZW51bSBUYXNrIHsKICAgIExvYWRBc3NldChBc3NldFVpZCwgR2x0ZkFzc2V0RGVzY3JpcHRvciksCn0KCi8vLyBBIHVuaXF1ZSBpZGVudGlmaWVyIHVzZXItZGVmaW5lZCBpZGVudGlmaWVyIGZvciBhbiBhc3NldCBpbiB0aGUgbGlicmFyeS4KI1tkZXJpdmUoRGVidWcsIENsb25lLCBQYXJ0aWFsRXEsIEVxLCBIYXNoKV0KcHViIHN0cnVjdCBBc3NldFVpZChwdWIgU3RyaW5nKTsKCmltcGwgQXNzZXRVaWQgewogICAgcHViIGZuIGZyb21fc3RyKGlkOiAmc3RyKSAtPiBTZWxmIHsKICAgICAgICBTZWxmKGlkLnRvX3N0cmluZygpKQogICAgfQp9CgpzdHJ1Y3QgR2x0ZkFzc2V0IHsKICAgIGRlc2NyaXB0b3I6IEdsdGZBc3NldERlc2NyaXB0b3IsCiAgICBwcmVmYWJfZW50aXR5OiBFbnRpdHksCn0KCiNbZGVyaXZlKENsb25lLCBDb3B5LCBQYXJ0aWFsRXEsIEVxLCBIYXNoKV0KcHViIHN0cnVjdCBBc3NldElkKHB1YiBFbnRpdHkpOwoKaW1wbCBEZXJlZiBmb3IgQXNzZXRJZCB7CiAgICB0eXBlIFRhcmdldCA9IEVudGl0eTsKCiAgICBmbiBkZXJlZigmc2VsZikgLT4gJlNlbGY6OlRhcmdldCB7CiAgICAgICAgJnNlbGYuMAogICAgfQp9CgovLy8gTG9hZHMgYSBHTFRGIG5vZGUgYW5kIGl0cyBjaGlsZHJlbiBpbnRvIHRoZSBzY2VuZSBncmFwaC4gRWFjaCBub2RlIGlzIHJlbmRlcmVkIGJ5IG9uZSBHTFRGCi8vLyAibWVzaCIgd2hpY2ggaXRzZWxmIGNvbnNpc3RzIG9mIG9uZSBvciBtb3JlIEdMVEYgInByaW1pdGl2ZXMiIHdpdGggbWVzaCBkYXRhIGFuZCBtYXRlcmlhbC4KLy8vIFRoZSBhc3NldCBsb2FkZXIgY3JlYXRlcyBvbmUgZW50aXR5IHBlciBwcmltaXRpdmUuCiNbZGVyaXZlKENvbXBvbmVudCwgRGVidWcsIFBhcnRpYWxFcSwgRXEsIEhhc2gpXQpwdWIgc3RydWN0IEdsdGZBc3NldERlc2NyaXB0b3IgewogICAgLy8vIFBhdGggdG8gR0xURiBmaWxlIC0gY3VycmVudGx5IG9ubHkgKi5nbGIgaXMgc3VwcG9ydGVkCiAgICBwdWIgcGF0aDogUGF0aEJ1ZiwKCiAgICAvLy8gU2NlbmUgdG8gbG9hZC4gSWYgTm9uZSwgdGhlIGRlZmF1bHQgc2NlbmUgd2lsbCBiZSBsb2FkZWQuCiAgICBwdWIgc2NlbmU6IE9wdGlvbjxTdHJpbmc+LAoKICAgIC8vLyBOYW1lIG9mIEdMVEYgbm9kZSBpbiB0aGUgc2NlbmUgdG8gbG9hZC4gSWYgTm9uZSwgdGhlIGZ1bGwgc2NlbmUgd2lsbCBiZSBsb2FkZWQuCiAgICBwdWIgbm9kZTogT3B0aW9uPFN0cmluZz4sCn0KCiNbZGVyaXZlKENvbXBvbmVudCldCnN0cnVjdCBBc3NldFByZWZhYjsKCiNbZGVyaXZlKERlYnVnLCB0aGlzZXJyb3I6OkVycm9yKV0KcHViIGVudW0gQXNzZXRMaWJyYXJ5RXJyb3IgewogICAgI1tlcnJvcigiRmFpbGVkIHRvIGxvYWQgR0xURiBhc3NldCIpXQogICAgRmFpbGVkVG9Mb2FkR2x0ZihBc3NldFVpZCwgR2x0ZkFzc2V0RGVzY3JpcHRvciwgU3RyaW5nKSwKCiAgICAjW2Vycm9yKCJPdGhlciBlcnJvciIpXQogICAgT3RoZXIoQXNzZXRVaWQsIFN0cmluZyksCn0KCmltcGwgQXNzZXRMaWJyYXJ5IHsKICAgIHB1YiBmbiBuZXcoCiAgICAgICAgYnVmZmVyX3NvdXJjZV9zdG9yZTogU2hhcmVkQnVmZmVyU291cmNlU3RvcmUsCiAgICAgICAgbWVzaF9wcm94eV9zdG9yZTogU2hhcmVkTWVzaFByb3h5U3RvcmUsCiAgICApIC0+IFNlbGYgewogICAgICAgIEFzc2V0TGlicmFyeSB7CiAgICAgICAgICAgIGJ1ZmZlcl9zb3VyY2Vfc3RvcmUsCiAgICAgICAgICAgIG1lc2hfcHJveHlfc3RvcmUsCiAgICAgICAgICAgIGFzc2V0czogSGFzaE1hcDo6bmV3KCksCiAgICAgICAgICAgIHRhc2tzOiBWZWM6Om5ldygpLAogICAgICAgIH0KICAgIH0KCiAgICBwdWIgZm4gbG9hZF9nbHRmKCZtdXQgc2VsZiwgdWlkOiAmQXNzZXRVaWQsIGRlc2NyaXB0b3I6IEdsdGZBc3NldERlc2NyaXB0b3IpIHsKICAgICAgICBzZWxmLnRhc2tzLnB1c2goVGFzazo6TG9hZEFzc2V0KHVpZC5jbG9uZSgpLCBkZXNjcmlwdG9yKSk7CiAgICB9CgogICAgcHViKGNyYXRlKSBmbiBwcm9jZXNzX3Rhc2tzKCZtdXQgc2VsZiwgY21kOiAmbXV0IENvbW1hbmRzKSB7CiAgICAgICAgbGV0IG11dCB0YXNrcyA9IFZlYzo6bmV3KCk7CiAgICAgICAgc3RkOjptZW06OnN3YXAoJm11dCBzZWxmLnRhc2tzLCAmbXV0IHRhc2tzKTsKICAgICAgICBmb3IgdGFzayBpbiB0YXNrcy5kcmFpbiguLikgewogICAgICAgICAgICBtYXRjaCB0YXNrIHsKICAgICAgICAgICAgICAgIFRhc2s6OkxvYWRBc3NldCh1aWQsIGRlc2NyaXB0b3IpID0+IHsKICAgICAgICAgICAgICAgICAgICBzZWxmLmxvYWRfZ2x0Zl9pbXBsKHVpZC5jbG9uZSgpLCBkZXNjcmlwdG9yLCBjbWQpLm9rX2xvZygpOwogICAgICAgICAgICAgICAgICAgIGxvZzo6ZGVidWchKCJsb2FkZWQgYXNzZXQge3VpZDo/fSIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIGZuIGxvYWRfZ2x0Zl9pbXBsKAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICB1aWQ6IEFzc2V0VWlkLAogICAgICAgIGRlc2NyaXB0b3I6IEdsdGZBc3NldERlc2NyaXB0b3IsCiAgICAgICAgY21kOiAmbXV0IENvbW1hbmRzLAogICAgKSAtPiBSZXN1bHQ8KCksIEFzc2V0TGlicmFyeUVycm9yPiB7CiAgICAgICAgaWYgc2VsZi5hc3NldHMuY29udGFpbnNfa2V5KCZ1aWQpIHsKICAgICAgICAgICAgcmV0dXJuIE9rKCgpKTsKICAgICAgICB9CgogICAgICAgIGxldCBwcmVmYWJfZW50aXR5ID0gY21kLnNwYXduKEFzc2V0UHJlZmFiKS5pZCgpOwoKICAgICAgICBtYXRjaCBzZWxmLnNwYXduX2dsdGZfbm9kZShwcmVmYWJfZW50aXR5LCAmZGVzY3JpcHRvciwgY21kKSB7CiAgICAgICAgICAgIE9rKF8pID0+IHsKICAgICAgICAgICAgICAgIHNlbGYuYXNzZXRzLmluc2VydCgKICAgICAgICAgICAgICAgICAgICB1aWQsCiAgICAgICAgICAgICAgICAgICAgR2x0ZkFzc2V0IHsKICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRvciwKICAgICAgICAgICAgICAgICAgICAgICAgcHJlZmFiX2VudGl0eSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgICAgIE9rKCgpKQogICAgICAgICAgICB9CiAgICAgICAgICAgIEVycihlcnIpID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBFcnIoQXNzZXRMaWJyYXJ5RXJyb3I6OkZhaWxlZFRvTG9hZEdsdGYoCiAgICAgICAgICAgICAgICAgICAgdWlkLAogICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0b3IsCiAgICAgICAgICAgICAgICAgICAgZXJyLnRvX3N0cmluZygpLAogICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CgogICAgcHViIGZuIGluc3RhbnRpYXRlPCdsLCAnZiwgJ3EsICdjPigKICAgICAgICAmJ2wgbXV0IHNlbGYsCiAgICAgICAgdWlkOiAmQXNzZXRVaWQsCiAgICAgICAgY21kOiAmJ2MgbXV0IENvbW1hbmRzPCdmLCAncT4sCiAgICApIC0+IGV5cmU6OlJlc3VsdDxFbnRpdHlDb21tYW5kczwnZiwgJ3EsICdjPj4gewogICAgICAgIGxldCBhc3NldCA9IHNlbGYKICAgICAgICAgICAgLmFzc2V0cwogICAgICAgICAgICAuZ2V0KHVpZCkKICAgICAgICAgICAgLm9rX29yX2Vsc2UofHwgZXlyZSEoInVua25vd24gYXNzZXQ6IHt1aWQ6P30iKSk/OwogICAgICAgIGxldCBtdXQgaW5zdCA9IGNtZC5lbnRpdHkoYXNzZXQucHJlZmFiX2VudGl0eSkuY2xvbmUoKTsKICAgICAgICBpbnN0LnJlbW92ZTo6PEFzc2V0UHJlZmFiPigpOyAvLyBUT0RPIHVzZSBhIGNvcHkgZmlsdGVyPwogICAgICAgIE9rKGluc3QpCiAgICB9CgogICAgZm4gc3Bhd25fZ2x0Zl9ub2RlKAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBlbnRpdHk6IEVudGl0eSwKICAgICAgICBkZXNjcmlwdG9yOiAmR2x0ZkFzc2V0RGVzY3JpcHRvciwKICAgICAgICBjbWQ6ICZtdXQgQ29tbWFuZHMsCiAgICApIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCBwYXRoID0gJmRlc2NyaXB0b3IucGF0aDsKCiAgICAgICAgbGV0IGdsdGYgPSBHbHRmOjpvcGVuKHBhdGgpLndpdGhfY29udGV4dCh8fCBmb3JtYXQhKCJlcnJvciBsb2FkaW5nIGZpbGU6IHtwYXRoOj99IikpPzsKCiAgICAgICAgLy8gZmluZCBzY2VuZQogICAgICAgIGxldCBzY2VuZSA9IG1hdGNoIGRlc2NyaXB0b3Iuc2NlbmUuYXNfcmVmKCkgewogICAgICAgICAgICBTb21lKHNjZW5lX25hbWUpID0+IGdsdGYKICAgICAgICAgICAgICAgIC5zY2VuZXMoKQogICAgICAgICAgICAgICAgLmZpbmQofHNjZW5lfCBzY2VuZS5uYW1lKCkgPT0gU29tZSgmc2NlbmVfbmFtZSkpCiAgICAgICAgICAgICAgICAud2l0aF9jb250ZXh0KHx8IHsKICAgICAgICAgICAgICAgICAgICBsZXQgc2NlbmVzID0gZ2x0Zi5zY2VuZXMoKS5maWx0ZXJfbWFwKHxzY2VuZXwgc2NlbmUubmFtZSgpKS5jb2xsZWN0Ojo8VmVjPF8+PigpOwogICAgICAgICAgICAgICAgICAgIGZvcm1hdCEoImNvdWxkIG5vdCBmaW5kIHNjZW5lIHtzY2VuZV9uYW1lOj99IGluIGdsdGYgZmlsZSB7cGF0aDo/fS5cbkF2YWlsYWJsZSBzY2VuZXM6IHs6P30iLCBzY2VuZXMpCiAgICAgICAgICAgICAgICB9KT8sCiAgICAgICAgICAgIE5vbmUgPT4gZ2x0ZgogICAgICAgICAgICAgICAgLnNjZW5lcygpCiAgICAgICAgICAgICAgICAuc2luZ2xlKCkKICAgICAgICAgICAgICAgIC53aXRoX2NvbnRleHQofHwgZm9ybWF0ISgibm8gZGVmYXVsdCBzY2VuZSBpbiBnbHRmIGZpbGUge3BhdGg6P30iKSk/LAogICAgICAgIH07CgogICAgICAgIC8vIGZpbmQgbm9kZSBpbiBzY2VuZQogICAgICAgIGxldCBub2RlID0gbWF0Y2ggZGVzY3JpcHRvci5ub2RlLmFzX3JlZigpIHsKICAgICAgICAgICAgU29tZShub2RlX25hbWUpID0+IHNjZW5lCiAgICAgICAgICAgICAgICAubm9kZXMoKQogICAgICAgICAgICAgICAgLmZpbmQofG5vZGV8IG5vZGUubmFtZSgpID09IFNvbWUoJm5vZGVfbmFtZSkpCiAgICAgICAgICAgICAgICAud2l0aF9jb250ZXh0KHx8IHsKICAgICAgICAgICAgICAgICAgICBsZXQgbm9kZXMgPSBzY2VuZQogICAgICAgICAgICAgICAgICAgICAgICAubm9kZXMoKQogICAgICAgICAgICAgICAgICAgICAgICAuZmlsdGVyX21hcCh8bm9kZXwgbm9kZS5uYW1lKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIC5jb2xsZWN0Ojo8VmVjPF8+PigpOwogICAgICAgICAgICAgICAgICAgIGZvcm1hdCEoCiAgICAgICAgICAgICAgICAgICAgICAgICJjb3VsZCBub3QgZmluZCBub2RlIHtub2RlX25hbWU6P30gaW4gc2NlbmUgezo/fSBnbHRmIGZpbGUge3BhdGg6P30uXG5BdmFpbGFibGUgbm9kZXM6IHs6P30iLAogICAgICAgICAgICAgICAgICAgICAgICBzY2VuZS5uYW1lKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG5vZGVzCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgfSk/LAogICAgICAgICAgICBOb25lID0+IHNjZW5lLm5vZGVzKCkuc2luZ2xlKCkud2l0aF9jb250ZXh0KHx8IHsKICAgICAgICAgICAgICAgIGZvcm1hdCEoCiAgICAgICAgICAgICAgICAgICAgIm5vIGRlZmF1bHQgbm9kZSBpbiBzY2VuZSB7Oj99IGdsdGYgZmlsZSB7cGF0aDo/fSIsCiAgICAgICAgICAgICAgICAgICAgc2NlbmUubmFtZSgpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIH0pPywKICAgICAgICB9OwoKICAgICAgICAvLyBnZXQgdGhlIEJJTiBjaHVuayBvZiB0aGUgZ2x0ZiBmaWxlIGFzIGEgc2VnbWVudAogICAgICAgIGxldCBmaWxlX2Jpbl9zZWcgPSBnbHRmX2Jpbl9zZWdtZW50KHBhdGgpCiAgICAgICAgICAgIC53aXRoX2NvbnRleHQofHwgZm9ybWF0ISgiY291bGQgbm90IGZpbmQgQklOIGNodW5rIGluIGdsdGYgZmlsZSB7cGF0aDo/fSIpKT87CgogICAgICAgIC8vIGNyZWF0ZSBidWZmZXIgc291cmNlIGVudGl0eQogICAgICAgIGxldCBidWZmZXJfc291cmNlX2lkID0KICAgICAgICAgICAgc2VsZi5idWZmZXJfc291cmNlX3N0b3JlCiAgICAgICAgICAgICAgICAubG9jaygpCiAgICAgICAgICAgICAgICAuaW5zZXJ0KEJ1ZmZlclNvdXJjZTo6VW5jb21wcmVzc2VkRmlsZSgKICAgICAgICAgICAgICAgICAgICBVbmNvbXByZXNzZWRGaWxlQnVmZmVyU291cmNlOjpuZXcocGF0aCwgZmlsZV9iaW5fc2VnKSwKICAgICAgICAgICAgICAgICkpOwoKICAgICAgICBzZWxmLnNwYXduX2dsdGZfbm9kZV9pbXBsKG5vZGUsIGJ1ZmZlcl9zb3VyY2VfaWQsIGVudGl0eSwgY21kKT87CgogICAgICAgIE9rKCgpKQogICAgfQoKICAgIGZuIHNwYXduX2dsdGZfbm9kZV9pbXBsKAogICAgICAgICZtdXQgc2VsZiwKICAgICAgICBub2RlOiBnbHRmOjpOb2RlPCdfPiwKICAgICAgICBidWZmZXJfc291cmNlX2lkOiBCdWZmZXJTb3VyY2VJZCwKICAgICAgICBlaWQ6IEVudGl0eSwKICAgICAgICBjbWQ6ICZtdXQgQ29tbWFuZHMsCiAgICApIC0+IGV5cmU6OlJlc3VsdDwoKT4gewogICAgICAgIGxldCBtdXQgZW50aXR5ID0gY21kCiAgICAgICAgICAgIC5lbnRpdHkoZWlkKQogICAgICAgICAgICAuYW5kX3NldChOYW1lOjpuZXcobm9kZS5uYW1lKCkudW53cmFwX29yKCIiKS50b19vd25lZCgpKSk7CgogICAgICAgIGxldCAocG9zLCByb3QsIHNjbCkgPSBub2RlLnRyYW5zZm9ybSgpLmRlY29tcG9zZWQoKTsKICAgICAgICBlbnRpdHkuc2V0KAogICAgICAgICAgICBUcmFuc2Zvcm0zOjppZGVudGl0eSgpCiAgICAgICAgICAgICAgICAud2l0aF90cmFuc2xhdGlvbihWZWMzOjpmcm9tX2FycmF5KHBvcykpCiAgICAgICAgICAgICAgICAud2l0aF9yb3RhdGlvbihTTzM6OmZyb21feHl6d19hcnJheShyb3QpKQogICAgICAgICAgICAgICAgLndpdGhfc2NhbGUoVmVjMzo6ZnJvbV9hcnJheShzY2wpKSwKICAgICAgICApOwoKICAgICAgICBpZiBsZXQgU29tZShtZXNoKSA9IG5vZGUubWVzaCgpIHsKICAgICAgICAgICAgbGV0IG11dCBwYXJ0cyA9IFZlYzo6bmV3KCk7CgogICAgICAgICAgICBmb3IgcHJpbWl0aXZlIGluIG1lc2gucHJpbWl0aXZlcygpIHsKICAgICAgICAgICAgICAgIGxldCBtZXNoX3Byb3h5ID0gbG9hZF9nbHRmX3ByaW1pdGl2ZShidWZmZXJfc291cmNlX2lkLCBwcmltaXRpdmUpPzsKICAgICAgICAgICAgICAgIGxldCBtZXNoX3Byb3h5X2lkID0gc2VsZi5tZXNoX3Byb3h5X3N0b3JlLmxvY2soKS5pbnNlcnQobWVzaF9wcm94eSk7CiAgICAgICAgICAgICAgICBwYXJ0cy5wdXNoKG1lc2hfcHJveHlfaWQpOwogICAgICAgICAgICB9CgogICAgICAgICAgICBsb2c6OmRlYnVnISgiTG9hZGVkIG1lc2ggezo/fSB3aXRoIHt9IHBhcnQocykiLCBtZXNoLm5hbWUoKSwgcGFydHMubGVuKCkpOwoKICAgICAgICAgICAgZW50aXR5LnNldChNZXNoRmlsdGVyIHsgcGFydHMgfSk7CiAgICAgICAgfQoKICAgICAgICAvLyByZWN1cnNlIG92ZXIgY2hpbGRyZW4KICAgICAgICBmb3IgY2hpbGQgaW4gbm9kZS5jaGlsZHJlbigpIHsKICAgICAgICAgICAgbGV0IGNoaWxkX2VudGl0eSA9IGNtZC5zcGF3bigoKENoaWxkT2YsIGVpZCksKSkuaWQoKTsKICAgICAgICAgICAgc2VsZi5zcGF3bl9nbHRmX25vZGVfaW1wbChjaGlsZCwgYnVmZmVyX3NvdXJjZV9pZCwgY2hpbGRfZW50aXR5LCBjbWQpPzsKICAgICAgICB9CgogICAgICAgIE9rKCgpKQogICAgfQp9CgpmbiBsb2FkX2dsdGZfcHJpbWl0aXZlKAogICAgYnVmZmVyX3NvdXJjZV9pZDogQnVmZmVyU291cmNlSWQsCiAgICBwcmltaXRpdmU6IGdsdGY6OlByaW1pdGl2ZTwnXz4sCikgLT4gZXlyZTo6UmVzdWx0PE1lc2hQcm94eT4gewogICAgbGV0IHByaW1pdGl2ZV90b3BvbG9neSA9IG1hdGNoIHByaW1pdGl2ZS5tb2RlKCkgewogICAgICAgIGdsdGY6Om1lc2g6Ok1vZGU6OlBvaW50cyA9PiBQcmltaXRpdmVUb3BvbG9neTo6UG9pbnRMaXN0LAogICAgICAgIGdsdGY6Om1lc2g6Ok1vZGU6OkxpbmVzID0+IFByaW1pdGl2ZVRvcG9sb2d5OjpMaW5lTGlzdCwKICAgICAgICBnbHRmOjptZXNoOjpNb2RlOjpUcmlhbmdsZXMgPT4gUHJpbWl0aXZlVG9wb2xvZ3k6OlRyaWFuZ2xlTGlzdCwKICAgICAgICAvLyBtZXNoOjpNb2RlOjpMaW5lU3RyaXAgPT4gUHJpbWl0aXZlVG9wb2xvZ3k6OkxpbmVTdHJpcCwKICAgICAgICAvLyBtZXNoOjpNb2RlOjpUcmlhbmdsZVN0cmlwID0+IFByaW1pdGl2ZVRvcG9sb2d5OjpUcmlhbmdsZVN0cmlwLAogICAgICAgIC8vIG1lc2g6Ok1vZGU6OlRyaWFuZ2xlRmFuID0+IFByaW1pdGl2ZVRvcG9sb2d5OjpUcmlhbmdsZUZhbiwKICAgICAgICBfID0+IHsKICAgICAgICAgICAgYmFpbCEoInVuc3VwcG9ydGVkIHByaW1pdGl2ZSBtb2RlOiB7Oj99IiwgcHJpbWl0aXZlLm1vZGUoKSk7CiAgICAgICAgfQogICAgfTsKCiAgICBsZXQgaW5kaWNlcyA9IG1hdGNoIHByaW1pdGl2ZS5pbmRpY2VzKCkgewogICAgICAgIFNvbWUoZ2xhY2MpID0+IHsKICAgICAgICAgICAgbGV0IFNvbWUoaW5kaWNlcykgPSBidWlsZF9hY2Nlc3NvcigmZ2xhY2MpIGVsc2UgewogICAgICAgICAgICAgICAgYmFpbCEoImZhaWxlZCB0byBwYXJzZSBpbmRpY2VzIGFjY2Vzc29yOiB7Z2xhY2M6P30iKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgU29tZShpbmRpY2VzKQogICAgICAgIH0KICAgICAgICBOb25lID0+IE5vbmUsCiAgICB9OwoKICAgIGxldCBtdXQgYXR0cmlidXRlcyA9IEF0dHJpYnV0ZU1hcDo6bmV3KCk7CgogICAgZm9yIChzZW0sIGdsYWNjKSBpbiBwcmltaXRpdmUuYXR0cmlidXRlcygpIHsKICAgICAgICBsZXQgU29tZShhY2MpID0gYnVpbGRfYWNjZXNzb3IoJmdsYWNjKSBlbHNlIHsKICAgICAgICAgICAgYmFpbCEoIkZhaWxlZCB0byBwYXJzZSBhdHRyaWJ1dGUgYWNjZXNzb3I6IHtnbGFjYzo/fSIpOwogICAgICAgIH07CgogICAgICAgIGxldCBhdHRyaWJ1dGUgPSBtYXRjaCBzZW0gewogICAgICAgICAgICBnbHRmOjpTZW1hbnRpYzo6UG9zaXRpb25zID0+IEF0dHJpYnV0ZTo6UG9zaXRpb25zLAogICAgICAgICAgICBnbHRmOjpTZW1hbnRpYzo6Tm9ybWFscyA9PiBBdHRyaWJ1dGU6Ok5vcm1hbHMsCiAgICAgICAgICAgIGdsdGY6OlNlbWFudGljOjpDb2xvcnMoXykgPT4gQXR0cmlidXRlOjpDb2xvcnMsCiAgICAgICAgICAgIGdsdGY6OlNlbWFudGljOjpUZXhDb29yZHMoXykgPT4gQXR0cmlidXRlOjpUZXhDb29yZHMsCiAgICAgICAgICAgIF8gPT4gewogICAgICAgICAgICAgICAgbG9nOjp3YXJuISgidW5zdXBwb3J0ZWQgYXR0cmlidXRlOiB7Oj99Iiwgc2VtKTsKICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgbG9nOjp0cmFjZSEoImF0dHJpYnV0ZSB7YXR0cmlidXRlOj99OiB7YWNjOj99Iik7CgogICAgICAgIGF0dHJpYnV0ZXMuaW5zZXJ0KGF0dHJpYnV0ZSwgYWNjKTsKICAgIH0KCiAgICBsZXQgYW1hID0gTWVzaFByb3h5OjpuZXcoYnVmZmVyX3NvdXJjZV9pZCwgcHJpbWl0aXZlX3RvcG9sb2d5LCBpbmRpY2VzLCBhdHRyaWJ1dGVzKT87CgogICAgT2soYW1hKQp9CgpmbiBnbHRmX2Jpbl9zZWdtZW50KHBhdGg6ICZQYXRoKSAtPiBleXJlOjpSZXN1bHQ8U2VnbWVudD4gewogICAgdXNlIHN0ZDo6aW86OntSZWFkLCBTZWVrfTsKCiAgICBmbiByZWFkX3UzMihyZWFkZXI6ICZtdXQgc3RkOjppbzo6QnVmUmVhZGVyPHN0ZDo6ZnM6OkZpbGU+KSAtPiBleXJlOjpSZXN1bHQ8dTMyPiB7CiAgICAgICAgbGV0IG11dCBidWYgPSBbMHU4OyA0XTsKICAgICAgICByZWFkZXIucmVhZF9leGFjdCgmbXV0IGJ1Zik/OwogICAgICAgIE9rKHUzMjo6ZnJvbV9sZV9ieXRlcyhidWYpKQogICAgfQoKICAgIGZuIHUzMl9hbGlnbmVkKGxlbjogdTMyKSAtPiB1MzIgewogICAgICAgIChsZW4gKyAzKSAmICEzCiAgICB9CgogICAgY29uc3QgR0xURl9NQUdJQzogdTMyID0gMHg0NjU0NkM2NzsKICAgIGNvbnN0IEdMVEZfVkVSU0lPTjogdTMyID0gMjsKICAgIGNvbnN0IEdMVEZfQ0hVTktfVFlQRV9KU09OOiB1MzIgPSAweDRFNEY1MzRBOwogICAgY29uc3QgR0xURl9DSFVOS19UWVBFX0JJTjogdTMyID0gMHgwMDRFNDk0MjsKICAgIGNvbnN0IEdMVEZfSEVBREVSX0xFTjogdTMyID0gMTI7CiAgICBjb25zdCBHTFRGX0NIVU5LX0hFQURFUl9MRU46IHUzMiA9IDg7CgogICAgbGV0IGZpbGUgPSBzdGQ6OmZzOjpGaWxlOjpvcGVuKHBhdGgpPzsKICAgIGxldCBtdXQgcmVhZGVyID0gc3RkOjppbzo6QnVmUmVhZGVyOjpuZXcoZmlsZSk7CgogICAgbGV0IG1hZ2ljID0gcmVhZF91MzIoJm11dCByZWFkZXIpPzsKICAgIGlmIG1hZ2ljICE9IEdMVEZfTUFHSUMgewogICAgICAgIGJhaWwhKCJpbnZhbGlkIEdMQiBtYWdpYyBudW1iZXI6IHttYWdpYzowOFh9Iik7CiAgICB9CgogICAgbGV0IHZlcnNpb24gPSByZWFkX3UzMigmbXV0IHJlYWRlcik/OwogICAgaWYgdmVyc2lvbiAhPSBHTFRGX1ZFUlNJT04gewogICAgICAgIGJhaWwhKCJ1bnN1cHBvcnRlZCBHTEIgdmVyc2lvbjoge3ZlcnNpb259Iik7CiAgICB9CgogICAgbGV0IGxlbmd0aCA9IHJlYWRfdTMyKCZtdXQgcmVhZGVyKT87CgogICAgbGV0IGNodW5rXzFfbGVuZ3RoID0gdTMyX2FsaWduZWQocmVhZF91MzIoJm11dCByZWFkZXIpPyk7CiAgICBsZXQgY2h1bmtfMV90eXBlID0gcmVhZF91MzIoJm11dCByZWFkZXIpPzsKICAgIGlmIGNodW5rXzFfdHlwZSAhPSBHTFRGX0NIVU5LX1RZUEVfSlNPTiB7CiAgICAgICAgYmFpbCEoImV4cGVjdGVkIEpTT04gYXMgZmlyc3QgY2h1bms6IHtjaHVua18xX3R5cGV9Iik7CiAgICB9CgogICAgLy8gY2h1bmsgbGVuZ3RoIGRvZXMgbm90IGluY2x1ZGUgdGhlIDggYnl0ZXMgZm9yIGNodW5rIGxlbmd0aCBhbmQgY2h1bmsgdHlwZQogICAgcmVhZGVyLnNlZWsoc3RkOjppbzo6U2Vla0Zyb206OkN1cnJlbnQoY2h1bmtfMV9sZW5ndGggYXMgaTY0KSk/OwoKICAgIC8vIG1ha2Ugc3VyZSB0aGF0IHRoZXJlIGFjdHVhbGx5IGlzIGEgYmluYXJ5IGNodW5rCiAgICBpZiBHTFRGX0hFQURFUl9MRU4gKyBjaHVua18xX2xlbmd0aCArIEdMVEZfQ0hVTktfSEVBREVSX0xFTiA9PSBsZW5ndGggewogICAgICAgIGJhaWwhKCJubyBiaW5hcnkgY2h1bmsiKTsKICAgIH0KCiAgICBsZXQgY2h1bmtfMl9sZW5ndGggPSB1MzJfYWxpZ25lZChyZWFkX3UzMigmbXV0IHJlYWRlcik/KTsKICAgIGxldCBjaHVua18yX3R5cGUgPSByZWFkX3UzMigmbXV0IHJlYWRlcik/OwogICAgaWYgY2h1bmtfMl90eXBlICE9IEdMVEZfQ0hVTktfVFlQRV9CSU4gewogICAgICAgIGJhaWwhKCJleHBlY3RlZCBCSU4gYXMgc2Vjb25kIGNodW5rOiB7Y2h1bmtfMl90eXBlfSIpOwogICAgfQoKICAgIGxldCBjaHVua18yX2RhdGFfb2Zmc2V0ID0KICAgICAgICBHTFRGX0hFQURFUl9MRU4gKyBHTFRGX0NIVU5LX0hFQURFUl9MRU4gKyBjaHVua18xX2xlbmd0aCArIEdMVEZfQ0hVTktfSEVBREVSX0xFTjsKCiAgICBpZiBjaHVua18yX2RhdGFfb2Zmc2V0ICsgY2h1bmtfMl9sZW5ndGggIT0gbGVuZ3RoIHsKICAgICAgICBiYWlsISgiaW52YWxpZCBjaHVuayBsZW5ndGhzOiB7bGVuZ3RofSwge2NodW5rXzFfbGVuZ3RofSwge2NodW5rXzJfbGVuZ3RofSIpOwogICAgfQoKICAgIE9rKFNlZ21lbnQgewogICAgICAgIG9mZnNldDogY2h1bmtfMl9kYXRhX29mZnNldCBhcyB1c2l6ZSwKICAgICAgICBsZW46IGNodW5rXzJfbGVuZ3RoIGFzIHVzaXplLAogICAgfSkKfQoKLy8vIENvbnN0cnVjdCBvd2VyIG93biBidWY6OkFjY2Vzc29yIGZyb20gYSBnbHRmIEFjY2Vzc29yIGFuZCBjb3JyZXNwb25kaW5nIGdsdGYgQnVmZmVyVmlldwpmbiBidWlsZF9hY2Nlc3NvcihhY2Nlc3NvcjogJmdsdGY6OkFjY2Vzc29yKSAtPiBPcHRpb248QWNjZXNzb3I+IHsKICAgIGxldCBidWZ2aWV3ID0gYWNjZXNzb3IudmlldygpPzsKCiAgICBtYXRjaCBidWZ2aWV3LmJ1ZmZlcigpLnNvdXJjZSgpIHsKICAgICAgICBnbHRmOjpidWZmZXI6OlNvdXJjZTo6QmluID0+IHt9CiAgICAgICAgZ2x0Zjo6YnVmZmVyOjpTb3VyY2U6OlVyaShfKSA9PiB7CiAgICAgICAgICAgIGxvZzo6ZXJyb3IhKCJVUkkgYnVmZmVyIHNvdXJjZSBub3Qgc3VwcG9ydGVkIik7CiAgICAgICAgICAgIHJldHVybiBOb25lOwogICAgICAgIH0KICAgIH0KCiAgICBsZXQgZWxlbWVudF90eXBlID0gbWF0Y2ggYWNjZXNzb3IuZGF0YV90eXBlKCkgewogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6VTggPT4gRWxlbWVudFR5cGU6OlU4LAogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6STggPT4gRWxlbWVudFR5cGU6Okk4LAogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6VTE2ID0+IEVsZW1lbnRUeXBlOjpVMTYsCiAgICAgICAgZ2x0Zjo6YWNjZXNzb3I6OkRhdGFUeXBlOjpJMTYgPT4gRWxlbWVudFR5cGU6OkkxNiwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGF0YVR5cGU6OlUzMiA9PiBFbGVtZW50VHlwZTo6VTMyLAogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEYXRhVHlwZTo6RjMyID0+IEVsZW1lbnRUeXBlOjpGMzIsCiAgICB9OwoKICAgIGxldCBjb21wb25lbnRfc2hhcGUgPSBtYXRjaCBhY2Nlc3Nvci5kaW1lbnNpb25zKCkgewogICAgICAgIGdsdGY6OmFjY2Vzc29yOjpEaW1lbnNpb25zOjpTY2FsYXIgPT4gQ29tcG9uZW50U2hhcGU6OlNjYWxhciwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6VmVjMiA9PiBDb21wb25lbnRTaGFwZTo6VmVjMiwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6VmVjMyA9PiBDb21wb25lbnRTaGFwZTo6VmVjMywKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6VmVjNCA9PiBDb21wb25lbnRTaGFwZTo6VmVjNCwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6TWF0MiA9PiBDb21wb25lbnRTaGFwZTo6TWF0MiwKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6TWF0MyA9PiBDb21wb25lbnRTaGFwZTo6TWF0MywKICAgICAgICBnbHRmOjphY2Nlc3Nvcjo6RGltZW5zaW9uczo6TWF0NCA9PiBDb21wb25lbnRTaGFwZTo6TWF0NCwKICAgIH07CgogICAgbGV0IGNvdW50ID0gYWNjZXNzb3IuY291bnQoKTsKCiAgICBTb21lKEFjY2Vzc29yIHsKICAgICAgICBzZWdtZW50OiBTZWdtZW50IHsKICAgICAgICAgICAgb2Zmc2V0OiBidWZ2aWV3Lm9mZnNldCgpICsgYWNjZXNzb3Iub2Zmc2V0KCksCiAgICAgICAgICAgIGxlbjogYnVmdmlldy5sZW5ndGgoKSwKICAgICAgICB9LAogICAgICAgIHN0cmlkZTogYnVmdmlldy5zdHJpZGUoKS5tYXAofHN8IE5vblplcm9VMzI6Om5ldyhzIGFzIHUzMikudW53cmFwKCkpLAogICAgICAgIGVsZW1lbnRfdHlwZSwKICAgICAgICBjb21wb25lbnRfc2hhcGUsCiAgICAgICAgY291bnQsCiAgICB9KQp9CgAAAAAAAAAATzcAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAA+Q0AAAAAAAD8DQAAAAAAAAAAAAAAAPC/"
				]
			]
		},
		{
			"file": "/I/Ikabur/candy/crates/candy/examples/cactus.rs",
			"settings":
			{
				"buffer_size": 2793,
				"encoding": "UTF-8",
				"line_ending": "Unix"
			},
			"undo_stack":
			[
				[
					3,
					1,
					"toggle_comment",
					{
						"block": false
					},
					"BQAAAEgGAAAAAAAASwYAAAAAAAAAAAAAMAYAAAAAAAAzBgAAAAAAAAAAAAAXBgAAAAAAABoGAAAAAAAAAAAAALkFAAAAAAAAvAUAAAAAAAAAAAAAmgUAAAAAAACdBQAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAASwYAAAAAAAChBQAAAAAAAAAAAAAAAPC/"
				],
				[
					5,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAB0BgAAdXNlIGNhbmR5Ojp7Q2FtZXJhLCBDYW5keU1vY2NhLCBHbHRmTm9kZX07CnVzZSBjYW5keV9wcmltczo6e0NhbWVyYUxpbmssIEltYWdlTG9jYXRpb24sIEltYWdlU2hhcGUsIFdpbmRvd0RlZiwgV2luZG93TGF5b3V0fTsKdXNlIGZvdW5kYXRpb246OlRpbWVNb2NjYTsKdXNlIGdsYW06OlZlYzM7CnVzZSBzaW1wbGVjczo6cHJlbHVkZTo6KjsKdXNlIHN0ZDo6cGF0aDo6UGF0aEJ1ZjsKCmZuIG1haW4oKSAtPiBleXJlOjpSZXN1bHQ8KCk+IHsKICAgIGVudl9sb2dnZXI6OmluaXQoKTsKICAgIGxldCBtdXQgYXBwID0gY2FuZHk6OkFwcDo6bmV3KCk7CiAgICBhcHAubG9hZF9tb2NjYTo6PENhbmR5RXhhbXBsZUNhY3R1c01vY2NhPigpOwogICAgYXBwLnJ1bigpCn0KCnN0cnVjdCBDYW5keUV4YW1wbGVDYWN0dXNNb2NjYSB7fQoKaW1wbCBNb2NjYSBmb3IgQ2FuZHlFeGFtcGxlQ2FjdHVzTW9jY2EgewogICAgZm4gbG9hZChtdXQgZGVwczogTW9jY2FEZXBzKSB7CiAgICAgICAgZGVwcy5kZXBlbmRzX29uOjo8VGltZU1vY2NhPigpOwogICAgICAgIGRlcHMuZGVwZW5kc19vbjo6PENhbmR5TW9jY2E+KCk7CiAgICB9CgogICAgZm4gc3RhcnQod29ybGQ6ICZtdXQgV29ybGQpIC0+IFNlbGYgewogICAgICAgIGxldCBjYW0gPSB3b3JsZAogICAgICAgICAgICAuc3Bhd24oQ2FtZXJhOjpsb29rX2F0X3p1cCgKICAgICAgICAgICAgICAgIFZlYzM6Om5ldygxLjksIC00LjIsIDMuKSwKICAgICAgICAgICAgICAgIFZlYzM6Om5ldygwLiwgMC4sIDAuKSwKICAgICAgICAgICAgKSkKICAgICAgICAgICAgLmlkKCk7CgogICAgICAgIGxldCBfd2luID0gd29ybGQKICAgICAgICAgICAgLnNwYXduKCgKICAgICAgICAgICAgICAgIFdpbmRvd0RlZiB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJDYW5keTogQ2FjdHVzIi50b19zdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICBsYXlvdXQ6IFdpbmRvd0xheW91dCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlOiBJbWFnZVNoYXBlOjpmcm9tX3dpZHRoX2hlaWdodCgxOTIwLiwgMTA4MC4pLAogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogSW1hZ2VMb2NhdGlvbjo6ZnJvbV9ob3Jpem9udGFsX3ZlcnRpY2FsKDIwMC4sIDIwMC4pLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKENhbWVyYUxpbmssIGNhbSksCiAgICAgICAgICAgICkpCiAgICAgICAgICAgIC5pZCgpOwoKICAgICAgICB3b3JsZC5zcGF3bihHbHRmTm9kZSB7CiAgICAgICAgICAgIHBhdGg6IFBhdGhCdWY6OmZyb20oIkk6L0lrYWJ1ci9jYW5keS9jcmF0ZXMvY2FuZHkvZXhhbXBsZXMvY2FjdHVzLmdsYiIpLAogICAgICAgICAgICBzY2VuZTogTm9uZSwKICAgICAgICAgICAgbm9kZTogTm9uZSwKICAgICAgICB9KTsKCiAgICAgICAgLy8gd29ybGQuc3Bhd24oR2x0Zk5vZGUgewogICAgICAgIC8vICAgICBwYXRoOiBQYXRoQnVmOjpmcm9tKCJJOi9Ja2FidXIvY2FuZHkvY3JhdGVzL2NhbmR5L2V4YW1wbGVzL3NwYWNlX29ya193aDQway5nbGIiKSwKICAgICAgICAvLyAgICAgc2NlbmU6IE5vbmUsCiAgICAgICAgLy8gICAgIG5vZGU6IE5vbmUsCiAgICAgICAgLy8gfSk7CgogICAgICAgIFNlbGYge30KICAgIH0KfQoAAAAAAAAAAIsJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWgYAAAAAAACkBQAAAAAAAAAAAAAAAPC/"
				],
				[
					6,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACLCQAAdXNlIGNhbmR5Ojp7Q2FtZXJhLCBDYW5keU1vY2NhLCBHbHRmTm9kZX07CnVzZSBjYW5keV9wcmltczo6e0NhbWVyYUxpbmssIEltYWdlTG9jYXRpb24sIEltYWdlU2hhcGUsIFdpbmRvd0RlZiwgV2luZG93TGF5b3V0fTsKdXNlIGZvdW5kYXRpb246OlRpbWVNb2NjYTsKdXNlIGdsYW06OlZlYzM7CnVzZSBzY2VuZV90cmVlOjpUcmFuc2Zvcm0zOwp1c2Ugc2ltcGxlY3M6OnByZWx1ZGU6Oio7CnVzZSBzdGQ6OnBhdGg6OlBhdGhCdWY7CgpmbiBtYWluKCkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICBlbnZfbG9nZ2VyOjppbml0KCk7CiAgICBsZXQgbXV0IGFwcCA9IGNhbmR5OjpBcHA6Om5ldygpOwogICAgYXBwLmxvYWRfbW9jY2E6OjxDYW5keUV4YW1wbGVDYWN0dXNNb2NjYT4oKTsKICAgIGFwcC5ydW4oKQp9CgpzdHJ1Y3QgQ2FuZHlFeGFtcGxlQ2FjdHVzTW9jY2Ege30KCmltcGwgTW9jY2EgZm9yIENhbmR5RXhhbXBsZUNhY3R1c01vY2NhIHsKICAgIGZuIGxvYWQobXV0IGRlcHM6IE1vY2NhRGVwcykgewogICAgICAgIGRlcHMuZGVwZW5kc19vbjo6PFRpbWVNb2NjYT4oKTsKICAgICAgICBkZXBzLmRlcGVuZHNfb246OjxDYW5keU1vY2NhPigpOwogICAgfQoKICAgIGZuIHN0YXJ0KHdvcmxkOiAmbXV0IFdvcmxkKSAtPiBTZWxmIHsKICAgICAgICBsZXQgY2FtID0gd29ybGQKICAgICAgICAgICAgLnNwYXduKENhbWVyYTo6bG9va19hdF96dXAoCiAgICAgICAgICAgICAgICBWZWMzOjpuZXcoMS45LCAtNC4yLCAzLiksCiAgICAgICAgICAgICAgICBWZWMzOjpuZXcoMC4sIDAuLCAwLiksCiAgICAgICAgICAgICkpCiAgICAgICAgICAgIC5pZCgpOwoKICAgICAgICBsZXQgX3dpbiA9IHdvcmxkCiAgICAgICAgICAgIC5zcGF3bigoCiAgICAgICAgICAgICAgICBXaW5kb3dEZWYgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiQ2FuZHk6IENhY3R1cyIudG9fc3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgbGF5b3V0OiBXaW5kb3dMYXlvdXQgewogICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTogSW1hZ2VTaGFwZTo6ZnJvbV93aWR0aF9oZWlnaHQoMTkyMC4sIDEwODAuKSwKICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IEltYWdlTG9jYXRpb246OmZyb21faG9yaXpvbnRhbF92ZXJ0aWNhbCgyMDAuLCAyMDAuKSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIChDYW1lcmFMaW5rLCBjYW0pLAogICAgICAgICAgICApKQogICAgICAgICAgICAuaWQoKTsKCiAgICAgICAgbGV0IGFzbGkgPSB3b3JsZC5zaW5nbGV0b246OjxBc3NldExpYnJhcnk+KCk7CgogICAgICAgIGxldCBjYWN0dXNfYWlkID0gQXNzZXRVaWQ6Om5ldygiY2FjdHVzIik7CiAgICAgICAgYXNsaS5sb2FkX2dsdGYoCiAgICAgICAgICAgIGNhY3R1c19haWQsCiAgICAgICAgICAgIEdsdGZBc3NldERlc2NyaXB0b3IgewogICAgICAgICAgICAgICAgcGF0aDogUGF0aEJ1Zjo6ZnJvbSgiSTovSWthYnVyL2NhbmR5L2NyYXRlcy9jYW5keS9leGFtcGxlcy9jYWN0dXMuZ2xiIiksCiAgICAgICAgICAgICAgICBzY2VuZTogTm9uZSwKICAgICAgICAgICAgICAgIG5vZGU6IE5vbmUsCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKCiAgICAgICAgbGV0IG9ya19haWQgPSBBc3NldFVpZDo6bmV3KCJzcGFjZV9vcmtfd2g0MGsiKTsKICAgICAgICBhc2xpLmxvYWRfZ2x0ZigKICAgICAgICAgICAgb3JrX2FpZCwKICAgICAgICAgICAgR2x0ZkFzc2V0RGVzY3JpcHRvciB7CiAgICAgICAgICAgICAgICBwYXRoOiBQYXRoQnVmOjpmcm9tKCJJOi9Ja2FidXIvY2FuZHkvY3JhdGVzL2NhbmR5L2V4YW1wbGVzL3NwYWNlX29ya193aDQway5nbGIiKSwKICAgICAgICAgICAgICAgIHNjZW5lOiBOb25lLAogICAgICAgICAgICAgICAgbm9kZTogTm9uZSwKICAgICAgICAgICAgfSwKICAgICAgICApOwoKICAgICAgICBmb3IgaSBpbiAtNS4uNSB7CiAgICAgICAgICAgIGZvciBqIGluIC01Li41IHsKICAgICAgICAgICAgICAgIGxldCBlbnRpdHkgPSBhc2xpLmluc3RhbnRpYXRlKGNhY3R1c19haWQsICZtdXQgY21kcykuYW5kX3NldCgKICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm0zOjpmcm9tX3RyYW5zbGF0aW9uX3h5eihpIGFzIGYzMiAqIDIuLCBqIGFzIGYzMiAqIDIuLCAwLiksCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB3b3JsZC5zcGF3bihHbHRmTm9kZSB7CiAgICAgICAgLy8gICAgIHBhdGg6IFBhdGhCdWY6OmZyb20oIkk6L0lrYWJ1ci9jYW5keS9jcmF0ZXMvY2FuZHkvZXhhbXBsZXMvc3BhY2Vfb3JrX3doNDBrLmdsYiIpLAogICAgICAgIC8vICAgICBzY2VuZTogTm9uZSwKICAgICAgICAvLyAgICAgbm9kZTogTm9uZSwKICAgICAgICAvLyB9KTsKCiAgICAgICAgU2VsZiB7fQogICAgfQp9CgAAAAAAAAAAiwkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAWgYAAAAAAACkBQAAAAAAAAAAAAAAAPC/"
				],
				[
					9,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAACLCQAAdXNlIGNhbmR5Ojp7Q2FtZXJhLCBDYW5keU1vY2NhLCBHbHRmTm9kZX07CnVzZSBjYW5keV9wcmltczo6e0NhbWVyYUxpbmssIEltYWdlTG9jYXRpb24sIEltYWdlU2hhcGUsIFdpbmRvd0RlZiwgV2luZG93TGF5b3V0fTsKdXNlIGZvdW5kYXRpb246OlRpbWVNb2NjYTsKdXNlIGdsYW06OlZlYzM7CnVzZSBzY2VuZV90cmVlOjpUcmFuc2Zvcm0zOwp1c2Ugc2ltcGxlY3M6OnByZWx1ZGU6Oio7CnVzZSBzdGQ6OnBhdGg6OlBhdGhCdWY7CgpmbiBtYWluKCkgLT4gZXlyZTo6UmVzdWx0PCgpPiB7CiAgICBlbnZfbG9nZ2VyOjppbml0KCk7CiAgICBsZXQgbXV0IGFwcCA9IGNhbmR5OjpBcHA6Om5ldygpOwogICAgYXBwLmxvYWRfbW9jY2E6OjxDYW5keUV4YW1wbGVDYWN0dXNNb2NjYT4oKTsKICAgIGFwcC5ydW4oKQp9CgpzdHJ1Y3QgQ2FuZHlFeGFtcGxlQ2FjdHVzTW9jY2Ege30KCmltcGwgTW9jY2EgZm9yIENhbmR5RXhhbXBsZUNhY3R1c01vY2NhIHsKICAgIGZuIGxvYWQobXV0IGRlcHM6IE1vY2NhRGVwcykgewogICAgICAgIGRlcHMuZGVwZW5kc19vbjo6PFRpbWVNb2NjYT4oKTsKICAgICAgICBkZXBzLmRlcGVuZHNfb246OjxDYW5keU1vY2NhPigpOwogICAgfQoKICAgIGZuIHN0YXJ0KHdvcmxkOiAmbXV0IFdvcmxkKSAtPiBTZWxmIHsKICAgICAgICBsZXQgY2FtID0gd29ybGQKICAgICAgICAgICAgLnNwYXduKENhbWVyYTo6bG9va19hdF96dXAoCiAgICAgICAgICAgICAgICBWZWMzOjpuZXcoMS45LCAtNC4yLCAzLiksCiAgICAgICAgICAgICAgICBWZWMzOjpuZXcoMC4sIDAuLCAwLiksCiAgICAgICAgICAgICkpCiAgICAgICAgICAgIC5pZCgpOwoKICAgICAgICBsZXQgX3dpbiA9IHdvcmxkCiAgICAgICAgICAgIC5zcGF3bigoCiAgICAgICAgICAgICAgICBXaW5kb3dEZWYgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAiQ2FuZHk6IENhY3R1cyIudG9fc3RyaW5nKCksCiAgICAgICAgICAgICAgICAgICAgbGF5b3V0OiBXaW5kb3dMYXlvdXQgewogICAgICAgICAgICAgICAgICAgICAgICBzaGFwZTogSW1hZ2VTaGFwZTo6ZnJvbV93aWR0aF9oZWlnaHQoMTkyMC4sIDEwODAuKSwKICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IEltYWdlTG9jYXRpb246OmZyb21faG9yaXpvbnRhbF92ZXJ0aWNhbCgyMDAuLCAyMDAuKSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIChDYW1lcmFMaW5rLCBjYW0pLAogICAgICAgICAgICApKQogICAgICAgICAgICAuaWQoKTsKCiAgICAgICAgbGV0IGFzbGkgPSB3b3JsZC5zaW5nbGV0b246OjxBc3NldExpYnJhcnk+KCk7CgogICAgICAgIGxldCBjYWN0dXNfYWlkID0gQXNzZXRVaWQ6Om5ldygiY2FjdHVzIik7CiAgICAgICAgYXNsaS5sb2FkX2dsdGYoCiAgICAgICAgICAgIGNhY3R1c19haWQsCiAgICAgICAgICAgIEdsdGZBc3NldERlc2NyaXB0b3IgewogICAgICAgICAgICAgICAgcGF0aDogUGF0aEJ1Zjo6ZnJvbSgiSTovSWthYnVyL2NhbmR5L2NyYXRlcy9jYW5keS9leGFtcGxlcy9jYWN0dXMuZ2xiIiksCiAgICAgICAgICAgICAgICBzY2VuZTogTm9uZSwKICAgICAgICAgICAgICAgIG5vZGU6IE5vbmUsCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKCiAgICAgICAgbGV0IG9ya19haWQgPSBBc3NldFVpZDo6bmV3KCJzcGFjZV9vcmtfd2g0MGsiKTsKICAgICAgICBhc2xpLmxvYWRfZ2x0ZigKICAgICAgICAgICAgb3JrX2FpZCwKICAgICAgICAgICAgR2x0ZkFzc2V0RGVzY3JpcHRvciB7CiAgICAgICAgICAgICAgICBwYXRoOiBQYXRoQnVmOjpmcm9tKCJJOi9Ja2FidXIvY2FuZHkvY3JhdGVzL2NhbmR5L2V4YW1wbGVzL3NwYWNlX29ya193aDQway5nbGIiKSwKICAgICAgICAgICAgICAgIHNjZW5lOiBOb25lLAogICAgICAgICAgICAgICAgbm9kZTogTm9uZSwKICAgICAgICAgICAgfSwKICAgICAgICApOwoKICAgICAgICBmb3IgaSBpbiAtNS4uNSB7CiAgICAgICAgICAgIGZvciBqIGluIC01Li41IHsKICAgICAgICAgICAgICAgIGxldCBlbnRpdHkgPSBhc2xpLmluc3RhbnRpYXRlKGNhY3R1c19haWQsICZtdXQgY21kcykuYW5kX3NldCgKICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm0zOjpmcm9tX3RyYW5zbGF0aW9uX3h5eihpIGFzIGYzMiAqIDIuLCBqIGFzIGYzMiAqIDIuLCAwLiksCiAgICAgICAgICAgICAgICApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyB3b3JsZC5zcGF3bihHbHRmTm9kZSB7CiAgICAgICAgLy8gICAgIHBhdGg6IFBhdGhCdWY6OmZyb20oIkk6L0lrYWJ1ci9jYW5keS9jcmF0ZXMvY2FuZHkvZXhhbXBsZXMvc3BhY2Vfb3JrX3doNDBrLmdsYiIpLAogICAgICAgIC8vICAgICBzY2VuZTogTm9uZSwKICAgICAgICAvLyAgICAgbm9kZTogTm9uZSwKICAgICAgICAvLyB9KTsKCiAgICAgICAgU2VsZiB7fQogICAgfQp9CgAAAAAAAAAA7wkAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAFAQAAAAAAAAUBAAAAAAAAAAAAAAAAPC/"
				],
				[
					16,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADvCQAAdXNlIGNhbmR5Ojp7QXNzZXRMaWJyYXJ5LCBBc3NldFVpZCwgQ2FtZXJhLCBDYW5keU1vY2NhLCBHbHRmQXNzZXREZXNjcmlwdG9yfTsKdXNlIGNhbmR5X3ByaW1zOjp7Q2FtZXJhTGluaywgSW1hZ2VMb2NhdGlvbiwgSW1hZ2VTaGFwZSwgV2luZG93RGVmLCBXaW5kb3dMYXlvdXR9Owp1c2UgZm91bmRhdGlvbjo6VGltZU1vY2NhOwp1c2UgZ2xhbTo6VmVjMzsKdXNlIHNjZW5lX3RyZWU6OlRyYW5zZm9ybTM7CnVzZSBzaW1wbGVjczo6cHJlbHVkZTo6KjsKdXNlIHN0ZDo6cGF0aDo6UGF0aEJ1ZjsKCmZuIG1haW4oKSAtPiBleXJlOjpSZXN1bHQ8KCk+IHsKICAgIGVudl9sb2dnZXI6OmluaXQoKTsKICAgIGxldCBtdXQgYXBwID0gY2FuZHk6OkFwcDo6bmV3KCk7CiAgICBhcHAubG9hZF9tb2NjYTo6PENhbmR5RXhhbXBsZUNhY3R1c01vY2NhPigpOwogICAgYXBwLnJ1bigpCn0KCnN0cnVjdCBDYW5keUV4YW1wbGVDYWN0dXNNb2NjYSB7fQoKaW1wbCBNb2NjYSBmb3IgQ2FuZHlFeGFtcGxlQ2FjdHVzTW9jY2EgewogICAgZm4gbG9hZChtdXQgZGVwczogTW9jY2FEZXBzKSB7CiAgICAgICAgZGVwcy5kZXBlbmRzX29uOjo8VGltZU1vY2NhPigpOwogICAgICAgIGRlcHMuZGVwZW5kc19vbjo6PENhbmR5TW9jY2E+KCk7CiAgICB9CgogICAgZm4gc3RhcnQod29ybGQ6ICZtdXQgV29ybGQpIC0+IFNlbGYgewogICAgICAgIGxldCBjYW0gPSB3b3JsZAogICAgICAgICAgICAuc3Bhd24oQ2FtZXJhOjpsb29rX2F0X3p1cCgKICAgICAgICAgICAgICAgIFZlYzM6Om5ldygxLjksIC00LjIsIDMuKSwKICAgICAgICAgICAgICAgIFZlYzM6Om5ldygwLiwgMC4sIDAuKSwKICAgICAgICAgICAgKSkKICAgICAgICAgICAgLmlkKCk7CgogICAgICAgIGxldCBfd2luID0gd29ybGQKICAgICAgICAgICAgLnNwYXduKCgKICAgICAgICAgICAgICAgIFdpbmRvd0RlZiB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJDYW5keTogQ2FjdHVzIi50b19zdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICBsYXlvdXQ6IFdpbmRvd0xheW91dCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlOiBJbWFnZVNoYXBlOjpmcm9tX3dpZHRoX2hlaWdodCgxOTIwLiwgMTA4MC4pLAogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogSW1hZ2VMb2NhdGlvbjo6ZnJvbV9ob3Jpem9udGFsX3ZlcnRpY2FsKDIwMC4sIDIwMC4pLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKENhbWVyYUxpbmssIGNhbSksCiAgICAgICAgICAgICkpCiAgICAgICAgICAgIC5pZCgpOwoKICAgICAgICBsZXQgYXNsaSA9IHdvcmxkLnNpbmdsZXRvbjo6PEFzc2V0TGlicmFyeT4oKTsKCiAgICAgICAgbGV0IGNhY3R1c19haWQgPSBBc3NldFVpZDo6ZnJvbV9zdHIoImNhY3R1cyIpOwogICAgICAgIGFzbGkubG9hZF9nbHRmKAogICAgICAgICAgICBjYWN0dXNfYWlkLAogICAgICAgICAgICBHbHRmQXNzZXREZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHBhdGg6IFBhdGhCdWY6OmZyb20oIkk6L0lrYWJ1ci9jYW5keS9jcmF0ZXMvY2FuZHkvZXhhbXBsZXMvY2FjdHVzLmdsYiIpLAogICAgICAgICAgICAgICAgc2NlbmU6IE5vbmUsCiAgICAgICAgICAgICAgICBub2RlOiBOb25lLAogICAgICAgICAgICB9LAogICAgICAgICAgICAmbXV0IGNtZHMsCiAgICAgICAgKTsKCiAgICAgICAgbGV0IG9ya19haWQgPSBBc3NldFVpZDo6ZnJvbV9zdHIoInNwYWNlX29ya193aDQwayIpOwogICAgICAgIGFzbGkubG9hZF9nbHRmKAogICAgICAgICAgICBvcmtfYWlkLAogICAgICAgICAgICBHbHRmQXNzZXREZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHBhdGg6IFBhdGhCdWY6OmZyb20oIkk6L0lrYWJ1ci9jYW5keS9jcmF0ZXMvY2FuZHkvZXhhbXBsZXMvc3BhY2Vfb3JrX3doNDBrLmdsYiIpLAogICAgICAgICAgICAgICAgc2NlbmU6IE5vbmUsCiAgICAgICAgICAgICAgICBub2RlOiBOb25lLAogICAgICAgICAgICB9LAogICAgICAgICAgICAmbXV0IGNtZHMsCiAgICAgICAgKTsKCiAgICAgICAgZm9yIGkgaW4gLTUuLjUgewogICAgICAgICAgICBmb3IgaiBpbiAtNS4uNSB7CiAgICAgICAgICAgICAgICBsZXQgZW50aXR5ID0gYXNsaS5pbnN0YW50aWF0ZShjYWN0dXNfYWlkLCAmbXV0IGNtZHMpLnVud3JhcCgpLmFuZF9zZXQoCiAgICAgICAgICAgICAgICAgICAgVHJhbnNmb3JtMzo6ZnJvbV90cmFuc2xhdGlvbl94eXooaSBhcyBmMzIgKiAyLiwgaiBhcyBmMzIgKiAyLiwgMC4pLAogICAgICAgICAgICAgICAgKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgLy8gd29ybGQuc3Bhd24oR2x0Zk5vZGUgewogICAgICAgIC8vICAgICBwYXRoOiBQYXRoQnVmOjpmcm9tKCJJOi9Ja2FidXIvY2FuZHkvY3JhdGVzL2NhbmR5L2V4YW1wbGVzL3NwYWNlX29ya193aDQway5nbGIiKSwKICAgICAgICAvLyAgICAgc2NlbmU6IE5vbmUsCiAgICAgICAgLy8gICAgIG5vZGU6IE5vbmUsCiAgICAgICAgLy8gfSk7CgogICAgICAgIFNlbGYge30KICAgIH0KfQoAAAAAAAAAAPAJAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjAUAAAAAAACMBQAAAAAAAAAAAAAAAPC/"
				],
				[
					17,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAADwCQAAdXNlIGNhbmR5Ojp7QXNzZXRJbnN0YW5jZSwgQXNzZXRMaWJyYXJ5LCBBc3NldFVpZCwgQ2FtZXJhLCBDYW5keU1vY2NhLCBHbHRmQXNzZXREZXNjcmlwdG9yfTsKdXNlIGNhbmR5X3ByaW1zOjp7Q2FtZXJhTGluaywgSW1hZ2VMb2NhdGlvbiwgSW1hZ2VTaGFwZSwgV2luZG93RGVmLCBXaW5kb3dMYXlvdXR9Owp1c2UgZm91bmRhdGlvbjo6VGltZU1vY2NhOwp1c2UgZ2xhbTo6VmVjMzsKdXNlIHNjZW5lX3RyZWU6OlRyYW5zZm9ybTM7CnVzZSBzaW1wbGVjczo6cHJlbHVkZTo6KjsKdXNlIHN0ZDo6cGF0aDo6UGF0aEJ1ZjsKCmZuIG1haW4oKSAtPiBleXJlOjpSZXN1bHQ8KCk+IHsKICAgIGVudl9sb2dnZXI6OmluaXQoKTsKICAgIGxldCBtdXQgYXBwID0gY2FuZHk6OkFwcDo6bmV3KCk7CiAgICBhcHAubG9hZF9tb2NjYTo6PENhbmR5RXhhbXBsZUNhY3R1c01vY2NhPigpOwogICAgYXBwLnJ1bigpCn0KCnN0cnVjdCBDYW5keUV4YW1wbGVDYWN0dXNNb2NjYSB7fQoKaW1wbCBNb2NjYSBmb3IgQ2FuZHlFeGFtcGxlQ2FjdHVzTW9jY2EgewogICAgZm4gbG9hZChtdXQgZGVwczogTW9jY2FEZXBzKSB7CiAgICAgICAgZGVwcy5kZXBlbmRzX29uOjo8VGltZU1vY2NhPigpOwogICAgICAgIGRlcHMuZGVwZW5kc19vbjo6PENhbmR5TW9jY2E+KCk7CiAgICB9CgogICAgZm4gc3RhcnQod29ybGQ6ICZtdXQgV29ybGQpIC0+IFNlbGYgewogICAgICAgIGxldCBjYW0gPSB3b3JsZAogICAgICAgICAgICAuc3Bhd24oQ2FtZXJhOjpsb29rX2F0X3p1cCgKICAgICAgICAgICAgICAgIFZlYzM6Om5ldygxLjksIC00LjIsIDMuKSwKICAgICAgICAgICAgICAgIFZlYzM6Om5ldygwLiwgMC4sIDAuKSwKICAgICAgICAgICAgKSkKICAgICAgICAgICAgLmlkKCk7CgogICAgICAgIGxldCBfd2luID0gd29ybGQKICAgICAgICAgICAgLnNwYXduKCgKICAgICAgICAgICAgICAgIFdpbmRvd0RlZiB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICJDYW5keTogQ2FjdHVzIi50b19zdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICBsYXlvdXQ6IFdpbmRvd0xheW91dCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHNoYXBlOiBJbWFnZVNoYXBlOjpmcm9tX3dpZHRoX2hlaWdodCgxOTIwLiwgMTA4MC4pLAogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogSW1hZ2VMb2NhdGlvbjo6ZnJvbV9ob3Jpem9udGFsX3ZlcnRpY2FsKDIwMC4sIDIwMC4pLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKENhbWVyYUxpbmssIGNhbSksCiAgICAgICAgICAgICkpCiAgICAgICAgICAgIC5pZCgpOwoKICAgICAgICBsZXQgYXNsaSA9IHdvcmxkLnNpbmdsZXRvbl9tdXQ6OjxBc3NldExpYnJhcnk+KCk7CgogICAgICAgIGxldCBjYWN0dXNfYWlkID0gQXNzZXRVaWQ6OmZyb21fc3RyKCJjYWN0dXMiKTsKICAgICAgICBhc2xpLmxvYWRfZ2x0ZigKICAgICAgICAgICAgJmNhY3R1c19haWQsCiAgICAgICAgICAgIEdsdGZBc3NldERlc2NyaXB0b3IgewogICAgICAgICAgICAgICAgcGF0aDogUGF0aEJ1Zjo6ZnJvbSgiSTovSWthYnVyL2NhbmR5L2NyYXRlcy9jYW5keS9leGFtcGxlcy9jYWN0dXMuZ2xiIiksCiAgICAgICAgICAgICAgICBzY2VuZTogTm9uZSwKICAgICAgICAgICAgICAgIG5vZGU6IE5vbmUsCiAgICAgICAgICAgIH0sCiAgICAgICAgKTsKCiAgICAgICAgLy8gbGV0IG9ya19haWQgPSBBc3NldFVpZDo6ZnJvbV9zdHIoInNwYWNlX29ya193aDQwayIpOwogICAgICAgIC8vIGFzbGkubG9hZF9nbHRmKAogICAgICAgIC8vICAgICAmb3JrX2FpZCwKICAgICAgICAvLyAgICAgR2x0ZkFzc2V0RGVzY3JpcHRvciB7CiAgICAgICAgLy8gICAgICAgICBwYXRoOiBQYXRoQnVmOjpmcm9tKCJJOi9Ja2FidXIvY2FuZHkvY3JhdGVzL2NhbmR5L2V4YW1wbGVzL3NwYWNlX29ya193aDQway5nbGIiKSwKICAgICAgICAvLyAgICAgICAgIHNjZW5lOiBOb25lLAogICAgICAgIC8vICAgICAgICAgbm9kZTogTm9uZSwKICAgICAgICAvLyAgICAgfSwKICAgICAgICAvLyApOwoKICAgICAgICBmb3IgaSBpbiAtNS4uNSB7CiAgICAgICAgICAgIGZvciBqIGluIC01Li41IHsKICAgICAgICAgICAgICAgIHdvcmxkLnNwYXduKCgKICAgICAgICAgICAgICAgICAgICBUcmFuc2Zvcm0zOjpmcm9tX3RyYW5zbGF0aW9uX3h5eihpIGFzIGYzMiAqIDIuLCBqIGFzIGYzMiAqIDIuLCAwLiksCiAgICAgICAgICAgICAgICAgICAgQXNzZXRJbnN0YW5jZShjYWN0dXNfYWlkLmNsb25lKCkpLAogICAgICAgICAgICAgICAgKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIHdvcmxkLnNwYXduKEdsdGZOb2RlIHsKICAgICAgICAvLyAgICAgcGF0aDogUGF0aEJ1Zjo6ZnJvbSgiSTovSWthYnVyL2NhbmR5L2NyYXRlcy9jYW5keS9leGFtcGxlcy9zcGFjZV9vcmtfd2g0MGsuZ2xiIiksCiAgICAgICAgLy8gICAgIHNjZW5lOiBOb25lLAogICAgICAgIC8vICAgICBub2RlOiBOb25lLAogICAgICAgIC8vIH0pOwoKICAgICAgICBTZWxmIHt9CiAgICB9Cn0KAAAAAAAAAAASCwAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjAUAAAAAAACMBQAAAAAAAAAAAAAAAPC/"
				],
				[
					18,
					1,
					"revert",
					null,
					"AgAAAAAAAAAAAAAAAAAAAAAAAAASCwAAdXNlIGNhbmR5Ojp7QXNzZXRJbnN0YW5jZSwgQXNzZXRMaWJyYXJ5LCBBc3NldFVpZCwgQ2FtZXJhLCBDYW5keU1vY2NhLCBHbHRmQXNzZXREZXNjcmlwdG9yfTsKdXNlIGNhbmR5X3ByaW1zOjp7Q2FtZXJhTGluaywgSW1hZ2VMb2NhdGlvbiwgSW1hZ2VTaGFwZSwgV2luZG93RGVmLCBXaW5kb3dMYXlvdXR9Owp1c2UgZm91bmRhdGlvbjo6VGltZU1vY2NhOwp1c2UgZ2xhbTo6VmVjMzsKdXNlIHNjZW5lX3RyZWU6OlRyYW5zZm9ybTM7CnVzZSBzaW1wbGVjczo6cHJlbHVkZTo6KjsKdXNlIHN0ZDo6cGF0aDo6UGF0aEJ1ZjsKCmZuIG1haW4oKSAtPiBleXJlOjpSZXN1bHQ8KCk+IHsKICAgIGVudl9sb2dnZXI6OmluaXQoKTsKICAgIGxldCBtdXQgYXBwID0gY2FuZHk6OkFwcDo6bmV3KCk7CiAgICBhcHAubG9hZF9tb2NjYTo6PENhbmR5RXhhbXBsZUNhY3R1c01vY2NhPigpOwogICAgYXBwLnJ1bigpCn0KCnN0cnVjdCBDYW5keUV4YW1wbGVDYWN0dXNNb2NjYSB7fQoKaW1wbCBNb2NjYSBmb3IgQ2FuZHlFeGFtcGxlQ2FjdHVzTW9jY2EgewogICAgZm4gbG9hZChtdXQgZGVwczogTW9jY2FEZXBzKSB7CiAgICAgICAgZGVwcy5kZXBlbmRzX29uOjo8VGltZU1vY2NhPigpOwogICAgICAgIGRlcHMuZGVwZW5kc19vbjo6PENhbmR5TW9jY2E+KCk7CiAgICB9CgogICAgZm4gc3RhcnQod29ybGQ6ICZtdXQgV29ybGQpIC0+IFNlbGYgewogICAgICAgIGxldCBjYW0gPSB3b3JsZAogICAgICAgICAgICAuc3Bhd24oQ2FtZXJhOjpsb29rX2F0X3p1cCgKICAgICAgICAgICAgICAgIDUuICogVmVjMzo6bmV3KDEuOSwgLTQuMiwgMi4pLAogICAgICAgICAgICAgICAgVmVjMzo6bmV3KDAuLCAwLiwgMC4pLAogICAgICAgICAgICApKQogICAgICAgICAgICAuaWQoKTsKCiAgICAgICAgbGV0IF93aW4gPSB3b3JsZAogICAgICAgICAgICAuc3Bhd24oKAogICAgICAgICAgICAgICAgV2luZG93RGVmIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogIkNhbmR5OiBDYWN0dXMiLnRvX3N0cmluZygpLAogICAgICAgICAgICAgICAgICAgIGxheW91dDogV2luZG93TGF5b3V0IHsKICAgICAgICAgICAgICAgICAgICAgICAgc2hhcGU6IEltYWdlU2hhcGU6OmZyb21fd2lkdGhfaGVpZ2h0KDE5MjAuLCAxMDgwLiksCiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBJbWFnZUxvY2F0aW9uOjpmcm9tX2hvcml6b250YWxfdmVydGljYWwoMjAwLiwgMjAwLiksCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAoQ2FtZXJhTGluaywgY2FtKSwKICAgICAgICAgICAgKSkKICAgICAgICAgICAgLmlkKCk7CgogICAgICAgIGxldCBhc2xpID0gd29ybGQuc2luZ2xldG9uX211dDo6PEFzc2V0TGlicmFyeT4oKTsKCiAgICAgICAgbGV0IGNhY3R1c19haWQgPSBBc3NldFVpZDo6ZnJvbV9zdHIoImNhY3R1cyIpOwogICAgICAgIGFzbGkubG9hZF9nbHRmKAogICAgICAgICAgICAmY2FjdHVzX2FpZCwKICAgICAgICAgICAgR2x0ZkFzc2V0RGVzY3JpcHRvciB7CiAgICAgICAgICAgICAgICBwYXRoOiBQYXRoQnVmOjpmcm9tKCJJOi9Ja2FidXIvY2FuZHkvY3JhdGVzL2NhbmR5L2V4YW1wbGVzL2NhY3R1cy5nbGIiKSwKICAgICAgICAgICAgICAgIHNjZW5lOiBOb25lLAogICAgICAgICAgICAgICAgbm9kZTogTm9uZSwKICAgICAgICAgICAgfSwKICAgICAgICApOwoKICAgICAgICBsZXQgb3JrX2FpZCA9IEFzc2V0VWlkOjpmcm9tX3N0cigic3BhY2Vfb3JrX3doNDBrIik7CiAgICAgICAgYXNsaS5sb2FkX2dsdGYoCiAgICAgICAgICAgICZvcmtfYWlkLAogICAgICAgICAgICBHbHRmQXNzZXREZXNjcmlwdG9yIHsKICAgICAgICAgICAgICAgIHBhdGg6IFBhdGhCdWY6OmZyb20oIkk6L0lrYWJ1ci9jYW5keS9jcmF0ZXMvY2FuZHkvZXhhbXBsZXMvc3BhY2Vfb3JrX3doNDBrLmdsYiIpLAogICAgICAgICAgICAgICAgc2NlbmU6IE5vbmUsCiAgICAgICAgICAgICAgICBub2RlOiBOb25lLAogICAgICAgICAgICB9LAogICAgICAgICk7CgogICAgICAgIHdvcmxkLnNwYXduKCgKICAgICAgICAgICAgVHJhbnNmb3JtMzo6ZnJvbV90cmFuc2xhdGlvbl94eXooMC4sIDAuLCAwLikud2l0aF9zY2FsZSgwLjAxICogVmVjMzo6T05FKSwKICAgICAgICAgICAgQXNzZXRJbnN0YW5jZShvcmtfYWlkLmNsb25lKCkpLAogICAgICAgICkpOwoKICAgICAgICAvLyBjb25zdCBIQUxGX0NPVU5UOiBpMzIgPSAxOwogICAgICAgIC8vIGNvbnN0IFNQQUNJTkc6IGYzMiA9IDMuOwogICAgICAgIC8vIGZvciBpIGluIC1IQUxGX0NPVU5ULi49SEFMRl9DT1VOVCB7CiAgICAgICAgLy8gICAgIGZvciBqIGluIC1IQUxGX0NPVU5ULi49SEFMRl9DT1VOVCB7CiAgICAgICAgLy8gICAgICAgICB3b3JsZC5zcGF3bigoCiAgICAgICAgLy8gICAgICAgICAgICAgVHJhbnNmb3JtMzo6ZnJvbV90cmFuc2xhdGlvbl94eXooaSBhcyBmMzIgKiBTUEFDSU5HLCBqIGFzIGYzMiAqIFNQQUNJTkcsIDAuKSwKICAgICAgICAvLyAgICAgICAgICAgICBBc3NldEluc3RhbmNlKGNhY3R1c19haWQuY2xvbmUoKSksCiAgICAgICAgLy8gICAgICAgICApKTsKICAgICAgICAvLyAgICAgfQogICAgICAgIC8vIH0KCiAgICAgICAgLy8gd29ybGQuc3Bhd24oR2x0Zk5vZGUgewogICAgICAgIC8vICAgICBwYXRoOiBQYXRoQnVmOjpmcm9tKCJJOi9Ja2FidXIvY2FuZHkvY3JhdGVzL2NhbmR5L2V4YW1wbGVzL3NwYWNlX29ya193aDQway5nbGIiKSwKICAgICAgICAvLyAgICAgc2NlbmU6IE5vbmUsCiAgICAgICAgLy8gICAgIG5vZGU6IE5vbmUsCiAgICAgICAgLy8gfSk7CgogICAgICAgIFNlbGYge30KICAgIH0KfQoAAAAAAAAAAO0KAAAAAAAAAAAAAA",
					"AQAAAAAAAAABAAAAjAUAAAAAAACMBQAAAAAAAAAAAAAAAPC/"
				],
				[
					23,
					1,
					"paste",
					null,
					"AQAAAB0GAAAAAAAAPwYAAAAAAAAlAAAASTovSWthYnVyL2NhbmR5L2NyYXRlcy9jYW5keS9leGFtcGxlcw",
					"AQAAAAAAAAABAAAAHQYAAAAAAABCBgAAAAAAAAAAAAAAAPC/"
				],
				[
					24,
					1,
					"left_delete",
					null,
					"AQAAAD4GAAAAAAAAPgYAAAAAAAABAAAAXA",
					"AQAAAAAAAAABAAAAPwYAAAAAAAA/BgAAAAAAAAAAAAAAAPC/"
				],
				[
					31,
					1,
					"insert",
					{
						"characters": "/"
					},
					"BQAAADgGAAAAAAAAOQYAAAAAAAABAAAAXDEGAAAAAAAAMgYAAAAAAAABAAAAXCoGAAAAAAAAKwYAAAAAAAABAAAAXCYGAAAAAAAAJwYAAAAAAAABAAAAXB8GAAAAAAAAIAYAAAAAAAABAAAAXA",
					"AQAAAAAAAAAFAAAAIAYAAAAAAAAfBgAAAAAAAAAAAAAAAPC/JgYAAAAAAAAnBgAAAAAAAAAAAAAAAPC/KgYAAAAAAAArBgAAAAAAAAAAAAAAAPC/MQYAAAAAAAAyBgAAAAAAAAAAAAAAAPC/OAYAAAAAAAA5BgAAAAAAAAAAAAAAAPC/"
				]
			]
		}
	],
	"build_system": "",
	"build_system_choices":
	[
		[
			[
				[
					"Packages/Python/Python.sublime-build",
					""
				],
				[
					"Packages/Python/Python.sublime-build",
					"Syntax Check"
				]
			],
			[
				"Packages/Python/Python.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					""
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Automatic"
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Run"
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Run (with args)..."
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Check"
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Test"
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Test (with args)..."
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Bench"
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Clean"
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Document"
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Clippy"
				],
				[
					"Packages/Rust Enhanced/RustEnhanced.sublime-build",
					"Script"
				]
			],
			[
				"Packages/Rust Enhanced/RustEnhanced.sublime-build",
				""
			]
		],
		[
			[
				[
					"Packages/Rust/Rust.sublime-build",
					""
				],
				[
					"Packages/Rust/Rust.sublime-build",
					"Run"
				],
				[
					"Packages/Rust/Rust.sublime-build",
					"Build & Run"
				]
			],
			[
				"Packages/Rust/Rust.sublime-build",
				"Run"
			]
		]
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"snake",
				"Convert Case: snake_case"
			],
			[
				"lower",
				"Convert Case: lowerCamelCase"
			],
			[
				"package",
				"Package Control: List Packages"
			],
			[
				"upp",
				"Convert Case: Upper Case"
			],
			[
				"cam",
				"Convert Case: UpperCamelCase"
			],
			[
				"trail",
				"Trailing Spaces: Delete Trailing Spaces"
			],
			[
				"sna",
				"Convert Case: snake_case"
			],
			[
				"loc",
				"Convert Case: Lower Case"
			],
			[
				"packa",
				"Package Control: Install Package"
			],
			[
				"install",
				"Package Control: Install Package"
			],
			[
				"inst",
				"Package Control: Install Package"
			],
			[
				"Package Control: remo",
				"Package Control: Remove Package"
			],
			[
				"Package Control: list",
				"Package Control: List Packages"
			],
			[
				"upper",
				"Convert Case: Upper Case"
			],
			[
				"list",
				"Package Control: List Packages"
			],
			[
				"package lis",
				"Package Control: List Packages"
			],
			[
				"list pac",
				"Package Control: List Packages"
			],
			[
				"mark",
				"OmniMarkupPreviewer: Preview Current Markup in Browser"
			],
			[
				"install package",
				"Package Control: Install Package"
			],
			[
				"theme",
				"UI: Select Theme"
			],
			[
				"pack inst",
				"Package Control: Install Package"
			],
			[
				"rust",
				"RustFmt: Format Buffer"
			],
			[
				"pack remo",
				"Package Control: Remove Package"
			],
			[
				"rustf",
				"RustFormat: Enable Format on Save"
			],
			[
				"packinst",
				"Package Control: Install Package"
			],
			[
				"rustfmt",
				"RustFmt: Format Buffer"
			],
			[
				"resource",
				"PackageResourceViewer: Open Resource"
			],
			[
				"resour",
				"PackageResourceViewer: Extract Package"
			],
			[
				"package resour",
				"PackageResourceViewer: Open Resource"
			],
			[
				"insta",
				"Package Control: Install Package"
			],
			[
				"tra",
				"Trailing Spaces: Delete Trailing Spaces"
			],
			[
				"python",
				"Set Syntax: Python"
			],
			[
				"trai",
				"Trailing Spaces: Delete Trailing Spaces"
			],
			[
				"run",
				"Build With: RustEnhanced - Run"
			],
			[
				"instal",
				"Package Control: Install Package"
			],
			[
				"terminus open",
				"Terminus: Open Default Shell in Tab (View)"
			],
			[
				"terminuopen",
				"Terminus: Open Default Shell in Panel"
			],
			[
				"package ins",
				"Package Control: Install Package"
			],
			[
				"tril",
				"Trim Trailing White Space"
			],
			[
				"tri",
				"Trim Trailing White Space"
			],
			[
				"lower c",
				"Convert Case: Lower Case"
			],
			[
				"tr",
				"Trailing Spaces: Delete Trailing Spaces"
			],
			[
				"alignm",
				"Preferences: Alignment Key Bindings – Default"
			],
			[
				"align",
				"Preferences: Alignment Key Bindings – Default"
			],
			[
				"buil",
				"Build With: Python"
			],
			[
				"build",
				"Build With: Python"
			],
			[
				"test",
				"Build With: RustEnhanced - Test"
			],
			[
				"terminu",
				"Terminus: Open Default Shell in Tab (View)"
			],
			[
				"upper ca",
				"Convert Case: Upper Case"
			],
			[
				"terminus",
				"Terminus: Open Default Shell in Tab (View)"
			],
			[
				"termin open",
				"Terminus: Open Default Shell in Tab (View)"
			],
			[
				"pack",
				"Preferences: Browse Packages"
			],
			[
				"run test",
				"Build With: RustEnhanced - Test"
			],
			[
				"install pack",
				"Package Control: Install Package"
			],
			[
				"pack ins",
				"Package Control: Install Package"
			],
			[
				"rust build",
				"Build With: RustEnhanced"
			],
			[
				"rust run",
				"Build With: RustEnhanced - Run"
			],
			[
				"spac",
				"Indentation: Convert to Spaces"
			],
			[
				"space",
				"Indentation: Convert to Spaces"
			],
			[
				"white",
				"Trim Trailing White Space"
			],
			[
				"doxygen sett",
				"Preferences: DoxyDoxygen Settings"
			],
			[
				"trailing",
				"Trailing Spaces: Delete Trailing Spaces"
			],
			[
				"dox",
				"Preferences: DoxyDoxygen Settings"
			],
			[
				"doxy",
				"Preferences: DoxyDoxygen Settings"
			],
			[
				"spa",
				"Trailing Spaces: Delete Trailing Spaces"
			],
			[
				"trailin",
				"Trailing Spaces: Delete Trailing Spaces"
			],
			[
				"to space",
				"Indentation: Convert to Spaces"
			],
			[
				"termin",
				"Terminus: List Shells"
			],
			[
				"open",
				"Terminus: Open Default Shell in Tab (View)"
			],
			[
				"termin uti",
				"Terminus Utilities: Select Theme"
			],
			[
				"termin oepn",
				"Terminus: Open Default Shell in Tab (View)"
			],
			[
				"temrin ope",
				"Terminus: Open Default Shell in Tab (View)"
			],
			[
				"temrin",
				"Terminal: Open"
			],
			[
				"spaces",
				"Indentation: Convert to Spaces"
			]
		],
		"width": 0.0
	},
	"console":
	{
		"height": 391.0,
		"history":
		[
			"ls",
			"dir",
			"ls"
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/I/Ikabur/eph",
		"/I/Ikabur/eph/crates",
		"/I/Ikabur/eph/crates/combat",
		"/I/Ikabur/eph/crates/combat/src",
		"/I/Ikabur/eph/crates/eph",
		"/I/Ikabur/eph/crates/eph/src",
		"/I/Ikabur/eph/crates/flowsim",
		"/I/Ikabur/eph/crates/flowsim/tests",
		"/I/Ikabur/eph/crates/gosim",
		"/I/Ikabur/eph/crates/gosim/src",
		"/I/Ikabur/candy",
		"/I/Ikabur/candy/crates",
		"/I/Ikabur/candy/crates/candy",
		"/I/Ikabur/candy/crates/candy/examples",
		"/I/Ikabur/candy/crates/candy/shaders",
		"/I/Ikabur/candy/crates/candy/src",
		"/I/Ikabur/candy/crates/candy/src/buf",
		"/I/Ikabur/candy/crates/candy/src/mesh",
		"/I/Ikabur/candy/crates/candy/src/renderer",
		"/I/Ikabur/candy/crates/candy/src/stream",
		"/I/Ikabur/candy/crates/scene_tree",
		"/I/Ikabur/candy/crates/scene_tree/src",
		"/I/Ikabur/atom",
		"/I/Ikabur/atom/crates",
		"/I/Ikabur/atom/crates/excess",
		"/I/Ikabur/atom/crates/excess/src",
		"/I/Ikabur/atom/crates/excess/src/traits",
		"/I/Ikabur/magi",
		"/I/Ikabur/magi/crates",
		"/I/Ikabur/magi/crates/magi_color",
		"/I/Ikabur/magi/crates/magi_gems",
		"/I/Ikabur/magi/crates/magi_gems/src",
		"/I/Ikabur/magi/crates/magi_geo",
		"/I/Ikabur/magi/crates/magi_geo/src",
		"/I/Ikabur/magi/crates/magi_rng",
		"/I/Ikabur/magi/crates/magi_rng/src",
		"/I/Ikabur/magi/crates/magi_sdf",
		"/I/Ikabur/magi/crates/magi_sdf/src",
		"/I/Ikabur/magi/crates/magi_se",
		"/I/Ikabur/magi/crates/magi_se/src"
	],
	"file_history":
	[
		"/I/Ikabur/candy/Cargo.toml",
		"/I/Ikabur/candy/crates/candy/src/bind_group.rs",
		"/I/Ikabur/candy/crates/candy/src/gather_frame_mocca.rs",
		"/I/Ikabur/candy/crates/candy/src/glassworks.rs",
		"/I/Ikabur/candy/crates/candy/src/renderer.rs",
		"/I/Ikabur/candy/crates/candy/src/transform.rs",
		"/I/Ikabur/candy/crates/candy/src/vertex_source_to_buffer.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/lib.rs",
		"/I/Ikabur/candy/crates/candy/examples/orks.candy",
		"/I/Ikabur/candy/crates/candy/src/buf/accessor.rs",
		"/I/Ikabur/candy/crates/candy/src/mesh/standard_mesh.rs",
		"/I/Ikabur/candy/crates/candy/src/lib.rs",
		"/I/Ikabur/candy/crates/candy/src/app.rs",
		"/I/Ikabur/candy/crates/candy/src/asset_library.rs",
		"/I/Ikabur/candy/crates/candy/src/asset_mocca.rs",
		"/I/Ikabur/candy/crates/candy/examples/ork.rs",
		"/I/Ikabur/candy/crates/candy/src/bbb.rs",
		"/I/Ikabur/eph/Cargo.toml",
		"/I/Ikabur/candy/crates/fim/src/lib.rs",
		"/I/Ikabur/candy/crates/candy/src/vertex_buffer_pool.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/segment.rs",
		"/I/Ikabur/magi/Cargo.toml",
		"/I/Ikabur/magi/crates/magi_rng/Cargo.toml",
		"/I/Ikabur/candy/crates/candy/Cargo.toml",
		"/I/Ikabur/candy/crates/fim/Cargo.toml",
		"/I/Ikabur/atom/crates/excess/src/entity_world_mut.rs",
		"/I/Ikabur/magi/crates/magi_rng/src/lib.rs",
		"/I/Ikabur/candy/crates/scene_tree/src/transform.rs",
		"/I/Ikabur/magi/crates/magi_gems/src/lib.rs",
		"/I/Ikabur/ikabur/ikabur/forge/gems/fim/fim.cpp",
		"/I/Ikabur/candy/crates/gizmos/src/lib.rs",
		"/I/Ikabur/candy/crates/candy/src/wgpu_res.rs",
		"/I/Ikabur/candy/crates/candy/examples/cube.rs",
		"/I/Ikabur/magi/crates/magi_se/src/so3.rs",
		"/I/Ikabur/magi/crates/magi_se/src/ortho_normal_basis.rs",
		"/I/Ikabur/atom/crates/excess/src/traits/query_fetch.rs",
		"/I/Ikabur/magi/crates/magi_se/src/so2.rs",
		"/I/Ikabur/magi/crates/magi_se/src/math.rs",
		"/I/Ikabur/magi/crates/magi_se/src/lib.rs",
		"/I/Ikabur/magi/crates/magi_gems/Cargo.toml",
		"/I/Ikabur/atom/crates/excess/src/world.rs",
		"/I/Ikabur/atom/crates/excess/src/commands.rs",
		"/I/Ikabur/candy/crates/candy/src/gpu_buffer.rs",
		"/I/Ikabur/atom/crates/mocca/src/runner.rs",
		"/I/Ikabur/candy/crates/candy/src/frame.rs",
		"/I/Ikabur/atom/crates/simplecs/src/fabric.rs",
		"/I/Ikabur/candy/crates/candy/src/camera.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/tri_mesh.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/ball.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/distance_transform.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/aabb.rs",
		"/I/Ikabur/magi/crates/magi_sdf/Cargo.toml",
		"/I/Ikabur/magi/crates/magi_geo/src/posed.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/quad_mesh.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/to_mesh.rs",
		"/I/Ikabur/magi/crates/magi_geo/src/tube.rs",
		"/I/Ikabur/magi/crates/magi_geo/Cargo.toml",
		"/I/Ikabur/magi/rustfmt.toml",
		"/I/hand/fibs/crates/kernel/src/lib.rs",
		"/I/Ikabur/magi/crates/magi_se/src/se2.rs",
		"/I/Ikabur/atom/crates/excess/src/traits/query_fetch_term.rs",
		"/I/Ikabur/magi/crates/magi_rng/.gitignore",
		"/I/Ikabur/magi/crates/magi_se/Cargo.toml",
		"/I/Ikabur/candy/crates/candy/src/window.rs",
		"/I/Ikabur/candy/crates/candy/src/candy_mocca.rs",
		"/I/Ikabur/atom/crates/excess/src/query.rs",
		"/I/Ikabur/eph/crates/eph/src/eph_mocca.rs",
		"/I/Ikabur/eph/crates/eph/src/main.rs",
		"/I/Ikabur/ikabur/ikabur/forge/apps/voxels.yaml",
		"/I/Ikabur/ikabur/ikabur/forge/data/gui.aix",
		"/I/Ikabur/ikabur/ikabur/forge/data/terrain.aix",
		"/I/Ikabur/ikabur/ikabur/forge/data/types.cpp",
		"/I/Ikabur/ikabur/ikabur/forge/data/venus_aux.h",
		"/I/Ikabur/ikabur/ikabur/forge/data/types.h",
		"/I/Ikabur/khorne/kernels/src/baldurs_gate.rs",
		"/I/Ikabur/galette/flatsim/src/view.rs",
		"/I/Ikabur/atom/crates/excess/src/detail/unsafe_entity_cell.rs",
		"/I/Ikabur/candy/crates/candy/src/highway.rs",
		"/I/Ikabur/candy/crates/candy/src/window_entity_map.rs",
		"/I/Ikabur/candy/crates/candy/src/backend.rs",
		"/I/Ikabur/atom/crates/mocca/src/lib.rs",
		"/I/Ikabur/candy/crates/candy/src/candy_gather_mocca.rs",
		"/I/Ikabur/eph/crates/eph/Cargo.toml",
		"/I/Ikabur/candy/crates/candy/src/window_renderer_resources.rs",
		"/I/Ikabur/candy/crates/foundation/src/lib.rs",
		"/I/Ikabur/eph/crates/gosim/Cargo.toml",
		"/I/Ikabur/candy/crates/foundation/src/log.rs",
		"/I/Ikabur/candy/crates/foundation/src/time.rs",
		"/I/Ikabur/eph/crates/gosim/src/body_part.rs",
		"/I/Ikabur/eph/crates/gosim/src/flow_sim.rs",
		"/I/Ikabur/eph/crates/gosim/src/heart.rs",
		"/I/Ikabur/eph/crates/gosim/src/lungs.rs",
		"/I/Ikabur/atom/crates/excess/src/traits/entity_access_component_helper.rs",
		"/I/Ikabur/eph/crates/gosim/src/blood.rs",
		"/I/Ikabur/candy/crates/candy/src/clock.rs",
		"/I/Ikabur/candy/crates/candy/src/engine.rs",
		"/I/Ikabur/candy/crates/foundation/Cargo.toml",
		"/I/Ikabur/eph/crates/gosim/src/lib.rs",
		"/I/Ikabur/eph/crates/gosim/src/time.rs",
		"/I/Ikabur/eph/justfile",
		"/I/Ikabur/eph/crates/flowsim/tests/test_pipe_chain.rs",
		"/I/Ikabur/eph/crates/gossim_apps/examples/gosim_test1.rs",
		"/I/Ikabur/eph/.git/config",
		"/I/Ikabur/eph/crates/gossim_apps/examples/flow_sim_pipe_chain.rss",
		"/I/Ikabur/eph/crates/flowsim/src/pipe.rs",
		"/I/Ikabur/eph/crates/gosim/src/gos_sim.rs",
		"/I/Ikabur/eph/crates/mocca/src/runner.rs",
		"/I/Ikabur/gos/flecs_crash/Cargo.toml",
		"/I/Ikabur/gos/crates/gosim/src/agent.rs",
		"/I/Ikabur/gos/crates/gosrv/src/main.rs",
		"/I/Ikabur/gos/crates/gosrv/src/game_server.rs",
		"/I/Ikabur/gos/crates/gosim/src/lib.rs",
		"/I/Ikabur/gos/crates/gosim/src/utils/stats.rs",
		"/I/Ikabur/gos/crates/gosim/src/utils/flecs_query_relation_helpers.rs",
		"/I/Ikabur/gos/crates/gems/Cargo.toml",
		"/I/Ikabur/gos/crates/gosim/src/waterfront.rs",
		"/I/Ikabur/gos/crates/goscl/src/view/inventory_view.rs",
		"/I/Ikabur/gos/crates/gosim/src/utils/newtype_decimal_component.rs",
		"/I/Ikabur/gos/crates/gosim/src/breathing.rs",
		"/I/Ikabur/gos/crates/gems/src/dec.rs",
		"/I/Ikabur/gos/crates/gems/src/modifier.rs",
		"/C/Users/dtw/Downloads/flecs (1).c",
		"/I/Ikabur/gos/crates/gosim/examples/gosim_test1.rs",
		"/I/Ikabur/gos/crates/gosim/src/blood.rs",
		"/I/Ikabur/gos/flecs_crash/src/module_phantom.rs",
		"/I/Ikabur/gos/flecs_crash/src/main.rs",
		"/I/Ikabur/gos/flecs_crash/src/prefab_tree.rs",
		"/I/Ikabur/gos/crates/gems/src/fair_alloc.rs"
	],
	"find":
	{
		"height": 41.0
	},
	"find_in_files":
	{
		"height": 187.0,
		"where_history":
		[
			"*.rs",
			""
		]
	},
	"find_state":
	{
		"case_sensitive": true,
		"find_history":
		[
			"\\",
			"BindGroupBuilder",
			"buf",
			"mesh",
			"gosim",
			"= {",
			"geo",
			"magi_se",
			"color",
			"FimItem",
			"mz",
			"basis",
			"so2",
			"local_vec2",
			"new_from_seed",
			"MyRng",
			"new_from_seed",
			"magi_se",
			"local_vec2",
			"normal_f32",
			"MyRng",
			"query_fetch_term_impl_var",
			"timestep",
			"UnsafeEntityCell",
			"MyWindow",
			"FrameQueue",
			"sim",
			"tx_sender",
			"backend",
			"candy_gather_mocca",
			"CandyGatherMocca",
			"new",
			"cgw",
			"CandyApp",
			"Backend",
			"backend",
			"Runtime",
			"upload_vertex_buffers",
			"Output",
			"SharedFrame",
			"Send",
			"upload_vertex_buffers",
			"tmp",
			"empty",
			"queues",
			"RenderItem",
			"PassQueues",
			"queues",
			"PassQueues",
			"render_queue",
			"RenderItem",
			"RenderQueue",
			"PassQueues",
			"win_def",
			"find",
			"WgpuRes",
			"WindowRendererResources",
			"WindowIdEntityMap",
			"query_vbuf",
			"renderer.",
			"OnCreate",
			"BufferCommand",
			"UploadBuffer",
			"CameraBuffer",
			"CandyEnqueueMocca",
			"candy_enqueue_mocca",
			"wire_material",
			"CandyRendererMocca",
			"scene_tree",
			"candy",
			"RuntimeApp",
			"backend",
			"TransformBufferIndex",
			"renderer_update",
			"pub",
			"backend.borrow_mut()",
			"Rc<RefCell<",
			"self.world\n            .borrow_mut()",
			"world",
			"64",
			"candy",
			"GosSimDebugMocca",
			"goscl",
			"module_phantom",
			"flecs_module_phantom",
			"self",
			"output",
			"intake",
			"/* ",
			"target",
			"red",
			"entity_named",
			"create_blood_vessel",
			"entity_from_id",
			"HeartPrefabParts",
			"pub",
			"EntityView",
			"<'a>",
			"slot_of",
			"Entity",
			",",
			"red",
			"Red",
			"rust_decimal::dec",
			"dec",
			"Decimal",
			"ModifierKind",
			"StatMods<T>",
			"<T>",
			"T",
			"$name",
			"DummModule",
			"HeartRateBpm",
			"add",
			"Clone",
			"Base",
			"HeartRateBpm",
			"f32",
			"gems::Decimal",
			"$name",
			"HeartRateBpm",
			"Weight",
			"world",
			"*cre",
			"connect_entities",
			"connect_by_id",
			"entity_from_id",
			"a"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
		],
		"reverse": false,
		"scrollbar_highlights": true,
		"show_context": true,
		"use_buffer2": true,
		"use_gitignore": true,
		"whole_word": true,
		"wrap": true
	},
	"folders":
	[
		{
			"path": "I:\\Ikabur\\eph"
		},
		{
			"path": "I:\\Ikabur\\candy"
		},
		{
			"path": "I:\\Ikabur\\atom"
		},
		{
			"path": "I:\\Ikabur\\magi"
		}
	],
	"groups":
	[
		{
			"sheets":
			[
				{
					"buffer": 0,
					"file": "/I/Ikabur/candy/crates/candy/src/renderer/bind_group.rs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3428,
						"regions":
						{
						},
						"selection":
						[
							[
								3428,
								3428
							]
						],
						"settings":
						{
							"syntax": "Packages/Rust Enhanced/RustEnhanced.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1689.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "/I/Ikabur/atom/crates/excess/src/world.rs",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7322,
						"regions":
						{
						},
						"selection":
						[
							[
								5533,
								5533
							]
						],
						"settings":
						{
							"syntax": "Packages/Rust Enhanced/RustEnhanced.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 2900.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		},
		{
			"sheets":
			[
				{
					"buffer": 2,
					"file": "/I/Ikabur/atom/crates/excess/src/commands.rs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 8803,
						"regions":
						{
						},
						"selection":
						[
							[
								956,
								956
							]
						],
						"settings":
						{
							"syntax": "Packages/Rust Enhanced/RustEnhanced.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 70.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "/I/Ikabur/candy/crates/scene_tree/src/scene_tree_mocca.rs",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 7760,
						"regions":
						{
						},
						"selection":
						[
							[
								6900,
								6900
							]
						],
						"settings":
						{
							"syntax": "Packages/Rust Enhanced/RustEnhanced.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 4621.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "/I/Ikabur/candy/crates/candy/src/renderer/renderer.rs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 16008,
						"regions":
						{
						},
						"selection":
						[
							[
								1042,
								1042
							]
						],
						"settings":
						{
							"syntax": "Packages/Rust Enhanced/RustEnhanced.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 590.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"stack_multiselect": false,
					"type": "text"
				},
				{
					"buffer": 5,
					"file": "/I/Ikabur/candy/crates/candy/src/asset_library.rs",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 14159,
						"regions":
						{
						},
						"selection":
						[
							[
								3577,
								3580
							]
						],
						"settings":
						{
							"syntax": "Packages/Rust Enhanced/RustEnhanced.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1286.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		},
		{
			"sheets":
			[
				{
					"buffer": 6,
					"file": "/I/Ikabur/candy/crates/candy/examples/cactus.rs",
					"selected": true,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2793,
						"regions":
						{
						},
						"selection":
						[
							[
								1568,
								1568
							],
							[
								1575,
								1575
							],
							[
								1579,
								1579
							],
							[
								1586,
								1586
							],
							[
								1593,
								1593
							]
						],
						"settings":
						{
							"syntax": "Packages/Rust Enhanced/RustEnhanced.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 0.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"stack_multiselect": false,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 29.0
	},
	"input":
	{
		"height": 62.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			],
			[
				1,
				0,
				2,
				1
			],
			[
				2,
				0,
				3,
				1
			]
		],
		"cols":
		[
			0.0,
			0.33,
			0.65654278306,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.Terminus":
	{
		"height": 371.0
	},
	"output.Terminus 2":
	{
		"height": 126.0
	},
	"output.exec":
	{
		"height": 171.0
	},
	"output.find_results":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"output.unsaved_changes":
	{
		"height": 126.0,
		"history":
		[
		]
	},
	"pinned_build_system": "Packages/Python/Python.sublime-build",
	"project": "",
	"replace":
	{
		"height": 54.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
			[
				"ensembl",
				"crates\\ens\\src\\ensemble.rs"
			],
			[
				"trime",
				"crates\\geo\\src\\tri_mesh.rs"
			],
			[
				"trimesh",
				"crates\\geo\\src\\tri_mesh.rs"
			],
			[
				"pers",
				"crates\\ens\\src\\persistence.rs"
			],
			[
				"rop",
				"crates\\fibs\\examples\\rope.rs"
			],
			[
				"driver",
				"crates\\nopt\\src\\driver.rs"
			],
			[
				"chain",
				"crates\\magi\\src\\chain.rs"
			],
			[
				"fabricoptjob",
				"crates\\fibs\\src\\fabric_opt_job.rs"
			],
			[
				"fabric opt job",
				"crates\\forge\\src\\model\\fabric_opt_job.rs"
			],
			[
				"rope",
				"crates\\fibs\\examples\\rope.rs"
			],
			[
				"rope.rs",
				"crates\\fibs\\examples\\rope.rs"
			],
			[
				"dynv",
				"crates\\magi_vec\\src\\dyn_vec.rs"
			],
			[
				"vec_n.rs",
				"crates\\geo\\src\\vec_n.rs"
			],
			[
				"plane.rs",
				"crates\\geo\\src\\plane.rs"
			],
			[
				"gui.r",
				"crates\\forge\\src\\controller\\gui.rs"
			],
			[
				"ens",
				"crates\\ens\\src\\ensemble.rs"
			],
			[
				"user_",
				"crates\\forge\\src\\model\\user_settings.rs"
			],
			[
				"camera",
				"crates\\forge\\src\\components\\camera.rs"
			],
			[
				"tri_me",
				"crates\\geo\\src\\tri_mesh.rs"
			],
			[
				"trim",
				"crates\\geo\\src\\tri_mesh.rs"
			],
			[
				"volum",
				"crates\\geo\\src\\volume.rs"
			],
			[
				"rng.rs",
				"gems\\src\\rng.rs"
			],
			[
				"rng",
				"gems\\src\\rng.rs"
			],
			[
				"render.rs",
				"candy_wgpu\\src\\renderer.rs"
			],
			[
				"renderer",
				"candy_wgpu\\src\\renderer.rs"
			],
			[
				"framework",
				"candy_wgpu\\src\\framework.rs"
			],
			[
				"render",
				"ephr_core\\src\\game\\renderer.rs"
			],
			[
				"rng.r",
				"gems\\src\\rng.rs"
			],
			[
				"grid",
				"gems\\src\\grid.rs"
			],
			[
				"gaia.rs",
				"gaia\\src\\bin\\gaia.rs"
			],
			[
				"gaia lib.rs",
				"gaia\\src\\lib.rs"
			],
			[
				"just",
				"justfile"
			],
			[
				"atom_mol.rs",
				"atom_mol\\src\\lib.rs"
			],
			[
				"atom singl",
				"atom\\src\\singleton.rs"
			],
			[
				"enumera",
				"gems\\src\\enumerable.rs"
			],
			[
				"world_setting",
				"warmind\\src\\modes\\campaign\\world_settings.rs"
			],
			[
				"enum_vec",
				"gems\\src\\enum_vec.rs"
			],
			[
				"terrain_settin",
				"warmind\\assets\\map\\terrain_settings.ron"
			],
			[
				"combat repor",
				"warmind\\src\\combat\\report.rs"
			],
			[
				"fuzzy",
				"gems\\src\\fuzzy.rs"
			],
			[
				"dog.ron",
				"warmind\\assets\\dog.ron"
			],
			[
				"perlin",
				"gesso\\src\\simplex_perlin_noise.rs"
			],
			[
				"tags.rs",
				"warmind\\src\\codex\\tags.rs"
			],
			[
				"tags.ron",
				"warmind\\assets\\sprites\\tags.ron"
			],
			[
				"campaign ren",
				"warmind\\src\\modes\\campaign\\campaign_renderer.rs"
			],
			[
				"dog",
				"gems\\src\\dog.rs"
			],
			[
				"tags.",
				"warmind\\src\\codex\\tags.rs"
			],
			[
				"path_trade",
				"warmind\\src\\humania\\ops\\path_trade_value_op.rs"
			],
			[
				"camino astar.r",
				"camino\\src\\astar.rs"
			],
			[
				"camino mod.rs",
				"warmind\\src\\modes\\campaign\\mod.rs"
			],
			[
				"default_pip",
				"candy_wgpu_pipelines\\src\\default_pipeline\\mod.rs"
			],
			[
				"gizmo",
				"warmind\\src\\modes\\gizmo.rs"
			],
			[
				"terrain hei rend",
				"warmind\\src\\modes\\campaign\\terrain_heighfield_renderling.rs"
			],
			[
				"blup",
				"warmind\\src\\modes\\blueprint_mol.rs"
			],
			[
				"texturesou",
				"candy_wgpu_pipelines\\src\\default_pipeline\\texture_resources.rs"
			],
			[
				"texture_resour",
				"candy_wgpu_pipelines\\src\\common\\texture_resource.rs"
			],
			[
				"bluep",
				"warmind\\src\\modes\\blueprint_mol.rs"
			],
			[
				"gems rng",
				"gems\\src\\rng.rs"
			],
			[
				"blueprint",
				"warmind\\src\\modes\\blueprint_mol.rs"
			],
			[
				"instan",
				"candy_wgpu_pipelines\\src\\common\\instance_buffer.rs"
			],
			[
				"legacy_",
				"candy_mol\\src\\legacy_onion_soup.rs"
			],
			[
				"pixie2.rs",
				"pixie2\\src\\lib.rs"
			],
			[
				"scene_tree transform.rs",
				"scene_tree\\src\\transform.rs"
			],
			[
				"blueprin",
				"warmind\\src\\modes\\blueprint_mol.rs"
			],
			[
				"decals_pip",
				"candy_wgpu_pipelines\\src\\decal_pipeline\\decals_pipeline.rs"
			],
			[
				"scene_tree mol.rs",
				"scene_tree\\src\\mol.rs"
			],
			[
				"blue",
				"warmind\\src\\modes\\blueprint_mol.rs"
			],
			[
				"gems math.rs",
				"gems\\src\\math.rs"
			],
			[
				"candy_mol.rs",
				"candy_mol\\src\\mol.rs"
			],
			[
				"legaci",
				"candy_mol\\src\\legacy_onion_soup.rs"
			],
			[
				"command",
				"atom\\src\\commands.rs"
			],
			[
				"legacy ",
				"candy_mol\\src\\legacy_onion_soup.rs"
			],
			[
				"terrain_hei",
				"warmind\\src\\modes\\campaign\\terrain_heighfield.rs"
			],
			[
				"screen_",
				"warmind\\src\\modes\\screen_saver.rs"
			],
			[
				"modes labro",
				"warmind\\src\\modes\\laboratory.rs"
			],
			[
				"labor",
				"warmind\\src\\gui\\laboratory.rs"
			],
			[
				"spawn",
				"warmind\\src\\humania\\ops\\spawn_player_op.rs"
			],
			[
				"spawn_garr",
				"warmind\\src\\humania\\ops\\spawn_garrison_op.rs"
			],
			[
				"tile_det",
				"warmind\\src\\gui\\tile_details.rs"
			],
			[
				"decals.wg",
				"candy_wgpu_pipelines\\assets\\decals.wgsl"
			],
			[
				"uniform",
				"candy_wgpu_pipelines\\assets\\uniforms.wgsl"
			],
			[
				"starkind.js",
				"warmind\\assets\\sprites\\starkind.json"
			],
			[
				"atlas.",
				"warmind\\assets\\sprites\\atlas.json"
			],
			[
				"gizm",
				"warmind\\src\\modes\\gizmo.rs"
			],
			[
				"sprite_col",
				"pixie2\\src\\sprite_collection.rs"
			],
			[
				"so3",
				"gems\\src\\so3.rs"
			],
			[
				"transform",
				"scene_tree\\src\\transform.rs"
			],
			[
				"candy.rs",
				"warmind\\src\\modes\\candy.rs"
			],
			[
				"mesh",
				"candy_wgpu_pipelines\\src\\default_pipeline\\mesh_resources.rs"
			],
			[
				"onion sou",
				"pixie2\\src\\onion_soup.rs"
			],
			[
				"onion_soup",
				"pixie2\\src\\onion_soup.rs"
			],
			[
				"astar",
				"camino\\src\\astar.rs"
			],
			[
				"astar.",
				"camino\\src\\astar.rs"
			],
			[
				"gaia src op.rs",
				"gaia\\src\\op.rs"
			],
			[
				"atlas",
				"warmind\\assets\\sprites\\atlas.json"
			],
			[
				"biome",
				"gaia\\src\\biome.rs"
			],
			[
				"so2",
				"gems\\src\\so2.rs"
			],
			[
				"bin/",
				"gaia\\src\\bin\\gaia.rs"
			],
			[
				"sprite pip",
				"candy_wgpu_pipelines\\src\\sprite_pipeline.rs"
			],
			[
				"gizmo.",
				"warmind\\src\\modes\\gizmo.rs"
			],
			[
				"camera_mod",
				"warmind\\src\\modes\\camera\\camara_mode.rs"
			],
			[
				"gaia terrain",
				"gaia\\src\\terrain.rs"
			],
			[
				"color",
				"gems\\src\\color.rs"
			],
			[
				"rect",
				"gems\\src\\rect.rs"
			],
			[
				"color.rs",
				"gems\\src\\color.rs"
			],
			[
				"human poll",
				"warmind\\src\\humania\\layers\\pollution.rs"
			],
			[
				"biome.r",
				"gaia\\src\\biome.rs"
			],
			[
				"campaign rend",
				"warmind\\src\\modes\\campaign\\campaign_renderer.rs"
			],
			[
				"grid.",
				"gems\\src\\grid.rs"
			],
			[
				"system",
				"atom\\src\\system.rs"
			],
			[
				"muli",
				"gems\\src\\multi_grid.rs"
			],
			[
				"dog.rs",
				"gems\\src\\dog.rs"
			],
			[
				"atom_mol lib.rs",
				"atom_mol\\src\\lib.rs"
			],
			[
				"scene_tree utils",
				"scene_tree\\src\\utils.rs"
			],
			[
				"fabric",
				"atom\\src\\fabric.rs"
			],
			[
				"deploy squad",
				"warmind\\src\\modes\\battle\\squad_deployment.rs"
			],
			[
				"battle arena.rs",
				"warmind\\src\\modes\\battle\\arena.rs"
			],
			[
				"scene_tree sys",
				"scene_tree\\src\\layers.rs"
			],
			[
				"copendiu",
				"warmind\\src\\codex\\copendium.rs"
			],
			[
				"copend",
				"warmind\\src\\codex\\copendium.rs"
			],
			[
				"scenetree mol.r",
				"scene_tree\\src\\mol.rs"
			],
			[
				"transform_sys",
				"ephr_core\\src\\systems\\transform_system.rs"
			],
			[
				"system.rs",
				"atom\\src\\system.rs"
			],
			[
				"mol ",
				"camino_mol\\src\\mol.rs"
			],
			[
				"cocktail",
				"cocktail\\src\\cocktail.rs"
			],
			[
				"squad del wid",
				"warmind\\src\\gui\\squad_details.rs"
			],
			[
				"copendium",
				"warmind\\src\\codex\\copendium.rs"
			],
			[
				"singl",
				"atom\\src\\singleton.rs"
			]
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 323.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 592.0
	},
	"selected_group": 1,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 307.0,
	"status_bar_visible": true,
	"template_settings":
	{
		"max_columns": 1
	}
}
